/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{0:function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return h});var r=n(4).default.prototype.$isServer;function o(){}function l(t){return null!=t}function c(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function h(object,path){var t=path.split("."),e=object;return t.forEach(function(t){e=l(e[t])?e[t]:""}),e}},1:function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return f});var r=n(2),o=n(4),l=["ref","style","class","attrs","nativeOn","directives","staticClass","staticStyle"],c={nativeOn:"on"};function h(t,e){var n=l.reduce(function(e,n){return t.data[n]&&(e[c[n]||n]=t.data[n]),e},{});return e&&(n.on=n.on||{},Object(r.a)(n.on,t.data.on)),n}function d(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var l=t.listeners[e];l&&(Array.isArray(l)?l.forEach(function(t){t.apply(void 0,r)}):l.apply(void 0,r))}function f(t,data){var e=new o.default({el:document.createElement("div"),props:t.props,render:function(e){return e(t,Object(r.a)({props:this.$props},data))}});return document.body.appendChild(e.$el),e}},11:function(t,e,n){"use strict";var r=n(3),o=n.n(r),l=n(38),c=n(37),h=n(8),d=n(1),f=Object(l.a)("loading"),m=f[0],A=f[1];function v(t,e){if("spinner"===e.type){for(var n=[],i=0;i<12;i++)n.push(t("i"));return n}return t("svg",{class:A("circular"),attrs:{viewBox:"25 25 50 50"}},[t("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])}function y(t,e,n){if(n.default){var style=e.textSize&&{fontSize:Object(c.a)(e.textSize)};return t("span",{class:A("text"),style:style},[n.default()])}}function x(t,e,n,r){var l=e.color,h=e.size,f=e.type,style={color:l};if(h){var m=Object(c.a)(h);style.width=m,style.height=m}return t("div",o()([{class:A([f,{vertical:e.vertical}])},Object(d.b)(r,!0)]),[t("span",{class:A("spinner",f),style:style},[v(t,e)]),y(t,e,n)])}x.props={size:[String,Number],textSize:[String,Number],vertical:Boolean,type:{type:String,default:"circular"},color:{type:String,default:h.b}},e.a=m(x)},12:function(t,e,n){"use strict";function r(element,t){void 0===t&&(t=window);for(var e=element;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType&&e!==t;){var n=window.getComputedStyle(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return t}function o(element){return"scrollTop"in element?element.scrollTop:element.pageYOffset}function l(element,t){"scrollTop"in element?element.scrollTop=t:element.scrollTo(element.scrollX,t)}function c(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function h(element){return(element===window?0:element.getBoundingClientRect().top)+o(window)}n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h})},13:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(4),o=10;var l=r.default.extend({data:function(){return{direction:""}},methods:{touchStart:function(t){this.resetTouchStatus(),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY},touchMove:function(t){var e,n,r=t.touches[0];this.deltaX=r.clientX-this.startX,this.deltaY=r.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||(e=this.offsetX,n=this.offsetY,e>n&&e>o?"horizontal":n>e&&n>o?"vertical":"")},resetTouchStatus:function(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0}}})},131:function(t,e,n){"use strict";(function(t){var r=n(213),o=n(214),l=n(215);function c(){return d.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(t,e){if(c()<e)throw new RangeError("Invalid typed array length");return d.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=d.prototype:(null===t&&(t=new d(e)),t.length=e),t}function d(t,e,n){if(!(d.TYPED_ARRAY_SUPPORT||this instanceof d))return new d(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return A(this,t)}return f(this,t,e,n)}function f(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);d.TYPED_ARRAY_SUPPORT?(t=e).__proto__=d.prototype:t=v(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!d.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|x(e,n),o=(t=h(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(d.isBuffer(e)){var n=0|y(e.length);return 0===(t=h(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?h(t,0):v(t,e);if("Buffer"===e.type&&l(e.data))return v(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function A(t,e){if(m(e),t=h(t,e<0?0:0|y(e)),!d.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function v(t,e){var n=e.length<0?0:0|y(e.length);t=h(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function y(t){if(t>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|t}function x(t,e){if(d.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return Y(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return F(this,e,n);case"utf8":case"utf-8":return L(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function E(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=d.from(e,r)),d.isBuffer(e))return 0===e.length?-1:S(t,e,n,r,o);if("number"==typeof e)return e&=255,d.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):S(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function S(t,e,n,r,o){var i,l=1,c=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;l=2,c/=2,h/=2,n/=2}function d(t,i){return 1===l?t[i]:t.readUInt16BE(i*l)}if(o){var f=-1;for(i=n;i<c;i++)if(d(t,i)===d(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===h)return f*l}else-1!==f&&(i-=i-f),f=-1}else for(n+h>c&&(n=c-h),i=n;i>=0;i--){for(var m=!0,A=0;A<h;A++)if(d(t,i+A)!==d(e,A)){m=!1;break}if(m)return i}return-1}function C(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var l=e.length;if(l%2!=0)throw new TypeError("Invalid hex string");r>l/2&&(r=l/2);for(var i=0;i<r;++i){var c=parseInt(e.substr(2*i,2),16);if(isNaN(c))return i;t[n+i]=c}return i}function I(t,e,n,r){return K(Y(e,t.length-n),t,n,r)}function M(t,e,n,r){return K(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,n,r)}function B(t,e,n,r){return M(t,e,n,r)}function T(t,e,n,r){return K(X(e),t,n,r)}function k(t,e,n,r){return K(function(t,e){for(var n,r,o,l=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,o=n%256,l.push(o),l.push(r);return l}(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function L(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,l,c,h,d=t[i],f=null,m=d>239?4:d>223?3:d>191?2:1;if(i+m<=n)switch(m){case 1:d<128&&(f=d);break;case 2:128==(192&(o=t[i+1]))&&(h=(31&d)<<6|63&o)>127&&(f=h);break;case 3:o=t[i+1],l=t[i+2],128==(192&o)&&128==(192&l)&&(h=(15&d)<<12|(63&o)<<6|63&l)>2047&&(h<55296||h>57343)&&(f=h);break;case 4:o=t[i+1],l=t[i+2],c=t[i+3],128==(192&o)&&128==(192&l)&&128==(192&c)&&(h=(15&d)<<18|(63&o)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(f=h)}null===f?(f=65533,m=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=m}return function(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=D));return n}(r)}e.Buffer=d,e.SlowBuffer=function(t){+t!=t&&(t=0);return d.alloc(+t)},e.INSPECT_MAX_BYTES=50,d.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=c(),d.poolSize=8192,d._augment=function(t){return t.__proto__=d.prototype,t},d.from=function(t,e,n){return f(null,t,e,n)},d.TYPED_ARRAY_SUPPORT&&(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0})),d.alloc=function(t,e,n){return function(t,e,n,r){return m(e),e<=0?h(t,e):void 0!==n?"string"==typeof r?h(t,e).fill(n,r):h(t,e).fill(n):h(t,e)}(null,t,e,n)},d.allocUnsafe=function(t){return A(null,t)},d.allocUnsafeSlow=function(t){return A(null,t)},d.isBuffer=function(b){return!(null==b||!b._isBuffer)},d.compare=function(a,b){if(!d.isBuffer(a)||!d.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,n=Math.min(t,e);i<n;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!l(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=d.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},d.byteLength=x,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)w(this,i,i+1);return this},d.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)w(this,i,i+3),w(this,i+1,i+2);return this},d.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)w(this,i,i+7),w(this,i+1,i+6),w(this,i+2,i+5),w(this,i+3,i+4);return this},d.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?L(this,0,t):_.apply(this,arguments)},d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===d.compare(this,b)},d.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},d.prototype.compare=function(t,e,n,r,o){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var l=(o>>>=0)-(r>>>=0),c=(n>>>=0)-(e>>>=0),h=Math.min(l,c),f=this.slice(r,o),m=t.slice(e,n),i=0;i<h;++i)if(f[i]!==m[i]){l=f[i],c=m[i];break}return l<c?-1:c<l?1:0},d.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},d.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},d.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},d.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var l=!1;;)switch(r){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return I(this,t,e,n);case"ascii":return M(this,t,e,n);case"latin1":case"binary":return B(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function F(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=$(t[i]);return o}function N(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function U(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Q(t,e,n,r,o,l){if(!d.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<l)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function z(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function G(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function H(t,e,n,r,o,l){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(t,e,n,r,l){return l||H(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,l){return l||H(t,0,n,8),o.write(t,e,n,r,52,8),n+8}d.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),d.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=d.prototype;else{var o=e-t;n=new d(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},d.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},d.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},d.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},d.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},d.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},d.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),o.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),o.read(this,t,!1,52,8)},d.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Q(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},d.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||Q(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},d.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,1,255,0),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},d.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},d.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},d.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):G(this,t,e,!0),e+4},d.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},d.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);Q(this,t,e,n,o-1,-o)}var i=0,l=1,sub=0;for(this[e]=255&t;++i<n&&(l*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/l>>0)-sub&255;return e+n},d.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);Q(this,t,e,n,o-1,-o)}var i=n-1,l=1,sub=0;for(this[e+i]=255&t;--i>=0&&(l*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/l>>0)-sub&255;return e+n},d.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,1,127,-128),d.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},d.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},d.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):G(this,t,e,!0),e+4},d.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),d.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},d.prototype.writeFloatLE=function(t,e,n){return V(this,t,e,!0,n)},d.prototype.writeFloatBE=function(t,e,n){return V(this,t,e,!1,n)},d.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},d.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},d.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!d.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},d.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=d.isBuffer(t)?t:Y(new d(t,r).toString()),l=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%l]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var r=t.length,o=null,l=[],i=0;i<r;++i){if((n=t.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&l.push(239,191,189);continue}if(i+1===r){(e-=3)>-1&&l.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&l.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;l.push(n)}else if(n<2048){if((e-=2)<0)break;l.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;l.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return l}function X(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(32))},132:function(t,e,n){"use strict";var r=n(2),o=n(3),l=n.n(o),c=n(38),h=n(1),d=n(20),f=n(5),m=n(0),A=Object(c.a)("popup"),v=A[0],y=A[1],x=v({mixins:[d.a],props:{transition:String,duration:{type:Number,default:null},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(n){return t.$emit(e,n)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(t){var e;if(this.shouldRender){var n=this.position,r=this.duration,o=this.transition||("center"===n?"van-fade":"van-popup-slide-"+n),style={};return Object(m.b)(r)&&(style.transitionDuration=r+"s"),t("transition",{attrs:{name:o},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],style:style,class:y((e={},e[n]=n,e)),on:{click:this.onClick}},[this.slots()])])}}}),_=n(11),w=Object(c.a)("action-sheet"),E=w[0],S=w[1];function C(t,e,n,r){var title=e.title,o=e.cancelText;function c(){Object(h.a)(r,"input",!1),Object(h.a)(r,"cancel")}return t(x,l()([{class:S({"safe-area-inset-bottom":e.safeAreaInsetBottom}),attrs:{position:"bottom",value:e.value,overlay:e.overlay,duration:e.duration,lazyRender:e.lazyRender,lockScroll:e.lockScroll,getContainer:e.getContainer,closeOnClickOverlay:e.closeOnClickOverlay}},Object(h.b)(r,!0)]),[function(){if(title)return t("div",{class:[S("header"),"van-hairline--bottom"]},[title,t(f.a,{attrs:{name:"close"},class:S("close"),on:{click:c}})])}(),e.actions.map(function(n,o){var l=n.disabled||n.loading;return t("div",{class:[S("item",{disabled:l}),n.className,"van-hairline--top"],on:{click:function(t){t.stopPropagation(),n.disabled||n.loading||(n.callback&&n.callback(n),Object(h.a)(r,"select",n,o),e.closeOnClickAction&&Object(h.a)(r,"input",!1))}}},[n.loading?t(_.a,{attrs:{size:"20px"}}):[t("span",{class:S("name")},[n.name]),n.subname&&t("span",{class:S("subname")},[n.subname])]])}),function(){if(n.default)return t("div",{class:S("content")},[n.default()])}(),function(){if(o)return t("div",{class:S("cancel"),on:{click:c}},[o])}()])}C.props=Object(r.a)({},d.a.props,{title:String,actions:Array,cancelText:String,getContainer:[String,Function],closeOnClickAction:Boolean,safeAreaInsetBottom:Boolean,duration:{type:Number,default:null},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}});var I=E(C);function M(t){return t=t.replace(/[^-|\d]/g,""),/^((\+86)|(86))?(1)\d{10}$/.test(t)||/^0[0-9-]{10,13}$/.test(t)}var B=n(7),T=n(75);function k(t){return Array.isArray(t)?t.map(function(t){return k(t)}):"object"==typeof t?Object(T.a)({},t):t}var R={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}},L=n(8);function D(t,e,n){return Math.min(Math.max(t,e),n)}var P=n(13),O=Object(c.a)("picker-column"),F=O[0],N=O[1];function U(option){return Object(m.c)(option)&&option.disabled}var Q=F({mixins:[P.a],props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,initialOptions:Array,visibleItemCount:Number},data:function(){return{offset:0,duration:0,options:k(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){if(this.touchStart(t),this.moving){var e=function(element){var style=window.getComputedStyle(element),t=style.transform||style.webkitTransform,e=t.slice(7,t.length-1).split(", ")[5];return Number(e)}(this.$refs.wrapper);this.startOffset=Math.min(0,e)}else this.startOffset=this.offset;this.duration=0,this.moving=!1,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset},onTouchMove:function(t){Object(B.c)(t),this.moving=!0,this.touchMove(t),this.offset=D(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>300&&(this.touchStartTime=e,this.momentumOffset=this.offset)},onTouchEnd:function(){var t=this.offset-this.momentumOffset,e=Date.now()-this.touchStartTime;if(e<300&&Math.abs(t)>15)this.momentum(t,e);else if(this.offset!==this.startOffset){this.duration=200;var n=this.getIndexByOffset(this.offset);this.setIndex(n,!0)}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.duration=200,this.setIndex(t,!0)},adjustIndex:function(t){for(var i=t=D(t,0,this.count);i<this.count;i++)if(!U(this.options[i]))return i;for(var e=t-1;e>=0;e--)if(!U(this.options[e]))return e},getOptionText:function(option){return Object(m.c)(option)&&this.valueKey in option?option[this.valueKey]:option},setIndex:function(t,e){var n=this;t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight;var r=function(){t!==n.currentIndex&&(n.currentIndex=t,e&&n.$emit("change",t))};this.moving?this.transitionEndTrigger=r:r()},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return D(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var n=Math.abs(t/e);t=this.offset+n/.002*(t<0?-1:1);var r=this.getIndexByOffset(t);this.duration=1e3,this.setIndex(r,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)}},render:function(t){var e=this,n=this.itemHeight,r=n*(this.visibleItemCount-1)/2,o={transform:"translate3d(0, "+(this.offset+r)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none",lineHeight:n+"px"},l={height:n+"px"};return t("div",{class:[N(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{ref:"wrapper",style:o,class:N("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.options.map(function(option,n){return t("li",{style:l,class:["van-ellipsis",N("item",{disabled:U(option)})],domProps:{innerHTML:e.getOptionText(option)},on:{click:function(){e.onClickItem(n)}}})})])])}}),z=Object(c.a)("picker"),G=z[0],H=z[1],V=z[2],j=G({props:Object(r.a)({},R,{columns:Array,defaultIndex:Number,toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this;(this.simple?[{values:this.columns}]:this.columns).forEach(function(e,n){t.setColumnValues(n,k(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},onConfirm:function(){this.children.map(function(t){return t.stopMomentum()}),this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,r=n*this.visibleItemCount,o=this.simple?[this.columns]:this.columns,l={height:n+"px"},c={height:r+"px"},h={backgroundSize:"100% "+(r-n)/2+"px"},d=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",H("toolbar")]},[this.slots()||[t("div",{attrs:{role:"button",tabindex:"0"},class:H("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||V("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",H("title")]},[this.title]),t("div",{attrs:{role:"button",tabindex:"0"},class:H("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||V("confirm")])]]);return t("div",{class:H()},["top"===this.toolbarPosition?d:t(),this.loading?t(_.a,{class:H("loading"),attrs:{color:L.a}}):t(),t("div",{class:H("columns"),style:c,on:{touchmove:B.c}},[o.map(function(n,r){return t(Q,{attrs:{valueKey:e.valueKey,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(r)}}})}),t("div",{class:H("mask"),style:h}),t("div",{class:["van-hairline--top-bottom",H("frame")],style:l})]),"bottom"===this.toolbarPosition?d:t()])}}),W=Object(c.a)("area"),$=W[0],Y=W[1],X=$({props:Object(r.a)({},R,{value:String,areaList:{type:Object,default:function(){return{}}},columnsNum:{type:[String,Number],default:3}}),data:function(){return{code:this.value,columns:[{values:[]},{values:[]},{values:[]}]}},computed:{province:function(){return this.areaList.province_list||{}},city:function(){return this.areaList.city_list||{}},county:function(){return this.areaList.county_list||{}},displayColumns:function(){return this.columns.slice(0,+this.columnsNum)}},watch:{value:function(){this.code=this.value,this.setValues()},areaList:{deep:!0,handler:function(){this.setValues()}},columnsNum:function(){var t=this;this.$nextTick(function(){t.setValues()})}},mounted:function(){this.setValues()},methods:{getList:function(t,code){var e=[];if("province"!==t&&!code)return e;var n=this[t];return e=Object.keys(n).map(function(t){return{code:t,name:n[t]}}),code&&("9"===code[0]&&"city"===t&&(code="9"),e=e.filter(function(t){return 0===t.code.indexOf(code)})),e},getIndex:function(t,code){var e="province"===t?2:"city"===t?4:6,n=this.getList(t,code.slice(0,e-2));"9"===code[0]&&"province"===t&&(e=1),code=code.slice(0,e);for(var i=0;i<n.length;i++)if(n[i].code.slice(0,e)===code)return i;return 0},onChange:function(t,e,n){this.code=e[n].code,this.setValues(),this.$emit("change",t,t.getValues(),n)},setValues:function(){var code=this.code||Object.keys(this.county)[0]||"",t=this.$refs.picker,e=this.getList("province"),n=this.getList("city",code.slice(0,2));t&&(t.setColumnValues(0,e),t.setColumnValues(1,n),n.length&&"00"===code.slice(2,4)&&(code=n[0].code),t.setColumnValues(2,this.getList("county",code.slice(0,4))),t.setIndexes([this.getIndex("province",code),this.getIndex("city",code),this.getIndex("county",code)]))},getValues:function(){return this.$refs.picker?this.$refs.picker.getValues().filter(function(t){return!!t}):[]},getArea:function(){var t=this.getValues(),area={code:"",country:"",province:"",city:"",county:""};if(!t.length)return area;var e=t.map(function(t){return t.name});return area.code=t[t.length-1].code,"9"===area.code[0]?(area.country=e[1]||"",area.province=e[2]||""):(area.province=e[0]||"",area.city=e[1]||"",area.county=e[2]||""),area},reset:function(code){this.code=code||"",this.setValues()}},render:function(t){var e=Object(r.a)({},this.$listeners,{change:this.onChange});return t(j,{ref:"picker",class:Y(),attrs:{showToolbar:!0,valueKey:"name",title:this.title,loading:this.loading,columns:this.displayColumns,itemHeight:this.itemHeight,visibleItemCount:this.visibleItemCount,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText},on:Object(r.a)({},e)})}}),K={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,clickable:Boolean,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[String,Number],value:[String,Number],label:[String,Number],arrowDirection:String,border:{type:Boolean,default:!0}};function J(t,e){var n=e.to,r=e.url,o=e.replace;n&&t?t[o?"replace":"push"](n):r&&(o?location.replace(r):location.href=r)}function Z(t){J(t.parent&&t.parent.$router,t.props)}var tt={url:String,replace:Boolean,to:[String,Object]},et=Object(c.a)("cell"),nt=et[0],it=et[1];function st(t,e,n,r){var o=e.icon,c=e.size,title=e.title,label=e.label,d=e.value,A=e.isLink,v=e.arrowDirection,y=n.title||Object(m.b)(title),x=n.default||Object(m.b)(d),_=(n.label||Object(m.b)(label))&&t("div",{class:[it("label"),e.labelClass]},[n.label?n.label():label]),w=y&&t("div",{class:[it("title"),e.titleClass],style:e.titleStyle},[n.title?n.title():t("span",[title]),_]),E=x&&t("div",{class:[it("value",{alone:!n.title&&!title}),e.valueClass]},[n.default?n.default():t("span",[d])]),S=n.icon?n.icon():o&&t(f.a,{class:it("left-icon"),attrs:{name:o}}),C=n["right-icon"],I=C?C():A&&t(f.a,{class:it("right-icon"),attrs:{name:v?"arrow-"+v:"arrow"}});var M={center:e.center,required:e.required,borderless:!e.border,clickable:A||e.clickable};return c&&(M[c]=c),t("div",l()([{class:it(M),on:{click:function(t){Object(h.a)(r,"click",t),Z(r)}}},Object(h.b)(r)]),[S,w,E,I,n.extra&&n.extra()])}st.props=Object(r.a)({},K,tt);var at=nt(st),ot=n(12),lt=n(37);var ct=Object(c.a)("field"),ht=ct[0],ut=ct[1],pt=ht({inheritAttrs:!1,props:Object(r.a)({},K,{error:Boolean,leftIcon:String,rightIcon:String,readonly:Boolean,clearable:Boolean,labelWidth:[String,Number],labelClass:null,labelAlign:String,inputAlign:String,autosize:[Boolean,Object],errorMessage:String,errorMessageAlign:String,type:{type:String,default:"text"}}),data:function(){return{focused:!1}},watch:{value:function(){this.$nextTick(this.adjustSize)}},mounted:function(){this.format(),this.$nextTick(this.adjustSize)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&Object(m.b)(this.value)&&!this.readonly},listeners:function(){var t=Object(r.a)({},this.$listeners,{input:this.onInput,keypress:this.onKeypress,focus:this.onFocus,blur:this.onBlur});return delete t.click,t},labelStyle:function(){var t=this.labelWidth;if(t)return{width:Object(lt.a)(t)}}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},format:function(t){if(void 0===t&&(t=this.$refs.input),t){var e=t.value,n=this.$attrs.maxlength;return"number"===this.type&&Object(m.b)(n)&&e.length>n&&(e=e.slice(0,n),t.value=e),e}},onInput:function(t){t.target.composing||this.$emit("input",this.format(t.target))},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.$emit("blur",t),!m.d&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())&&window.scrollTo(0,Object(ot.b)())},onClick:function(t){this.$emit("click",t)},onClickLeftIcon:function(){this.$emit("click-left-icon")},onClickRightIcon:function(){this.$emit("click-right-icon")},onClear:function(t){Object(B.c)(t),this.$emit("input",""),this.$emit("clear")},onKeypress:function(t){if("number"===this.type){var e=t.keyCode,n=-1===String(this.value).indexOf(".");e>=48&&e<=57||46===e&&n||45===e||Object(B.c)(t)}"search"===this.type&&13===t.keyCode&&this.blur(),this.$emit("keypress",t)},adjustSize:function(){var input=this.$refs.input;if("textarea"===this.type&&this.autosize&&input){input.style.height="auto";var t=input.scrollHeight;if(Object(m.c)(this.autosize)){var e=this.autosize,n=e.maxHeight,r=e.minHeight;n&&(t=Math.min(t,n)),r&&(t=Math.max(t,r))}t&&(input.style.height=t+"px")}},renderInput:function(){var t=this.$createElement,e=this.slots("input");if(e)return t("div",{class:ut("control",this.inputAlign)},[e]);var n={ref:"input",class:ut("control",this.inputAlign),domProps:{value:this.value},attrs:Object(r.a)({},this.$attrs,{readonly:this.readonly}),on:this.listeners,directives:[{name:"model",value:this.value}]};return"textarea"===this.type?t("textarea",l()([{},n])):t("input",l()([{attrs:{type:this.type}},n]))},renderLeftIcon:function(){var t=this.$createElement;if(this.slots("left-icon")||this.leftIcon)return t("div",{class:ut("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(f.a,{attrs:{name:this.leftIcon}})])},renderRightIcon:function(){var t=this.$createElement,e=this.slots;if(e("right-icon")||this.rightIcon)return t("div",{class:ut("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(f.a,{attrs:{name:this.rightIcon}})])}},render:function(t){var e,n=this.slots,r=this.labelAlign,o={icon:this.renderLeftIcon};return n("label")&&(o.title=function(){return n("label")}),t(at,{attrs:{icon:this.leftIcon,size:this.size,title:this.label,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,titleClass:[ut("label",r),this.labelClass],arrowDirection:this.arrowDirection},class:ut((e={error:this.error,disabled:this.$attrs.disabled},e["label-"+r]=r,e["min-height"]="textarea"===this.type&&!this.autosize,e)),scopedSlots:o,on:{click:this.onClick}},[t("div",{class:ut("body")},[this.renderInput(),this.showClear&&t(f.a,{attrs:{name:"clear"},class:ut("clear"),on:{touchstart:this.onClear}}),this.renderRightIcon(),n("button")&&t("div",{class:ut("button")},[n("button")])]),this.errorMessage&&t("div",{class:ut("error-message",this.errorMessageAlign)},[this.errorMessage])])}}),ft=n(21),mt=Object(c.a)("button"),gt=mt[0],At=mt[1];function vt(t,e,n,r){var o=e.tag,c=e.icon,d=e.type,m=e.disabled,A=e.loading,v=e.hairline,y=e.loadingText;var text,content,x=[At([d,e.size,{disabled:m,hairline:v,block:e.block,plain:e.plain,round:e.round,square:e.square}]),{"van-hairline--surround":v}];return t(o,l()([{class:x,attrs:{type:e.nativeType,disabled:m},on:{click:function(t){A||m||(Object(h.a)(r,"click",t),Z(r))},touchstart:function(t){Object(h.a)(r,"touchstart",t)}}},Object(h.b)(r)]),[(content=[],A?content.push(t(_.a,{class:At("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"default"===d?void 0:""}})):c&&content.push(t(f.a,{attrs:{name:c},class:At("icon")})),(text=A?y:n.default?n.default():e.text)&&content.push(t("span",{class:At("text")},[text])),content)])}vt.props=Object(r.a)({},tt,{text:String,icon:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}});var bt=gt(vt),yt=n(4);function xt(t){function e(){this.binded||(t.call(this,B.b,!0),this.binded=!0)}function n(){this.binded&&(t.call(this,B.a,!1),this.binded=!1)}return{mounted:e,activated:e,deactivated:n,beforeDestroy:n}}var _t,wt=yt.default.extend({mixins:[xt(function(t,e){this.onPopstate(e)})],props:{closeOnPopstate:Boolean},data:function(){return{bindStatus:!1}},watch:{closeOnPopstate:function(t){this.onPopstate(t)}},methods:{onPopstate:function(t){this.$isServer||this.bindStatus!==t&&(this.bindStatus=t,(t?B.b:B.a)(window,"popstate",this.close))}}}),Et=Object(c.a)("dialog"),St=Et[0],Ct=Et[1],It=Et[2],Mt=St({mixins:[d.a,wt],props:{title:String,message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,function(n){!1!==n&&e.onClose(t),e.loading[t]=!1})):this.onClose(t)},onClose:function(t){this.close(),this.callback&&this.callback(t)}},render:function(t){var e,n=this;if(this.shouldRender){var title=this.title,r=this.message,o=this.messageAlign,l=this.slots(),c=title&&t("div",{class:Ct("header",{isolated:!r&&!l})},[title]),h=(l||r)&&t("div",{class:Ct("content")},[l||t("div",{domProps:{innerHTML:r},class:Ct("message",(e={"has-title":title},e[o]=o,e))})]),d=this.showCancelButton&&this.showConfirmButton,f=t("div",{class:["van-hairline--top",Ct("footer",{buttons:d})]},[this.showCancelButton&&t(bt,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||It("cancel")},class:Ct("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){n.handleAction("cancel")}}}),this.showConfirmButton&&t(bt,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||It("confirm")},class:[Ct("confirm"),{"van-hairline--left":d}],style:{color:this.confirmButtonColor},on:{click:function(){n.handleAction("confirm")}}})]);return t("transition",{attrs:{name:"van-dialog-bounce"}},[t("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":title||r},class:[Ct(),this.className]},[c,h,f])])}}});function Bt(t){return m.d?Promise.resolve():new Promise(function(e,n){var element;_t&&(element=_t.$el,document.body.contains(element))||(_t&&_t.$destroy(),(_t=new(yt.default.extend(Mt))({el:document.createElement("div"),propsData:{lazyRender:!1}})).$on("input",function(t){_t.value=t})),Object(r.a)(_t,Bt.currentOptions,t,{resolve:e,reject:n})})}Bt.defaultOptions={value:!0,title:"",message:"",overlay:!0,className:"",lockScroll:!0,beforeClose:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!1,closeOnClickOverlay:!1,callback:function(t){_t["confirm"===t?"resolve":"reject"](t)}},Bt.alert=Bt,Bt.confirm=function(t){return Bt(Object(r.a)({showCancelButton:!0},t))},Bt.close=function(){_t&&(_t.value=!1)},Bt.setDefaultOptions=function(t){Object(r.a)(Bt.currentOptions,t)},Bt.resetDefaultOptions=function(){Bt.currentOptions=Object(r.a)({},Bt.defaultOptions)},Bt.resetDefaultOptions(),Bt.install=function(){yt.default.use(Mt)},Bt.Component=Mt,yt.default.prototype.$dialog=Bt;var dialog=Bt,Tt=Object(c.a)("address-edit-detail"),kt=Tt[0],Rt=Tt[1],Lt=Tt[2],Dt=!m.d&&/android/.test(navigator.userAgent.toLowerCase()),Pt=kt({props:{value:String,error:Boolean,focused:Boolean,detailRows:Number,searchResult:Array,detailMaxlength:Number,showSearchResult:Boolean},methods:{onSelect:function(t){this.$emit("select-search",t),this.$emit("input",((t.address||"")+" "+(t.name||"")).trim())},onFinish:function(){this.$refs.field.blur()},renderFinish:function(){var t=this.$createElement;if(this.value&&this.focused&&Dt)return t("div",{class:Rt("finish"),on:{click:this.onFinish}},[Lt("complete")])},renderSearchResult:function(){var t=this,e=this.$createElement,n=this.searchResult;if(this.focused&&n&&this.showSearchResult)return n.map(function(n){return e(at,{key:n.name+n.address,attrs:{title:n.name,label:n.address,icon:"location-o",clickable:!0},on:{click:function(){t.onSelect(n)}}})})}},render:function(t){return t(at,{class:Rt()},[t(pt,{attrs:{autosize:!0,rows:this.detailRows,clearable:!Dt,type:"textarea",value:this.value,error:this.error,label:Lt("label"),maxlength:this.detailMaxlength,placeholder:Lt("placeholder")},ref:"field",scopedSlots:{icon:this.renderFinish},on:Object(r.a)({},this.$listeners)}),this.renderSearchResult()])}}),Ot={value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1},size:{type:String,default:"30px"}},Ft=Object(c.a)("switch"),Nt=Ft[0],Ut=Ft[1];function Qt(t,e,n,r){var o=e.size,c=e.value,d=e.loading,f=e.disabled,m=e.activeColor,A=e.activeValue,v=e.inactiveColor,y=e.inactiveValue,x=c===A,w={fontSize:o,backgroundColor:x?m:v},E=x?m||L.a:v||L.c;return t("div",l()([{class:Ut({on:x,disabled:f}),attrs:{role:"switch","aria-checked":String(x)},style:w,on:{click:function(){if(!f&&!d){var t=x?y:A;Object(h.a)(r,"input",t),Object(h.a)(r,"change",t)}}}},Object(h.b)(r)]),[t("div",{class:Ut("node")},[d&&t(_.a,{class:Ut("loading"),attrs:{color:E}})])])}Qt.props=Ot;var zt=Nt(Qt),Gt=Object(c.a)("switch-cell"),Ht=Gt[0],Vt=Gt[1];function jt(t,e,n,o){return t(at,l()([{attrs:{center:!0,size:e.cellSize,title:e.title,border:e.border},class:Vt([e.cellSize])},Object(h.b)(o)]),[t(zt,{props:Object(r.a)({},e),on:Object(r.a)({},o.listeners)})])}jt.props=Object(r.a)({},Ot,{title:String,cellSize:String,border:{type:Boolean,default:!0},size:{type:String,default:"24px"}});var Wt=Ht(jt),$t=Object(c.a)("address-edit"),qt=$t[0],Yt=$t[1],Xt=$t[2],Kt={name:"",tel:"",country:"",province:"",city:"",county:"",areaCode:"",postalCode:"",addressDetail:"",isDefault:!1},Jt=qt({props:{areaList:Object,isSaving:Boolean,isDeleting:Boolean,validator:Function,showDelete:Boolean,showPostal:Boolean,searchResult:Array,showSetDefault:Boolean,showSearchResult:Boolean,saveButtonText:String,deleteButtonText:String,showArea:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!0},detailRows:{type:Number,default:1},detailMaxlength:{type:Number,default:200},addressInfo:{type:Object,default:function(){return Object(r.a)({},Kt)}},telValidator:{type:Function,default:M}},data:function(){return{data:{},showAreaPopup:!1,detailFocused:!1,errorInfo:{tel:!1,name:!1,postalCode:!1,addressDetail:!1}}},computed:{areaListLoaded:function(){return Object(m.c)(this.areaList)&&Object.keys(this.areaList).length},areaText:function(){var t=this.data,e=t.country,n=t.province,r=t.city,o=t.county;if(t.areaCode){var l=[e,n,r,o];return n&&n===r&&l.splice(1,1),l.filter(function(text){return text}).join("/")}return""}},watch:{addressInfo:{handler:function(t){this.data=Object(r.a)({},Kt,t),this.setAreaCode(t.areaCode)},deep:!0,immediate:!0},areaList:function(){this.setAreaCode(this.data.areaCode)}},methods:{onFocus:function(t){this.errorInfo[t]=!1,this.detailFocused="addressDetail"===t,this.$emit("focus",t)},onChangeDetail:function(t){this.data.addressDetail=t,this.$emit("change-detail",t)},onAreaConfirm:function(t){this.showAreaPopup=!1,this.assignAreaValues(),this.$emit("change-area",t)},assignAreaValues:function(){var area=this.$refs.area;if(area){var t=area.getArea();t.areaCode=t.code,delete t.code,Object(r.a)(this.data,t)}},onSave:function(){var t=this,e=["name","tel","areaCode","addressDetail"];this.showPostal&&e.push("postalCode"),e.every(function(e){var n=t.getErrorMessage(e);return n&&(t.errorInfo[e]=!0,Object(ft.a)(n)),!n})&&!this.isSaving&&this.$emit("save",this.data)},getErrorMessage:function(t){var e=String(this.data[t]||"").trim();if(this.validator){var n=this.validator(t,e);if(n)return n}switch(t){case"name":return e?"":Xt("nameEmpty");case"tel":return this.telValidator(e)?"":Xt("telInvalid");case"areaCode":return e?"":Xt("areaEmpty");case"addressDetail":return e?"":Xt("addressEmpty");case"postalCode":return e&&!/^\d{6}$/.test(e)?Xt("postalEmpty"):""}},onDelete:function(){var t=this;dialog.confirm({title:Xt("confirmDelete")}).then(function(){t.$emit("delete",t.data)}).catch(function(){t.$emit("cancel-delete",t.data)})},getArea:function(){return this.$refs.area?this.$refs.area.getValues():[]},setAreaCode:function(code){this.data.areaCode=code||"",code&&this.$nextTick(this.assignAreaValues)},setAddressDetail:function(t){this.data.addressDetail=t},onDetailBlur:function(){var t=this;setTimeout(function(){t.detailFocused=!1})}},render:function(t){var e=this,data=this.data,n=this.errorInfo,r=function(t){return function(){return e.onFocus(t)}},o=this.searchResult.length&&this.detailFocused;return t("div",{class:Yt()},[t(pt,{attrs:{clearable:!0,label:Xt("name"),placeholder:Xt("namePlaceholder"),error:n.name},on:{focus:r("name")},model:{value:data.name,callback:function(t){data.name=t}}}),t(pt,{attrs:{clearable:!0,type:"tel",label:Xt("tel"),placeholder:Xt("telPlaceholder"),error:n.tel},on:{focus:r("tel")},model:{value:data.tel,callback:function(t){data.tel=t}}}),t(pt,{directives:[{name:"show",value:this.showArea}],attrs:{readonly:!0,label:Xt("area"),placeholder:Xt("areaPlaceholder"),value:this.areaText},on:{click:function(){e.showAreaPopup=!0}}}),t(Pt,{directives:[{name:"show",value:this.showDetail}],attrs:{focused:this.detailFocused,value:data.addressDetail,error:n.addressDetail,detailRows:this.detailRows,detailMaxlength:this.detailMaxlength,searchResult:this.searchResult,showSearchResult:this.showSearchResult},on:{focus:r("addressDetail"),blur:this.onDetailBlur,input:this.onChangeDetail,"select-search":function(t){e.$emit("select-search",t)}}}),this.showPostal&&t(pt,{directives:[{name:"show",value:!o}],attrs:{type:"tel",maxlength:"6",label:Xt("postal"),placeholder:Xt("postal"),error:n.postalCode},on:{focus:r("postalCode")},model:{value:data.postalCode,callback:function(t){data.postalCode=t}}}),this.slots(),this.showSetDefault&&t(Wt,{directives:[{name:"show",value:!o}],attrs:{title:Xt("defaultAddress")},on:{change:function(t){e.$emit("change-default",t)}},model:{value:data.isDefault,callback:function(t){data.isDefault=t}}}),t("div",{directives:[{name:"show",value:!o}],class:Yt("buttons")},[t(bt,{attrs:{block:!0,loading:this.isSaving,type:"danger",text:this.saveButtonText||Xt("save")},on:{click:this.onSave}}),this.showDelete&&t(bt,{attrs:{block:!0,loading:this.isDeleting,text:this.deleteButtonText||Xt("delete")},on:{click:this.onDelete}})]),t(x,{attrs:{position:"bottom",lazyRender:!1,getContainer:"body"},model:{value:e.showAreaPopup,callback:function(t){e.showAreaPopup=t}}},[t(X,{ref:"area",attrs:{loading:!this.areaListLoaded,value:data.areaCode,areaList:this.areaList},on:{confirm:this.onAreaConfirm,cancel:function(){e.showAreaPopup=!1}}})])])}});function Zt(t,e){var n,r;void 0===e&&(e={});var o=e.indexKey||"index";return yt.default.extend({inject:(n={},n[t]={default:null},n),computed:(r={parent:function(){return this[t]}},r[o]=function(){return this.bindRelation(),this.parent.children.indexOf(this)},r),created:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter(function(e){return e!==t}))},methods:{bindRelation:function(){if(this.parent){var t=this.parent.children;if(-1===t.indexOf(this)){var e=this.parent.slots().indexOf(this.$vnode);-1===e?t.push(this):t.splice(e,0,this)}}}}})}function te(t){return{provide:function(){var e;return(e={})[t]=this,e},data:function(){return{children:[]}}}}var ee=Object(c.a)("radio-group"),ne=ee[0],ie=ee[1],re=ne({mixins:[te("vanRadio")],props:{value:null,disabled:Boolean},watch:{value:function(t){this.$emit("change",t)}},render:function(t){return t("div",{class:ie(),attrs:{role:"radiogroup"}},[this.slots()])}}),se=function(t){var e=t.parent,n=t.bem,r=t.role;return{mixins:[Zt(e)],props:{name:null,value:null,iconSize:[String,Number],disabled:Boolean,checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"}},computed:{isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},iconStyle:function(){var t=this.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===r&&!this.checked?-1:0}},render:function(t){var e=this,o=this.slots,l=this.checked,c=o("icon",{checked:l})||t(f.a,{attrs:{name:"success"},style:this.iconStyle}),h=o()&&t("span",{class:n("label",[this.labelPosition,{disabled:this.isDisabled}]),on:{click:this.onClickLabel}},[o()]),d=[t("div",{class:n("icon",[this.shape,{disabled:this.isDisabled,checked:l}]),style:{fontSize:Object(lt.a)(this.iconSize)},on:{click:this.onClickIcon}},[c])];return"left"===this.labelPosition?d.unshift(h):d.push(h),t("div",{attrs:{role:r,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n(),on:{click:function(t){e.$emit("click",t)}}},[d])}}},ae=Object(c.a)("radio"),oe=(0,ae[0])({mixins:[se({bem:ae[1],role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{onClickIcon:function(){this.isDisabled||(this.currentValue=this.name)},onClickLabel:function(){this.isDisabled||this.labelDisabled||(this.currentValue=this.name)}}}),le=Object(c.a)("address-item"),ce=le[0],he=le[1];function ue(t,e,n,r){var o=e.disabled,c=e.switchable;return t(at,l()([{class:he({disabled:o}),attrs:{valueClass:he("value"),clickable:c&&!o},scopedSlots:{default:function(){var data=e.data,n=[t("div",{class:he("name")},[data.name+"，"+data.tel]),t("div",{class:he("address")},[data.address])];return c&&!o?t(oe,{attrs:{name:data.id,iconSize:16,checkedColor:L.e}},[n]):n},"right-icon":function(){return t(f.a,{attrs:{name:"edit"},class:he("edit"),on:{click:function(t){t.stopPropagation(),Object(h.a)(r,"edit")}}})}},on:{click:function(){c&&Object(h.a)(r,"select")}}},Object(h.b)(r)]))}ue.props={data:Object,disabled:Boolean,switchable:Boolean};var de=ce(ue),pe=Object(c.a)("address-list"),fe=pe[0],me=pe[1],ge=pe[2];function Ae(t,e,n,r){var o=function(n,o){return n.map(function(n,l){return t(de,{attrs:{data:n,disabled:o,switchable:e.switchable},key:n.id,on:{select:function(){Object(h.a)(r,o?"select-disabled":"select",n,l)},edit:function(){Object(h.a)(r,o?"edit-disabled":"edit",n,l)}}})})},c=o(e.list),d=o(e.disabledList,!0);return t("div",l()([{class:me()},Object(h.b)(r)]),[n.top&&n.top(),t(re,{attrs:{value:e.value},on:{input:function(t){Object(h.a)(r,"input",t)}}},[c]),e.disabledText&&t("div",{class:me("disabled-text")},[e.disabledText]),d,n.default&&n.default(),t(bt,{attrs:{square:!0,size:"large",type:"danger",text:e.addButtonText||ge("add")},class:me("add"),on:{click:function(){Object(h.a)(r,"add")}}})])}Ae.props={list:Array,disabledList:Array,disabledText:String,addButtonText:String,value:[String,Number],switchable:{type:Boolean,default:!0}};var ve=fe(Ae),be=Object(c.a)("tag"),ye=be[0],xe=be[1],_e={danger:L.e,primary:L.a,success:L.d};function we(t,e,n,r){var o,c=e.type,mark=e.mark,d=e.plain,f=e.round,m=e.size,A=e.color||c&&_e[c]||L.c,style=((o={})[d?"color":"backgroundColor"]=A,o);e.textColor&&(style.color=e.textColor);var v={mark:mark,plain:d,round:f};return m&&(v[m]=m),t("span",l()([{style:style,class:[xe(v),{"van-hairline--surround":d}]},Object(h.b)(r,!0)]),[n.default&&n.default()])}we.props={size:String,type:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String};var Ee=ye(we),Se=n(29),Ce=Object(c.a)("card"),Ie=Ce[0],Me=Ce[1];function Be(t,e,n,r){var o=e.thumb,c=n.num||Object(m.b)(e.num),d=n.price||Object(m.b)(e.price),f=n["origin-price"]||Object(m.b)(e.originPrice),A=c||d||f,v=function(){Object(h.a)(r,"click-thumb")};function y(){if(n.tag||e.tag)return t("div",{class:Me("tag")},[n.tag?n.tag():t(Ee,{attrs:{mark:!0,type:"danger"}},[e.tag])])}return t("div",l()([{class:Me()},Object(h.b)(r,!0)]),[t("div",{class:Me("header")},[function(){if(n.thumb||o)return t("a",{attrs:{href:e.thumbLink},class:Me("thumb"),on:{click:v}},[n.thumb?n.thumb():t(Se.a,{attrs:{src:o,width:"100%",height:"100%",fit:"contain","lazy-load":e.lazyLoad}}),y()])}(),t("div",{class:Me("content",{centered:e.centered})},[n.title?n.title():e.title?t("div",{class:Me("title")},[e.title]):void 0,n.desc?n.desc():e.desc?t("div",{class:[Me("desc"),"van-ellipsis"]},[e.desc]):void 0,n.tags&&n.tags(),A&&t("div",{class:"van-card__bottom"},[function(){if(d)return t("div",{class:Me("price")},[n.price?n.price():e.currency+" "+e.price])}(),function(){if(f){var slot=n["origin-price"];return t("div",{class:Me("origin-price")},[slot?slot():e.currency+" "+e.originPrice])}}(),function(){if(c)return t("div",{class:Me("num")},[n.num?n.num():"x "+e.num])}(),n.bottom&&n.bottom()])])]),function(){if(n.footer)return t("div",{class:Me("footer")},[n.footer()])}()])}Be.props={tag:String,desc:String,thumb:String,title:String,centered:Boolean,lazyLoad:Boolean,thumbLink:String,num:[Number,String],price:[Number,String],originPrice:[Number,String],currency:{type:String,default:"¥"}};var Te=Ie(Be),ke=Object(c.a)("cell-group"),Re=ke[0],Le=ke[1];function De(t,e,n,r){var o=t("div",l()([{class:[Le(),{"van-hairline--top-bottom":e.border}]},Object(h.b)(r,!0)]),[n.default&&n.default()]);return e.title?t("div",[t("div",{class:Le("title")},[e.title]),o]):o}De.props={title:String,border:{type:Boolean,default:!0}};var Pe=Re(De),Oe=Object(c.a)("checkbox"),Fe=(0,Oe[0])({mixins:[se({bem:Oe[1],role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(){var t=this,e=!this.checked;clearTimeout(this.toggleTask),this.toggleTask=setTimeout(function(){t.checked=e})},onClickIcon:function(){this.isDisabled||this.toggle()},onClickLabel:function(){this.isDisabled||this.labelDisabled||this.toggle()},setParentValue:function(t){var e=this.parent,n=e.value.slice();if(t){if(e.max&&n.length>=e.max)return;-1===n.indexOf(this.name)&&(n.push(this.name),e.$emit("input",n))}else{var r=n.indexOf(this.name);-1!==r&&(n.splice(r,1),e.$emit("input",n))}}}}),Ne=Object(c.a)("checkbox-group"),Ue=Ne[0],Qe=Ne[1],ze=Ue({mixins:[te("vanCheckbox")],props:{max:Number,value:Array,disabled:Boolean},watch:{value:function(t){this.$emit("change",t)}},render:function(t){return t("div",{class:Qe()},[this.slots()])}}),Ge=n(31),He=Object(c.a)("circle"),Ve=He[0],je=He[1],We="M 530 530 m -500, 0 a 500, 500 0 1, 1 1000, 0 a 500, 500 0 1, 1 -1000, 0";function $e(t){return Math.min(Math.max(t,0),100)}var circle=Ve({props:{text:String,value:Number,speed:Number,size:{type:String,default:"100px"},fill:{type:String,default:"none"},rate:{type:Number,default:100},layerColor:{type:String,default:L.f},color:{type:String,default:L.a},strokeWidth:{type:Number,default:40},clockwise:{type:Boolean,default:!0}},computed:{style:function(){return{width:this.size,height:this.size}},layerStyle:function(){var t=3140*(100-this.value)/100;return t=this.clockwise?t:6280-t,{stroke:""+this.color,strokeDashoffset:t+"px",strokeWidth:this.strokeWidth+1+"px"}},hoverStyle:function(){return{fill:""+this.fill,stroke:""+this.layerColor,strokeWidth:this.strokeWidth+"px"}}},watch:{rate:{handler:function(){this.startTime=Date.now(),this.startRate=this.value,this.endRate=$e(this.rate),this.increase=this.endRate>this.startRate,this.duration=Math.abs(1e3*(this.startRate-this.endRate)/this.speed),this.speed?(Object(Ge.a)(this.rafId),this.rafId=Object(Ge.b)(this.animate)):this.$emit("input",this.endRate)},immediate:!0}},methods:{animate:function(){var t=Date.now(),e=Math.min((t-this.startTime)/this.duration,1)*(this.endRate-this.startRate)+this.startRate;this.$emit("input",$e(parseFloat(e.toFixed(1)))),(this.increase?e<this.endRate:e>this.endRate)&&(this.rafId=Object(Ge.b)(this.animate))}},render:function(t){return t("div",{class:je(),style:this.style},[t("svg",{attrs:{viewBox:"0 0 1060 1060"}},[t("path",{class:je("hover"),style:this.hoverStyle,attrs:{d:We}}),t("path",{class:je("layer"),style:this.layerStyle,attrs:{d:We}})]),this.slots()||this.text&&t("div",{class:je("text")},[this.text])])}}),qe=Object(c.a)("col"),Ye=qe[0],Xe=qe[1],col=Ye({props:{span:[Number,String],offset:[Number,String],tag:{type:String,default:"div"}},computed:{gutter:function(){return this.$parent&&Number(this.$parent.gutter)||0},style:function(){var t=this.gutter/2+"px";return this.gutter?{paddingLeft:t,paddingRight:t}:{}}},render:function(t){var e,span=this.span,n=this.offset;return t(this.tag,{class:Xe((e={},e[span]=span,e["offset-"+n]=n,e)),style:this.style},[this.slots()])}}),Ke=Object(c.a)("collapse"),Je=Ke[0],Ze=Ke[1],tn=Je({mixins:[te("vanCollapse")],props:{accordion:Boolean,value:[String,Number,Array],border:{type:Boolean,default:!0}},methods:{switch:function(t,e){this.accordion||(t=e?this.value.concat(t):this.value.filter(function(e){return e!==t})),this.$emit("change",t),this.$emit("input",t)}},render:function(t){return t("div",{class:[Ze(),{"van-hairline--top-bottom":this.border}]},[this.slots()])}}),en=Object(c.a)("collapse-item"),nn=en[0],rn=en[1],sn=["title","icon","right-icon"],an=nn({mixins:[Zt("vanCollapse")],props:Object(r.a)({},K,{name:[String,Number],disabled:Boolean,isLink:{type:Boolean,default:!0}}),data:function(){return{show:null,inited:null}},computed:{currentName:function(){return Object(m.b)(this.name)?this.name:this.index},expanded:function(){var t=this;if(!this.parent)return null;var e=this.parent.value;return this.parent.accordion?e===this.currentName:e.some(function(e){return e===t.currentName})}},created:function(){this.show=this.expanded,this.inited=this.expanded},watch:{expanded:function(t,e){var n=this;null!==e&&(t&&(this.show=!0,this.inited=!0),(t?this.$nextTick:Ge.b)(function(){var e=n.$refs,content=e.content,r=e.wrapper;if(content&&r){var o=content.offsetHeight;if(o){var l=o+"px";r.style.height=t?0:l,Object(Ge.b)(function(){r.style.height=t?l:0})}else n.onTransitionEnd()}}))}},methods:{onClick:function(){if(!this.disabled){var t=this.parent,e=t.accordion&&this.currentName===t.value?"":this.currentName;this.parent.switch(e,!this.expanded)}},onTransitionEnd:function(){this.expanded?this.$refs.wrapper.style.height="":this.show=!1}},render:function(t){var e=this,n=this.disabled,o=this.expanded,l=sn.reduce(function(t,n){return e.slots(n)&&(t[n]=function(){return e.slots(n)}),t},{});this.slots("value")&&(l.default=function(){return e.slots("value")});var c=t(at,{attrs:{role:"button",tabindex:n?-1:0,"aria-expanded":String(o)},class:rn("title",{disabled:n,expanded:o}),on:{click:this.onClick},scopedSlots:l,props:Object(r.a)({},this.$props)}),h=this.inited&&t("div",{directives:[{name:"show",value:this.show}],ref:"wrapper",class:rn("wrapper"),on:{transitionend:this.onTransitionEnd}},[t("div",{ref:"content",class:rn("content")},[this.slots()])]);return t("div",{class:[rn(),{"van-hairline--top":this.index}]},[c,h])}}),on=Object(c.a)("contact-card"),ln=on[0],cn=on[1],hn=on[2];function un(t,e,n,r){var o=e.type,c=e.editable;return t(at,l()([{attrs:{center:!0,border:!1,isLink:c,valueClass:cn("value"),icon:"edit"===o?"contact":"add-square"},class:cn([o]),on:{click:function(t){c&&Object(h.a)(r,"click",t)}}},Object(h.b)(r)]),["add"===o?e.addText||hn("addText"):[t("div",[hn("name")+"："+e.name]),t("div",[hn("tel")+"："+e.tel])]])}un.props={tel:String,name:String,addText:String,editable:{type:Boolean,default:!0},type:{type:String,default:"add"}};var dn=ln(un),pn=Object(c.a)("contact-edit"),fn=pn[0],mn=pn[1],gn=pn[2],An={tel:"",name:""},vn=fn({props:{isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,contactInfo:{type:Object,default:function(){return Object(r.a)({},An)}},telValidator:{type:Function,default:M}},data:function(){return{data:Object(r.a)({},An,this.contactInfo),errorInfo:{name:!1,tel:!1}}},watch:{contactInfo:function(t){this.data=Object(r.a)({},An,t)}},methods:{onFocus:function(t){this.errorInfo[t]=!1},getErrorMessageByKey:function(t){var e=this.data[t].trim();switch(t){case"name":return e?"":gn("nameEmpty");case"tel":return this.telValidator(e)?"":gn("telInvalid")}},onSave:function(){var t=this;["name","tel"].every(function(e){var n=t.getErrorMessageByKey(e);return n&&(t.errorInfo[e]=!0,Object(ft.a)(n)),!n})&&!this.isSaving&&this.$emit("save",this.data)},onDelete:function(){var t=this;dialog.confirm({message:gn("confirmDelete")}).then(function(){t.$emit("delete",t.data)})}},render:function(t){var e=this,data=this.data,n=this.errorInfo,r=function(t){return function(){return e.onFocus(t)}};return t("div",{class:mn()},[t(pt,{attrs:{clearable:!0,maxlength:"30",label:gn("name"),placeholder:gn("nameEmpty"),error:n.name},on:{focus:r("name")},model:{value:data.name,callback:function(t){data.name=t}}}),t(pt,{attrs:{clearable:!0,type:"tel",label:gn("tel"),placeholder:gn("telEmpty"),error:n.tel},on:{focus:r("tel")},model:{value:data.tel,callback:function(t){data.tel=t}}}),t("div",{class:mn("buttons")},[t(bt,{attrs:{block:!0,type:"danger",text:gn("save"),loading:this.isSaving},on:{click:this.onSave}}),this.isEdit&&t(bt,{attrs:{block:!0,text:gn("delete"),loading:this.isDeleting},on:{click:this.onDelete}})])])}}),bn=Object(c.a)("contact-list"),yn=bn[0],xn=bn[1],_n=bn[2];function wn(t,e,n,r){var o=e.list.map(function(e,n){var o=function(){Object(h.a)(r,"input",e.id),Object(h.a)(r,"select",e,n)};return t(at,{key:e.id,attrs:{isLink:!0,valueClass:xn("item-value")},class:xn("item"),scopedSlots:{default:function(){return t(oe,{attrs:{name:e.id,iconSize:16,checkedColor:L.e},on:{click:o}},[t("div",{class:xn("name")},[e.name+"，"+e.tel])])},"right-icon":function(){return t(f.a,{attrs:{name:"edit"},class:xn("edit"),on:{click:function(t){t.stopPropagation(),Object(h.a)(r,"edit",e,n)}}})}},on:{click:o}})});return t("div",l()([{class:xn()},Object(h.b)(r)]),[t(re,{attrs:{value:e.value},class:xn("group")},[o]),t(bt,{attrs:{square:!0,size:"large",type:"danger",text:e.addText||_n("addText")},class:xn("add"),on:{click:function(){Object(h.a)(r,"add")}}})])}wn.props={value:null,list:Array,addText:String};var En=yn(wn),Sn=n(15),Cn=Object(c.a)("coupon"),In=Cn[0],Mn=Cn[1],Bn=Cn[2];function Tn(t){var e=new Date(1e3*t);return e.getFullYear()+"."+Object(Sn.b)(e.getMonth()+1)+"."+Object(Sn.b)(e.getDate())}function kn(t){return(t/100).toFixed(t%100==0?0:t%10==0?1:2)}var Rn=In({props:{coupon:Object,chosen:Boolean,disabled:Boolean,currency:{type:String,default:"¥"}},computed:{validPeriod:function(){var t=this.coupon,e=t.startAt,n=t.endAt;return Bn("valid")+"："+Tn(e)+" - "+Tn(n)},faceAmount:function(){var t,e=this.coupon;return e.valueDesc?e.valueDesc+"<span>"+(e.unitDesc||"")+"</span>":e.denominations?"<span>"+this.currency+"</span> "+kn(this.coupon.denominations):e.discount?Bn("discount",((t=this.coupon.discount)/10).toFixed(t%10==0?0:1)):""},conditionMessage:function(){var t=kn(this.coupon.originCondition);return"0"===t?Bn("unlimited"):Bn("condition",t)}},render:function(t){var e=this.coupon,n=this.disabled,r=n&&e.reason||e.description;return t("div",{class:Mn({disabled:n})},[t("div",{class:Mn("content")},[t("div",{class:Mn("head")},[t("h2",{class:Mn("amount"),domProps:{innerHTML:this.faceAmount}}),t("p",[this.coupon.condition||this.conditionMessage])]),t("div",{class:Mn("body")},[t("h2",{class:Mn("name")},[e.name]),t("p",[this.validPeriod]),this.chosen&&t(Fe,{attrs:{value:!0,"checked-color":L.e},class:Mn("corner")})])]),r&&t("p",{class:Mn("description")},[r])])}}),Ln=Object(c.a)("coupon-cell"),Dn=Ln[0],Pn=Ln[1],On=Ln[2];function Fn(t,e,n,r){var o=e.coupons[e.chosenCoupon]?"van-coupon-cell--selected":"",c=function(t){var e=t.coupons,n=t.chosenCoupon,r=t.currency,o=e[n];return o?"-"+r+((o.denominations||o.value)/100).toFixed(2):0===e.length?On("tips"):On("count",e.length)}(e);return t(at,l()([{class:Pn(),attrs:{value:c,title:e.title||On("title"),border:e.border,isLink:e.editable,valueClass:o}},Object(h.b)(r,!0)]))}Fn.model={prop:"chosenCoupon"},Fn.props={title:String,coupons:Array,currency:{type:String,default:"¥"},border:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},chosenCoupon:{type:Number,default:-1}};var Nn=Dn(Fn),Un=Object(c.a)("tab"),Qn=Un[0],zn=Un[1],Gn=Qn({mixins:[Zt("vanTabs")],props:{title:String,disabled:Boolean},data:function(){return{inited:!1}},computed:{selected:function(){return this.index===this.parent.curActive}},watch:{"parent.curActive":function(){this.inited=this.inited||this.selected},title:function(){this.parent.setLine()}},mounted:function(){this.slots("title")&&this.parent.renderTitle(this.$refs.title,this.index)},render:function(t){var e=this.slots,n=this.selected,r=[this.inited||!this.parent.lazyRender?e():t()];return e("title")&&r.push(t("div",{ref:"title"},[e("title")])),this.parent.animated?t("div",{attrs:{role:"tabpanel","aria-hidden":!n},class:zn("pane-wrapper",{inactive:!n})},[t("div",{class:zn("pane")},[r])]):t("div",{directives:[{name:"show",value:n}],attrs:{role:"tabpanel"},class:zn("pane")},[r])}});var Hn=Object(c.a)("tab")[1],Vn={props:{type:String,color:String,title:String,active:Boolean,ellipsis:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,inactiveColor:String,swipeThreshold:Number},computed:{style:function(){var style={},t=this.color,e=this.active,n="card"===this.type;t&&n&&(style.borderColor=t,this.disabled||(e?style.backgroundColor=t:style.color=t));var r=e?this.activeColor:this.inactiveColor;return r&&(style.color=r),this.scrollable&&this.ellipsis&&(style.flexBasis=88/this.swipeThreshold+"%"),style}},methods:{onClick:function(){this.$emit("click")},renderTitle:function(t){var title=this.$refs.title;title.innerHTML="",title.appendChild(t)}},render:function(t){return t("div",{attrs:{role:"tab","aria-selected":this.active},class:Hn({active:this.active,disabled:this.disabled,complete:!this.ellipsis}),style:this.style,on:{click:this.onClick}},[t("span",{ref:"title",class:{"van-ellipsis":this.ellipsis}},[this.title])])}},jn=Object(c.a)("tabs"),Wn=jn[0],$n=jn[1],qn=Wn({mixins:[P.a],props:{count:Number,active:Number,duration:Number,animated:Boolean,swipeable:Boolean},computed:{style:function(){if(this.animated)return{transform:"translate3d("+-1*this.active*100+"%, 0, 0)",transitionDuration:this.duration+"s"}},listeners:function(){if(this.swipeable)return{touchstart:this.touchStart,touchmove:this.touchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}}},methods:{onTouchEnd:function(){var t=this.direction,e=this.deltaX,n=this.active;"horizontal"===t&&this.offsetX>=50&&(e>0&&0!==n?this.$emit("change",n-1):e<0&&n!==this.count-1&&this.$emit("change",n+1))},renderChildren:function(){var t=this.$createElement;return this.animated?t("div",{class:$n("track"),style:this.style},[this.slots()]):this.slots()}},render:function(t){return t("div",{class:$n("content",{animated:this.animated}),on:Object(r.a)({},this.listeners)},[this.renderChildren()])}}),Yn=Object(c.a)("tabs"),Xn=Yn[0],Kn=Yn[1],Jn=Xn({mixins:[te("vanTabs"),xt(function(t,e){this.bindScrollEvent(e),t(window,"resize",this.setLine,!0)})],model:{prop:"active"},props:{color:String,sticky:Boolean,animated:Boolean,offsetTop:Number,swipeable:Boolean,background:String,lineWidth:[Number,String],lineHeight:[Number,String],titleActiveColor:String,titleInactiveColor:String,border:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},lazyRender:{type:Boolean,default:!0},active:{type:[Number,String],default:0},type:{type:String,default:"line"},duration:{type:Number,default:.3},swipeThreshold:{type:Number,default:4}},data:function(){return this.scrollEvent=!1,{position:"",curActive:null,lineStyle:{backgroundColor:this.color}}},computed:{scrollable:function(){return this.children.length>this.swipeThreshold||!this.ellipsis},wrapStyle:function(){switch(this.position){case"top":return{top:this.offsetTop+"px",position:"fixed"};case"bottom":return{top:"auto",bottom:0};default:return null}},navStyle:function(){return{borderColor:this.color,background:this.background}}},watch:{active:function(t){t!==this.curActive&&this.correctActive(t)},color:function(){this.setLine()},children:function(){this.correctActive(this.curActive||this.active),this.scrollIntoView(),this.setLine()},curActive:function(){this.scrollIntoView(),this.setLine(),"top"!==this.position&&"bottom"!==this.position||Object(ot.e)(window,Object(ot.a)(this.$el)-this.offsetTop)},sticky:function(t){this.bindScrollEvent(t)}},mounted:function(){this.onShow()},activated:function(){this.onShow(),this.setLine()},methods:{onShow:function(){var t=this;this.$nextTick(function(){t.inited=!0,t.scrollIntoView(!0)})},bindScrollEvent:function(t){var e=this.sticky&&t;this.scrollEvent!==e&&(this.scrollEvent=e,this.scrollEl=this.scrollEl||Object(ot.c)(this.$el),(e?B.b:B.a)(this.scrollEl,"scroll",this.onScroll,!0),this.onScroll())},onScroll:function(){var t=Object(ot.d)(window)+this.offsetTop,e=Object(ot.a)(this.$el),n=e+this.$el.offsetHeight-this.$refs.wrap.offsetHeight;this.position=t>n?"bottom":t>e?"top":"";var r={scrollTop:t,isFixed:"top"===this.position};this.$emit("scroll",r)},setLine:function(){var t=this,e=this.inited;this.$nextTick(function(){var n=t.$refs.titles;if(n&&n[t.curActive]&&"line"===t.type){var title=n[t.curActive].$el,r=t.lineWidth,o=t.lineHeight,l=Object(m.b)(r)?r:title.offsetWidth/2,c=title.offsetLeft+title.offsetWidth/2,h={width:Object(lt.a)(l),backgroundColor:t.color,transform:"translateX("+c+"px) translateX(-50%)"};if(e&&(h.transitionDuration=t.duration+"s"),Object(m.b)(o)){var d=Object(lt.a)(o);h.height=d,h.borderRadius=d}t.lineStyle=h}})},correctActive:function(t){t=+t;var e=this.children.some(function(e){return e.index===t}),n=(this.children[0]||{}).index||0;this.setCurActive(e?t:n)},setCurActive:function(t){t=this.findAvailableTab(t,t<this.curActive),Object(m.b)(t)&&t!==this.curActive&&(this.$emit("input",t),null!==this.curActive&&this.$emit("change",t,this.children[t].title),this.curActive=t)},findAvailableTab:function(t,e){for(var n=e?-1:1,r=t;r>=0&&r<this.children.length;){if(!this.children[r].disabled)return r;r+=n}},onClick:function(t){var e=this.children[t],title=e.title;e.disabled?this.$emit("disabled",t,title):(this.setCurActive(t),this.$emit("click",t,title))},scrollIntoView:function(t){var e=this.$refs.titles;if(this.scrollable&&e&&e[this.curActive]){var nav=this.$refs.nav,title=e[this.curActive].$el;!function(t,e,n){var r=0,o=t.scrollLeft,l=0===n?1:Math.round(1e3*n/16);!function animate(){t.scrollLeft+=(e-o)/l,++r<l&&Object(Ge.b)(animate)}()}(nav,title.offsetLeft-(nav.offsetWidth-title.offsetWidth)/2,t?0:this.duration)}},renderTitle:function(t,e){var n=this;this.$nextTick(function(){n.$refs.titles[e].renderTitle(t)})}},render:function(t){var e=this,n=this.type,r=this.ellipsis,o=this.animated,l=this.scrollable,c=this.children.map(function(o,c){return t(Vn,{ref:"titles",refInFor:!0,attrs:{type:n,title:o.title,color:e.color,active:c===e.curActive,ellipsis:r,disabled:o.disabled,scrollable:l,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,swipeThreshold:e.swipeThreshold},on:{click:function(){e.onClick(c)}}})});return t("div",{class:Kn([n])},[t("div",{ref:"wrap",style:this.wrapStyle,class:[Kn("wrap",{scrollable:l}),{"van-hairline--top-bottom":"line"===n&&this.border}]},[t("div",{ref:"nav",attrs:{role:"tablist"},class:Kn("nav",[n]),style:this.navStyle},[this.slots("nav-left"),c,"line"===n&&t("div",{class:Kn("line"),style:this.lineStyle}),this.slots("nav-right")])]),t(qn,{attrs:{count:this.children.length,active:this.curActive,animated:o,duration:this.duration,swipeable:this.swipeable},on:{change:this.setCurActive}},[this.slots()])])}}),Zn=Object(c.a)("coupon-list"),ti=Zn[0],ei=Zn[1],ni=Zn[2],ii=ti({model:{prop:"code"},props:{code:String,coupons:Array,disabledCoupons:Array,closeButtonText:String,inputPlaceholder:String,enabledTitle:String,disabledTitle:String,exchangeButtonText:String,exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,exchangeMinLength:{type:Number,default:1},chosenCoupon:{type:Number,default:-1},displayedCouponIndex:{type:Number,default:-1},showExchangeBar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},currency:{type:String,default:"¥"}},data:function(){return{tab:0,winHeight:window.innerHeight,currentCode:this.code||""}},computed:{buttonDisabled:function(){return!this.exchangeButtonLoading&&(this.exchangeButtonDisabled||!this.currentCode||this.currentCode.length<this.exchangeMinLength)},listStyle:function(){return{height:this.winHeight-(this.showExchangeBar?140:94)+"px"}}},watch:{code:function(t){this.currentCode=t},currentCode:function(code){this.$emit("input",code)},displayedCouponIndex:function(t){this.scrollToShowCoupon(t)}},mounted:function(){this.scrollToShowCoupon(this.displayedCouponIndex)},methods:{onClickExchangeButton:function(){this.$emit("exchange",this.currentCode),this.code||(this.currentCode="")},scrollToShowCoupon:function(t){var e=this;-1!==t&&this.$nextTick(function(){var n=e.$refs,r=n.card,o=n.list;o&&r&&r[t]&&(o.scrollTop=r[t].$el.offsetTop-100)})},renderEmpty:function(){var t=this.$createElement;return t("div",{class:ei("empty")},[t("img",{attrs:{src:"https://img.yzcdn.cn/vant/coupon-empty.png"}}),t("p",[ni("empty")])])},renderExchangeButton:function(){return(0,this.$createElement)(bt,{attrs:{size:"small",type:"danger",text:this.exchangeButtonText||ni("exchange"),loading:this.exchangeButtonLoading,disabled:this.buttonDisabled},class:ei("exchange"),on:{click:this.onClickExchangeButton}})}},render:function(t){var e=this,n=this.coupons,r=this.disabledCoupons,title=(this.enabledTitle||ni("enable"))+" ("+n.length+")",o=(this.disabledTitle||ni("disabled"))+" ("+r.length+")",l=this.showExchangeBar&&t(pt,{attrs:{clearable:!0,border:!1,placeholder:this.inputPlaceholder||ni("placeholder"),maxlength:"20"},class:ei("field"),scopedSlots:{button:this.renderExchangeButton},model:{value:e.currentCode,callback:function(t){e.currentCode=t}}}),c=function(t){return function(){return e.$emit("change",t)}},h=t(Gn,{attrs:{title:title}},[t("div",{class:ei("list"),style:this.listStyle},[n.map(function(n,r){return t(Rn,{ref:"card",key:n.id,attrs:{coupon:n,currency:e.currency,chosen:r===e.chosenCoupon},nativeOn:{click:c(r)}})}),!n.length&&this.renderEmpty()])]),d=t(Gn,{attrs:{title:o}},[t("div",{class:ei("list"),style:this.listStyle},[r.map(function(n){return t(Rn,{attrs:{disabled:!0,coupon:n,currency:e.currency},key:n.id})}),!r.length&&this.renderEmpty()])]);return t("div",{class:ei()},[l,t(Jn,{class:ei("tab"),attrs:{"line-width":120},model:{value:e.tab,callback:function(t){e.tab=t}}},[h,d]),t(bt,{directives:[{name:"show",value:this.showCloseButton}],attrs:{size:"large",text:this.closeButtonText||ni("close")},class:ei("close"),on:{click:c(-1)}})])}});function ri(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function si(t){if(t){for(;isNaN(parseInt(t,10));)t=t.slice(1);return parseInt(t,10)}}function ai(t,e){return 32-new Date(t,e-1,32).getDate()}var oi=Object(c.a)("datetime-picker"),ci=oi[0],hi=oi[1],ui=(new Date).getFullYear(),di=ci({props:Object(r.a)({},R,{value:null,filter:Function,minHour:Number,minMinute:Number,type:{type:String,default:"datetime"},showToolbar:{type:Boolean,default:!0},format:{type:String,default:"YYYY.MM.DD HH时 mm分"},formatter:{type:Function,default:function(t,e){return e}},minDate:{type:Date,default:function(){return new Date(ui-10,0,1)},validator:ri},maxDate:{type:Date,default:function(){return new Date(ui+10,11,31)},validator:ri},maxHour:{type:Number,default:23},maxMinute:{type:Number,default:59}}),data:function(){return{innerValue:this.correctValue(this.value)}},watch:{value:function(t){t=this.correctValue(t),("time"===this.type?t===this.innerValue:t.valueOf()===this.innerValue.valueOf())||(this.innerValue=t,"time"===this.type&&this.updateColumnValue(t))},innerValue:function(t){this.$emit("input",t)},columns:function(){this.updateColumnValue(this.innerValue)}},computed:{ranges:function(){if("time"===this.type)return[{type:"hour",range:[this.minHour,this.maxHour]},{type:"minute",range:[this.minMinute,this.maxMinute]}];var t=this.getBoundary("max",this.innerValue),e=t.maxYear,n=t.maxDate,r=t.maxMonth,o=t.maxHour,l=t.maxMinute,c=this.getBoundary("min",this.innerValue),h=c.minYear,d=c.minDate,f=[{type:"year",range:[h,e]},{type:"month",range:[c.minMonth,r]},{type:"day",range:[d,n]},{type:"hour",range:[c.minHour,o]},{type:"minute",range:[c.minMinute,l]}];return"date"===this.type&&f.splice(3,2),"year-month"===this.type&&f.splice(2,3),f},columns:function(){var t=this;return this.ranges.map(function(e){var n=e.type,r=e.range,o=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(r[1]-r[0]+1,function(e){var o=Object(Sn.b)(r[0]+e);return t.formatter(n,o)});return t.filter&&(o=t.filter(n,o)),{values:o}})}},mounted:function(){this.updateColumnValue(this.innerValue)},methods:{correctValue:function(t){var e="time"!==this.type;if(e&&!ri(t)?t=this.minDate:t||(t=Object(Sn.b)(this.minHour)+":00"),!e){var n=t.split(":"),r=n[0],o=n[1];return(r=Object(Sn.b)(D(r,this.minHour,this.maxHour)))+":"+(o=Object(Sn.b)(D(o,this.minMinute,this.maxMinute)))}return t=Math.max(t,this.minDate.getTime()),t=Math.min(t,this.maxDate.getTime()),new Date(t)},getBoundary:function(t,e){var n,r=this[t+"Date"],o=r.getFullYear(),l=1,c=1,h=0,d=0;return"max"===t&&(l=12,c=ai(e.getFullYear(),e.getMonth()+1),h=23,d=59),e.getFullYear()===o&&(l=r.getMonth()+1,e.getMonth()+1===l&&(c=r.getDate(),e.getDate()===c&&(h=r.getHours(),e.getHours()===h&&(d=r.getMinutes())))),(n={})[t+"Year"]=o,n[t+"Month"]=l,n[t+"Date"]=c,n[t+"Hour"]=h,n[t+"Minute"]=d,n},onConfirm:function(){this.$emit("confirm",this.innerValue)},onChange:function(t){var e,n=this;if("time"===this.type){var r=t.getIndexes();e=r[0]+this.minHour+":"+(r[1]+this.minMinute)}else{var o=t.getValues(),l=si(o[0]),c=si(o[1]),h=ai(l,c),d=si(o[2]);"year-month"===this.type&&(d=1),d=d>h?h:d;var f=0,m=0;"datetime"===this.type&&(f=si(o[3]),m=si(o[4])),e=new Date(l,c-1,d,f,m)}this.innerValue=this.correctValue(e),this.$nextTick(function(){n.$nextTick(function(){n.$emit("change",t)})})},updateColumnValue:function(t){var e=this,n=[],r=this.formatter;if("time"===this.type){var o=t.split(":");n=[r("hour",o[0]),r("minute",o[1])]}else n=[r("year",""+t.getFullYear()),r("month",Object(Sn.b)(t.getMonth()+1)),r("day",Object(Sn.b)(t.getDate()))],"datetime"===this.type&&n.push(r("hour",Object(Sn.b)(t.getHours())),r("minute",Object(Sn.b)(t.getMinutes()))),"year-month"===this.type&&(n=n.slice(0,2));this.$nextTick(function(){e.$refs.picker.setValues(n)})}},render:function(t){var e=this,n={};return Object.keys(R).forEach(function(t){n[t]=e[t]}),t(j,{class:hi(),ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:function(){e.$emit("cancel")}},props:Object(r.a)({},n)})}}),pi=Object(c.a)("dropdown-item"),fi=pi[0],mi=pi[1],gi=fi({mixins:[Zt("vanDropdownMenu")],props:{value:null,title:String,options:Array,disabled:Boolean,titleClass:String},data:function(){return{transition:!0,showPopup:!1,showWrapper:!1}},computed:{displayTitle:function(){var t=this;if(this.title)return this.title;var e=this.options.filter(function(option){return option.value===t.value});return e.length?e[0].text:""}},methods:{toggle:function(t){this.showPopup=!this.showPopup,this.showPopup&&(this.showWrapper=!0)},hide:function(t){this.showPopup=!1,t&&(this.transition=!1)}},beforeCreate:function(){var t=this,e=function(e){return function(){return t.$emit(e)}};this.onOpen=e("open"),this.onClose=e("close"),this.onOpened=e("opened")},render:function(t){var e=this,n=this.parent,r=n.zIndex,o=n.offset,l=n.overlay,c=n.duration,h=n.direction,d=n.activeColor,m=n.closeOnClickOverlay,A=this.options.map(function(option){var n=option.value===e.value;return t(at,{attrs:{clickable:!0,title:option.text,titleStyle:{color:n?d:""}},key:option.value,on:{click:function(){e.showPopup=!1,option.value!==e.value&&(e.$emit("input",option.value),e.$emit("change",option.value))}}},[n&&t(f.a,{class:mi("icon"),attrs:{color:d,name:"success"}})])}),style={zIndex:r};return"down"===h?style.top=o+"px":style.bottom=o+"px",t("div",{directives:[{name:"show",value:this.showWrapper}],style:style,class:mi([h])},[t(x,{attrs:{overlay:l,position:"down"===h?"top":"bottom",duration:this.transition?c:0,closeOnClickOverlay:m,overlayStyle:{position:"absolute"}},class:mi("content"),on:{open:this.onOpen,close:this.onClose,opened:this.onOpened,closed:function(){e.transition=!0,e.showWrapper=!1,e.$emit("closed")}},model:{value:e.showPopup,callback:function(t){e.showPopup=t}}},[A,this.slots("default")])])}}),Ai=function(t){return yt.default.extend({data:function(){var e=this;return{clickOutsideHandler:function(n){e.$el.contains(n.target)||e[t.method]()}}},mounted:function(){Object(B.b)(document,t.event,this.clickOutsideHandler)},beforeDestroy:function(){Object(B.a)(document,t.event,this.clickOutsideHandler)}})},vi=Object(c.a)("dropdown-menu"),bi=vi[0],yi=vi[1],xi=bi({mixins:[te("vanDropdownMenu"),Ai({event:"click",method:"onClickOutside"})],props:{overlay:{type:Boolean,default:!0},zIndex:{type:Number,default:10},duration:{type:Number,default:.2},direction:{type:String,default:"down"},activeColor:{type:String,default:L.a},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return{offset:0}},methods:{toggleItem:function(t){var rect=this.$refs.menu.getBoundingClientRect();"down"===this.direction?this.offset=rect.bottom:this.offset=window.innerHeight-rect.top,this.children.forEach(function(e,n){n===t?e.toggle():e.showPopup&&e.hide(!0)})},onClickOutside:function(){this.children.forEach(function(t){t.hide()})}},render:function(t){var e=this,n=this.children.map(function(n,r){return t("div",{attrs:{role:"button",tabindex:n.disabled?-1:0},class:yi("item",{disabled:n.disabled}),on:{click:function(){n.disabled||e.toggleItem(r)}}},[t("span",{class:[yi("title",{down:n.showPopup===("down"===e.direction)}),n.titleClass],style:{color:n.showPopup?e.activeColor:""}},[n.displayTitle])])});return t("div",{ref:"menu",class:[yi(),"van-hairline--top-bottom"]},[n,this.slots("default")])}}),_i=Object(c.a)("goods-action"),wi=_i[0],Ei=_i[1];function Si(t,e,n,r){return t("div",l()([{class:Ei({"safe-area-inset-bottom":e.safeAreaInsetBottom})},Object(h.b)(r,!0)]),[n.default&&n.default()])}Si.props={safeAreaInsetBottom:Boolean};var Ci=wi(Si),Ii=Object(c.a)("goods-action-button"),Mi=Ii[0],Bi=Ii[1];function Ti(t,e,n,r){return t(bt,l()([{attrs:{square:!0,size:"large",type:e.type,loading:e.loading,disabled:e.disabled},class:Bi(),on:{click:function(t){Object(h.a)(r,"click",t),Z(r)}}},Object(h.b)(r)]),[n.default?n.default():e.text])}Ti.props=Object(r.a)({},tt,{type:String,text:String,loading:Boolean,disabled:Boolean});var ki=Mi(Ti),Ri=Object(c.a)("goods-action-icon"),Li=Ri[0],Di=Ri[1];function Pi(t,e,n,r){return t("div",l()([{attrs:{role:"button",tabindex:"0"},class:[Di(),"van-hairline"],on:{click:function(t){Object(h.a)(r,"click",t),Z(r)}}},Object(h.b)(r)]),[n.icon?t("div",{class:Di("icon")},[n.icon()]):t(f.a,{class:[Di("icon"),e.iconClass],attrs:{tag:"div",info:e.info,name:e.icon}}),n.default?n.default():e.text])}Pi.props=Object(r.a)({},tt,{text:String,icon:String,info:[String,Number],iconClass:null});var Oi=Li(Pi),Fi=Object(c.a)("grid"),Ni=Fi[0],Ui=Fi[1],Qi=Ni({mixins:[te("vanGrid")],props:{gutter:Number,square:Boolean,clickable:Boolean,columnNum:{type:Number,default:4},center:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},computed:{style:function(){var t=this.gutter;if(t)return{paddingLeft:Object(lt.a)(t)}}},render:function(t){return t("div",{style:this.style,class:[Ui(),{"van-hairline--top":this.border&&!this.gutter}]},[this.slots()])}}),zi=Object(c.a)("grid-item"),Gi=zi[0],Hi=zi[1],Vi=Gi({mixins:[Zt("vanGrid")],props:Object(r.a)({},tt,{icon:String,text:String}),computed:{style:function(){var t=this.parent,e=t.square,n=t.gutter,r=t.columnNum,o=100/r+"%",style={flexBasis:o};if(e)style.paddingTop=o;else if(n){var l=Object(lt.a)(n);style.paddingRight=l,this.index>=r&&(style.marginTop=l)}return style},contentStyle:function(){var t=this.parent,e=t.square,n=t.gutter;if(e&&n){var r=Object(lt.a)(n);return{right:r,bottom:r,height:"auto"}}}},methods:{onClick:function(t){this.$emit("click",t),J(this.$router,this)},renderContent:function(){var t=this.$createElement,slot=this.slots();return slot||[this.slots("icon")||this.icon&&t(f.a,{attrs:{name:this.icon},class:Hi("icon")}),this.slots("text")||this.text&&t("span",{class:Hi("text")},[this.text])]}},render:function(t){var e=this.parent,n=e.center,r=e.border,o=e.square,l=e.gutter,c=e.clickable;return t("div",{class:[Hi({square:o})],style:this.style,on:{click:this.onClick}},[t("div",{style:this.contentStyle,class:[Hi("content",{center:n,square:o,clickable:c,surround:r&&l}),{"van-hairline":r}]},[this.renderContent()])])}}),ji=Object(c.a)("swipe"),Wi=ji[0],$i=ji[1],qi=Wi({mixins:[P.a,xt(function(t,e){t(window,"resize",this.onResize,!0),e?this.initialize():this.clear()})],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,initialSwipe:Number,indicatorColor:String,loop:{type:Boolean,default:!0},touchable:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},duration:{type:Number,default:500}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,e=this.vertical?"height":"width",n=this.vertical?"width":"height";return(t={})[e]=this.trackSize+"px",t[n]=this[n]?this[n]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var rect=this.$el.getBoundingClientRect();this.computedWidth=this.width||rect.width,this.computedHeight=this.height||rect.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(B.c)(t,!0),this.move({offset:Math.min(Math.max(this.delta,-this.size),this.size)})))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta&&this.isCorrectDirection){var t=this.vertical?this.offsetY:this.offsetX;this.move({pace:t>0?this.delta>0?-1:1:0,emitChange:!0})}this.swiping=!1,this.autoPlay()}},move:function(t){var e=t.pace,n=void 0===e?0:e,r=t.offset,o=void 0===r?0:r,l=t.emitChange,c=this.delta,h=this.active,d=this.count,f=this.swipes,m=this.trackSize,A=0===h,v=h===d-1;!this.loop&&(A&&(o>0||n<0)||v&&(o<0||n>0))||d<=1||(f[0]&&(f[0].offset=v&&(c<0||n>0)?m:0),f[d-1]&&(f[d-1].offset=A&&(c>0||n<0)?-m:0),n&&h+n>=-1&&h+n<=d&&(this.active+=n,l&&this.$emit("change",this.activeIndicator)),this.offset=Math.round(o-this.active*this.size))},swipeTo:function(t){var e=this;this.swiping=!0,this.resetTouchStatus(),this.correctPosition(),setTimeout(function(){e.swiping=!1,e.move({pace:t%e.count-e.active,emitChange:!0})},30)},correctPosition:function(){this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),setTimeout(function(){t.swiping=!1,t.move({pace:1,emitChange:!0}),t.autoPlay()},30)},e))},renderIndicator:function(){var t=this,e=this.$createElement,n=this.count,r=this.activeIndicator,slot=this.slots("indicator");return slot||(this.showIndicators&&n>1?e("div",{class:$i("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(n)).map(function(n,o){return e("i",{class:$i("indicator",{active:o===r}),style:o===r?t.indicatorStyle:null})})]):void 0)}},render:function(t){return t("div",{class:$i()},[t("div",{ref:"track",style:this.trackStyle,class:$i("track"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots()]),this.renderIndicator()])}}),Yi=Object(c.a)("swipe-item"),Xi=Yi[0],Ki=Yi[1],Ji=Xi({data:function(){return{offset:0}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},render:function(t){var e=this.$parent,n=e.vertical,o=e.computedWidth,l=e.computedHeight,style={width:o+"px",height:n?l+"px":"100%",transform:"translate"+(n?"Y":"X")+"("+this.offset+"px)"};return t("div",{class:Ki(),style:style,on:Object(r.a)({},this.$listeners)},[this.slots()])}}),Zi=Object(c.a)("image-preview"),er=Zi[0],nr=Zi[1];function ir(t){return Math.sqrt(Math.abs((t[0].clientX-t[1].clientX)*(t[0].clientY-t[1].clientY)))}var rr,sr=er({mixins:[d.a,P.a,wt],props:{images:Array,className:null,lazyLoad:Boolean,asyncClose:Boolean,startPosition:Number,showIndicators:Boolean,loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:"van-image-preview__overlay"},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return this.bindStatus=!1,{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,active:0}},computed:{imageStyle:function(){var t=this.scale,style={transition:this.zooming||this.moving?"":".3s all"};return 1!==t&&(style.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),style}},watch:{value:function(){this.active=this.startPosition},startPosition:function(t){this.active=t}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){Object(B.c)(t);var e=new Date-this.touchStartTime,n=this.$refs.swipe||{},r=n.offsetX,o=void 0===r?0:r,l=n.offsetY;if(e<300&&o<10&&(void 0===l?0:l)<10){var c=this.active;this.resetScale(),this.$emit("close",{index:c,url:this.images[c]}),this.asyncClose||this.$emit("input",!1)}},startMove:function(t){var rect=t.currentTarget.getBoundingClientRect(),e=window.innerWidth,n=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(rect.width-e)/2),this.maxMoveY=Math.max(0,(rect.height-n)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=ir(t.touches)},onImageTouchStart:function(t){var e=t.touches,n=(this.$refs.swipe||{}).offsetX,r=void 0===n?0:n;1===e.length&&1!==this.scale?this.startMove(t):2!==e.length||r||this.startZoom(t)},onImageTouchMove:function(t){var e=t.touches;if((this.moving||this.zooming)&&Object(B.c)(t,!0),this.moving){this.touchMove(t);var n=this.deltaX+this.startMoveX,r=this.deltaY+this.startMoveY;this.moveX=D(n,-this.maxMoveX,this.maxMoveX),this.moveY=D(r,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var o=ir(e),l=this.startScale*o/this.startDistance;this.scale=D(l,this.minZoom,this.maxZoom)}},onImageTouchEnd:function(t){if(this.moving||this.zooming){var e=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),e&&Object(B.c)(t,!0)}},onSwipeChange:function(t){this.resetScale(),this.active=t,this.$emit("change",t)},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0}},render:function(t){var e=this;if(this.value){var n=this.active,r=this.images,o=this.showIndex&&t("div",{class:nr("index")},[this.slots("index")||n+1+"/"+r.length]),c=t(qi,{ref:"swipe",attrs:{loop:this.loop,indicatorColor:"white",initialSwipe:this.startPosition,showIndicators:this.showIndicators},on:{change:this.onSwipeChange}},[r.map(function(image,r){var o={class:nr("image"),style:r===n?e.imageStyle:null,on:{touchstart:e.onImageTouchStart,touchmove:e.onImageTouchMove,touchend:e.onImageTouchEnd,touchcancel:e.onImageTouchEnd}};return t(Ji,[e.lazyLoad?t("img",l()([{directives:[{name:"lazy",value:image}]},o])):t("img",l()([{attrs:{src:image}},o]))])})]);return t("transition",{attrs:{name:"van-fade"}},[t("div",{class:[nr(),this.className],on:{touchstart:this.onWrapperTouchStart,touchMove:B.c,touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[o,c])])}}}),ar={images:[],loop:!0,value:!0,minZoom:1/3,maxZoom:3,className:"",lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,showIndicators:!1,closeOnPopstate:!1},or=function(t,e){if(void 0===e&&(e=0),!m.d){rr||(rr=new(yt.default.extend(sr))({el:document.createElement("div")}),document.body.appendChild(rr.$el),rr.$on("change",function(t){rr.onChange&&rr.onChange(t)}));var n=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(r.a)(rr,ar,n),rr.$once("input",function(t){rr.value=t}),n.onClose&&rr.$once("close",n.onClose),rr}};or.install=function(){yt.default.use(sr)};var lr=or,cr=Object(c.a)("index-anchor"),ur=cr[0],dr=cr[1],pr=ur({mixins:[Zt("vanIndexBar",{indexKey:"childrenIndex"})],props:{index:[String,Number]},data:function(){return{top:0,active:!1}},computed:{sticky:function(){return this.active&&this.parent.sticky},anchorStyle:function(){if(this.sticky)return{transform:"translate3d(0, "+this.top+"px, 0)",color:this.parent.highlightColor,zIndex:""+this.parent.zIndex}}},mounted:function(){this.height=this.$el.offsetHeight},methods:{scrollIntoView:function(){this.$el.scrollIntoView()}},render:function(t){var e=this.sticky;return t("div",{style:{height:e?this.height+"px":null}},[t("div",{style:this.anchorStyle,class:[dr({sticky:e}),{"van-hairline--bottom":e}]},[this.slots("default")||this.index])])}}),fr=Object(c.a)("index-bar"),mr=fr[0],gr=fr[1],Ar=mr({mixins:[P.a,te("vanIndexBar"),xt(function(t){this.scroller||(this.scroller=Object(ot.c)(this.$el)),t(this.scroller,"scroll",this.onScroll)})],props:{sticky:{type:Boolean,default:!0},zIndex:{type:Number,default:1},highlightColor:{type:String,default:L.d},indexList:{type:Array,default:function(){for(var t=[],e="A".charCodeAt(0),i=0;i<26;i++)t.push(String.fromCharCode(e+i));return t}}},data:function(){return{activeAnchorIndex:null}},computed:{highlightStyle:function(){var t=this.highlightColor;if(t)return{color:t}}},methods:{onScroll:function(){if(this.sticky){var t=Object(ot.d)(this.scroller),e=this.children.map(function(t){return{height:t.height,top:Object(ot.a)(t.$el)}}),n=this.getActiveAnchorIndex(t,e);this.activeAnchorIndex=this.indexList[n],this.children.forEach(function(r,o){if(o===n)r.active=!0,r.top=Math.max(0,e[o].top-t);else if(o===n-1){var l=e[n].top-t;r.active=l>0,r.top=l-r.height}else r.active=!1})}},getActiveAnchorIndex:function(t,e){for(var i=this.children.length-1;i>=0;i--){if(t+(i>0?e[i-1].height:0)>=e[i].top)return i}return-1},onClick:function(t){this.scrollToElement(t.target)},onTouchMove:function(t){if(this.touchMove(t),"vertical"===this.direction){t.cancelable&&t.preventDefault();var e=t.touches[0],n=e.clientX,r=e.clientY,o=document.elementFromPoint(n,r);if(o){var l=o.dataset.index;this.touchActiveIndex!==l&&(this.touchActiveIndex=l,this.scrollToElement(o))}}},scrollToElement:function(element,t){var e=element.dataset.index;if(e){var n=this.children.filter(function(t){return String(t.index)===e});n[0]&&(n[0].scrollIntoView(),this.$emit("select",n[0].index))}},onTouchEnd:function(){this.active=null}},render:function(t){var e=this,n=this.indexList.map(function(n){var r=n===e.activeAnchorIndex;return t("span",{class:gr("index",{active:r}),style:r?e.highlightStyle:null,attrs:{"data-index":n}},[n])});return t("div",{class:gr()},[t("div",{class:gr("sidebar"),style:{zIndex:this.zIndex},on:{click:this.onClick,touchstart:this.touchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[n]),this.slots("default")])}}),vr=n(30),yr=Object(c.a)("list"),xr=yr[0],_r=yr[1],wr=yr[2],Er=xr({mixins:[xt(function(t){this.scroller||(this.scroller=Object(ot.c)(this.$el)),t(this.scroller,"scroll",this.check)})],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},mounted:function(){this.immediateCheck&&this.$nextTick(this.check)},watch:{loading:function(){this.$nextTick(this.check)},finished:function(){this.$nextTick(this.check)}},methods:{check:function(){if(!(this.loading||this.finished||this.error)){var t,e=this.$el,n=this.scroller,r=this.offset,o=this.direction;if(!((t=n.getBoundingClientRect?n.getBoundingClientRect():{top:0,bottom:n.innerHeight}).bottom-t.top)||"none"===window.getComputedStyle(e).display||null===e.offsetParent)return!1;var l=this.$refs.placeholder.getBoundingClientRect();("up"===o?l.top-t.top<=r:l.bottom-t.bottom<=r)&&(this.$emit("input",!0),this.$emit("load"))}},clickErrorText:function(){this.$emit("update:error",!1),this.$nextTick(this.check)}},render:function(t){var e=t("div",{ref:"placeholder",class:_r("placeholder")});return t("div",{class:_r(),attrs:{role:"feed","aria-busy":this.loading}},["down"===this.direction?this.slots():e,this.loading&&t("div",{class:_r("loading"),key:"loading"},[this.slots("loading")||t(_.a,{attrs:{size:"16"}},[this.loadingText||wr("loading")])]),this.finished&&this.finishedText&&t("div",{class:_r("finished-text")},[this.finishedText]),this.error&&this.errorText&&t("div",{on:{click:this.clickErrorText},class:_r("error-text")},[this.errorText]),"up"===this.direction?this.slots():e])}}),Sr=Object(c.a)("nav-bar"),Cr=Sr[0],Ir=Sr[1];function Mr(t,e,n,r){return t("div",l()([{class:[Ir({fixed:e.fixed}),{"van-hairline--bottom":e.border}],style:{zIndex:e.zIndex}},Object(h.b)(r)]),[t("div",{class:Ir("left"),on:{click:r.listeners["click-left"]||m.e}},[n.left?n.left():[e.leftArrow&&t(f.a,{class:Ir("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:Ir("text")},[e.leftText])]]),t("div",{class:[Ir("title"),"van-ellipsis"]},[n.title?n.title():e.title]),t("div",{class:Ir("right"),on:{click:r.listeners["click-right"]||m.e}},[n.right?n.right():e.rightText&&t("span",{class:Ir("text")},[e.rightText])])])}Mr.props={title:String,fixed:Boolean,leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0},zIndex:{type:Number,default:1}};var Br=Cr(Mr),Tr=Object(c.a)("notice-bar"),kr=Tr[0],Rr=Tr[1],Lr=kr({props:{text:String,mode:String,color:String,leftIcon:String,wrapable:Boolean,background:String,delay:{type:[String,Number],default:1},scrollable:{type:Boolean,default:!0},speed:{type:Number,default:50}},data:function(){return{wrapWidth:0,firstRound:!0,duration:0,offsetWidth:0,showNoticeBar:!0,animationClass:""}},watch:{text:{handler:function(){var t=this;this.$nextTick(function(){var e=t.$refs,n=e.wrap,content=e.content;if(n&&content){var r=n.getBoundingClientRect().width,o=content.getBoundingClientRect().width;t.scrollable&&o>r&&(t.wrapWidth=r,t.offsetWidth=o,t.duration=o/t.speed,t.animationClass=Rr("play"))}})},immediate:!0}},methods:{onClickIcon:function(){"closeable"===this.mode&&(this.showNoticeBar=!1,this.$emit("close"))},onAnimationEnd:function(){var t=this;this.firstRound=!1,this.$nextTick(function(){t.duration=(t.offsetWidth+t.wrapWidth)/t.speed,t.animationClass=Rr("play--infinite")})}},render:function(t){var slot,e=this,n=this.slots,r=this.mode,o=this.leftIcon,l=this.onClickIcon,c={color:this.color,background:this.background},h={paddingLeft:this.firstRound?0:this.wrapWidth+"px",animationDelay:(this.firstRound?this.delay:0)+"s",animationDuration:this.duration+"s"};return t("div",{attrs:{role:"alert"},directives:[{name:"show",value:this.showNoticeBar}],class:Rr({wrapable:this.wrapable}),style:c,on:{click:function(){e.$emit("click")}}},[(slot=n("left-icon"),slot||(o?t(f.a,{class:Rr("left-icon"),attrs:{name:o}}):void 0)),t("div",{ref:"wrap",class:Rr("wrap"),attrs:{role:"marquee"}},[t("div",{ref:"content",class:[Rr("content"),this.animationClass,{"van-ellipsis":!this.scrollable&&!this.wrapable}],style:h,on:{animationend:this.onAnimationEnd,webkitAnimationEnd:this.onAnimationEnd}},[this.slots()||this.text])]),function(){var slot=n("right-icon");if(slot)return slot;var e="closeable"===r?"cross":"link"===r?"arrow":"";return e?t(f.a,{class:Rr("right-icon"),attrs:{name:e},on:{click:l}}):void 0}()])}}),Dr=Object(c.a)("notify"),Pr=Dr[0],Or=Dr[1];function Fr(t,e,n,r){var style={color:e.color,background:e.background};return t(x,l()([{attrs:{value:e.value,position:"top",overlay:!1,lockScroll:!1},style:style,class:[Or(),e.className]},Object(h.b)(r,!0)]),[e.message])}Fr.props=Object(r.a)({},d.a.props,{className:null,message:[String,Number],getContainer:[String,Function],color:{type:String,default:L.f},background:{type:String,default:L.e},duration:{type:Number,default:3e3}});var Nr,Ur,Qr=Pr(Fr);function zr(t){var e;if(!m.d)return Ur||(Ur=Object(h.c)(Qr,{on:{click:function(t){Ur.onClick&&Ur.onClick(t)},close:function(){Ur.onClose&&Ur.onClose()},opened:function(){Ur.onOpened&&Ur.onOpened()}}})),t=Object(r.a)({},zr.currentOptions,(e=t,Object(m.c)(e)?e:{message:e})),Object(r.a)(Ur,t),clearTimeout(Nr),t.duration&&t.duration>0&&(Nr=setTimeout(zr.clear,t.duration)),Ur}function Gr(){return{value:!0,message:"",color:L.f,background:L.e,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}zr.clear=function(){Ur&&(Ur.value=!1)},zr.currentOptions=Gr(),zr.setDefaultOptions=function(t){Object(r.a)(zr.currentOptions,t)},zr.resetDefaultOptions=function(){zr.currentOptions=Gr()},zr.install=function(){yt.default.use(Qr)},yt.default.prototype.$notify=zr;var Hr=zr,Vr=Object(c.a)("key"),jr=Vr[0],Wr=Vr[1],$r=jr({props:{type:String,theme:Array,text:[String,Number]},data:function(){return{active:!1}},computed:{className:function(){var t=this.theme.slice(0);return this.active&&t.push("active"),this.type&&t.push(this.type),Wr(t)}},methods:{onFocus:function(){this.active=!0},onBlur:function(t){this.active=!1},onClick:function(){this.$emit("press",this.text,this.type)}},render:function(t){var e=this.onBlur;return t("i",{attrs:{role:"button",tabindex:"0"},class:["van-hairline",this.className],on:{click:this.onClick,touchstart:this.onFocus,touchmove:e,touchend:e,touchcancel:e}},[this.slots("default")||this.text])}}),qr=Object(c.a)("number-keyboard"),Yr=qr[0],Xr=qr[1],Kr=qr[2],Jr=["blue","big"],Zr=["delete","big","gray"],ts=Yr({mixins:[xt(function(t){this.hideOnClickOutside&&t(document.body,"touchstart",this.onBlur)})],model:{event:"update:value"},props:{show:Boolean,title:String,closeButtonText:String,deleteButtonText:String,safeAreaInsetBottom:Boolean,theme:{type:String,default:"default"},value:{type:String,default:""},extraKey:{type:String,default:""},maxlength:{type:[Number,String],default:Number.MAX_VALUE},zIndex:{type:Number,default:100},transition:{type:Boolean,default:!0},showDeleteKey:{type:Boolean,default:!0},hideOnClickOutside:{type:Boolean,default:!0}},watch:{show:function(){this.transition||this.$emit(this.show?"show":"hide")}},computed:{keys:function(){for(var t=[],i=1;i<=9;i++)t.push({text:i});switch(this.theme){case"default":t.push({text:this.extraKey,theme:["gray"]},{text:0},{text:this.deleteText,theme:["gray"],type:"delete"});break;case"custom":t.push({text:0,theme:["middle"]},{text:this.extraKey})}return t},deleteText:function(){return this.deleteButtonText||Kr("delete")}},methods:{onBlur:function(){this.$emit("blur")},onClose:function(){this.$emit("close"),this.onBlur()},onAnimationEnd:function(){this.$emit(this.show?"show":"hide")},onPress:function(text,t){if(""!==text){var e=this.value;"delete"===t?(this.$emit("delete"),this.$emit("update:value",e.slice(0,e.length-1))):"close"===t?this.onClose():e.length<this.maxlength&&(this.$emit("input",text),this.$emit("update:value",e+text))}}},render:function(t){var e=this,title=this.title,n=this.theme,r=this.onPress,o=this.closeButtonText,l=this.slots("title-left"),c=o&&"default"===n,h=(title||c||l)&&t("div",{class:[Xr("title"),"van-hairline--top"]},[l&&t("span",{class:Xr("title-left")},[l]),title&&t("span",[title]),c&&t("span",{attrs:{role:"button",tabindex:"0"},class:Xr("close"),on:{click:this.onClose}},[o])]),d=this.keys.map(function(n){return t($r,{key:n.text,attrs:{text:n.text,type:n.type,theme:n.theme},on:{press:r}},["delete"===n.type&&e.slots("delete")])}),f="custom"===n&&t("div",{class:Xr("sidebar")},[t($r,{attrs:{text:this.deleteText,type:"delete",theme:Zr},on:{press:r}},[this.slots("delete")]),t($r,{attrs:{text:o,type:"close",theme:Jr},on:{press:r}})]);return t("transition",{attrs:{name:this.transition?"van-slide-up":""}},[t("div",{directives:[{name:"show",value:this.show}],style:{zIndex:this.zIndex},class:Xr([n,{"safe-area-inset-bottom":this.safeAreaInsetBottom}]),on:{touchstart:B.d,animationend:this.onAnimationEnd,webkitAnimationEnd:this.onAnimationEnd}},[h,t("div",{class:Xr("body")},[d]),f])])}}),es=n(56),ns=Object(c.a)("pagination"),is=ns[0],rs=ns[1],ss=ns[2];function as(t,text,e){return{number:t,text:text,active:e}}var os=is({props:{value:Number,prevText:String,nextText:String,pageCount:Number,totalItems:Number,forceEllipses:Boolean,mode:{type:String,default:"multi"},itemsPerPage:{type:Number,default:10},showPageSize:{type:Number,default:5}},computed:{count:function(){var t=this.pageCount||Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(1,t)},pages:function(){var t=[],e=this.count;if("multi"!==this.mode)return t;var n=1,r=e,o=void 0!==this.showPageSize&&this.showPageSize<e;o&&(r=(n=Math.max(this.value-Math.floor(this.showPageSize/2),1))+this.showPageSize-1)>e&&(n=(r=e)-this.showPageSize+1);for(var l=n;l<=r;l++){var c=as(l,l,l===this.value);t.push(c)}if(o&&this.showPageSize>0&&this.forceEllipses){if(n>1){var h=as(n-1,"...",!1);t.unshift(h)}if(r<e){var d=as(r+1,"...",!1);t.push(d)}}return t}},watch:{value:{handler:function(t){this.select(t||this.value)},immediate:!0}},methods:{select:function(t,e){t=Math.min(this.count,Math.max(1,t)),this.value!==t&&(this.$emit("input",t),e&&this.$emit("change",t))}},render:function(t){var e=this,n=this.value,r="multi"!==this.mode,o=function(t){return function(){e.select(t,!0)}};return t("ul",{class:rs({simple:r})},[t("li",{class:[rs("item",{disabled:1===n}),rs("prev"),"van-hairline"],on:{click:o(n-1)}},[this.prevText||ss("prev")]),this.pages.map(function(e){return t("li",{class:[rs("item",{active:e.active}),rs("page"),"van-hairline"],on:{click:o(e.number)}},[e.text])}),r&&t("li",{class:rs("page-desc")},[this.slots("pageDesc")||n+"/"+this.count]),t("li",{class:[rs("item",{disabled:n===this.count}),rs("next"),"van-hairline"],on:{click:o(n+1)}},[this.nextText||ss("next")])])}}),ls=Object(c.a)("panel"),cs=ls[0],hs=ls[1];function us(t,e,n,r){return t(Pe,l()([{class:hs(),scopedSlots:{default:function(){return[n.header?n.header():t(at,{attrs:{icon:e.icon,label:e.desc,title:e.title,value:e.status,valueClass:hs("header-value")},class:hs("header")}),t("div",{class:hs("content")},[n.default&&n.default()]),n.footer&&t("div",{class:[hs("footer"),"van-hairline--top"]},[n.footer()])]}}},Object(h.b)(r,!0)]))}us.props={icon:String,desc:String,title:String,status:String};var ds=cs(us),ps=Object(c.a)("password-input"),fs=ps[0],ms=ps[1];function gs(t,e,n,r){for(var o=e.errorInfo||e.info,c=[],i=0;i<e.length;i++){var d=e.value[i],f=0!==i&&!e.gutter,style=void 0;0!==i&&e.gutter&&(style={marginLeft:Object(lt.a)(e.gutter)}),c.push(t("li",{class:{"van-hairline--left":f},style:style},[e.mask?t("i",{style:{visibility:d?"visible":"hidden"}}):d]))}return t("div",{class:ms()},[t("ul",l()([{class:[ms("security"),{"van-hairline--surround":!e.gutter}],on:{touchstart:function(t){t.stopPropagation(),Object(h.a)(r,"focus",t)}}},Object(h.b)(r,!0)]),[c]),o&&t("div",{class:ms(e.errorInfo?"error-info":"info")},[o])])}gs.props={info:String,errorInfo:String,gutter:[String,Number],mask:{type:Boolean,default:!0},value:{type:String,default:""},length:{type:Number,default:6}};var As=fs(gs),vs=Object(c.a)("progress"),bs=vs[0],ys=vs[1],xs=bs({props:{inactive:Boolean,pivotText:String,pivotColor:String,percentage:{type:Number,required:!0,validator:function(t){return t>=0&&t<=100}},showPivot:{type:Boolean,default:!0},color:{type:String,default:L.a},textColor:{type:String,default:L.f}},data:function(){return{pivotWidth:0,progressWidth:0}},mounted:function(){this.getWidth()},watch:{showPivot:function(){this.getWidth()},pivotText:function(){this.getWidth()}},methods:{getWidth:function(){var t=this;this.$nextTick(function(){t.progressWidth=t.$el.offsetWidth,t.pivotWidth=t.$refs.pivot?t.$refs.pivot.offsetWidth:0})}},render:function(t){var e=this.pivotText,n=this.percentage,text=Object(m.b)(e)?e:n+"%",r=this.showPivot&&text,o=this.inactive?"#cacaca":this.color,l={color:this.textColor,background:this.pivotColor||o},c={background:o,width:(this.progressWidth-this.pivotWidth)*n/100+"px"};return t("div",{class:ys()},[t("span",{class:ys("portion",{"with-pivot":r}),style:c},[r&&t("span",{ref:"pivot",style:l,class:ys("pivot")},[text])])])}}),_s=Object(c.a)("pull-refresh"),ws=_s[0],Es=_s[1],Ss=_s[2],Cs=["pulling","loosing","success"],Is=ws({mixins:[P.a],props:{disabled:Boolean,successText:String,pullingText:String,loosingText:String,loadingText:String,value:{type:Boolean,required:!0},successDuration:{type:Number,default:500},animationDuration:{type:Number,default:300},headHeight:{type:Number,default:50}},data:function(){return{status:"normal",height:0,duration:0}},computed:{untouchable:function(){return"loading"===this.status||"success"===this.status||this.disabled}},watch:{value:function(t){var e=this;this.duration=this.animationDuration,!t&&this.successText?(this.status="success",setTimeout(function(){e.setStatus(0)},this.successDuration)):this.setStatus(t?this.headHeight:0,t)}},mounted:function(){this.scrollEl=Object(ot.c)(this.$el)},methods:{onTouchStart:function(t){!this.untouchable&&this.getCeiling()&&(this.duration=0,this.touchStart(t))},onTouchMove:function(t){this.untouchable||(this.touchMove(t),!this.ceiling&&this.getCeiling()&&(this.duration=0,this.startY=t.touches[0].clientY,this.deltaY=0),this.ceiling&&this.deltaY>=0&&"vertical"===this.direction&&(this.setStatus(this.ease(this.deltaY)),Object(B.c)(t)))},onTouchEnd:function(){!this.untouchable&&this.ceiling&&this.deltaY&&(this.duration=this.animationDuration,"loosing"===this.status?(this.setStatus(this.headHeight,!0),this.$emit("input",!0),this.$emit("refresh")):this.setStatus(0))},getCeiling:function(){return this.ceiling=0===Object(ot.d)(this.scrollEl),this.ceiling},ease:function(t){var e=this.headHeight;return t<e?t:t<2*e?Math.round(e+(t-e)/2):Math.round(1.5*e+(t-2*e)/4)},setStatus:function(t,e){this.height=t;var n=e?"loading":0===t?"normal":t<this.headHeight?"pulling":"loosing";n!==this.status&&(this.status=n)}},render:function(t){var e=this.status,text=this[e+"Text"]||Ss(e),style={transition:this.duration+"ms",transform:this.height?"translate3d(0,"+this.height+"px, 0)":""},n=this.slots(e)||[-1!==Cs.indexOf(e)&&t("div",{class:Es("text")},[text]),"loading"===e&&t(_.a,{attrs:{size:"16"}},[text])];return t("div",{class:Es()},[t("div",{class:Es("track"),style:style,on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("div",{class:Es("head")},[n]),this.slots()])])}}),Ms=Object(c.a)("rate"),Bs=Ms[0],Ts=Ms[1];function ks(t,e,n,r){for(var o,c,d,m=e.icon,A=e.color,v=e.count,y=e.voidIcon,x=e.readonly,_=e.disabled,w=e.voidColor,E=e.disabledColor,S=[],i=1;i<=v;i++)S.push((o=e.value,c=i,d=e.allowHalf,o>=c?"full":o+.5>=c&&d?"half":"void"));function C(t){_||x||(Object(h.a)(r,"input",t),Object(h.a)(r,"change",t))}var I=Object(lt.a)(e.gutter);return t("div",l()([{class:Ts(),attrs:{tabindex:"0",role:"radiogroup"}},Object(h.b)(r),{on:{touchmove:function(t){if(!x&&!_&&document.elementFromPoint){Object(B.c)(t);var e=t.touches[0],n=e.clientX,r=e.clientY,o=document.elementFromPoint(n,r);if(o&&o.dataset){var l=o.dataset.score;l&&C(+l)}}}}}]),[S.map(function(n,r){return function(n,r){var style,o="full"===n,l="void"===n,c=r+1,h=Object(lt.a)(e.size);return I&&c!==v&&(style={paddingRight:I}),t("div",{key:r,attrs:{role:"radio",tabindex:"0","aria-setsize":v,"aria-posinset":c,"aria-checked":String(!l)},style:style,class:Ts("item")},[t(f.a,{attrs:{size:h,name:o?m:y,"data-score":c,color:_?E:o?A:w},class:Ts("icon"),on:{click:function(){C(c)}}}),e.allowHalf&&t(f.a,{attrs:{size:h,name:l?y:m,"data-score":c-.5,color:_?E:l?w:A},class:Ts("icon","half"),on:{click:function(){C(c-.5)}}})])}(n,r)})])}ks.props={value:Number,size:[String,Number],gutter:[String,Number],readonly:Boolean,disabled:Boolean,allowHalf:Boolean,icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},color:{type:String,default:"#ffd21e"},voidColor:{type:String,default:"#c7c7c7"},disabledColor:{type:String,default:"#bdbdbd"},count:{type:Number,default:5}};var Rs=Bs(ks),Ls=Object(c.a)("row"),Ds=Ls[0],Ps=Ls[1],Os=Ds({props:{type:String,align:String,justify:String,tag:{type:String,default:"div"},gutter:{type:[Number,String],default:0}},render:function(t){var e,n=this.align,r=this.justify,o="flex"===this.type,l="-"+Number(this.gutter)/2+"px",style=this.gutter?{marginLeft:l,marginRight:l}:{};return t(this.tag,{style:style,class:Ps((e={flex:o},e["align-"+n]=o&&n,e["justify-"+r]=o&&r,e))},[this.slots()])}}),Fs=Object(c.a)("search"),Ns=Fs[0],Us=Fs[1],Qs=Fs[2];function zs(t,e,n,o){var c={attrs:o.data.attrs,on:Object(r.a)({},o.listeners,{input:function(t){Object(h.a)(o,"input",t)},keypress:function(t){13===t.keyCode&&(Object(B.c)(t),Object(h.a)(o,"search",e.value)),Object(h.a)(o,"keypress",t)}})},d=Object(h.b)(o);return delete d.attrs,t("div",l()([{class:Us({"show-action":e.showAction}),style:{background:e.background}},d]),[t("div",{class:Us("content",e.shape)},[function(){if(n.label||e.label)return t("div",{class:Us("label")},[n.label?n.label():e.label])}(),t(pt,l()([{attrs:{type:"search",border:!1,value:e.value,leftIcon:e.leftIcon,rightIcon:e.rightIcon,clearable:e.clearable},scopedSlots:{"left-icon":n["left-icon"],"right-icon":n["right-icon"]}},c]))]),function(){if(e.showAction)return t("div",{class:Us("action")},[n.action?n.action():t("div",{on:{click:function(){Object(h.a)(o,"input",""),Object(h.a)(o,"cancel")}}},[Qs("cancel")])])}()])}zs.props={value:String,label:String,rightIcon:String,showAction:Boolean,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},background:{type:String,default:"#fff"},leftIcon:{type:String,default:"search"}};var Gs=Ns(zs),Hs=Object(c.a)("sidebar"),Vs=Hs[0],js=Hs[1],Ws=Vs({mixins:[te("vanSidebar")],model:{prop:"activeKey"},props:{activeKey:{type:[Number,String],default:0}},render:function(t){return t("div",{class:[js(),"van-hairline--top-bottom"]},[this.slots()])}}),$s=Object(c.a)("sidebar-item"),qs=$s[0],Ys=$s[1],Xs=qs({mixins:[Zt("vanSidebar")],props:Object(r.a)({},tt,{info:[String,Number],title:String}),computed:{select:function(){return this.index===+this.parent.activeKey}},methods:{onClick:function(){this.$emit("click",this.index),this.parent.$emit("input",this.index),this.parent.$emit("change",this.index),J(this.$router,this)}},render:function(t){return t("a",{class:[Ys({select:this.select}),"van-hairline"],on:{click:this.onClick}},[t("div",{class:Ys("text")},[this.title,t(vr.a,{attrs:{info:this.info},class:Ys("info")})])])}}),Ks=Object(c.a)("skeleton"),Js=Ks[0],Zs=Ks[1],ta="100%",ea="60%";function na(t,e,n,r){if(!e.loading)return n.default&&n.default();return t("div",l()([{class:Zs({animate:e.animate})},Object(h.b)(r)]),[function(){if(e.avatar){var n=Object(lt.a)(e.avatarSize);return t("div",{class:Zs("avatar",e.avatarShape),style:{width:n,height:n}})}}(),t("div",{class:Zs("content")},[function(){if(e.title)return t("h3",{class:Zs("title"),style:{width:Object(lt.a)(e.titleWidth)}})}(),function(){for(var n,r=[],o=e.rowWidth,i=0;i<e.row;i++)r.push(t("div",{class:Zs("row"),style:{width:Object(lt.a)((n=i,o===ta&&n===e.row-1?ea:Array.isArray(o)?o[n]:o))}}));return r}()])])}na.props={row:Number,title:Boolean,avatar:Boolean,loading:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},avatarSize:{type:String,default:"32px"},avatarShape:{type:String,default:"round"},titleWidth:{type:[Number,String],default:"40%"},rowWidth:{type:[Number,String,Array],default:ta}};var ia=Js(na),ra=Object(c.a)("sku-header"),sa=ra[0],aa=ra[1];function oa(t,e,n,r){var o=e.sku,c=e.goods,d=e.skuEventBus,m=function(t,e){var n=e.s1;if(n){var r=t.tree.filter(function(t){return"s1"===t.k_s})[0]||{};if(r.v){var o=r.v.filter(function(t){return t.id===n})[0];if(o)return o.imgUrl||o.img_url}}}(o,e.selectedSku)||c.picture;return t("div",l()([{class:[aa(),"van-hairline--bottom"]},Object(h.b)(r)]),[t("div",{class:aa("img-wrap"),on:{click:function(){d.$emit("sku:previewImage",m)}}},[t("img",{attrs:{src:m}})]),t("div",{class:aa("goods-info")},[t("div",{class:"van-sku__goods-name van-ellipsis"},[c.title]),n.default&&n.default(),t(f.a,{attrs:{name:"close"},class:"van-sku__close-icon",on:{click:function(){d.$emit("sku:close")}}})])])}oa.props={sku:Object,goods:Object,skuEventBus:Object,selectedSku:Object};var la=sa(oa),ca=Object(c.a)("sku-row"),ha=ca[0],ua=ca[1];function da(t,e,n,r){return t("div",l()([{class:ua()},Object(h.b)(r)]),[t("div",{class:ua("title")},[e.skuRow.k,"："]),n.default&&n.default()])}da.props={skuRow:Object};var pa=ha(da),fa={QUOTA_LIMIT:0,STOCK_LIMIT:1},ma={LIMIT_TYPE:fa,UNSELECTED_SKU_VALUE_ID:""},ga=function(t){var e={};return t.forEach(function(t){e[t.k_s]=t.v}),e},Aa=function(t,e){var n=Object.keys(e).filter(function(t){return""!==e[t]});return t.length===n.length},va=function(t,e){return t.filter(function(t){return Object.keys(e).every(function(n){return String(t[n])===String(e[n])})})[0]},ba=function(t,e){var n=ga(t);return Object.keys(e).reduce(function(t,r){var o=n[r],l=e[r];if(""!==l){var c=o.filter(function(t){return t.id===l})[0];c&&t.push(c)}return t},[])},ya=function(t,e,n){var o,l=n.key,c=n.valueId,h=Object(r.a)({},e,((o={})[l]=c,o)),d=Object.keys(h).filter(function(t){return""!==h[t]});return t.filter(function(t){return d.every(function(e){return String(h[e])===String(t[e])})}).reduce(function(t,e){return t+=e.stock_num},0)>0},xa={normalizeSkuTree:ga,getSkuComb:va,getSelectedSkuValues:ba,isAllSelected:Aa,isSkuChoosable:ya},_a=(0,Object(c.a)("sku-row-item")[0])({props:{skuList:Array,skuValue:Object,skuKeyStr:String,skuEventBus:Object,selectedSku:Object},computed:{choosable:function(){return ya(this.skuList,this.selectedSku,{key:this.skuKeyStr,valueId:this.skuValue.id})}},methods:{onSelect:function(){this.choosable&&this.skuEventBus.$emit("sku:select",Object(r.a)({},this.skuValue,{skuKeyStr:this.skuKeyStr}))}},render:function(t){return t("span",{class:["van-sku-row__item",{"van-sku-row__item--active":this.skuValue.id===this.selectedSku[this.skuKeyStr],"van-sku-row__item--disabled":!this.choosable}],on:{click:this.onSelect}},[this.skuValue.name])}}),wa=Object(c.a)("stepper"),Ea=wa[0],Sa=wa[1],Ca=Ea({props:{value:null,integer:Boolean,disabled:Boolean,inputWidth:[String,Number],buttonSize:[String,Number],asyncChange:Boolean,disableInput:Boolean,min:{type:[String,Number],default:1},max:{type:[String,Number],default:1/0},step:{type:[String,Number],default:1},defaultValue:{type:[String,Number],default:1}},data:function(){var t=this.range(Object(m.b)(this.value)?this.value:this.defaultValue);return t!==+this.value&&this.$emit("input",t),{currentValue:t}},computed:{minusDisabled:function(){return this.disabled||this.currentValue<=this.min},plusDisabled:function(){return this.disabled||this.currentValue>=this.max},inputStyle:function(){var style={};return this.inputWidth&&(style.width=Object(lt.a)(this.inputWidth)),this.buttonSize&&(style.height=Object(lt.a)(this.buttonSize)),style},buttonStyle:function(){var style={};if(this.buttonSize){var t=Object(lt.a)(this.buttonSize);style.width=t,style.height=t}return style}},watch:{value:function(t){t!==this.currentValue&&(this.currentValue=this.format(t))},currentValue:function(t){this.$emit("input",t),this.$emit("change",t)}},methods:{format:function(t){return""===(t=String(t).replace(/[^0-9.-]/g,""))?0:this.integer?Math.floor(t):+t},range:function(t){return Math.max(Math.min(this.max,this.format(t)),this.min)},onInput:function(t){var e=t.target.value,n=this.format(e);this.asyncChange?(t.target.value=this.currentValue,this.$emit("input",n),this.$emit("change",n)):(+e!==n&&(t.target.value=n),this.currentValue=n)},onChange:function(){var t=this.type;if(this[t+"Disabled"])this.$emit("overlimit",t);else{var e="minus"===t?-this.step:+this.step,n=Math.round(100*(this.currentValue+e))/100;this.asyncChange?(this.$emit("input",n),this.$emit("change",n)):this.currentValue=this.range(n),this.$emit(t)}},onFocus:function(t){this.$emit("focus",t)},onBlur:function(t){this.currentValue=this.range(this.currentValue),this.$emit("blur",t),0===this.currentValue&&(t.target.value=this.currentValue)},longPressStep:function(){var t=this;this.longPressTimer=setTimeout(function(){t.onChange(t.type),t.longPressStep(t.type)},200)},onTouchStart:function(t){var e=this;clearTimeout(this.longPressTimer),this.isLongPress=!1,this.longPressTimer=setTimeout(function(){e.isLongPress=!0,e.onChange(),e.longPressStep()},600)},onTouchEnd:function(t){clearTimeout(this.longPressTimer),this.isLongPress&&t.preventDefault()}},render:function(t){var e=this,n=function(t){return{on:{click:function(){e.type=t,e.onChange()},touchstart:function(){e.type=t,e.onTouchStart(t)},touchend:e.onTouchEnd,touchcancel:e.onTouchEnd}}};return t("div",{class:Sa()},[t("button",l()([{style:this.buttonStyle,class:Sa("minus",{disabled:this.minusDisabled})},n("minus")])),t("input",{attrs:{type:"number",role:"spinbutton","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.currentValue,disabled:this.disabled||this.disableInput},class:Sa("input"),domProps:{value:this.currentValue},style:this.inputStyle,on:{input:this.onInput,focus:this.onFocus,blur:this.onBlur}}),t("button",l()([{style:this.buttonStyle,class:Sa("plus",{disabled:this.plusDisabled})},n("plus")]))])}}),Ia=Object(c.a)("sku-stepper")[0],Ma=fa.QUOTA_LIMIT,Ba=fa.STOCK_LIMIT,Ta=Ia({props:{quota:Number,quotaUsed:Number,hideStock:Boolean,skuEventBus:Object,skuStockNum:Number,selectedSku:Object,selectedNum:Number,stepperTitle:String,hideQuotaText:Boolean,selectedSkuComb:Object,disableStepperInput:Boolean,customStepperConfig:Object},data:function(){return{currentNum:this.selectedNum,limitType:Ba}},watch:{currentNum:function(t){this.skuEventBus.$emit("sku:numChange",t)},stepperLimit:function(t){t<this.currentNum&&(this.currentNum=t)}},computed:{stock:function(){var t=this.customStepperConfig.stockNum;return void 0!==t?t:this.selectedSkuComb?this.selectedSkuComb.stock_num:this.skuStockNum},stockText:function(){var t=this.customStepperConfig.stockFormatter;return t?t(this.stock):"剩余"+this.stock+"件"},quotaText:function(){var t=this.customStepperConfig,e=t.quotaText;if(t.hideQuotaText)return"";var text="";return e?text=e:this.quota>0&&(text="每人限购"+this.quota+"件"),text},stepperLimit:function(){var t,e=this.quota-this.quotaUsed;return this.quota>0&&e<=this.stock?(t=e<0?0:e,this.limitType=Ma):(t=this.stock,this.limitType=Ba),t}},methods:{setCurrentNum:function(t){this.currentNum=t},onOverLimit:function(t){this.skuEventBus.$emit("sku:overLimit",{action:t,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed})},onChange:function(t){var e=this.customStepperConfig.handleStepperChange;e&&e(t),this.$emit("change",t)}},render:function(t){var e=this;return t("div",{class:"van-sku-stepper-stock"},[t("div",{class:"van-sku-stepper-container"},[t("div",{class:"van-sku__stepper-title"},[this.stepperTitle||"购买数量","："]),t(Ca,{class:"van-sku__stepper",attrs:{max:this.stepperLimit,disableInput:this.disableStepperInput},on:{overlimit:this.onOverLimit,change:this.onChange},model:{value:e.currentNum,callback:function(t){e.currentNum=t}}})]),!this.hideStock&&t("div",{class:"van-sku__stock"},[this.stockText]),!this.hideQuotaText&&this.quotaText&&t("div",{class:"van-sku__quota"},[this.quotaText])])}});function ka(t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)}var Ra=n(76);function La(t){return Array.isArray(t)?t:[t]}function Da(t,e){return new Promise(function(n){var r=new FileReader;r.onload=function(t){n(t.target.result)},"dataUrl"===e?r.readAsDataURL(t):"text"===e&&r.readAsText(t)})}var Pa=Object(c.a)("uploader"),Oa=Pa[0],Fa=Pa[1];function Na(t){return 0===t.indexOf("data:image")}var Ua=Oa({inheritAttrs:!1,model:{prop:"fileList"},props:{fileList:Array,disabled:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,previewSize:[Number,String],name:{type:[String,Number],default:""},previewImage:{type:Boolean,default:!0},accept:{type:String,default:"image/*"},resultType:{type:String,default:"dataUrl"},maxSize:{type:Number,default:Number.MAX_VALUE},maxCount:{type:Number,default:Number.MAX_VALUE}},computed:{detail:function(){return{name:this.name}}},methods:{onChange:function(t){var e=this,n=t.target.files;if(!this.disabled&&n.length){if(n=1===n.length?n[0]:[].slice.call(n),this.beforeRead){var r=this.beforeRead(n,this.detail);if(!r)return void this.resetInput();if(r.then)return void r.then(function(){e.readFile(n)}).catch(this.resetInput)}this.readFile(n)}},readFile:function(t){var e=this,n=function(t,e){return La(t).some(function(t){return t.size>e})}(t,this.maxSize);if(Array.isArray(t)){var r=this.maxCount-this.fileList.length;t.length>r&&(t=t.slice(0,r)),Promise.all(t.map(function(t){return Da(t,e.resultType)})).then(function(r){var o=t.map(function(t,e){return{file:t,content:r[e]}});e.onAfterRead(o,n)})}else Da(t,this.resultType).then(function(content){e.onAfterRead({file:t,content:content},n)})},onAfterRead:function(t,e){e?this.$emit("oversize",t,this.detail):(this.resetInput(),this.$emit("input",[].concat(this.fileList,La(t))),this.afterRead&&this.afterRead(t,this.detail))},onDelete:function(t,e){var n=this.fileList.slice(0);n.splice(e,1),this.$emit("input",n),this.$emit("delete",t)},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onPreviewImage:function(t){var e=this.fileList.map(function(t){return t.content}).filter(function(content){return Na(content)});lr({images:e,startPosition:e.indexOf(t.content)})},renderPreview:function(){var t=this,e=this.$createElement;if(this.previewImage)return this.fileList.map(function(n,r){return e("div",{class:Fa("preview")},[e(Se.a,{attrs:{fit:"cover",src:n.content,width:t.previewSize,height:t.previewSize},class:Fa("preview-image"),scopedSlots:{error:function(){return[e(f.a,{class:Fa("file-icon"),attrs:{name:"description"}}),e("div",{class:[Fa("file-name"),"van-ellipsis"]},[n.file.name])]}},on:{click:function(){Na(n.content)&&t.onPreviewImage(n)}}}),e(f.a,{attrs:{name:"delete"},class:Fa("preview-delete"),on:{click:function(){t.onDelete(n,r)}}})])})},renderUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var style,slot=this.slots(),e=t("input",{attrs:Object(r.a)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:Fa("input"),on:{change:this.onChange}});if(slot)return t("div",{class:Fa("input-wrapper")},[slot,e]);if(this.previewSize){var n=Object(lt.a)(this.previewSize);style={width:n,height:n}}return t("div",{class:Fa("upload"),style:style},[t(f.a,{attrs:{name:"plus"},class:Fa("upload-icon")}),this.uploadText&&t("span",{class:Fa("upload-text")},[this.uploadText]),e])}}},render:function(t){return t("div",{class:Fa()},[t("div",{class:Fa("wrapper")},[this.renderPreview(),this.renderUpload()])])}}),Qa=Object(c.a)("sku-img-uploader"),za=Qa[0],Ga=Qa[1],Ha=za({props:{value:String,uploadImg:Function,maxSize:{type:Number,default:6}},data:function(){return{paddingImg:""}},computed:{imgList:function(){return this.value&&!this.paddingImg?[this.value]:[]}},methods:{afterReadFile:function(t){var e=this;this.paddingImg=t.content,this.uploadImg(t.file,t.content).then(function(img){e.$emit("input",img),e.$nextTick(function(){e.paddingImg=""})}).catch(function(){e.paddingImg=""})},onOversize:function(){this.$toast("最大可上传图片为"+this.maxSize+"MB，请尝试压缩图片尺寸")}},render:function(t){var e=this,n=this.imgList,r=this.paddingImg,o=(r||n.length>0)&&t("div",{class:"van-clearfix"},[n.map(function(img){return t("div",{class:Ga("img")},[t("img",{attrs:{src:img}}),t(f.a,{attrs:{name:"clear"},class:Ga("delete"),on:{click:function(){e.$emit("input","")}}})])}),r&&t("div",{class:Ga("img")},[t("img",{attrs:{src:r}}),t(_.a,{attrs:{type:"spinner"},class:Ga("uploading")})])]);return t("div",{class:Ga()},[t(Ua,{attrs:{disabled:!!r,afterRead:this.afterReadFile,maxSize:1024*this.maxSize*1024},on:{oversize:this.onOversize}},[t("div",{class:Ga("header")},[r?t("div",["正在上传..."]):[t(f.a,{attrs:{name:"photograph"}}),t("span",{class:"label"},[this.value?"重拍":"拍照"," 或 "]),t(f.a,{attrs:{name:"photo"}}),t("span",{class:"label"},[this.value?"重新选择照片":"选择照片"])]])]),o])}}),Va=Object(c.a)("sku-messages"),ja=Va[0],Wa=Va[1],$a={id_no:"输入身份证号码",text:"输入文本",tel:"输入数字",email:"输入邮箱",date:"点击选择日期",time:"点击选择时间",textarea:"点击填写段落文本",mobile:"输入手机号码"},qa=ja({props:{messages:Array,messageConfig:Object,goodsId:[Number,String]},data:function(){return{messageValues:this.resetMessageValues(this.messages)}},watch:{messages:function(t){this.messageValues=this.resetMessageValues(t)}},methods:{resetMessageValues:function(t){return(t||[]).map(function(){return{value:""}})},getType:function(t){return 1==+t.multiple?"textarea":"id_no"===t.type?"text":t.datetime>0?"datetime-local":t.type},getMessages:function(){var t=this,e={};return this.messageValues.forEach(function(n,r){var o=n.value;t.messages[r].datetime>0&&(o=o.replace(/T/g," ")),e["message_"+r]=o}),e},getCartMessages:function(){var t=this,e={};return this.messageValues.forEach(function(n,r){var o=n.value,l=t.messages[r];l.datetime>0&&(o=o.replace(/T/g," ")),e[l.name]=o}),e},getPlaceholder:function(t){var e=1==+t.multiple?"textarea":t.type;return(this.messageConfig.placeholderMap||{})[e]||$a[e]},validateMessages:function(){for(var t=this.messageValues,i=0;i<t.length;i++){var e=t[i].value,n=this.messages[i];if(""===e){if("1"===String(n.required))return("image"===n.type?"请上传":"请填写")+n.name}else{if("tel"===n.type&&!Object(Ra.a)(e))return"请填写正确的数字格式留言";if("mobile"===n.type&&!/^\d{6,20}$/.test(e))return"手机号长度为6-20位数字";if("email"===n.type&&!ka(e))return"请填写正确的邮箱";if("id_no"===n.type&&(e.length<15||e.length>18))return"请填写正确的身份证号码"}}}},render:function(t){var e=this;return t(Pe,{class:Wa()},[this.messages.map(function(n,r){return"image"===n.type?t(at,{class:Wa("image-cell"),attrs:{label:"仅限一张",title:n.name,required:"1"===String(n.required)},key:e.goodsId+"-"+r},[t(Ha,{attrs:{uploadImg:e.messageConfig.uploadImg,maxSize:e.messageConfig.uploadMaxSize},model:{value:e.messageValues[r].value,callback:function(t){e.messageValues[r].value=t}}})]):t(pt,{attrs:{maxlength:"200",label:n.name,required:"1"===String(n.required),placeholder:e.getPlaceholder(n),type:e.getType(n)},key:e.goodsId+"-"+r,model:{value:e.messageValues[r].value,callback:function(t){e.messageValues[r].value=t}}})})])}}),Ya=Object(c.a)("sku-actions"),Xa=Ya[0],Ka=Ya[1];function Ja(t,e,n,r){var o=function(t){return function(){e.skuEventBus.$emit(t)}};return t("div",l()([{class:Ka()},Object(h.b)(r)]),[e.showAddCartBtn&&t(bt,{attrs:{square:!0,size:"large",type:"warning",text:"加入购物车"},on:{click:o("sku:addCart")}}),t(bt,{attrs:{square:!0,size:"large",type:"danger",text:e.buyText||"立即购买"},on:{click:o("sku:buy")}})])}Ja.props={buyText:String,skuEventBus:Object,showAddCartBtn:Boolean};var Za=Xa(Ja),to=Object(c.a)("sku")[0],eo=fa.QUOTA_LIMIT,no=to({props:{sku:Object,goods:Object,quota:Number,value:Boolean,buyText:String,quotaUsed:Number,goodsId:[Number,String],hideStock:Boolean,hideQuotaText:Boolean,stepperTitle:String,getContainer:Function,customSkuValidator:Function,closeOnClickOverlay:Boolean,disableStepperInput:Boolean,resetStepperOnHide:Boolean,resetSelectedSkuOnHide:Boolean,initialSku:{type:Object,default:function(){return{}}},showSoldoutSku:{type:Boolean,default:!0},showAddCartBtn:{type:Boolean,default:!0},bodyOffsetTop:{type:Number,default:200},messageConfig:{type:Object,default:function(){return{placeholderMap:{},uploadImg:function(){return Promise.resolve()},uploadMaxSize:5}}},customStepperConfig:{type:Object,default:function(){return{}}}},data:function(){return{selectedSku:{},selectedNum:1,show:this.value}},watch:{show:function(t){if(this.$emit("input",t),!t){var e=ba(this.sku.tree,this.selectedSku);this.$emit("sku-close",{selectedSkuValues:e,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}),this.resetStepperOnHide&&this.resetStepper(),this.resetSelectedSkuOnHide&&this.resetSelectedSku(this.skuTree)}},value:function(t){this.show=t},skuTree:function(t){this.resetSelectedSku(t)}},computed:{skuGroupClass:function(){return["van-sku-group-container","van-hairline--bottom",{"van-sku-group-container--hide-soldout":!this.showSoldoutSku}]},bodyStyle:function(){if(!this.$isServer)return{maxHeight:window.innerHeight-this.bodyOffsetTop+"px"}},isSkuCombSelected:function(){return Aa(this.sku.tree,this.selectedSku)},isSkuEmpty:function(){return 0===Object.keys(this.sku).length},hasSku:function(){return!this.sku.none_sku},selectedSkuComb:function(){return this.hasSku?this.isSkuCombSelected?va(this.sku.list,this.selectedSku):null:{id:this.sku.collection_id,price:Math.round(100*this.sku.price),stock_num:this.sku.stock_num}},price:function(){return this.selectedSkuComb?(this.selectedSkuComb.price/100).toFixed(2):this.sku.price},skuTree:function(){return this.sku.tree||[]},imageList:function(){var t=[this.goods.picture];if(this.skuTree.length>0){var e=this.skuTree.filter(function(t){return"s1"===t.k_s})[0]||{};if(!e.v)return t;e.v.forEach(function(e){var img=e.imgUrl||e.img_url;img&&t.push(img)})}return t}},created:function(){var t=new yt.default;this.skuEventBus=t,t.$on("sku:close",this.onClose),t.$on("sku:select",this.onSelect),t.$on("sku:numChange",this.onNumChange),t.$on("sku:previewImage",this.onPreviewImage),t.$on("sku:overLimit",this.onOverLimit),t.$on("sku:addCart",this.onAddCart),t.$on("sku:buy",this.onBuy),this.resetStepper(),this.resetSelectedSku(this.skuTree),this.$emit("after-sku-create",t)},methods:{resetStepper:function(){var t=this.$refs.skuStepper,e=this.initialSku.selectedNum,n=Object(m.b)(e)?e:1;t?t.setCurrentNum(n):this.selectedNum=n},resetSelectedSku:function(t){var e=this;this.selectedSku={},t.forEach(function(t){e.selectedSku[t.k_s]=e.initialSku[t.k_s]||""}),t.forEach(function(t){var n=t.k_s,r=t.v[0].id;1===t.v.length&&ya(e.sku.list,e.selectedSku,{key:n,valueId:r})&&(e.selectedSku[n]=r)})},getSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getMessages():{}},getSkuCartMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getCartMessages():{}},validateSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.validateMessages():""},validateSku:function(){if(0===this.selectedNum)return"商品已经无法购买啦";if(this.isSkuCombSelected)return this.validateSkuMessages();if(this.customSkuValidator){var t=this.customSkuValidator(this);if(t)return t}return"请先选择商品规格"},onClose:function(){this.show=!1},onSelect:function(t){var e,n;this.selectedSku=this.selectedSku[t.skuKeyStr]===t.id?Object(r.a)({},this.selectedSku,((e={})[t.skuKeyStr]="",e)):Object(r.a)({},this.selectedSku,((n={})[t.skuKeyStr]=t.id,n)),this.$emit("sku-selected",{skuValue:t,selectedSku:this.selectedSku,selectedSkuComb:this.selectedSkuComb})},onNumChange:function(t){this.selectedNum=t},onPreviewImage:function(t){var e=this,n=this.imageList.findIndex(function(image){return image===t}),r={index:n,imageList:this.imageList,indexImage:t};this.$emit("open-preview",r),lr({images:this.imageList,startPosition:n,onClose:function(){e.$emit("close-preview",r)}})},onOverLimit:function(data){var t=data.action,e=data.limitType,n=data.quota,r=data.quotaUsed,o=this.customStepperConfig.handleOverLimit;if(o)o(data);else if("minus"===t)Object(ft.a)("至少选择一件");else if("plus"===t)if(e===eo){var l="限购"+n+"件";r>0&&(l+="，你已购买"+r+"件"),Object(ft.a)(l)}else Object(ft.a)("库存不足")},onAddCart:function(){this.onBuyOrAddCart("add-cart")},onBuy:function(){this.onBuyOrAddCart("buy-clicked")},onBuyOrAddCart:function(t){var e=this.validateSku();e?Object(ft.a)(e):this.$emit(t,this.getSkuData())},getSkuData:function(){return{goodsId:this.goodsId,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb,messages:this.getSkuMessages(),cartMessages:this.getSkuCartMessages()}}},render:function(t){var e=this;if(!this.isSkuEmpty){var n=this.sku,r=this.goods,o=this.price,l=this.skuEventBus,c=this.selectedSku,h=this.selectedNum,d=this.stepperTitle,f=this.hideQuotaText,m=this.selectedSkuComb,A={price:o,selectedNum:h,skuEventBus:l,selectedSku:c,selectedSkuComb:m},v=function(t){return e.slots(t,A)},y=v("sku-header")||t(la,{attrs:{sku:n,goods:r,skuEventBus:l,selectedSku:c}},[v("sku-header-price")||t("div",{class:"van-sku__goods-price"},[t("span",{class:"van-sku__price-symbol"},["￥"]),t("span",{class:"van-sku__price-num"},[o])])]),_=v("sku-group")||this.hasSku&&t("div",{class:this.skuGroupClass},[this.skuTree.map(function(e){return t(pa,{attrs:{skuRow:e}},[e.v.map(function(r){return t(_a,{attrs:{skuList:n.list,skuValue:r,selectedSku:c,skuEventBus:l,skuKeyStr:e.k_s}})})])})]),w=v("sku-stepper")||t(Ta,{ref:"skuStepper",attrs:{quota:this.quota,hideStock:this.hideStock,quotaUsed:this.quotaUsed,skuEventBus:l,selectedNum:h,selectedSku:c,stepperTitle:d,skuStockNum:n.stock_num,hideQuotaText:f,selectedSkuComb:m,disableStepperInput:this.disableStepperInput,customStepperConfig:this.customStepperConfig},on:{change:function(t){e.$emit("stepper-change",t)}}}),E=v("sku-messages")||t(qa,{ref:"skuMessages",attrs:{goodsId:this.goodsId,messageConfig:this.messageConfig,messages:n.messages}}),S=v("sku-actions")||t(Za,{attrs:{buyText:this.buyText,skuEventBus:l,showAddCartBtn:this.showAddCartBtn}});return t(x,{attrs:{position:"bottom",getContainer:this.getContainer,closeOnClickOverlay:this.closeOnClickOverlay},class:"van-sku-container",model:{value:e.show,callback:function(t){e.show=t}}},[y,t("div",{class:"van-sku-body",style:this.bodyStyle},[v("sku-body-top"),_,v("extra-sku-group"),w,E]),S])}}});no.SkuActions=Za,no.SkuHeader=la,no.SkuMessages=qa,no.SkuStepper=Ta,no.SkuRow=pa,no.SkuRowItem=_a,no.skuHelper=xa,no.skuConstants=ma;var io=no,ro=Object(c.a)("slider"),so=ro[0],ao=ro[1],oo=so({mixins:[P.a],props:{min:Number,value:Number,disabled:Boolean,vertical:Boolean,activeColor:String,inactiveColor:String,max:{type:Number,default:100},step:{type:Number,default:1},barHeight:{type:String,default:"2px"}},computed:{range:function(){return this.max-this.min}},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){if(!this.disabled){"start"===this.dragStatus&&this.$emit("drag-start"),Object(B.c)(t,!0),this.touchMove(t),this.dragStatus="draging";var rect=this.$el.getBoundingClientRect(),e=(this.vertical?this.deltaY:this.deltaX)/(this.vertical?rect.height:rect.width)*this.range;this.newValue=this.startValue+e,this.updateValue(this.newValue)}},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.newValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){if(t.stopPropagation(),!this.disabled){var rect=this.$el.getBoundingClientRect(),e=(this.vertical?t.clientY-rect.top:t.clientX-rect.left)/(this.vertical?rect.height:rect.width)*this.range+this.min;this.updateValue(e,!0)}},updateValue:function(t,e){t=this.format(t),this.$emit("input",t),e&&this.$emit("change",t)},format:function(t){return Math.round(Math.max(this.min,Math.min(t,this.max))/this.step)*this.step}},render:function(t){var e,n=this.vertical,style={background:this.inactiveColor},r=n?"width":"height",o=((e={})[n?"height":"width"]=100*(this.value-this.min)/this.range+"%",e[r]=this.barHeight,e.background=this.activeColor,e);return t("div",{style:style,class:ao({disabled:this.disabled,vertical:n}),on:{click:this.onClick}},[t("div",{class:ao("bar"),style:o},[t("div",{attrs:{role:"slider",tabindex:this.disabled?-1:0,"aria-valuemin":this.min,"aria-valuenow":this.value,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal"},class:ao("button-wrapper"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots("button")||t("div",{class:ao("button")})])])])}}),lo=Object(c.a)("step"),co=lo[0],ho=lo[1],uo=co({beforeCreate:function(){var t=this.$parent.steps,e=this.$parent.slots().indexOf(this.$vnode);t.splice(-1===e?t.length:e,0,this)},beforeDestroy:function(){var t=this.$parent.steps.indexOf(this);t>-1&&this.$parent.steps.splice(t,1)},computed:{status:function(){var t=this.$parent.steps.indexOf(this),e=this.$parent.active;return t<e?"finish":t===e?"process":void 0}},render:function(t){var e,n=this.slots,r=this.status,o=this.$parent,l=o.activeIcon,c=o.activeColor,h=o.inactiveIcon,d=o.direction,m="process"===r&&{color:c};return t("div",{class:["van-hairline",ho([d,(e={},e[r]=r,e)])]},[t("div",{class:ho("title"),style:m},[this.slots()]),t("div",{class:ho("circle-container")},[function(){if("process"===r)return n("active-icon")||t(f.a,{class:ho("icon"),attrs:{name:l,color:c}});var e=n("inactive-icon");return h||e?e||t(f.a,{class:ho("icon"),attrs:{name:h}}):t("i",{class:ho("circle")})}()]),t("div",{class:ho("line")})])}}),po=Object(c.a)("steps"),fo=po[0],mo=po[1],go=fo({props:{active:Number,inactiveIcon:String,direction:{type:String,default:"horizontal"},activeColor:{type:String,default:L.d},activeIcon:{type:String,default:"checked"}},data:function(){return{steps:[]}},render:function(t){return t("div",{class:mo([this.direction])},[t("div",{class:mo("items")},[this.slots()])])}}),Ao=Object(c.a)("submit-bar"),vo=Ao[0],bo=Ao[1],yo=Ao[2];function xo(t,e,n,r){var o=e.tip,c=e.price,d=e.tipIcon;return t("div",l()([{class:bo({"safe-area-inset-bottom":e.safeAreaInsetBottom})},Object(h.b)(r)]),[n.top&&n.top(),function(){if(n.tip||o)return t("div",{class:bo("tip")},[d&&t(f.a,{class:bo("tip-icon"),attrs:{name:d}}),o&&t("span",{class:bo("tip-text")},[o]),n.tip&&n.tip()])}(),t("div",{class:bo("bar")},[n.default&&n.default(),function(){if("number"==typeof c){var n=e.currency+" "+(c/100).toFixed(e.decimalLength);return t("div",{class:bo("text")},[t("span",[e.label||yo("label")]),t("span",{class:bo("price")},[n]),e.suffixLabel&&t("span",{class:bo("suffix-label")},[e.suffixLabel])])}}(),t(bt,{attrs:{square:!0,size:"large",type:e.buttonType,loading:e.loading,disabled:e.disabled,text:e.loading?"":e.buttonText},class:bo("button"),on:{click:function(){Object(h.a)(r,"submit")}}})])])}xo.props={tip:String,tipIcon:String,label:String,loading:Boolean,disabled:Boolean,buttonText:String,suffixLabel:String,safeAreaInsetBottom:Boolean,price:{type:Number,default:null},decimalLength:{type:Number,default:2},currency:{type:String,default:"¥"},buttonType:{type:String,default:"danger"}};var _o=vo(xo),wo=Object(c.a)("swipe-cell"),Eo=wo[0],So=wo[1],Co=Eo({mixins:[P.a,Ai({event:"touchstart",method:"onClick"})],props:{onClose:Function,disabled:Boolean,leftWidth:Number,rightWidth:Number,name:{type:[String,Number],default:""}},data:function(){return{offset:0,dragging:!1}},computed:{computedLeftWidth:function(){return this.leftWidth||this.getWidthByRef("left")},computedRightWidth:function(){return this.rightWidth||this.getWidthByRef("right")}},methods:{getWidthByRef:function(t){return this.$refs[t]?this.$refs[t].getBoundingClientRect().width:0},open:function(t){var e="left"===t?this.computedLeftWidth:-this.computedRightWidth;this.swipeMove(e),this.resetSwipeStatus()},close:function(){this.offset=0},resetSwipeStatus:function(){this.swiping=!1,this.opened=!0},swipeMove:function(t){void 0===t&&(t=0),this.offset=D(t,-this.computedRightWidth,this.computedLeftWidth),this.offset?this.swiping=!0:this.opened=!1},swipeLeaveTransition:function(t){var e=this.offset,n=this.computedLeftWidth,r=this.computedRightWidth,o=this.opened?.85:.15;"right"===t&&-e>r*o&&r>0?this.open("right"):"left"===t&&e>n*o&&n>0?this.open("left"):this.swipeMove(0)},startDrag:function(t){this.disabled||(this.dragging=!0,this.startOffset=this.offset,this.touchStart(t))},onDrag:function(t){this.disabled||(this.touchMove(t),"horizontal"===this.direction&&(Object(B.c)(t),this.swipeMove(this.deltaX+this.startOffset)))},endDrag:function(){this.disabled||(this.dragging=!1,this.swiping&&this.swipeLeaveTransition(this.offset>0?"left":"right"))},onClick:function(t){void 0===t&&(t="outside"),this.$emit("click",t),this.offset&&(this.onClose?this.onClose(t,this,{name:this.name}):this.swipeMove(0))}},render:function(t){var e=this,n=function(t,n){return function(r){n&&r.stopPropagation(),e.onClick(t)}},r={transform:"translate3d("+this.offset+"px, 0, 0)",transition:this.dragging?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)"};return t("div",{class:So(),on:{click:n("cell"),touchstart:this.startDrag,touchmove:this.onDrag,touchend:this.endDrag,touchcancel:this.endDrag}},[t("div",{class:So("wrapper"),style:r,on:{transitionend:function(){e.swiping=!1}}},[this.slots("left")&&t("div",{ref:"left",class:So("left"),on:{click:n("left",!0)}},[this.slots("left")]),this.slots(),this.slots("right")&&t("div",{ref:"right",class:So("right"),on:{click:n("right",!0)}},[this.slots("right")])])])}}),Io=Object(c.a)("tabbar"),Mo=Io[0],Bo=Io[1],To=Mo({mixins:[te("vanTabbar")],props:{route:Boolean,activeColor:String,inactiveColor:String,safeAreaInsetBottom:Boolean,value:{type:[String,Number],default:0},border:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},zIndex:{type:Number,default:1}},watch:{children:function(){this.setActiveItem()},value:function(){this.setActiveItem()}},methods:{setActiveItem:function(){var t=this;this.children.forEach(function(e,n){e.active=(e.name||n)===t.value})},onChange:function(t){t!==this.value&&(this.$emit("input",t),this.$emit("change",t))}},render:function(t){return t("div",{style:{zIndex:this.zIndex},class:[{"van-hairline--top-bottom":this.border},Bo({fixed:this.fixed,"safe-area-inset-bottom":this.safeAreaInsetBottom})]},[this.slots()])}}),ko=Object(c.a)("tabbar-item"),Ro=ko[0],Lo=ko[1],Do=Ro({mixins:[Zt("vanTabbar")],props:Object(r.a)({},tt,{icon:String,dot:Boolean,name:[String,Number],info:[String,Number]}),data:function(){return{active:!1}},computed:{routeActive:function(){var t=this.to,e=this.$route;if(t&&e){var path=Object(m.c)(t)?t.path:t;return e.path===path}}},methods:{onClick:function(t){this.parent.onChange(this.name||this.index),this.$emit("click",t),J(this.$router,this)}},render:function(t){var e=this.icon,n=this.slots,r=this.parent.route?this.routeActive:this.active,o=this.parent[r?"activeColor":"inactiveColor"];return t("div",{class:Lo({active:r}),style:{color:o},on:{click:this.onClick}},[t("div",{class:Lo("icon",{dot:this.dot})},[n("icon",{active:r})||e&&t(f.a,{attrs:{name:e}}),t(vr.a,{attrs:{info:this.info}})]),t("div",{class:Lo("text")},[n("default",{active:r})])])}}),Po=Object(c.a)("tree-select"),Oo=Po[0],Fo=Po[1];function No(t,e,n,r){var o=e.height,c=e.items,d=e.mainActiveIndex,m=e.activeId,A=(c[d]||{}).children||[];return t("div",l()([{class:Fo(),style:{height:o+"px"}},Object(h.b)(r)]),[t("div",{class:Fo("nav")},[c.map(function(e,n){return t("div",{key:n,class:["van-ellipsis",Fo("nav-item",{active:d===n,disabled:e.disabled})],on:{click:function(){e.disabled||Object(h.a)(r,"navclick",n)}}},[e.text])})]),t("div",{class:Fo("content")},[A.map(function(e){return t("div",{key:e.id,class:["van-ellipsis",Fo("item",{active:m===e.id,disabled:e.disabled})],on:{click:function(){e.disabled||Object(h.a)(r,"itemclick",e)}}},[e.text,m===e.id&&t(f.a,{attrs:{name:"checked",size:"16px"},class:Fo("selected")})])})])])}No.props={items:Array,mainActiveIndex:Number,activeId:{type:[Number,String],default:0},height:{type:Number,default:300}};var Uo=Oo(No),Qo=[I,Jt,ve,X,bt,Te,at,Pe,Fe,ze,circle,col,tn,an,dn,vn,En,Rn,Nn,ii,di,dialog,gi,xi,pt,Ci,ki,Oi,Qi,Vi,f.a,Se.a,lr,pr,Ar,vr.a,Er,_.a,Br,Lr,Hr,ts,es.a,os,ds,As,j,x,xs,Is,oe,re,Rs,Os,Gs,Ws,Xs,ia,io,oo,uo,Ca,go,_o,qi,Co,Ji,zt,Wt,Gn,To,Do,Jn,Ee,ft.a,Uo,Ua],zo=function(t){Qo.forEach(function(e){t.use(e)})};"undefined"!=typeof window&&window.Vue&&zo(window.Vue);e.a={install:zo,version:"2.0.5"}},133:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise(function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var l in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n}),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(l,e.headers[l]);s.send(e.body||null)})}},135:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,l=r(),c=l.default;void 0===c&&(c=[]);var h=l.placeholder;return n._isMounted?c:(n.$once("hook:mounted",function(){n.$forceUpdate()}),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):c.length>0?c.map(function(){return t(!1)}):t(!1))}};t.exports=r},137:function(t,e,n){"use strict";(function(t){let r,o,l;n.d(e,"a",function(){return c});const g={env:{emscripten_notify_memory_growth:function(t){l=new Uint8Array(o.exports.memory.buffer)}}};class c{init(){return r||(r="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+h).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,g)).then(this._init):WebAssembly.instantiate(t.from(h,"base64"),g).then(this._init))}_init(t){o=t.instance,g.env.emscripten_notify_memory_growth(0)}decode(t,g=0){if(!o)throw new Error("ZSTDDecoder: Await .init() before decoding.");const e=t.byteLength,n=o.exports.malloc(e);l.set(t,n),g=g||Number(o.exports.ZSTD_findDecompressedSize(n,e));const r=o.exports.malloc(g),i=o.exports.ZSTD_decompress(r,g,n,e),c=l.slice(r,r+i);return o.exports.free(n),o.exports.free(r),c}}const h="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"}).call(this,n(131).Buffer)},15:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});var r=/-(\w)/g;function o(t){return t.replace(r,function(t,e){return e.toUpperCase()})}function l(t){return(t<10?"0":"")+t}},186:function(t,e,n){var content=n(187);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(41).default)("3260e616",content,!0,{sourceMap:!1})},187:function(t,e,n){(t.exports=n(40)(!1)).push([t.i,'@-webkit-keyframes van-slide-up-enter{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes van-slide-up-enter{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@-webkit-keyframes van-slide-up-leave{to{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes van-slide-up-leave{to{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@-webkit-keyframes van-slide-down-enter{0%{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@keyframes van-slide-down-enter{0%{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@-webkit-keyframes van-slide-down-leave{to{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@keyframes van-slide-down-leave{to{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@-webkit-keyframes van-slide-left-enter{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes van-slide-left-enter{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes van-slide-left-leave{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes van-slide-left-leave{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes van-slide-right-enter{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@keyframes van-slide-right-enter{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@-webkit-keyframes van-slide-right-leave{to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@keyframes van-slide-right-leave{to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@-webkit-keyframes van-fade-in{0%{opacity:0}to{opacity:1}}@keyframes van-fade-in{0%{opacity:0}to{opacity:1}}@-webkit-keyframes van-fade-out{0%{opacity:1}to{opacity:0}}@keyframes van-fade-out{0%{opacity:1}to{opacity:0}}@-webkit-keyframes van-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes van-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes van-circular{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40}to{stroke-dasharray:90,150;stroke-dashoffset:-120}}@keyframes van-circular{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40}to{stroke-dasharray:90,150;stroke-dashoffset:-120}}@-webkit-keyframes van-notice-bar-play{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes van-notice-bar-play{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes van-notice-bar-play-infinite{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes van-notice-bar-play-infinite{to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes van-skeleton-blink{50%{opacity:.6}}@keyframes van-skeleton-blink{50%{opacity:.6}}html{-webkit-tap-highlight-color:transparent}body{margin:0}a{text-decoration:none}[class*=van-]:focus,a:focus,button:focus,input:focus,textarea:focus{outline:0}ol,ul{margin:0;padding:0;list-style:none}button,input,textarea{color:inherit;font:inherit}.van-ellipsis{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.van-clearfix:after{display:table;clear:both;content:""}[class*=van-hairline]{position:relative}[class*=van-hairline]:after{position:absolute;box-sizing:border-box;content:" ";pointer-events:none;top:-50%;right:-50%;bottom:-50%;left:-50%;border:0 solid #ebedf0;-webkit-transform:scale(.5);transform:scale(.5)}.van-hairline--top:after{border-top-width:1px}.van-hairline--left:after{border-left-width:1px}.van-hairline--right:after{border-right-width:1px}.van-hairline--bottom:after{border-bottom-width:1px}.van-hairline--top-bottom:after{border-width:1px 0}.van-hairline--surround:after{border-width:1px}.van-fade-enter-active{-webkit-animation:van-fade-in .3s;animation:van-fade-in .3s}.van-fade-leave-active{-webkit-animation:van-fade-out .3s;animation:van-fade-out .3s}.van-slide-up-enter-active{-webkit-animation:van-slide-up-enter .3s ease both;animation:van-slide-up-enter .3s ease both}.van-slide-up-leave-active{-webkit-animation:van-slide-up-leave .3s ease both;animation:van-slide-up-leave .3s ease both}.van-slide-down-enter-active{-webkit-animation:van-slide-down-enter .3s ease both;animation:van-slide-down-enter .3s ease both}.van-slide-down-leave-active{-webkit-animation:van-slide-down-leave .3s ease both;animation:van-slide-down-leave .3s ease both}.van-slide-left-enter-active{-webkit-animation:van-slide-left-enter .3s ease both;animation:van-slide-left-enter .3s ease both}.van-slide-left-leave-active{-webkit-animation:van-slide-left-leave .3s ease both;animation:van-slide-left-leave .3s ease both}.van-slide-right-enter-active{-webkit-animation:van-slide-right-enter .3s ease both;animation:van-slide-right-enter .3s ease both}.van-slide-right-leave-active{-webkit-animation:van-slide-right-leave .3s ease both;animation:van-slide-right-leave .3s ease both}.van-info{position:absolute;top:-8px;right:0;box-sizing:border-box;min-width:16px;padding:0 3px;color:#fff;font-weight:500;font-size:12px;font-family:PingFang SC,Helvetica Neue,Arial,sans-serif;line-height:14px;text-align:center;background-color:#f44;border:1px solid #fff;border-radius:16px;-webkit-transform:translateX(50%);transform:translateX(50%);-webkit-transform-origin:100%;transform-origin:100%}@font-face{font-style:normal;font-weight:400;font-family:vant-icon;src:url(https://img.yzcdn.cn/vant/vant-icon-c2acf5.woff2) format("woff2"),url(https://img.yzcdn.cn/vant/vant-icon-c2acf5.woff) format("woff"),url(https://img.yzcdn.cn/vant/vant-icon-c2acf5.ttf) format("truetype")}.van-icon{position:relative;font:14px/1 vant-icon;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased}.van-icon,.van-icon:before{display:inline-block}.van-icon-add-o:before{content:"\\F000"}.van-icon-add-square:before{content:"\\F001"}.van-icon-add:before{content:"\\F002"}.van-icon-after-sale:before{content:"\\F003"}.van-icon-aim:before{content:"\\F004"}.van-icon-alipay:before{content:"\\F005"}.van-icon-apps-o:before{content:"\\F006"}.van-icon-arrow-down:before{content:"\\F007"}.van-icon-arrow-left:before{content:"\\F008"}.van-icon-arrow-up:before{content:"\\F009"}.van-icon-arrow:before{content:"\\F00A"}.van-icon-ascending:before{content:"\\F00B"}.van-icon-audio:before{content:"\\F00C"}.van-icon-award-o:before{content:"\\F00D"}.van-icon-award:before{content:"\\F00E"}.van-icon-bag-o:before{content:"\\F00F"}.van-icon-bag:before{content:"\\F010"}.van-icon-balance-list-o:before{content:"\\F011"}.van-icon-balance-list:before{content:"\\F012"}.van-icon-balance-o:before{content:"\\F013"}.van-icon-balance-pay:before{content:"\\F014"}.van-icon-bar-chart-o:before{content:"\\F015"}.van-icon-bars:before{content:"\\F016"}.van-icon-bell:before{content:"\\F017"}.van-icon-bill-o:before{content:"\\F018"}.van-icon-bill:before{content:"\\F019"}.van-icon-birthday-cake-o:before{content:"\\F01A"}.van-icon-bookmark-o:before{content:"\\F01B"}.van-icon-bookmark:before{content:"\\F01C"}.van-icon-browsing-history-o:before{content:"\\F01D"}.van-icon-browsing-history:before{content:"\\F01E"}.van-icon-brush-o:before{content:"\\F01F"}.van-icon-bulb-o:before{content:"\\F020"}.van-icon-bullhorn-o:before{content:"\\F021"}.van-icon-calender-o:before{content:"\\F022"}.van-icon-card:before{content:"\\F023"}.van-icon-cart-circle-o:before{content:"\\F024"}.van-icon-cart-circle:before{content:"\\F025"}.van-icon-cart-o:before{content:"\\F026"}.van-icon-cart:before{content:"\\F027"}.van-icon-cash-back-record:before{content:"\\F028"}.van-icon-cash-on-deliver:before{content:"\\F029"}.van-icon-cashier-o:before{content:"\\F02A"}.van-icon-certificate:before{content:"\\F02B"}.van-icon-chart-trending-o:before{content:"\\F02C"}.van-icon-chat-o:before{content:"\\F02D"}.van-icon-chat:before{content:"\\F02E"}.van-icon-checked:before{content:"\\F02F"}.van-icon-circle:before{content:"\\F030"}.van-icon-clear:before{content:"\\F031"}.van-icon-clock-o:before{content:"\\F032"}.van-icon-clock:before{content:"\\F033"}.van-icon-close:before{content:"\\F034"}.van-icon-closed-eye:before{content:"\\F035"}.van-icon-cluster-o:before{content:"\\F036"}.van-icon-cluster:before{content:"\\F037"}.van-icon-column:before{content:"\\F038"}.van-icon-comment-circle-o:before{content:"\\F039"}.van-icon-comment-o:before{content:"\\F03A"}.van-icon-comment:before{content:"\\F03B"}.van-icon-completed:before{content:"\\F03C"}.van-icon-contact:before{content:"\\F03D"}.van-icon-coupon-o:before{content:"\\F03E"}.van-icon-coupon:before{content:"\\F03F"}.van-icon-credit-pay:before{content:"\\F040"}.van-icon-cross:before{content:"\\F041"}.van-icon-debit-pay:before{content:"\\F042"}.van-icon-delete:before{content:"\\F043"}.van-icon-descending:before{content:"\\F044"}.van-icon-description:before{content:"\\F045"}.van-icon-desktop-o:before{content:"\\F046"}.van-icon-diamond-o:before{content:"\\F047"}.van-icon-diamond:before{content:"\\F048"}.van-icon-discount:before{content:"\\F049"}.van-icon-ecard-pay:before{content:"\\F04A"}.van-icon-edit:before{content:"\\F04B"}.van-icon-ellipsis:before{content:"\\F04C"}.van-icon-empty:before{content:"\\F04D"}.van-icon-envelop-o:before{content:"\\F04E"}.van-icon-exchange:before{content:"\\F04F"}.van-icon-expand-o:before{content:"\\F050"}.van-icon-expand:before{content:"\\F051"}.van-icon-eye-o:before{content:"\\F052"}.van-icon-eye:before{content:"\\F053"}.van-icon-fail:before{content:"\\F054"}.van-icon-failure:before{content:"\\F055"}.van-icon-filter-o:before{content:"\\F056"}.van-icon-fire-o:before{content:"\\F057"}.van-icon-fire:before{content:"\\F058"}.van-icon-flag-o:before{content:"\\F059"}.van-icon-flower-o:before{content:"\\F05A"}.van-icon-free-postage:before{content:"\\F05B"}.van-icon-friends-o:before{content:"\\F05C"}.van-icon-friends:before{content:"\\F05D"}.van-icon-gem-o:before{content:"\\F05E"}.van-icon-gem:before{content:"\\F05F"}.van-icon-gift-card-o:before{content:"\\F060"}.van-icon-gift-card:before{content:"\\F061"}.van-icon-gift-o:before{content:"\\F062"}.van-icon-gift:before{content:"\\F063"}.van-icon-gold-coin-o:before{content:"\\F064"}.van-icon-gold-coin:before{content:"\\F065"}.van-icon-goods-collect-o:before{content:"\\F066"}.van-icon-goods-collect:before{content:"\\F067"}.van-icon-graphic:before{content:"\\F068"}.van-icon-home-o:before{content:"\\F069"}.van-icon-hot-o:before{content:"\\F06A"}.van-icon-hot-sale-o:before{content:"\\F06B"}.van-icon-hot-sale:before{content:"\\F06C"}.van-icon-hot:before{content:"\\F06D"}.van-icon-hotel-o:before{content:"\\F06E"}.van-icon-idcard:before{content:"\\F06F"}.van-icon-info-o:before{content:"\\F070"}.van-icon-info:before{content:"\\F071"}.van-icon-invition:before{content:"\\F072"}.van-icon-label-o:before{content:"\\F073"}.van-icon-label:before{content:"\\F074"}.van-icon-like-o:before{content:"\\F075"}.van-icon-like:before{content:"\\F076"}.van-icon-live:before{content:"\\F077"}.van-icon-location-o:before{content:"\\F078"}.van-icon-location:before{content:"\\F079"}.van-icon-lock:before{content:"\\F07A"}.van-icon-logistics:before{content:"\\F07B"}.van-icon-manager-o:before{content:"\\F07C"}.van-icon-manager:before{content:"\\F07D"}.van-icon-map-marked:before{content:"\\F07E"}.van-icon-medel-o:before{content:"\\F07F"}.van-icon-medel:before{content:"\\F080"}.van-icon-more-o:before{content:"\\F081"}.van-icon-more:before{content:"\\F082"}.van-icon-music-o:before{content:"\\F083"}.van-icon-new-arrival-o:before{content:"\\F084"}.van-icon-new-arrival:before{content:"\\F085"}.van-icon-new-o:before{content:"\\F086"}.van-icon-new:before{content:"\\F087"}.van-icon-newspaper-o:before{content:"\\F088"}.van-icon-notes-o:before{content:"\\F089"}.van-icon-orders-o:before{content:"\\F08A"}.van-icon-other-pay:before{content:"\\F08B"}.van-icon-paid:before{content:"\\F08C"}.van-icon-passed:before{content:"\\F08D"}.van-icon-pause-circle-o:before{content:"\\F08E"}.van-icon-pause-circle:before{content:"\\F08F"}.van-icon-pause:before{content:"\\F090"}.van-icon-peer-pay:before{content:"\\F091"}.van-icon-pending-payment:before{content:"\\F092"}.van-icon-phone-circle-o:before{content:"\\F093"}.van-icon-phone-o:before{content:"\\F094"}.van-icon-phone:before{content:"\\F095"}.van-icon-photo-o:before{content:"\\F096"}.van-icon-photo:before{content:"\\F097"}.van-icon-photograph:before{content:"\\F098"}.van-icon-play-circle-o:before{content:"\\F099"}.van-icon-play-circle:before{content:"\\F09A"}.van-icon-play:before{content:"\\F09B"}.van-icon-plus:before{content:"\\F09C"}.van-icon-point-gift-o:before{content:"\\F09D"}.van-icon-point-gift:before{content:"\\F09E"}.van-icon-points:before{content:"\\F09F"}.van-icon-printer:before{content:"\\F0A0"}.van-icon-qr-invalid:before{content:"\\F0A1"}.van-icon-qr:before{content:"\\F0A2"}.van-icon-question-o:before{content:"\\F0A3"}.van-icon-question:before{content:"\\F0A4"}.van-icon-records:before{content:"\\F0A5"}.van-icon-refund-o:before{content:"\\F0A6"}.van-icon-replay:before{content:"\\F0A7"}.van-icon-scan:before{content:"\\F0A8"}.van-icon-search:before{content:"\\F0A9"}.van-icon-send-gift-o:before{content:"\\F0AA"}.van-icon-send-gift:before{content:"\\F0AB"}.van-icon-service-o:before{content:"\\F0AC"}.van-icon-service:before{content:"\\F0AD"}.van-icon-setting-o:before{content:"\\F0AE"}.van-icon-setting:before{content:"\\F0AF"}.van-icon-share:before{content:"\\F0B0"}.van-icon-shop-collect-o:before{content:"\\F0B1"}.van-icon-shop-collect:before{content:"\\F0B2"}.van-icon-shop-o:before{content:"\\F0B3"}.van-icon-shop:before{content:"\\F0B4"}.van-icon-shopping-cart-o:before{content:"\\F0B5"}.van-icon-shopping-cart:before{content:"\\F0B6"}.van-icon-shrink:before{content:"\\F0B7"}.van-icon-sign:before{content:"\\F0B8"}.van-icon-smile-comment-o:before{content:"\\F0B9"}.van-icon-smile-comment:before{content:"\\F0BA"}.van-icon-smile-o:before{content:"\\F0BB"}.van-icon-star-o:before{content:"\\F0BC"}.van-icon-star:before{content:"\\F0BD"}.van-icon-stop-circle-o:before{content:"\\F0BE"}.van-icon-stop-circle:before{content:"\\F0BF"}.van-icon-stop:before{content:"\\F0C0"}.van-icon-success:before{content:"\\F0C1"}.van-icon-thumb-circle-o:before{content:"\\F0C2"}.van-icon-todo-list-o:before{content:"\\F0C3"}.van-icon-todo-list:before{content:"\\F0C4"}.van-icon-tosend:before{content:"\\F0C5"}.van-icon-tv-o:before{content:"\\F0C6"}.van-icon-umbrella-circle:before{content:"\\F0C7"}.van-icon-underway-o:before{content:"\\F0C8"}.van-icon-underway:before{content:"\\F0C9"}.van-icon-upgrade:before{content:"\\F0CA"}.van-icon-user-circle-o:before{content:"\\F0CB"}.van-icon-user-o:before{content:"\\F0CC"}.van-icon-video-o:before{content:"\\F0CD"}.van-icon-video:before{content:"\\F0CE"}.van-icon-vip-card-o:before{content:"\\F0CF"}.van-icon-vip-card:before{content:"\\F0D0"}.van-icon-volume-o:before{content:"\\F0D1"}.van-icon-volume:before{content:"\\F0D2"}.van-icon-wap-home:before{content:"\\F0D3"}.van-icon-wap-nav:before{content:"\\F0D4"}.van-icon-warn-o:before{content:"\\F0D5"}.van-icon-warning-o:before{content:"\\F0D6"}.van-icon-weapp-nav:before{content:"\\F0D7"}.van-icon-wechat:before{content:"\\F0D8"}.van-icon-youzan-shield:before{content:"\\F0D9"}.van-icon__image{width:1em;height:1em}.van-loading,.van-loading__spinner{position:relative;vertical-align:middle}.van-loading{font-size:0}.van-loading__spinner{display:inline-block;width:30px;max-width:100%;height:30px;max-height:100%;-webkit-animation:van-rotate .8s linear infinite;animation:van-rotate .8s linear infinite}.van-loading__spinner--spinner{-webkit-animation-timing-function:steps(12);animation-timing-function:steps(12)}.van-circle svg,.van-loading__spinner--spinner i{position:absolute;top:0;left:0;width:100%;height:100%}.van-loading__spinner--spinner i:before{display:block;width:2px;height:25%;margin:0 auto;background-color:currentColor;border-radius:40%;content:" "}.van-loading__spinner--circular{-webkit-animation-duration:2s;animation-duration:2s}.van-loading__circular{display:block;width:100%;height:100%}.van-loading__circular circle{-webkit-animation:van-circular 1.5s ease-in-out infinite;animation:van-circular 1.5s ease-in-out infinite;stroke:currentColor;stroke-width:3;stroke-linecap:round}.van-loading__text{display:inline-block;margin-left:10px;color:#969799;font-size:14px;vertical-align:middle}.van-loading--vertical{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.van-loading--vertical .van-loading__text{margin:10px 0 0}.van-loading__spinner--spinner i:first-of-type{-webkit-transform:rotate(30deg);transform:rotate(30deg);opacity:1}.van-loading__spinner--spinner i:nth-of-type(2){-webkit-transform:rotate(60deg);transform:rotate(60deg);opacity:.9375}.van-loading__spinner--spinner i:nth-of-type(3){-webkit-transform:rotate(90deg);transform:rotate(90deg);opacity:.875}.van-loading__spinner--spinner i:nth-of-type(4){-webkit-transform:rotate(120deg);transform:rotate(120deg);opacity:.8125}.van-loading__spinner--spinner i:nth-of-type(5){-webkit-transform:rotate(150deg);transform:rotate(150deg);opacity:.75}.van-loading__spinner--spinner i:nth-of-type(6){-webkit-transform:rotate(180deg);transform:rotate(180deg);opacity:.6875}.van-loading__spinner--spinner i:nth-of-type(7){-webkit-transform:rotate(210deg);transform:rotate(210deg);opacity:.625}.van-loading__spinner--spinner i:nth-of-type(8){-webkit-transform:rotate(240deg);transform:rotate(240deg);opacity:.5625}.van-loading__spinner--spinner i:nth-of-type(9){-webkit-transform:rotate(270deg);transform:rotate(270deg);opacity:.5}.van-loading__spinner--spinner i:nth-of-type(10){-webkit-transform:rotate(300deg);transform:rotate(300deg);opacity:.4375}.van-loading__spinner--spinner i:nth-of-type(11){-webkit-transform:rotate(330deg);transform:rotate(330deg);opacity:.375}.van-loading__spinner--spinner i:nth-of-type(12){-webkit-transform:rotate(1turn);transform:rotate(1turn);opacity:.3125}.van-button{position:relative;display:inline-block;box-sizing:border-box;height:44px;margin:0;padding:0;font-size:16px;line-height:42px;text-align:center;border-radius:2px;-webkit-appearance:none;-webkit-text-size-adjust:100%}.van-button:before{position:absolute;top:50%;left:50%;width:100%;height:100%;background-color:#000;border:inherit;border-color:#000;border-radius:inherit;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0;content:" "}.van-button:active:before{opacity:.1}.van-button--disabled:before,.van-button--loading:before{display:none}.van-button--default{color:#323233;background-color:#fff;border:1px solid #ebedf0}.van-button--primary{color:#fff;background-color:#07c160;border:1px solid #07c160}.van-button--info{color:#fff;background-color:#1989fa;border:1px solid #1989fa}.van-button--danger{color:#fff;background-color:#f44;border:1px solid #f44}.van-button--warning{color:#fff;background-color:#ff976a;border:1px solid #ff976a}.van-button--plain{background-color:#fff}.van-button--plain.van-button--primary{color:#07c160}.van-button--plain.van-button--info{color:#1989fa}.van-button--plain.van-button--danger{color:#f44}.van-button--plain.van-button--warning{color:#ff976a}.van-button--large{width:100%;height:50px;line-height:48px}.van-button--normal{padding:0 15px;font-size:14px}.van-button--small{min-width:60px;height:30px;padding:0 8px;font-size:12px;line-height:28px}.van-button__loading{display:inline-block;vertical-align:top}.van-button--mini{display:inline-block;min-width:50px;height:22px;font-size:10px;line-height:20px}.van-button--mini+.van-button--mini{margin-left:5px}.van-button--block{display:block;width:100%}.van-button--disabled{opacity:.5}.van-button--hairline.van-button--round:after,.van-button--round{border-radius:10em}.van-button--hairline.van-button--square:after,.van-button--square{border-radius:0}.van-button__icon{min-width:1em;font-size:1.2em;line-height:inherit;vertical-align:top}.van-button__icon+.van-button__text,.van-button__loading+.van-button__text{display:inline-block;margin-left:5px;vertical-align:top}.van-button--hairline{border-width:0}.van-button--hairline:after{border-color:inherit;border-radius:4px}.van-cell{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;box-sizing:border-box;width:100%;padding:10px 15px;overflow:hidden;color:#323233;font-size:14px;line-height:24px;background-color:#fff}.van-cell:not(:last-child):after{position:absolute;box-sizing:border-box;content:" ";pointer-events:none;right:0;bottom:0;left:15px;border-bottom:1px solid #ebedf0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.van-cell--borderless:after{display:none}.van-cell__label{margin-top:3px;color:#969799;font-size:12px;line-height:18px}.van-cell__title,.van-cell__value{-webkit-box-flex:1;-webkit-flex:1;flex:1}.van-cell__value{position:relative;overflow:hidden;color:#969799;text-align:right;vertical-align:middle}.van-cell__value--alone{color:#323233;text-align:left}.van-cell__left-icon,.van-cell__right-icon{min-width:1em;height:24px;font-size:16px;line-height:24px}.van-cell__left-icon{margin-right:5px}.van-cell__right-icon{margin-left:5px;color:#969799}.van-cell--clickable:active{background-color:#f2f3f5}.van-cell--required{overflow:visible}.van-cell--required:before{position:absolute;left:7px;color:#f44;font-size:14px;content:"*"}.van-cell--center{-webkit-box-align:center;-webkit-align-items:center;align-items:center}.van-cell--large{padding-top:12px;padding-bottom:12px}.van-cell--large .van-cell__title{font-size:16px}.van-cell--large .van-cell__label{font-size:14px}.van-cell-group{background-color:#fff}.van-cell-group__title{padding:15px 15px 5px;color:#969799;font-size:14px;line-height:16px}.van-col{float:left;box-sizing:border-box;min-height:1px}.van-col--1{width:4.16666667%}.van-col--offset-1{margin-left:4.16666667%}.van-col--2{width:8.33333333%}.van-col--offset-2{margin-left:8.33333333%}.van-col--3{width:12.5%}.van-col--offset-3{margin-left:12.5%}.van-col--4{width:16.66666667%}.van-col--offset-4{margin-left:16.66666667%}.van-col--5{width:20.83333333%}.van-col--offset-5{margin-left:20.83333333%}.van-col--6{width:25%}.van-col--offset-6{margin-left:25%}.van-col--7{width:29.16666667%}.van-col--offset-7{margin-left:29.16666667%}.van-col--8{width:33.33333333%}.van-col--offset-8{margin-left:33.33333333%}.van-col--9{width:37.5%}.van-col--offset-9{margin-left:37.5%}.van-col--10{width:41.66666667%}.van-col--offset-10{margin-left:41.66666667%}.van-col--11{width:45.83333333%}.van-col--offset-11{margin-left:45.83333333%}.van-col--12{width:50%}.van-col--offset-12{margin-left:50%}.van-col--13{width:54.16666667%}.van-col--offset-13{margin-left:54.16666667%}.van-col--14{width:58.33333333%}.van-col--offset-14{margin-left:58.33333333%}.van-col--15{width:62.5%}.van-col--offset-15{margin-left:62.5%}.van-col--16{width:66.66666667%}.van-col--offset-16{margin-left:66.66666667%}.van-col--17{width:70.83333333%}.van-col--offset-17{margin-left:70.83333333%}.van-col--18{width:75%}.van-col--offset-18{margin-left:75%}.van-col--19{width:79.16666667%}.van-col--offset-19{margin-left:79.16666667%}.van-col--20{width:83.33333333%}.van-col--offset-20{margin-left:83.33333333%}.van-col--21{width:87.5%}.van-col--offset-21{margin-left:87.5%}.van-col--22{width:91.66666667%}.van-col--offset-22{margin-left:91.66666667%}.van-col--23{width:95.83333333%}.van-col--offset-23{margin-left:95.83333333%}.van-col--24{width:100%}.van-col--offset-24{margin-left:100%}.van-row:after{display:table;clear:both;content:""}.van-row--flex{display:-webkit-box;display:-webkit-flex;display:flex}.van-row--flex:after{display:none}.van-row--justify-center{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.van-row--justify-end{-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.van-row--justify-space-between{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.van-row--justify-space-around{-webkit-justify-content:space-around;justify-content:space-around}.van-row--align-center{-webkit-box-align:center;-webkit-align-items:center;align-items:center}.van-row--align-bottom{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.van-grid{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.van-grid-item{position:relative;box-sizing:border-box}.van-grid-item--square{height:0}.van-grid-item__content{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;box-sizing:border-box;height:100%;padding:15px 10px;background-color:#fff}.van-grid-item__content:after{z-index:1;border-width:0 1px 1px 0}.van-grid-item__content--square{position:absolute;top:0;right:0;left:0}.van-grid-item__content--center{-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.van-grid-item__content--surround:after{border-width:1px}.van-grid-item__content--clickable:active{background-color:#f2f3f5}.van-grid-item__icon{font-size:28px}.van-grid-item__text{color:#7d7e80;font-size:12px}.van-grid-item__icon+.van-grid-item__text{margin-top:8px}.van-image{position:relative;display:inline-block}.van-image__error,.van-image__img,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#969799;font-size:14px;background-color:#f8f8f8}.van-circle{position:relative;display:inline-block;text-align:center}.van-circle__layer{-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:530px 530px;transform-origin:530px 530px;fill:none;stroke-linecap:round;stroke-dasharray:3140;stroke-dashoffset:3140}.van-circle__text{position:absolute;top:50%;left:0;width:100%;color:#323233;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-collapse-item__title .van-cell__right-icon:before{-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:.3s;transition:.3s}.van-collapse-item__title:after{visibility:hidden}.van-collapse-item__title--expanded .van-cell__right-icon:before{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.van-collapse-item__title--expanded:after{visibility:visible}.van-collapse-item__title--disabled,.van-collapse-item__title--disabled .van-cell__right-icon{color:#c8c9cc}.van-collapse-item__title--disabled:active{background-color:#fff}.van-collapse-item__wrapper{overflow:hidden;-webkit-transition:height .3s ease-in-out;transition:height .3s ease-in-out;will-change:height}.van-collapse-item__content{padding:15px;color:#969799;font-size:13px;line-height:1.5;background-color:#fff}.van-list__error-text,.van-list__finished-text,.van-list__loading{color:#969799;font-size:13px;line-height:50px;text-align:center}.van-list__placeholder{height:0;pointer-events:none}.van-nav-bar{position:relative;height:46px;line-height:46px;text-align:center;background-color:#fff;-webkit-user-select:none;user-select:none}.van-nav-bar .van-icon{color:#1989fa;vertical-align:middle}.van-nav-bar__arrow{min-width:1em;font-size:16px}.van-nav-bar__arrow+.van-nav-bar__text{margin-left:-20px;padding-left:25px}.van-nav-bar--fixed{position:fixed;top:0;left:0;width:100%}.van-nav-bar__title{max-width:60%;margin:0 auto;color:#323233;font-weight:500;font-size:16px}.van-nav-bar__left,.van-nav-bar__right{position:absolute;bottom:0;font-size:14px}.van-nav-bar__left{left:15px}.van-nav-bar__right{right:15px}.van-nav-bar__text{display:inline-block;margin:0 -15px;padding:0 15px;color:#1989fa;vertical-align:middle}.van-nav-bar__text:active{background-color:#f2f3f5}.van-notice-bar{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:40px;padding:0 15px;color:#ed6a0c;font-size:14px;line-height:24px;background-color:#fffbe8}.van-notice-bar__left-icon,.van-notice-bar__right-icon{min-width:22px;font-size:16px}.van-notice-bar__right-icon{text-align:right}.van-notice-bar__wrap{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;height:24px;overflow:hidden}.van-notice-bar__content{position:absolute;white-space:nowrap}.van-notice-bar__content.van-ellipsis{max-width:100%}.van-notice-bar__play{-webkit-animation:van-notice-bar-play linear both;animation:van-notice-bar-play linear both}.van-notice-bar__play--infinite{-webkit-animation:van-notice-bar-play-infinite linear infinite both;animation:van-notice-bar-play-infinite linear infinite both}.van-notice-bar--wrapable{height:auto;padding:8px 15px}.van-notice-bar--wrapable .van-notice-bar__wrap{height:auto}.van-notice-bar--wrapable .van-notice-bar__content{position:relative;white-space:normal}.van-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7)}.van-overflow-hidden{overflow:hidden!important}.van-popup{position:fixed;max-height:100%;overflow-y:auto;background-color:#fff;-webkit-transition:.3s ease-out;transition:.3s ease-out;-webkit-overflow-scrolling:touch}.van-popup--center{top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}.van-popup--top{top:0;left:0;width:100%}.van-popup--right{top:50%;right:0;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.van-popup--bottom{bottom:0;left:0;width:100%}.van-popup--left{top:50%;left:0;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}.van-popup-slide-top-enter,.van-popup-slide-top-leave-active{-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}.van-popup-slide-right-enter,.van-popup-slide-right-leave-active{-webkit-transform:translate3d(100%,-50%,0);transform:translate3d(100%,-50%,0)}.van-popup-slide-bottom-enter,.van-popup-slide-bottom-leave-active{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.van-popup-slide-left-enter,.van-popup-slide-left-leave-active{-webkit-transform:translate3d(-100%,-50%,0);transform:translate3d(-100%,-50%,0)}.van-search,.van-search__content{display:-webkit-box;display:-webkit-flex;display:flex}.van-search{-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:border-box;padding:10px 16px}.van-search__content{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:10px;background-color:#f7f8fa;border-radius:2px}.van-search__content--round{border-radius:17px}.van-search__label{padding:0 5px;color:#323233;font-size:14px;line-height:34px}.van-search .van-cell{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:5px 10px 5px 0;background-color:transparent}.van-search .van-cell__left-icon{color:#969799}.van-search--show-action{padding-right:0}.van-search input::-webkit-search-cancel-button,.van-search input::-webkit-search-decoration,.van-search input::-webkit-search-results-button,.van-search input::-webkit-search-results-decoration{display:none}.van-search__action{padding:0 10px;color:#323233;font-size:14px;line-height:34px}.van-search__action:active{background-color:#f2f3f5}.van-pagination{display:-webkit-box;display:-webkit-flex;display:flex;font-size:14px;line-height:40px;text-align:center}.van-pagination__item{-webkit-box-flex:1;-webkit-flex:1;flex:1;box-sizing:border-box;min-width:36px;height:40px;color:#1989fa;background-color:#fff;-webkit-user-select:none;user-select:none}.van-pagination__item:active{color:#fff;background-color:#1989fa}.van-pagination__item:after{border-width:1px 0 1px 1px}.van-pagination__item:last-child:after{border-right-width:1px}.van-pagination__item--disabled,.van-pagination__item--disabled:active{color:#7d7e80;background-color:#f8f8f8;opacity:.6}.van-pagination__item--active{color:#fff;background-color:#1989fa}.van-pagination__next,.van-pagination__prev{padding:0 5px}.van-pagination__page{-webkit-box-flex:0;-webkit-flex-grow:0;flex-grow:0}.van-pagination__page-desc{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:40px;color:#7d7e80}.van-pagination--simple .van-pagination__next:after,.van-pagination--simple .van-pagination__prev:after{border-width:1px}.van-panel{background:#fff}.van-panel__header-value{color:#f44}.van-panel__footer{padding:10px 15px}.van-rate{-webkit-user-select:none;user-select:none}.van-rate__item{position:relative;display:inline-block}.van-rate__item:not(:last-child){padding-right:4px}.van-rate__icon{display:block;width:1em;font-size:20px}.van-rate__icon--half{position:absolute;top:0;left:0;width:.5em;overflow:hidden}.van-steps{overflow:hidden;background-color:#fff}.van-steps--horizontal{padding:10px 10px 0}.van-steps--horizontal .van-steps__items{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;margin:0 0 10px;padding-bottom:22px}.van-steps--vertical{padding:0 0 0 35px}.van-step{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#969799;font-size:14px}.van-step__circle{display:block;width:5px;height:5px;background-color:#969799;border-radius:50%}.van-step__line{position:absolute;background-color:#ebedf0}.van-step--horizontal{float:left}.van-step--horizontal:first-child .van-step__title{margin-left:0;-webkit-transform:none;transform:none}.van-step--horizontal:last-child{position:absolute;right:1px;width:auto}.van-step--horizontal:last-child .van-step__title{margin-left:0;-webkit-transform:none;transform:none}.van-step--horizontal:last-child .van-step__circle-container{right:-9px;left:auto}.van-step--horizontal .van-step__circle-container{position:absolute;top:30px;left:-8px;z-index:1;padding:0 8px;background-color:#fff;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-step--horizontal .van-step__title{display:inline-block;margin-left:3px;font-size:12px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}@media (max-width:321px){.van-step--horizontal .van-step__title{font-size:11px}}.van-step--horizontal .van-step__line{top:30px;left:0;width:100%;height:1px}.van-step--horizontal .van-step__icon{display:block;font-size:12px}.van-step--horizontal .van-step--process{color:#323233}.van-step--vertical{display:block;float:none;padding:10px 10px 10px 0;line-height:18px}.van-step--vertical:not(:last-child):after{border-bottom-width:1px}.van-step--vertical:first-child:before{position:absolute;top:0;left:-15px;z-index:1;width:1px;height:20px;background-color:#fff;content:""}.van-step--vertical .van-step__circle-container{position:absolute;top:19px;left:-15px;z-index:2;font-size:12px;line-height:1;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.van-step--vertical .van-step__line{top:16px;left:-15px;width:1px;height:100%}.van-step:last-child .van-step__line{width:0}.van-step--finish{color:#323233}.van-step--finish .van-step__circle,.van-step--finish .van-step__line{background-color:#07c160}.van-tag{display:inline-block;padding:.2em .5em;color:#fff;font-size:10px;line-height:normal;border-radius:.2em}.van-tag:after{border-color:currentColor;border-radius:.4em}.van-tag--mark{padding-right:.6em;border-radius:0 .8em .8em 0}.van-tag--mark:after{border-radius:0 1.6em 1.6em 0}.van-tag--round{border-radius:.8em}.van-tag--round:after{border-radius:1.6em}.van-tag--medium{font-size:12px}.van-tag--large{font-size:14px}.van-tab__pane,.van-tab__pane-wrapper{-webkit-flex-shrink:0;flex-shrink:0;box-sizing:border-box;width:100%}.van-tab__pane-wrapper--inactive{height:0;overflow:visible}.van-tab{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;box-sizing:border-box;min-width:0;padding:0 5px;color:#7d7e80;font-size:14px;line-height:44px;text-align:center;cursor:pointer}.van-tab span{display:block}.van-tab--active{color:#323233;font-weight:500}.van-tab--disabled{color:#c8c9cc}.van-tabs{position:relative}.van-tabs__wrap{position:absolute;top:0;right:0;left:0;z-index:99;overflow:hidden}.van-tabs__wrap--page-top{position:fixed}.van-tabs__wrap--content-bottom{top:auto;bottom:0}.van-tabs__wrap--scrollable .van-tab{-webkit-box-flex:0;-webkit-flex:0 0 22%;flex:0 0 22%}.van-tabs__wrap--scrollable .van-tab--complete{-webkit-box-flex:1;-webkit-flex:1 0 auto;flex:1 0 auto}.van-tabs__wrap--scrollable .van-tabs__nav{overflow:hidden;overflow-x:auto;-webkit-overflow-scrolling:touch}.van-tabs__wrap--scrollable .van-tabs__nav::-webkit-scrollbar{display:none}.van-tabs__nav{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#fff;-webkit-user-select:none;user-select:none}.van-tabs__nav--line{box-sizing:content-box;height:100%;padding-bottom:15px}.van-tabs__nav--card{box-sizing:border-box;height:30px;margin:0 15px;border:1px solid #f44;border-radius:2px}.van-tabs__nav--card .van-tab{color:#f44;line-height:28px;border-right:1px solid #f44}.van-tabs__nav--card .van-tab:last-child{border-right:none}.van-tabs__nav--card .van-tab.van-tab--active{color:#fff;background-color:#f44}.van-tabs__nav--card .van-tab--disabled{color:#c8c9cc}.van-tabs__line{position:absolute;bottom:15px;left:0;z-index:1;height:3px;background-color:#f44;border-radius:3px}.van-tabs__track{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:100%;will-change:left}.van-tabs__content--animated{overflow:hidden}.van-tabs--line{padding-top:44px}.van-tabs--line .van-tabs__wrap{height:44px}.van-tabs--card{padding-top:30px}.van-tabs--card>.van-tabs__wrap{height:30px}.van-tabbar{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:50px;background-color:#fff}.van-tabbar--fixed{position:fixed;bottom:0;left:0}.van-tabbar--safe-area-inset-bottom{padding-bottom:env(safe-area-inset-bottom)}.van-tabbar-item{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#7d7e80;font-size:12px;line-height:1}.van-tabbar-item__icon{position:relative;margin-bottom:5px;font-size:18px}.van-tabbar-item__icon .van-icon{display:block;min-width:1em}.van-tabbar-item__icon--dot:after{position:absolute;top:0;right:-8px;width:8px;height:8px;background-color:#f44;border-radius:100%;content:" "}.van-tabbar-item__icon img{display:block;height:18px}.van-tabbar-item--active{color:#1989fa}.van-tabbar-item .van-info{margin-top:2px}.van-image-preview{position:fixed;top:0;left:0;width:100%;height:100%}.van-image-preview__image{position:absolute;top:0;right:0;bottom:0;left:0;max-width:100%;max-height:100%;margin:auto}.van-image-preview__index{position:absolute;top:10px;left:50%;color:#fff;font-size:14px;letter-spacing:2px;-webkit-transform:translate(-50%);transform:translate(-50%)}.van-image-preview__overlay{background-color:rgba(0,0,0,.9)}.van-image-preview .van-swipe{height:100%}.van-progress{position:relative;height:4px;background:#e5e5e5;border-radius:4px}.van-progress__portion{position:absolute;left:0;height:100%;border-radius:inherit}.van-progress__portion--with-pivot{border-top-right-radius:0;border-bottom-right-radius:0}.van-progress__pivot{position:absolute;top:50%;right:0;box-sizing:border-box;min-width:2em;padding:0 5px;font-size:10px;line-height:1.6;text-align:center;word-break:keep-all;background-color:#e5e5e5;border-radius:1em;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}.van-sidebar{width:85px}.van-sidebar-item{display:block;box-sizing:border-box;padding:20px 12px 20px 9px;overflow:hidden;color:#7d7e80;font-size:14px;line-height:1.4;word-break:break-all;background-color:#f8f8f8;border-left:3px solid transparent;-webkit-user-select:none;user-select:none}.van-sidebar-item__text{position:relative}.van-sidebar-item:active{background-color:#f2f3f5}.van-sidebar-item:not(:last-child):after{border-bottom-width:1px}.van-sidebar-item--select{color:#323233;font-weight:500;border-color:#f44;background-color:#fff}.van-sidebar-item--select:after{border-right-width:1px}.van-sidebar-item--select:active{background-color:#fff}.van-sidebar-item .van-info{right:4px}.van-skeleton{display:-webkit-box;display:-webkit-flex;display:flex;padding:0 15px}.van-skeleton__avatar{-webkit-flex-shrink:0;flex-shrink:0;margin-right:15px;background-color:#f2f3f5}.van-skeleton__avatar--round{border-radius:100%}.van-skeleton__content{width:100%}.van-skeleton__avatar+.van-skeleton__content{padding-top:8px}.van-skeleton__row,.van-skeleton__title{height:16px;background-color:#f2f3f5}.van-skeleton__title{margin:0}.van-skeleton__row:not(:first-child){margin-top:12px}.van-skeleton__title+.van-skeleton__row{margin-top:20px}.van-skeleton--animate{-webkit-animation:van-skeleton-blink 1.2s ease-in-out infinite;animation:van-skeleton-blink 1.2s ease-in-out infinite}.van-slider,.van-slider__bar{position:relative;background-color:#e5e5e5;border-radius:999px}.van-slider__bar{background-color:#1989fa;border-radius:inherit}.van-slider__button{width:20px;height:20px;background-color:#fff;border-radius:50%;box-shadow:0 1px 2px rgba(0,0,0,.5)}.van-slider__button-wrapper{position:absolute;top:50%;right:0;-webkit-transform:translate3d(50%,-50%,0);transform:translate3d(50%,-50%,0)}.van-slider__button-wrapper:after{position:absolute;top:-50%;left:-50%;width:200%;height:200%;content:""}.van-slider--disabled{opacity:.3}.van-slider--vertical{display:inline-block;height:100%}.van-slider--vertical .van-slider__button-wrapper{top:auto;bottom:0;-webkit-transform:translate3d(50%,50%,0);transform:translate3d(50%,50%,0)}.van-stepper{font-size:0;-webkit-user-select:none;user-select:none}.van-stepper__minus,.van-stepper__plus{position:relative;box-sizing:border-box;width:28px;height:28px;margin:0;padding:5px;color:#323233;vertical-align:middle;background-color:#f2f3f5;border:0}.van-stepper__minus:before,.van-stepper__plus:before{width:13px;height:1px}.van-stepper__minus:after,.van-stepper__plus:after{width:1px;height:13px}.van-stepper__minus:after,.van-stepper__minus:before,.van-stepper__plus:after,.van-stepper__plus:before{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto;background-color:currentColor;content:""}.van-stepper__minus:active,.van-stepper__plus:active{background-color:#e8e8e8}.van-stepper__minus--disabled,.van-stepper__plus--disabled{color:#c8c9cc;background-color:#f7f8fa}.van-stepper__minus--disabled:active,.van-stepper__plus--disabled:active{background-color:#f7f8fa}.van-stepper__minus{border-radius:4px 0 0 4px}.van-stepper__minus:after{display:none}.van-stepper__plus{border-radius:0 4px 4px 0}.van-stepper__input{box-sizing:border-box;width:32px;height:28px;margin:0 2px;padding:0;color:#323233;font-size:14px;text-align:center;vertical-align:middle;background-color:#f2f3f5;border:0;border-width:1px 0;border-radius:0;-webkit-appearance:none}.van-stepper__input[disabled]{color:#c8c9cc;background-color:#f2f3f5}.van-stepper input[type=number]::-webkit-inner-spin-button,.van-stepper input[type=number]::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.van-swipe{position:relative;overflow:hidden;-webkit-user-select:none;user-select:none}.van-swipe__track{height:100%}.van-swipe__indicators{position:absolute;bottom:10px;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.van-swipe__indicators--vertical{top:50%;bottom:auto;left:10px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-swipe__indicators--vertical .van-swipe__indicator:not(:last-child){margin-bottom:6px}.van-swipe__indicator{width:6px;height:6px;background-color:#ebedf0;border-radius:100%;opacity:.3;-webkit-transition:opacity .2s;transition:opacity .2s}.van-swipe__indicator:not(:last-child){margin-right:6px}.van-swipe__indicator--active{background-color:#1989fa;opacity:1}.van-swipe-item{float:left;height:100%}.van-index-anchor{padding:0 15px;color:#323233;font-weight:500;font-size:14px;line-height:32px;background-color:transparent}.van-index-anchor--sticky{position:fixed;top:0;right:0;left:0;background-color:#fff}.van-index-bar__sidebar{position:fixed;top:50%;right:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;text-align:center;-webkit-transform:translateY(-50%);transform:translateY(-50%);-webkit-user-select:none;user-select:none}.van-index-bar__index{padding:0 3px 0 15px;font-weight:500;font-size:10px;line-height:14px}.van-checkbox{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;-webkit-user-select:none;user-select:none}.van-checkbox__icon{-webkit-box-flex:0;-webkit-flex:none;flex:none;height:1em;font-size:20px;line-height:1em}.van-checkbox__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:inherit;text-align:center;border:1px solid #e5e5e5;-webkit-transition:.2s;transition:.2s}.van-checkbox__icon--round .van-icon{border-radius:100%}.van-checkbox__icon--checked .van-icon{color:#fff;background-color:#1989fa;border-color:#1989fa}.van-checkbox__icon--disabled .van-icon{background-color:#ebedf0;border-color:#c8c9cc}.van-checkbox__icon--disabled.van-checkbox__icon--checked .van-icon{color:#c8c9cc}.van-checkbox__label{margin-left:10px;color:#323233;line-height:20px}.van-checkbox__label--left{margin:0 10px 0 0}.van-checkbox__label--disabled,.van-radio__icon--disabled.van-radio__icon--checked .van-icon{color:#c8c9cc}.van-field__label{-webkit-box-flex:0;-webkit-flex:none;flex:none;width:90px}.van-field__label--center{text-align:center}.van-field__label--right{text-align:right}.van-field__body{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.van-field__control{display:block;box-sizing:border-box;width:100%;margin:0;padding:0;color:#323233;text-align:left;background-color:transparent;border:0;resize:none}.van-field__control::-webkit-input-placeholder{color:#969799}.van-field__control::placeholder{color:#969799}.van-field__control:disabled{color:#969799;background-color:transparent;opacity:1}.van-field__control--center{text-align:center}.van-field__control--right{text-align:right}.van-field__control[type=date],.van-field__control[type=datetime-local],.van-field__control[type=time]{min-height:24px}.van-field__button,.van-field__clear,.van-field__icon,.van-field__right-icon{-webkit-flex-shrink:0;flex-shrink:0}.van-field__clear,.van-field__right-icon{margin-right:-10px;padding:0 10px;line-height:inherit}.van-field__clear{color:#c8c9cc;font-size:16px}.van-field__left-icon .van-icon,.van-field__right-icon .van-icon{display:block;min-width:1em;font-size:16px;line-height:inherit}.van-field__left-icon{margin-right:5px}.van-field--disabled .van-field__control,.van-field__right-icon{color:#969799}.van-field__button{padding-left:10px}.van-field__error-message{color:#f44;font-size:12px;text-align:left}.van-field__error-message--center{text-align:center}.van-field__error-message--right{text-align:right}.van-field--error .van-field__control,.van-field--error .van-field__control::-webkit-input-placeholder{color:#f44}.van-field--error .van-field__control,.van-field--error .van-field__control::placeholder{color:#f44}.van-field--min-height .van-field__control{min-height:60px}.van-radio{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;overflow:hidden;-webkit-user-select:none;user-select:none}.van-radio__icon{-webkit-box-flex:0;-webkit-flex:none;flex:none;height:1em;font-size:20px;line-height:1em}.van-radio__icon .van-icon{display:block;box-sizing:border-box;width:1.25em;height:1.25em;color:transparent;font-size:.8em;line-height:inherit;text-align:center;border:1px solid #e5e5e5;-webkit-transition:.2s;transition:.2s}.van-radio__icon--round .van-icon{border-radius:100%}.van-radio__icon--checked .van-icon{color:#fff;background-color:#1989fa;border-color:#1989fa}.van-radio__icon--disabled .van-icon{background-color:#ebedf0;border-color:#c8c9cc}.van-radio__label{margin-left:10px;color:#323233;line-height:20px}.van-radio__label--left{margin:0 10px 0 0}.van-radio__label--disabled{color:#c8c9cc}.van-switch,.van-switch__node{height:1em;background-color:#fff}.van-switch{display:inline-block;box-sizing:content-box;border:1px solid rgba(0,0,0,.1);position:relative;width:2em;border-radius:1em;-webkit-transition:background-color .3s;transition:background-color .3s}.van-switch__node{position:absolute;top:0;left:0;z-index:1;width:1em;border-radius:100%;box-shadow:0 3px 1px 0 rgba(0,0,0,.05),0 2px 2px 0 rgba(0,0,0,.1),0 3px 3px 0 rgba(0,0,0,.05);-webkit-transition:.3s;transition:.3s}.van-switch__loading{top:25%;left:25%;width:50%;height:50%;line-height:1}.van-switch--on{background-color:#1989fa}.van-switch--on .van-switch__node{-webkit-transform:translateX(1em);transform:translateX(1em)}.van-switch--disabled{opacity:.4}.van-uploader{position:relative;display:inline-block}.van-uploader__wrapper{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.van-uploader__input{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;cursor:pointer;opacity:0}.van-uploader__input-wrapper{position:relative}.van-uploader__upload{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;box-sizing:border-box;width:80px;height:80px;margin:0 10px 10px 0;background-color:#fff;border:1px dashed #e5e5e5}.van-uploader__upload-icon{color:#969799;font-size:24px}.van-uploader__upload-text{margin-top:10px;color:#969799;font-size:12px}.van-uploader__preview{position:relative;margin:0 10px 10px 0}.van-uploader__preview-image{display:block;width:80px;height:80px}.van-uploader__preview-delete{position:absolute;right:0;bottom:0;padding:1px;color:#fff;background-color:rgba(0,0,0,.45)}.van-uploader__file-icon{color:#7d7e80;font-size:20px}.van-uploader__file-name{box-sizing:border-box;width:100%;margin-top:5px;padding:0 5px;color:#7d7e80;font-size:12px;text-align:center}.van-password-input{position:relative;margin:0 15px;-webkit-user-select:none;user-select:none}.van-password-input__error-info,.van-password-input__info{margin-top:15px;font-size:14px;text-align:center}.van-password-input__info{color:#969799}.van-password-input__error-info{color:#f44}.van-password-input__security{display:-webkit-box;display:-webkit-flex;display:flex;width:100%;height:50px}.van-password-input__security:after{border-radius:6px}.van-password-input__security li{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;height:100%;font-size:20px;line-height:50px;text-align:center;background-color:#fff}.van-password-input__security i{position:absolute;top:50%;left:50%;width:10px;height:10px;margin:-5px 0 0 -5px;background-color:#000;border-radius:100%;visibility:hidden}.van-number-keyboard{position:fixed;bottom:0;left:0;width:100%;background-color:#fff;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;-webkit-user-select:none;user-select:none}.van-number-keyboard__title{position:relative;height:30px;color:#7d7e80;font-size:14px;line-height:30px;text-align:center}.van-number-keyboard__title-left{position:absolute;left:0}.van-number-keyboard__body{box-sizing:border-box}.van-number-keyboard__close{position:absolute;right:0;padding:0 15px;color:#1989fa;font-size:14px}.van-number-keyboard__close:active{background-color:#f2f3f5}.van-number-keyboard__sidebar{position:absolute;top:0;right:0;width:25%;height:216px}.van-number-keyboard--custom .van-number-keyboard__body{padding-right:25%}.van-number-keyboard--safe-area-inset-bottom{padding-bottom:env(safe-area-inset-bottom)}.van-key{display:inline-block;width:33.33333333%;height:54px;font-size:24px;font-style:normal;line-height:54px;text-align:center;vertical-align:middle}.van-key:after{border-width:1px 1px 0 0}.van-key--middle{width:66.66666667%}.van-key--big{width:100%;height:108px;line-height:108px}.van-key--blue,.van-key--delete{font-size:16px}.van-key--blue{color:#fff}.van-key--blue,.van-key--blue.van-key--active{background-color:#1989fa}.van-key--blue:after{border-color:#1989fa}.van-key--blue:active{background-color:#0570db}.van-key--gray{background-color:#ebedf0}.van-action-sheet__cancel:active,.van-action-sheet__item:active,.van-key--active{background-color:#f2f3f5}.van-action-sheet{max-height:90%;color:#323233}.van-action-sheet__cancel,.van-action-sheet__item{font-size:16px;line-height:50px;text-align:center;background-color:#fff}.van-action-sheet__item{height:50px}.van-action-sheet__item--disabled{color:#c8c9cc}.van-action-sheet__item--disabled:active{background-color:#fff}.van-action-sheet__subname{margin-left:5px;color:#7d7e80;font-size:12px}.van-action-sheet__cancel:before{display:block;height:10px;background-color:#f8f8f8;content:" "}.van-action-sheet__header{font-size:16px;line-height:44px;text-align:center}.van-action-sheet__close{position:absolute;top:0;right:0;padding:0 15px;color:#969799;font-size:18px;line-height:inherit}.van-action-sheet--safe-area-inset-bottom{padding-bottom:env(safe-area-inset-bottom)}.van-dialog{position:fixed;top:50%;left:50%;width:85%;overflow:hidden;font-size:16px;background-color:#fff;border-radius:4px;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transition:.3s;transition:.3s}.van-dialog__header{padding-top:25px;font-weight:500;text-align:center}.van-dialog__header--isolated{padding:25px 0}.van-dialog__message{max-height:60vh;padding:25px;overflow-y:auto;font-size:14px;line-height:1.5;white-space:pre-wrap;text-align:center;-webkit-overflow-scrolling:touch}.van-dialog__message--has-title{padding-top:12px;color:#7d7e80}.van-dialog__message--left{text-align:left}.van-dialog__message--right{text-align:right}.van-dialog__footer{overflow:hidden;-webkit-user-select:none;user-select:none}.van-dialog__footer--buttons{display:-webkit-box;display:-webkit-flex;display:flex}.van-dialog__footer--buttons .van-button{-webkit-box-flex:1;-webkit-flex:1;flex:1}.van-dialog .van-button{border:0}.van-dialog__confirm,.van-dialog__confirm:active{color:#1989fa}.van-dialog-bounce-enter{-webkit-transform:translate3d(-50%,-50%,0) scale(.7);transform:translate3d(-50%,-50%,0) scale(.7);opacity:0}.van-dialog-bounce-leave-active{-webkit-transform:translate3d(-50%,-50%,0) scale(.9);transform:translate3d(-50%,-50%,0) scale(.9);opacity:0}.van-dropdown-item{position:fixed;right:0;left:0;overflow:hidden}.van-dropdown-item--up{top:0}.van-dropdown-item--down{bottom:0}.van-dropdown-item__content{position:absolute}.van-dropdown-item__icon{display:block;line-height:inherit}.van-dropdown-menu,.van-dropdown-menu__item{display:-webkit-box;display:-webkit-flex;display:flex}.van-dropdown-menu{height:50px;background-color:#fff;-webkit-user-select:none;user-select:none}.van-dropdown-menu__item{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.van-dropdown-menu__item:active{opacity:.7}.van-dropdown-menu__item--disabled:active{opacity:1}.van-dropdown-menu__item--disabled .van-dropdown-menu__title{color:#969799}.van-dropdown-menu__title{position:relative;font-size:15px}.van-dropdown-menu__title:after{position:absolute;top:3px;right:-12px;border-color:transparent transparent currentcolor currentcolor;border-style:solid;border-width:3px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);opacity:.8;content:""}.van-dropdown-menu__title--down:after{top:7px;-webkit-transform:rotate(135deg);transform:rotate(135deg)}.van-picker{position:relative;background-color:#fff;-webkit-user-select:none;user-select:none;-webkit-text-size-adjust:100%}.van-picker__toolbar{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:44px;line-height:44px}.van-picker__cancel,.van-picker__confirm{padding:0 15px;color:#1989fa;font-size:14px}.van-picker__cancel:active,.van-picker__confirm:active{background-color:#f2f3f5}.van-picker__title{max-width:50%;font-weight:500;font-size:16px;text-align:center}.van-picker__columns,.van-picker__loading{position:relative;display:-webkit-box;display:-webkit-flex;display:flex}.van-picker__loading{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background-color:hsla(0,0%,100%,.9)}.van-picker__frame,.van-picker__loading .van-loading{position:absolute;top:50%;left:0;z-index:3;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%);pointer-events:none}.van-picker__mask{position:absolute;top:0;left:0;z-index:2;width:100%;height:100%;background-image:-webkit-linear-gradient(top,hsla(0,0%,100%,.9),hsla(0,0%,100%,.4)),-webkit-linear-gradient(bottom,hsla(0,0%,100%,.9),hsla(0,0%,100%,.4));background-image:linear-gradient(180deg,hsla(0,0%,100%,.9),hsla(0,0%,100%,.4)),linear-gradient(0deg,hsla(0,0%,100%,.9),hsla(0,0%,100%,.4));background-repeat:no-repeat;background-position:top,bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;pointer-events:none}.van-picker-column{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:hidden;font-size:16px;text-align:center}.van-picker-column__wrapper{-webkit-transition-timing-function:cubic-bezier(.23,1,.68,1);transition-timing-function:cubic-bezier(.23,1,.68,1)}.van-picker-column__item{padding:0 5px;color:#000}.van-picker-column__item--disabled{opacity:.3}.van-pull-refresh{overflow:hidden;-webkit-user-select:none;user-select:none}.van-pull-refresh__track{position:relative}.van-pull-refresh__head{position:absolute;top:-50px;left:0;width:100%;height:50px;overflow:hidden;color:#969799;font-size:14px;line-height:50px;text-align:center}.van-notify,.van-toast{box-sizing:border-box;padding:6px 15px;font-size:14px;line-height:20px;white-space:pre-wrap;text-align:center}.van-toast{position:fixed;top:50%;left:50%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;box-sizing:content-box;width:90px;max-width:70%;min-height:90px;padding:15px;color:#fff;word-break:break-all;background-color:rgba(50,50,51,.88);border-radius:4px;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}.van-toast--unclickable *{pointer-events:none}.van-toast--text{width:-webkit-fit-content;width:fit-content;min-width:96px;min-height:unset;padding:8px 12px}.van-toast--text .van-toast__text{margin-top:0}.van-toast--top{top:50px}.van-toast--bottom{top:auto;bottom:50px}.van-toast__icon{font-size:40px}.van-toast__loading{padding:5px}.van-toast__text{margin-top:10px}.van-swipe-cell{position:relative;overflow:hidden}.van-swipe-cell__left,.van-swipe-cell__right{position:absolute;top:0;height:100%}.van-swipe-cell__left{left:0;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.van-swipe-cell__right{right:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.van-switch-cell{padding-top:9px;padding-bottom:10px -1px}.van-switch-cell--large{padding-top:11px;padding-bottom:11px}.van-switch-cell .van-switch{float:right}.van-tree-select{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;font-size:14px;-webkit-user-select:none;user-select:none}.van-tree-select__nav{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow-y:auto;background-color:#fafafa;-webkit-overflow-scrolling:touch}.van-tree-select__nav-item{position:relative;padding:0 9px 0 12px;line-height:44px;border-left:3px solid transparent}.van-tree-select__nav-item--active{font-weight:700;background-color:#fff;border-color:#f44}.van-tree-select__nav-item--disabled{color:#969799}.van-tree-select__content{-webkit-box-flex:2;-webkit-flex:2;flex:2;overflow-y:auto;background-color:#fff;-webkit-overflow-scrolling:touch}.van-tree-select__item{position:relative;padding-left:15px;font-weight:700;line-height:44px}.van-tree-select__item--active{color:#f44}.van-tree-select__item--disabled{color:#c8c9cc}.van-tree-select__selected{position:absolute;top:50%;right:15px;margin-top:-8px}.van-address-edit__buttons{padding:30px 15px}.van-address-edit__buttons .van-button{margin-bottom:15px}.van-address-edit-detail{padding:0}.van-address-edit-detail__finish{color:#1989fa;font-size:12px}.van-address-list{box-sizing:border-box;height:100%;padding-bottom:100px}.van-address-list__add{position:fixed;bottom:0;left:0;z-index:9999}.van-address-list__disabled-text{padding:0 15px;color:#969799;font-size:12px;line-height:30px}.van-address-item{padding:15px}.van-address-item__value{padding-right:34px}.van-address-item__name{margin-bottom:5px;font-weight:500;font-size:14px;line-height:20px}.van-address-item__address{color:#7d7e80;font-size:12px;line-height:16px}.van-address-item--disabled .van-address-item__address,.van-address-item--disabled .van-address-item__name{color:#969799}.van-address-item__edit{position:absolute;top:50%;right:15px;font-size:16px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-card{position:relative;box-sizing:border-box;padding:5px 15px;color:#323233;font-size:12px;background-color:#fafafa}.van-card:not(:first-child){margin-top:10px}.van-card__header{display:-webkit-box;display:-webkit-flex;display:flex}.van-card__thumb{position:relative;-webkit-box-flex:0;-webkit-flex:none;flex:none;width:90px;height:90px;margin-right:10px}.van-card__content{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;min-width:0;min-height:90px}.van-card__content--centered{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.van-card__desc,.van-card__title{word-break:break-all}.van-card__title{max-height:32px;font-weight:500;line-height:16px;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.van-card__desc{max-height:20px;color:#7d7e80}.van-card__bottom,.van-card__desc{line-height:20px}.van-card__price{display:inline-block;color:#f44;font-weight:500}.van-card__origin-price{display:inline-block;margin-left:5px;color:#7d7e80;font-size:10px;text-decoration:line-through}.van-card__num{float:right}.van-card__tag{position:absolute;top:2px;left:0}.van-card__footer{-webkit-box-flex:0;-webkit-flex:none;flex:none;text-align:right}.van-card__footer .van-button{margin-left:5px}.van-contact-card{padding:15px}.van-contact-card__value{margin-left:5px;line-height:20px}.van-contact-card--add .van-contact-card__value{line-height:40px}.van-contact-card--add .van-cell__left-icon{color:#1989fa;font-size:40px}.van-contact-card:before{position:absolute;right:0;bottom:0;left:0;height:2px;background:-webkit-repeating-linear-gradient(135deg,#ff6c6c,#ff6c6c 20%,transparent 0,transparent 25%,#1989fa 0,#1989fa 45%,transparent 0,transparent 50%);background:repeating-linear-gradient(-45deg,#ff6c6c,#ff6c6c 20%,transparent 0,transparent 25%,#1989fa 0,#1989fa 45%,transparent 0,transparent 50%);background-size:80px;content:""}.van-contact-list{box-sizing:border-box;height:100%;padding-bottom:50px}.van-contact-list__item{padding:15px}.van-contact-list__item-value{padding-right:34px}.van-contact-list__group{box-sizing:border-box;height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch}.van-contact-list__name{font-weight:500;font-size:14px;line-height:20px}.van-contact-list__edit{position:absolute;top:50%;right:15px;font-size:16px;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-contact-list__add{position:fixed;bottom:0;left:0;z-index:9999}.van-contact-edit__buttons{padding:30px 15px}.van-contact-edit .van-cell__title{max-width:65px}.van-contact-edit .van-button{margin-bottom:15px}.van-coupon{margin:0 15px 15px;overflow:hidden;background-color:#fff;border-radius:4px;box-shadow:0 0 4px rgba(0,0,0,.1)}.van-coupon:active{background-color:#f2f3f5}.van-coupon__content{display:-webkit-box;display:-webkit-flex;display:flex;box-sizing:border-box;height:100px;padding:24px 0 0 15px}.van-coupon h2,.van-coupon p{margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.van-coupon h2{height:34px;font-weight:500;line-height:34px}.van-coupon p{color:#969799;font-size:12px;line-height:16px}.van-coupon__head{position:relative;min-width:85px;padding-right:10px}.van-coupon__head p{white-space:pre-wrap}.van-coupon__amount{color:#f44;font-size:24px}.van-coupon__amount span{font-size:50%}.van-coupon__amount span:not(:empty){margin-left:2px}.van-coupon__body{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;border-radius:0 4px 4px 0}.van-coupon__name{font-size:16px}.van-coupon__corner{position:absolute;top:16px;right:15px}.van-coupon__description{padding:7px 15px;background-color:#fafafa;border-top:1px dashed #ebedf0}.van-coupon--disabled:active{background-color:#fff}.van-coupon--disabled .van-coupon-item__content{height:90px}.van-coupon--disabled h2,.van-coupon--disabled p,.van-coupon--disabled span{color:#969799}.van-coupon-cell--selected{color:#323233}.van-coupon-list{position:relative;height:100%;background-color:#f8f8f8}.van-coupon-list__field{padding:7px 15px}.van-coupon-list__exchange{height:32px;line-height:30px}.van-coupon-list__list{box-sizing:border-box;padding:15px 0;overflow-y:auto;-webkit-overflow-scrolling:touch}.van-coupon-list__close{position:absolute;bottom:0;left:0;font-weight:500}.van-coupon-list__empty{padding-top:60px;text-align:center}.van-coupon-list__empty p{margin:15px 0;color:#969799;font-size:14px;line-height:20px}.van-coupon-list__empty img{width:200px;height:200px}.van-goods-action{position:fixed;right:0;bottom:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#fff}.van-goods-action--safe-area-inset-bottom{padding-bottom:env(safe-area-inset-bottom)}.van-goods-action-button{-webkit-box-flex:1;-webkit-flex:1;flex:1}@media (max-width:321px){.van-goods-action-button{font-size:15px}}.van-goods-action-icon{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;min-width:15%;height:50px;color:#7d7e80;font-size:10px;line-height:1;text-align:center;background-color:#fff}.van-goods-action-icon:not(:first-child):after{border-left-width:1px}.van-goods-action-icon:active{background-color:#f2f3f5}.van-goods-action-icon__icon{width:1em;margin:0 auto 5px;font-size:20px}.van-submit-bar{position:fixed;bottom:0;left:0;z-index:100;width:100%;background-color:#fff;-webkit-user-select:none;user-select:none}.van-submit-bar__tip{padding:10px;color:#f56723;font-size:12px;line-height:1.5;background-color:#fff7cc}.van-submit-bar__tip-icon{min-width:18px;font-size:12px;vertical-align:middle}.van-submit-bar__tip-text{vertical-align:middle}.van-submit-bar__bar{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;height:50px;font-size:14px}.van-submit-bar__text{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-right:12px;color:#323233;font-weight:500;text-align:right}.van-submit-bar__text span{display:inline-block}.van-submit-bar__suffix-label{margin-left:5px}.van-submit-bar__price{color:#f44;font-size:18px}.van-submit-bar__price:first-letter{font-size:14px}.van-submit-bar__button{width:110px}.van-submit-bar--safe-area-inset-bottom{padding-bottom:env(safe-area-inset-bottom)}.van-sku-container{max-height:-webkit-max-content;max-height:max-content;overflow-y:visible;font-size:14px;background:#fff}.van-sku-body{max-height:350px;overflow-y:scroll;-webkit-overflow-scrolling:touch}.van-sku-body::-webkit-scrollbar{display:none}.van-sku-header{margin-left:15px}.van-sku-header__img-wrap{position:relative;float:left;width:80px;height:80px;margin-top:-10px;background:#f8f8f8;border-radius:2px}.van-sku-header__img-wrap img{position:absolute;top:0;right:0;bottom:0;left:0;max-width:100%;max-height:100%;margin:auto}.van-sku-header__goods-info{box-sizing:border-box;min-height:82px;padding:10px 60px 10px 10px;overflow:hidden}.van-sku__goods-name{font-size:12px}.van-sku__price-num,.van-sku__price-symbol{vertical-align:middle}.van-sku__price-num{font-size:16px}.van-sku__goods-price{margin-top:10px;color:#f44;vertical-align:middle}.van-sku__close-icon{position:absolute;top:10px;right:15px;color:#969799;font-size:20px;text-align:center}.van-sku-group-container{margin-left:15px;padding:12px 0 2px}.van-sku-group-container--hide-soldout .van-sku-row__item--disabled{display:none}.van-sku-row{margin:0 15px 10px 0}.van-sku-row:last-child{margin-bottom:0}.van-sku-row__title{padding-bottom:10px}.van-sku-row__item{display:inline-block;box-sizing:border-box;min-width:52px;height:28px;margin:0 10px 10px 0;padding:5px 9px;color:#323233;font-size:12px;line-height:16px;text-align:center;border:1px solid #969799;border-radius:3px}.van-sku-row__item--active{color:#fff;background:#f44;border-color:#f44}.van-sku-row__item--disabled{color:#c8c9cc;background:#f2f3f5;border-color:#ebedf0}.van-sku-stepper-stock{margin-left:15px;padding:12px 0}.van-sku-stepper-container{height:30px;margin-right:20px}.van-sku__stepper{float:right}.van-sku__stepper-title{float:left;line-height:30px}.van-sku__quota,.van-sku__stock{display:inline-block;font-size:12px}.van-sku__stock{margin-right:10px;color:#969799}.van-sku__quota{color:#f44}.van-sku-messages{padding-bottom:10px;background:#f8f8f8}.van-sku-messages__image-cell .van-cell__title{max-width:90px}.van-sku-messages__image-cell .van-cell__value{text-align:left}.van-sku-img-uploader{display:inline-block}.van-sku-img-uploader__header{padding:0 10px;color:#323233;font-size:12px;line-height:24px;border:1px solid #ebedf0;border-radius:3px}.van-sku-img-uploader__header .van-icon{top:3px;margin-right:5px;font-size:14px}.van-sku-img-uploader__img{position:relative;float:left;width:60px;height:60px;margin:10px 10px 0 0;border:1px solid #ebedf0}.van-sku-img-uploader__img img{position:relative;top:50%;max-width:100%;max-height:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.van-sku-img-uploader__delete{position:absolute;top:-12px;right:-14px;z-index:1;padding:6px;color:#f44}.van-sku-img-uploader__delete:before{background-color:#fff;border-radius:14px}.van-sku-img-uploader__uploading{position:absolute;top:0;right:0;bottom:0;left:0;width:20px;height:20px;margin:auto}.van-sku-actions{display:-webkit-box;display:-webkit-flex;display:flex}',""])},196:function(t,e,n){t.exports=function(){return e={686:function(t,e,n){"use strict";n.d(e,{default:function(){return b}});var e=n(279),i=n.n(e),e=n(370),u=n.n(e),e=n(817),r=n.n(e);function o(t){try{return document.execCommand(t)}catch(t){return}}var a=function(t){return t=r()(t),o("cut"),t};function l(t,e){var n,l,t=(n=t,l="rtl"===document.documentElement.getAttribute("dir"),(t=document.createElement("textarea")).style.fontSize="12pt",t.style.border="0",t.style.padding="0",t.style.margin="0",t.style.position="absolute",t.style[l?"right":"left"]="-9999px",l=window.pageYOffset||document.documentElement.scrollTop,t.style.top="".concat(l,"px"),t.setAttribute("readonly",""),t.value=n,t);return e.container.appendChild(t),e=r()(t),o("copy"),t.remove(),e}var c=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=l(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=l(t.value,e):(n=r()(t),o("copy")),n};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){if(t="data-clipboard-".concat(t),e.hasAttribute(t))return e.getAttribute(t)}var b=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(o,i());var t,e,n,r=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=m(t);return n=e?(n=m(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this,!(n=n)||"object"!==p(n)&&"function"!=typeof n?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}(o);function o(t,e){var n;return function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(n=r.call(this)).resolveOptions(e),n.listenClick(t),n}return t=o,n=[{key:"copy",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body};return c(t,e)}},{key:"cut",value:function(t){return a(t)}},{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof t?[t]:t,e=!!document.queryCommandSupported;return t.forEach(function(t){e=e&&!!document.queryCommandSupported(t)}),e}}],(e=[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===p(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=u()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",t=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=void 0===(r=t.action)?"copy":r,n=t.container,r=t.target,t=t.text;if("copy"!==e&&"cut"!==e)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==r){if(!r||"object"!==h(r)||1!==r.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===e&&r.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===e&&(r.hasAttribute("readonly")||r.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return t?c(t,{container:n}):r?"cut"===e?a(r):c(r,{container:n}):void 0}({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(t?"success":"error",{action:n,text:t,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return A("action",t)}},{key:"defaultTarget",value:function(t){if(t=A("target",t))return document.querySelector(t)}},{key:"defaultText",value:function(t){return A("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}])&&d(t.prototype,e),n&&d(t,n),o}()},828:function(t){var e;"undefined"==typeof Element||Element.prototype.matches||((e=Element.prototype).matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var u=n(828);function i(t,e,n,r,o){var i=function(t,e,n,r){return function(n){n.delegateTarget=u(n.target,e),n.delegateTarget&&r.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,i,o),{destroy:function(){t.removeEventListener(n,i,o)}}}t.exports=function(t,e,n,r,o){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,r,o)}))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var r=n(879),o=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return h=e,a=n,(u=t).addEventListener(h,a),{destroy:function(){u.removeEventListener(h,a)}};if(r.nodeList(t))return l=t,c=e,i=n,Array.prototype.forEach.call(l,function(t){t.addEventListener(c,i)}),{destroy:function(){Array.prototype.forEach.call(l,function(t){t.removeEventListener(c,i)})}};if(r.string(t))return t=t,e=e,n=n,o(document.body,t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var l,c,i,u,h,a}},817:function(t){t.exports=function(t){var e,n="SELECT"===t.nodeName?(t.focus(),t.value):"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?((e=t.hasAttribute("readonly"))||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),t.value):(t.hasAttribute("contenteditable")&&t.focus(),n=window.getSelection(),(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e),n.toString());return n}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,u=r.length;i<u;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},n={},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t(686).default;function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}var e,n}()},20:function(t,e,n){"use strict";var r={zIndex:2e3,lockCount:0,stack:[],get top(){return this.stack[this.stack.length-1]}},o=n(13),l=n(4);var c,h=n(7),d=n(2),f=n(56),m=n(1),A={className:"",customStyle:{}};function v(){if(r.top){var t=r.top.vm;t.$emit("click-overlay"),t.closeOnClickOverlay&&(t.onClickOverlay?t.onClickOverlay():t.close())}}function y(){if(c||(c=Object(m.c)(f.a,{on:{click:v}})),r.top){var t=r.top,e=t.vm,n=t.config,o=e.$el,l=o&&o.parentNode?o.parentNode:document.body;l&&l.appendChild(c.$el),Object(d.a)(c,A,n,{visible:!0})}else c.visible=!1}function x(t){var e=r.stack;e.length&&(r.top.vm===t?(e.pop(),y()):r.stack=e.filter(function(e){return e.vm!==t}))}var _=n(12);n.d(e,"a",function(){return S});var w,E,S={mixins:[o.a,(w={afterPortal:function(){this.overlay&&y()}},E=w.afterPortal,l.default.extend({props:{getContainer:[String,Function]},watch:{getContainer:function(){this.portal()}},mounted:function(){this.getContainer&&this.portal()},methods:{portal:function(){var t,e,n=this.getContainer;n?t="string"==typeof(e=n)?document.querySelector(e):e():this.$parent&&(t=this.$parent.$el),t&&t!==this.$el.parentNode&&t.appendChild(this.$el),E&&E.call(this)}}}))],props:{value:Boolean,overlay:Boolean,overlayStyle:Object,overlayClass:String,closeOnClickOverlay:Boolean,zIndex:[String,Number],lockScroll:{type:Boolean,default:!0},lazyRender:{type:Boolean,default:!0}},data:function(){return{inited:this.value}},computed:{shouldRender:function(){return this.inited||!this.lazyRender}},watch:{value:function(t){var e=t?"open":"close";this.inited=this.inited||this.value,this[e](),this.$emit(e)},overlay:function(){this.renderOverlay()}},mounted:function(){this.value&&this.open()},activated:function(){this.value&&this.open()},beforeDestroy:function(){this.close(),this.getContainer&&this.$parent&&this.$parent.$el&&this.$parent.$el.appendChild(this.$el)},deactivated:function(){this.close()},methods:{open:function(){this.$isServer||this.opened||(void 0!==this.zIndex&&(r.zIndex=this.zIndex),this.opened=!0,this.renderOverlay(),this.lockScroll&&(Object(h.b)(document,"touchstart",this.touchStart),Object(h.b)(document,"touchmove",this.onTouchMove),r.lockCount||document.body.classList.add("van-overflow-hidden"),r.lockCount++))},close:function(){this.opened&&(this.lockScroll&&(r.lockCount--,Object(h.a)(document,"touchstart",this.touchStart),Object(h.a)(document,"touchmove",this.onTouchMove),r.lockCount||document.body.classList.remove("van-overflow-hidden")),this.opened=!1,x(this),this.$emit("input",!1))},onTouchMove:function(t){this.touchMove(t);var e=this.deltaY>0?"10":"01",n=Object(_.c)(t.target,this.$el),r=n.scrollHeight,o=n.offsetHeight,l=n.scrollTop,c="11";0===l?c=o>=r?"00":"01":l+o>=r&&(c="10"),"11"===c||"vertical"!==this.direction||parseInt(c,2)&parseInt(e,2)||Object(h.c)(t,!0)},renderOverlay:function(){var t,e;!this.$isServer&&this.value&&(this.overlay?(t=this,e={zIndex:r.zIndex++,duration:this.duration,className:this.overlayClass,customStyle:this.overlayStyle},r.stack.some(function(e){return e.vm===t})||(r.stack.push({vm:t,config:e}),y())):x(this),this.updateZIndex())},updateZIndex:function(){var t=this;this.$nextTick(function(){t.$el.style.zIndex=r.zIndex++})}}}},21:function(t,e,n){"use strict";var r=n(2),o=n(4),l=n(38),c=n(0),h=n(20),d=n(5),f=n(11),m=Object(l.a)("toast"),A=m[0],v=m[1],y=A({mixins:[h.a],props:{icon:String,className:null,loadingType:String,forbidClick:Boolean,message:[String,Number],type:{type:String,default:"text"},position:{type:String,default:"middle"},lockScroll:{type:Boolean,default:!1}},data:function(){return{clickable:!1}},mounted:function(){this.toggleClickable()},destroyed:function(){this.toggleClickable()},watch:{value:function(){this.toggleClickable()},forbidClick:function(){this.toggleClickable()}},methods:{toggleClickable:function(){var t=this.value&&this.forbidClick;if(this.clickable!==t){this.clickable=t;var e=t?"add":"remove";document.body.classList[e]("van-toast--unclickable")}},onAfterEnter:function(){this.$emit("opened"),this.onOpened&&this.onOpened()},onAfterLeave:function(){this.$emit("closed")}},render:function(t){var e=this.type,n=this.icon,r=this.message,o=this.loadingType,l=n||"success"===e||"fail"===e;return t("transition",{attrs:{name:"van-fade"},on:{afterEnter:this.onAfterEnter,afterLeave:this.onAfterLeave}},[t("div",{directives:[{name:"show",value:this.value}],class:[v([this.position,{text:!l&&"loading"!==e}]),this.className]},[l?t(d.a,{class:v("icon"),attrs:{name:n||e}}):"loading"===e?t(f.a,{class:v("loading"),attrs:{color:"white",type:o}}):void 0,function(){if(Object(c.b)(r)&&""!==r)return"html"===e?t("div",{class:v("text"),domProps:{innerHTML:r}}):t("div",{class:v("text")},[r])}()])])}}),x={icon:"",type:"text",mask:!1,value:!0,message:"",className:"",onClose:null,onOpened:null,duration:3e3,position:"middle",forbidClick:!1,loadingType:void 0,getContainer:"body",overlayStyle:null},_=[],w=!1,E=Object(r.a)({},x);function S(t){return Object(c.c)(t)?t:{message:t}}function C(t){void 0===t&&(t={});var e=function(){if(c.d)return{};if(!_.length||w){var t=new(o.default.extend(y))({el:document.createElement("div")});_.push(t)}return _[_.length-1]}();return e.value&&e.updateZIndex(),t=Object(r.a)({},E,S(t),{clear:function(){e.value=!1,t.onClose&&t.onClose(),w&&!c.d&&e.$on("closed",function(){clearTimeout(e.timer),_=_.filter(function(t){return t!==e});var t=e.$el.parentNode;t&&t.removeChild(e.$el),e.$destroy()})}}),Object(r.a)(e,function(t){return(t=Object(r.a)({},t)).overlay=t.mask,delete t.mask,delete t.duration,t}(t)),clearTimeout(e.timer),t.duration>0&&(e.timer=setTimeout(function(){e.clear()},t.duration)),e}["loading","success","fail"].forEach(function(t){var e;C[t]=(e=t,function(t){return C(Object(r.a)({type:e},S(t)))})}),C.clear=function(t){_.length&&(t?(_.forEach(function(t){t.clear()}),_=[]):w?_.shift().clear():_[0].clear())},C.setDefaultOptions=function(t){Object(r.a)(E,t)},C.resetDefaultOptions=function(){E=Object(r.a)({},x)},C.allowMultiple=function(t){void 0===t&&(t=!0),w=t},C.install=function(){o.default.use(y)},o.default.prototype.$toast=C;e.a=C},213:function(t,e,n){"use strict";e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=h(t),r=n[0],c=n[1],d=new l(function(t,e,n){return 3*(e+n)/4-n}(0,r,c)),f=0,m=c>0?r-4:r,i=0;i<m;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],d[f++]=e>>16&255,d[f++]=e>>8&255,d[f++]=255&e;2===c&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,d[f++]=255&e);1===c&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,d[f++]=e>>8&255,d[f++]=255&e);return d},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,l=[],i=0,c=n-o;i<c;i+=16383)l.push(d(t,i,i+16383>c?c:i+16383));1===o?(e=t[n-1],l.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],l.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return l.join("")};for(var r=[],o=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,c=code.length;i<c;++i)r[i]=code[i],o[code.charCodeAt(i)]=i;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function d(t,e,n){for(var o,l,output=[],i=e;i<n;i+=3)o=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),output.push(r[(l=o)>>18&63]+r[l>>12&63]+r[l>>6&63]+r[63&l]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},214:function(t,e){e.read=function(t,e,n,r,o){var l,c,h=8*o-r-1,d=(1<<h)-1,f=d>>1,m=-7,i=n?o-1:0,A=n?-1:1,s=t[e+i];for(i+=A,l=s&(1<<-m)-1,s>>=-m,m+=h;m>0;l=256*l+t[e+i],i+=A,m-=8);for(c=l&(1<<-m)-1,l>>=-m,m+=r;m>0;c=256*c+t[e+i],i+=A,m-=8);if(0===l)l=1-f;else{if(l===d)return c?NaN:1/0*(s?-1:1);c+=Math.pow(2,r),l-=f}return(s?-1:1)*c*Math.pow(2,l-r)},e.write=function(t,e,n,r,o,l){var c,h,d,f=8*l-o-1,m=(1<<f)-1,A=m>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=r?0:l-1,v=r?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,c=m):(c=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-c))<1&&(c--,d*=2),(e+=c+A>=1?rt/d:rt*Math.pow(2,1-A))*d>=2&&(c++,d/=2),c+A>=m?(h=0,c=m):c+A>=1?(h=(e*d-1)*Math.pow(2,o),c+=A):(h=e*Math.pow(2,A-1)*Math.pow(2,o),c=0));o>=8;t[n+i]=255&h,i+=v,h/=256,o-=8);for(c=c<<o|h,f+=o;f>0;t[n+i]=255&c,i+=v,c/=256,f-=8);t[n+i-v]|=128*s}},215:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},217:function(t,e,n){"use strict";const r=(i,t)=>"method"!==t.kind||!t.descriptor||"value"in t.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,i)}}:{...t,finisher(e){e.createProperty(t.key,i)}};function o(t){return(e,n)=>void 0!==n?((i,t,e)=>{t.constructor.createProperty(e,i)})(t,e,n):r(t,e)}var l;null===(l=window.HTMLSlotElement)||void 0===l||l.prototype.assignedElements;const c="151",h=0,d=1,f=2,m=1,A=2,v=3,y=0,x=1,_=2,w=0,E=1,S=2,C=3,I=4,M=5,B=100,T=101,k=102,R=103,L=104,D=200,P=201,O=202,F=203,N=204,U=205,Q=206,z=207,G=208,H=209,V=210,j=0,W=1,$=2,Y=3,X=4,K=5,J=6,Z=7,tt=0,et=1,nt=2,it=0,st=1,at=2,ot=3,lt=4,ct=5,ht=300,ut=301,pt=302,ft=303,mt=304,gt=306,At=1e3,vt=1001,bt=1002,yt=1003,xt=1004,_t=1005,wt=1006,Et=1007,St=1008,Ct=1009,It=1010,Mt=1011,Bt=1012,Tt=1013,kt=1014,Rt=1015,Lt=1016,Dt=1017,Pt=1018,Ot=1020,Ft=1021,Nt=1023,Ut=1024,Qt=1025,zt=1026,Gt=1027,Ht=1028,Vt=1029,jt=1030,Wt=1031,$t=1033,qt=33776,Yt=33777,Xt=33778,Kt=33779,Jt=35840,Zt=35841,te=35842,ee=35843,ne=36196,ie=37492,re=37496,se=37808,ae=37809,oe=37810,le=37811,ce=37812,he=37813,ue=37814,de=37815,pe=37816,fe=37817,me=37818,ge=37819,Ae=37820,ve=37821,be=36492,ye=36283,xe=36284,_e=36285,we=36286,Ee=2200,Se=2201,Ce=2202,Ie=2300,Me=2301,Be=2302,Te=2400,ke=2401,Re=2402,Le=2500,De=2501,Pe=0,Oe=1,Fe=2,Ne=3e3,Ue=3001,Qe=3200,ze=3201,Ge=0,He=1,Ve="srgb",je="srgb-linear",We=7680,$e=519,qe=35044,Ye="300 es",Xe=1035;class Ke{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let i=0,e=n.length;i<e;i++)n[i].call(this,t);t.target=null}}}const Je=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ze=1234567;const tn=Math.PI/180,en=180/Math.PI;function nn(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Je[255&t]+Je[t>>8&255]+Je[t>>16&255]+Je[t>>24&255]+"-"+Je[255&e]+Je[e>>8&255]+"-"+Je[e>>16&15|64]+Je[e>>24&255]+"-"+Je[63&n|128]+Je[n>>8&255]+"-"+Je[n>>16&255]+Je[n>>24&255]+Je[255&r]+Je[r>>8&255]+Je[r>>16&255]+Je[r>>24&255]).toLowerCase()}function rn(t,e,n){return Math.max(e,Math.min(n,t))}function sn(t,e){return(t%e+e)%e}function an(t,e,n){return(1-n)*t+n*e}function on(t){return 0==(t&t-1)&&0!==t}function ln(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function cn(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function hn(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function un(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const dn={DEG2RAD:tn,RAD2DEG:en,generateUUID:nn,clamp:rn,euclideanModulo:sn,mapLinear:function(t,e,n,r,o){return r+(t-e)*(o-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:an,damp:function(t,e,n,dt){return an(t,e,1-Math.exp(-n*dt))},pingpong:function(t,e=1){return e-Math.abs(sn(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(s){void 0!==s&&(Ze=s);let t=Ze+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(t){return t*tn},radToDeg:function(t){return t*en},isPowerOfTwo:on,ceilPowerOfTwo:ln,floorPowerOfTwo:cn,setQuaternionFromProperEuler:function(q,a,b,t,e){const n=Math.cos,r=Math.sin,o=n(b/2),l=r(b/2),c=n((a+t)/2),h=r((a+t)/2),d=n((a-t)/2),f=r((a-t)/2),m=n((t-a)/2),A=r((t-a)/2);switch(e){case"XYX":q.set(o*h,l*d,l*f,o*c);break;case"YZY":q.set(l*f,o*h,l*d,o*c);break;case"ZXZ":q.set(l*d,l*f,o*h,o*c);break;case"XZX":q.set(o*h,l*A,l*m,o*c);break;case"YXY":q.set(l*m,o*h,l*A,o*c);break;case"ZYZ":q.set(l*A,l*m,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}},normalize:un,denormalize:hn};class pn{constructor(t=0,e=0){pn.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(s){return this.x+=s,this.y+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(s){return this.x-=s,this.y-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*s+t.x,this.y=r*s+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fn{constructor(){fn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,o,l,c,h,d){const f=this.elements;return f[0]=t,f[1]=r,f[2]=c,f[3]=e,f[4]=o,f[5]=h,f[6]=n,f[7]=l,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[3],l=t[6],c=t[1],h=t[4],d=t[7],f=t[2],m=t[5],A=t[8],v=e[0],y=e[3],x=e[6],_=e[1],w=e[4],E=e[7],S=e[2],C=e[5],I=e[8];return n[0]=r*v+o*_+l*S,n[3]=r*y+o*w+l*C,n[6]=r*x+o*E+l*I,n[1]=c*v+h*_+d*S,n[4]=c*y+h*w+d*C,n[7]=c*x+h*E+d*I,n[2]=f*v+m*_+A*S,n[5]=f*y+m*w+A*C,n[8]=f*x+m*E+A*I,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this}determinant(){const t=this.elements,a=t[0],b=t[1],e=t[2],n=t[3],r=t[4],o=t[5],g=t[6],l=t[7],i=t[8];return a*r*i-a*o*l-b*n*i+b*o*g+e*n*l-e*r*g}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],c=t[5],h=t[6],d=t[7],f=t[8],m=f*l-c*d,A=c*h-f*o,v=d*o-l*h,y=e*m+n*A+r*v;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return t[0]=m*x,t[1]=(r*d-f*n)*x,t[2]=(c*n-r*l)*x,t[3]=A*x,t[4]=(f*e-r*h)*x,t[5]=(r*o-c*e)*x,t[6]=v*x,t[7]=(n*h-d*e)*x,t[8]=(l*e-n*o)*x,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,o,l,c){const h=Math.cos(o),s=Math.sin(o);return this.set(n*h,n*s,-n*(h*l+s*c)+l+t,-r*s,r*h,-r*(-s*l+h*c)+c+e,0,0,1),this}scale(t,e){return this.premultiply(mn.makeScale(t,e)),this}rotate(t){return this.premultiply(mn.makeRotation(-t)),this}translate(t,e){return this.premultiply(mn.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const mn=new fn;function gn(t){for(let i=t.length-1;i>=0;--i)if(t[i]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function An(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function vn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function bn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const yn=(new fn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),xn=(new fn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);const _n={[je]:t=>t,[Ve]:t=>t.convertSRGBToLinear(),"display-p3":function(t){return t.convertSRGBToLinear().applyMatrix3(xn)}},wn={[je]:t=>t,[Ve]:t=>t.convertLinearToSRGB(),"display-p3":function(t){return t.applyMatrix3(yn).convertLinearToSRGB()}},En={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return je},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=_n[e],o=wn[n];if(void 0===r||void 0===o)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return o(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Sn;class Cn{static getDataURL(image){if(/^data:/i.test(image.src))return image.src;if("undefined"==typeof HTMLCanvasElement)return image.src;let canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===Sn&&(Sn=An("canvas")),Sn.width=image.width,Sn.height=image.height;const t=Sn.getContext("2d");image instanceof ImageData?t.putImageData(image,0,0):t.drawImage(image,0,0,image.width,image.height),canvas=Sn}return canvas.width>2048||canvas.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}static sRGBToLinear(image){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){const canvas=An("canvas");canvas.width=image.width,canvas.height=image.height;const t=canvas.getContext("2d");t.drawImage(image,0,0,image.width,image.height);const e=t.getImageData(0,0,image.width,image.height),data=e.data;for(let i=0;i<data.length;i++)data[i]=255*vn(data[i]/255);return t.putImageData(e,0,0),canvas}if(image.data){const data=image.data.slice(0);for(let i=0;i<data.length;i++)data instanceof Uint8Array||data instanceof Uint8ClampedArray?data[i]=Math.floor(255*vn(data[i]/255)):data[i]=vn(data[i]);return{data:data,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}class In{constructor(data=null){this.isSource=!0,this.uuid=nn(),this.data=data,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(meta){const t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];const output={uuid:this.uuid,url:""},data=this.data;if(null!==data){let t;if(Array.isArray(data)){t=[];for(let i=0,e=data.length;i<e;i++)data[i].isDataTexture?t.push(Mn(data[i].image)):t.push(Mn(data[i]))}else t=Mn(data);output.url=t}return t||(meta.images[this.uuid]=output),output}}function Mn(image){return"undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?Cn.getDataURL(image):image.data?{data:Array.from(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Bn=0;class Tn extends Ke{constructor(image=Tn.DEFAULT_IMAGE,t=Tn.DEFAULT_MAPPING,e=vt,n=vt,r=wt,o=St,l=Nt,c=Ct,h=Tn.DEFAULT_ANISOTROPY,d=Ne){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Bn++}),this.uuid=nn(),this.name="",this.source=new In(image),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=e,this.wrapT=n,this.magFilter=r,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new pn(0,0),this.repeat=new pn(1,1),this.center=new pn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.channel=source.channel,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.encoding=source.encoding,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}toJSON(meta){const t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];const output={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(output.userData=this.userData),t||(meta.textures[this.uuid]=output),output}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ht)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case At:t.x=t.x-Math.floor(t.x);break;case vt:t.x=t.x<0?0:1;break;case bt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case At:t.y=t.y-Math.floor(t.y);break;case vt:t.y=t.y<0?0:1;break;case bt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}Tn.DEFAULT_IMAGE=null,Tn.DEFAULT_MAPPING=ht,Tn.DEFAULT_ANISOTROPY=1;class kn{constructor(t=0,e=0,n=0,r=1){kn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=this.w,l=t.elements;return this.x=l[0]*e+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*e+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*e+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*e+l[7]*n+l[11]*r+l[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(q){this.w=2*Math.acos(q.w);const s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}setAxisAngleFromRotationMatrix(t){let e,n,r,o;const l=t.elements,c=l[0],h=l[4],d=l[8],f=l[1],m=l[5],A=l[9],v=l[2],y=l[6],x=l[10];if(Math.abs(h-f)<.01&&Math.abs(d-v)<.01&&Math.abs(A-y)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+v)<.1&&Math.abs(A+y)<.1&&Math.abs(c+m+x-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(c+1)/2,l=(m+1)/2,_=(x+1)/2,w=(h+f)/4,E=(d+v)/4,S=(A+y)/4;return t>l&&t>_?t<.01?(n=0,r=.707106781,o=.707106781):(r=w/(n=Math.sqrt(t)),o=E/n):l>_?l<.01?(n=.707106781,r=0,o=.707106781):(n=w/(r=Math.sqrt(l)),o=S/r):_<.01?(n=.707106781,r=.707106781,o=0):(n=E/(o=Math.sqrt(_)),r=S/o),this.set(n,r,o,e),this}let s=Math.sqrt((y-A)*(y-A)+(d-v)*(d-v)+(f-h)*(f-h));return Math.abs(s)<.001&&(s=1),this.x=(y-A)/s,this.y=(d-v)/s,this.z=(f-h)/s,this.w=Math.acos((c+m+x-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rn extends Ke{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new kn(0,0,t,e),this.scissorTest=!1,this.viewport=new kn(0,0,t,e);const image={width:t,height:e,depth:1};this.texture=new Tn(image,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:wt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(source){this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.copy(source.viewport),this.texture=source.texture.clone(),this.texture.isRenderTargetTexture=!0;const image=Object.assign({},source.texture.image);return this.texture.source=new In(image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ln extends Tn{constructor(data=null,t=1,e=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:data,width:t,height:e,depth:n},this.magFilter=yt,this.minFilter=yt,this.wrapR=vt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dn extends Tn{constructor(data=null,t=1,e=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:data,width:t,height:e,depth:n},this.magFilter=yt,this.minFilter=yt,this.wrapR=vt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pn{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,o,l,c){let h=n[r+0],d=n[r+1],f=n[r+2],m=n[r+3];const A=o[l+0],v=o[l+1],y=o[l+2],x=o[l+3];if(0===c)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=m);if(1===c)return t[e+0]=A,t[e+1]=v,t[e+2]=y,void(t[e+3]=x);if(m!==x||h!==A||d!==v||f!==y){let s=1-c;const t=h*A+d*v+f*y+m*x,e=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),o=Math.atan2(r,t*e);s=Math.sin(s*o)/r,c=Math.sin(c*o)/r}const r=c*e;if(h=h*s+A*r,d=d*s+v*r,f=f*s+y*r,m=m*s+x*r,s===1-c){const t=1/Math.sqrt(h*h+d*d+f*f+m*m);h*=t,d*=t,f*=t,m*=t}}t[e]=h,t[e+1]=d,t[e+2]=f,t[e+3]=m}static multiplyQuaternionsFlat(t,e,n,r,o,l){const c=n[r],h=n[r+1],d=n[r+2],f=n[r+3],m=o[l],A=o[l+1],v=o[l+2],y=o[l+3];return t[e]=c*y+f*m+h*v-d*A,t[e+1]=h*y+f*A+d*m-c*v,t[e+2]=d*y+f*v+c*A-h*m,t[e+3]=f*y-c*m-h*A-d*v,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,o=t._z,l=t._order,c=Math.cos,h=Math.sin,d=c(n/2),f=c(r/2),m=c(o/2),A=h(n/2),v=h(r/2),y=h(o/2);switch(l){case"XYZ":this._x=A*f*m+d*v*y,this._y=d*v*m-A*f*y,this._z=d*f*y+A*v*m,this._w=d*f*m-A*v*y;break;case"YXZ":this._x=A*f*m+d*v*y,this._y=d*v*m-A*f*y,this._z=d*f*y-A*v*m,this._w=d*f*m+A*v*y;break;case"ZXY":this._x=A*f*m-d*v*y,this._y=d*v*m+A*f*y,this._z=d*f*y+A*v*m,this._w=d*f*m-A*v*y;break;case"ZYX":this._x=A*f*m-d*v*y,this._y=d*v*m+A*f*y,this._z=d*f*y-A*v*m,this._w=d*f*m+A*v*y;break;case"YZX":this._x=A*f*m+d*v*y,this._y=d*v*m+A*f*y,this._z=d*f*y-A*v*m,this._w=d*f*m-A*v*y;break;case"XZY":this._x=A*f*m-d*v*y,this._y=d*v*m-A*f*y,this._z=d*f*y+A*v*m,this._w=d*f*m+A*v*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],o=e[8],l=e[1],c=e[5],h=e[9],d=e[2],f=e[6],m=e[10],A=n+c+m;if(A>0){const s=.5/Math.sqrt(A+1);this._w=.25/s,this._x=(f-h)*s,this._y=(o-d)*s,this._z=(l-r)*s}else if(n>c&&n>m){const s=2*Math.sqrt(1+n-c-m);this._w=(f-h)/s,this._x=.25*s,this._y=(r+l)/s,this._z=(o+d)/s}else if(c>m){const s=2*Math.sqrt(1+c-n-m);this._w=(o-d)/s,this._x=(r+l)/s,this._y=.25*s,this._z=(h+f)/s}else{const s=2*Math.sqrt(1+m-n-c);this._w=(l-r)/s,this._x=(o+d)/s,this._y=(h+f)/s,this._z=.25*s}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(q){return 2*Math.acos(Math.abs(rn(this.dot(q),-1,1)))}rotateTowards(q,t){const e=this.angleTo(q);if(0===e)return this;const n=Math.min(1,t/e);return this.slerp(q,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(q){return this.multiplyQuaternions(this,q)}premultiply(q){return this.multiplyQuaternions(q,this)}multiplyQuaternions(a,b){const t=a._x,e=a._y,n=a._z,r=a._w,o=b._x,l=b._y,c=b._z,h=b._w;return this._x=t*h+r*o+e*c-n*l,this._y=e*h+r*l+n*o-t*c,this._z=n*h+r*c+t*l-e*o,this._w=r*h-t*o-e*l-n*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,o=this._z,l=this._w;let c=l*t._w+n*t._x+r*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;const h=1-c*c;if(h<=Number.EPSILON){const s=1-e;return this._w=s*l+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*o+e*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),f=Math.atan2(d,c),m=Math.sin((1-e)*f)/d,A=Math.sin(e*f)/d;return this._w=l*m+this._w*A,this._x=n*m+this._x*A,this._y=r*m+this._y*A,this._z=o*m+this._z*A,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(o),n*Math.cos(o),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class On{constructor(t=0,e=0,n=0){On.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(s){return this.x+=s,this.y+=s,this.z+=s,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(s){return this.x-=s,this.y-=s,this.z-=s,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}applyEuler(t){return this.applyQuaternion(Nn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Nn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=t.elements,l=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*l,this}applyQuaternion(q){const t=this.x,e=this.y,n=this.z,r=q.x,o=q.y,l=q.z,c=q.w,h=c*t+o*n-l*e,d=c*e+l*t-r*n,f=c*n+r*e-o*t,m=-r*t-o*e-l*n;return this.x=h*c+m*-r+d*-l-f*-o,this.y=d*c+m*-o+f*-r-h*-l,this.z=f*c+m*-l+h*-o-d*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(a,b){const t=a.x,e=a.y,n=a.z,r=b.x,o=b.y,l=b.z;return this.x=e*l-n*o,this.y=n*r-t*l,this.z=t*o-e*r,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Fn.copy(this).projectOnVector(t),this.sub(Fn)}reflect(t){return this.sub(Fn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const u=2*(Math.random()-.5),t=Math.random()*Math.PI*2,e=Math.sqrt(1-u**2);return this.x=e*Math.cos(t),this.y=e*Math.sin(t),this.z=u,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Fn=new On,Nn=new Pn;class Un{constructor(t=new On(1/0,1/0,1/0),e=new On(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i+=3)this.expandByPoint(zn.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,e=t.count;i<e;i++)this.expandByPoint(zn.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,e){const n=zn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(object,t=!1){return this.makeEmpty(),this.expandByObject(object,t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(object,t=!1){if(object.updateWorldMatrix(!1,!1),void 0!==object.boundingBox)null===object.boundingBox&&object.computeBoundingBox(),Gn.copy(object.boundingBox),Gn.applyMatrix4(object.matrixWorld),this.union(Gn);else{const e=object.geometry;if(void 0!==e)if(t&&void 0!==e.attributes&&void 0!==e.attributes.position){const t=e.attributes.position;for(let i=0,e=t.count;i<e;i++)zn.fromBufferAttribute(t,i).applyMatrix4(object.matrixWorld),this.expandByPoint(zn)}else null===e.boundingBox&&e.computeBoundingBox(),Gn.copy(e.boundingBox),Gn.applyMatrix4(object.matrixWorld),this.union(Gn)}const e=object.children;for(let i=0,n=e.length;i<n;i++)this.expandByObject(e[i],t);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,zn),zn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Yn),Xn.subVectors(this.max,Yn),Hn.subVectors(t.a,Yn),Vn.subVectors(t.b,Yn),jn.subVectors(t.c,Yn),Wn.subVectors(Vn,Hn),$n.subVectors(jn,Vn),qn.subVectors(Hn,jn);let e=[0,-Wn.z,Wn.y,0,-$n.z,$n.y,0,-qn.z,qn.y,Wn.z,0,-Wn.x,$n.z,0,-$n.x,qn.z,0,-qn.x,-Wn.y,Wn.x,0,-$n.y,$n.x,0,-qn.y,qn.x,0];return!!Zn(e,Hn,Vn,jn,Xn)&&(!!Zn(e=[1,0,0,0,1,0,0,0,1],Hn,Vn,jn,Xn)&&(Kn.crossVectors(Wn,$n),Zn(e=[Kn.x,Kn.y,Kn.z],Hn,Vn,jn,Xn)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,zn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(zn).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Qn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Qn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Qn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Qn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Qn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Qn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Qn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Qn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Qn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Qn=[new On,new On,new On,new On,new On,new On,new On,new On],zn=new On,Gn=new Un,Hn=new On,Vn=new On,jn=new On,Wn=new On,$n=new On,qn=new On,Yn=new On,Xn=new On,Kn=new On,Jn=new On;function Zn(t,e,n,r,o){for(let i=0,l=t.length-3;i<=l;i+=3){Jn.fromArray(t,i);const l=o.x*Math.abs(Jn.x)+o.y*Math.abs(Jn.y)+o.z*Math.abs(Jn.z),c=e.dot(Jn),h=n.dot(Jn),d=r.dot(Jn);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>l)return!1}return!0}const ti=new Un,ei=new On,ni=new On;class ii{constructor(t=new On,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):ti.setFromPoints(t).getCenter(n);let r=0;for(let i=0,e=t.length;i<e;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ei.subVectors(t,this.center);const e=ei.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(ei,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ni.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ei.copy(t.center).add(ni)),this.expandByPoint(ei.copy(t.center).sub(ni))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ri=new On,si=new On,ai=new On,oi=new On,ci=new On,hi=new On,ui=new On;class di{constructor(t=new On,e=new On(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ri)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=ri.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ri.copy(this.origin).addScaledVector(this.direction,e),ri.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){si.copy(t).add(e).multiplyScalar(.5),ai.copy(e).sub(t).normalize(),oi.copy(this.origin).sub(si);const o=.5*t.distanceTo(e),l=-this.direction.dot(ai),c=oi.dot(this.direction),h=-oi.dot(ai),d=oi.lengthSq(),f=Math.abs(1-l*l);let m,A,v,y;if(f>0)if(A=l*c-h,y=o*f,(m=l*h-c)>=0)if(A>=-y)if(A<=y){const t=1/f;v=(m*=t)*(m+l*(A*=t)+2*c)+A*(l*m+A+2*h)+d}else A=o,v=-(m=Math.max(0,-(l*A+c)))*m+A*(A+2*h)+d;else A=-o,v=-(m=Math.max(0,-(l*A+c)))*m+A*(A+2*h)+d;else A<=-y?v=-(m=Math.max(0,-(-l*o+c)))*m+(A=m>0?-o:Math.min(Math.max(-o,-h),o))*(A+2*h)+d:A<=y?(m=0,v=(A=Math.min(Math.max(-o,-h),o))*(A+2*h)+d):v=-(m=Math.max(0,-(l*o+c)))*m+(A=m>0?o:Math.min(Math.max(-o,-h),o))*(A+2*h)+d;else A=l>0?-o:o,v=-(m=Math.max(0,-(l*A+c)))*m+A*(A+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(si).addScaledVector(ai,A),v}intersectSphere(t,e){ri.subVectors(t.center,this.origin);const n=ri.dot(this.direction),r=ri.dot(ri)-n*n,o=t.radius*t.radius;if(r>o)return null;const l=Math.sqrt(o-r),c=n-l,h=n+l;return h<0?null:c<0?this.at(h,e):this.at(c,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,o,l,c,h;const d=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,A=this.origin;return d>=0?(n=(t.min.x-A.x)*d,r=(t.max.x-A.x)*d):(n=(t.max.x-A.x)*d,r=(t.min.x-A.x)*d),f>=0?(o=(t.min.y-A.y)*f,l=(t.max.y-A.y)*f):(o=(t.max.y-A.y)*f,l=(t.min.y-A.y)*f),n>l||o>r?null:((o>n||isNaN(n))&&(n=o),(l<r||isNaN(r))&&(r=l),m>=0?(c=(t.min.z-A.z)*m,h=(t.max.z-A.z)*m):(c=(t.max.z-A.z)*m,h=(t.min.z-A.z)*m),n>h||c>r?null:((c>n||n!=n)&&(n=c),(h<r||r!=r)&&(r=h),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,ri)}intersectTriangle(a,b,t,e,n){ci.subVectors(b,a),hi.subVectors(t,a),ui.crossVectors(ci,hi);let r,o=this.direction.dot(ui);if(o>0){if(e)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}oi.subVectors(this.origin,a);const l=r*this.direction.dot(hi.crossVectors(oi,hi));if(l<0)return null;const c=r*this.direction.dot(ci.cross(oi));if(c<0)return null;if(l+c>o)return null;const h=-r*oi.dot(ui);return h<0?null:this.at(h/o,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class pi{constructor(){pi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,o,l,c,h,d,f,m,A,v,y,x,_){const w=this.elements;return w[0]=t,w[4]=e,w[8]=n,w[12]=r,w[1]=o,w[5]=l,w[9]=c,w[13]=h,w[2]=d,w[6]=f,w[10]=m,w[14]=A,w[3]=v,w[7]=y,w[11]=x,w[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new pi).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/fi.setFromMatrixColumn(t,0).length(),o=1/fi.setFromMatrixColumn(t,1).length(),l=1/fi.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),b=Math.sin(n),l=Math.cos(r),c=Math.sin(r),h=Math.cos(o),d=Math.sin(o);if("XYZ"===t.order){const t=a*h,n=a*d,r=b*h,o=b*d;e[0]=l*h,e[4]=-l*d,e[8]=c,e[1]=n+r*c,e[5]=t-o*c,e[9]=-b*l,e[2]=o-t*c,e[6]=r+n*c,e[10]=a*l}else if("YXZ"===t.order){const t=l*h,n=l*d,r=c*h,o=c*d;e[0]=t+o*b,e[4]=r*b-n,e[8]=a*c,e[1]=a*d,e[5]=a*h,e[9]=-b,e[2]=n*b-r,e[6]=o+t*b,e[10]=a*l}else if("ZXY"===t.order){const t=l*h,n=l*d,r=c*h,o=c*d;e[0]=t-o*b,e[4]=-a*d,e[8]=r+n*b,e[1]=n+r*b,e[5]=a*h,e[9]=o-t*b,e[2]=-a*c,e[6]=b,e[10]=a*l}else if("ZYX"===t.order){const t=a*h,n=a*d,r=b*h,o=b*d;e[0]=l*h,e[4]=r*c-n,e[8]=t*c+o,e[1]=l*d,e[5]=o*c+t,e[9]=n*c-r,e[2]=-c,e[6]=b*l,e[10]=a*l}else if("YZX"===t.order){const t=a*l,n=a*c,r=b*l,o=b*c;e[0]=l*h,e[4]=o-t*d,e[8]=r*d+n,e[1]=d,e[5]=a*h,e[9]=-b*h,e[2]=-c*h,e[6]=n*d+r,e[10]=t-o*d}else if("XZY"===t.order){const t=a*l,n=a*c,r=b*l,o=b*c;e[0]=l*h,e[4]=-d,e[8]=c*h,e[1]=t*d+o,e[5]=a*h,e[9]=n*d-r,e[2]=r*d-n,e[6]=b*h,e[10]=o*d+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(q){return this.compose(gi,q,Ai)}lookAt(t,e,n){const r=this.elements;return yi.subVectors(t,e),0===yi.lengthSq()&&(yi.z=1),yi.normalize(),vi.crossVectors(n,yi),0===vi.lengthSq()&&(1===Math.abs(n.z)?yi.x+=1e-4:yi.z+=1e-4,yi.normalize(),vi.crossVectors(n,yi)),vi.normalize(),bi.crossVectors(yi,vi),r[0]=vi.x,r[4]=bi.x,r[8]=yi.x,r[1]=vi.y,r[5]=bi.y,r[9]=yi.y,r[2]=vi.z,r[6]=bi.z,r[10]=yi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(a,b){const t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[4],l=t[8],c=t[12],h=t[1],d=t[5],f=t[9],m=t[13],A=t[2],v=t[6],y=t[10],x=t[14],_=t[3],w=t[7],E=t[11],S=t[15],C=e[0],I=e[4],M=e[8],B=e[12],T=e[1],k=e[5],R=e[9],L=e[13],D=e[2],P=e[6],O=e[10],F=e[14],N=e[3],U=e[7],Q=e[11],z=e[15];return n[0]=r*C+o*T+l*D+c*N,n[4]=r*I+o*k+l*P+c*U,n[8]=r*M+o*R+l*O+c*Q,n[12]=r*B+o*L+l*F+c*z,n[1]=h*C+d*T+f*D+m*N,n[5]=h*I+d*k+f*P+m*U,n[9]=h*M+d*R+f*O+m*Q,n[13]=h*B+d*L+f*F+m*z,n[2]=A*C+v*T+y*D+x*N,n[6]=A*I+v*k+y*P+x*U,n[10]=A*M+v*R+y*O+x*Q,n[14]=A*B+v*L+y*F+x*z,n[3]=_*C+w*T+E*D+S*N,n[7]=_*I+w*k+E*P+S*U,n[11]=_*M+w*R+E*O+S*Q,n[15]=_*B+w*L+E*F+S*z,this}multiplyScalar(s){const t=this.elements;return t[0]*=s,t[4]*=s,t[8]*=s,t[12]*=s,t[1]*=s,t[5]*=s,t[9]*=s,t[13]*=s,t[2]*=s,t[6]*=s,t[10]*=s,t[14]*=s,t[3]*=s,t[7]*=s,t[11]*=s,t[15]*=s,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],l=t[1],c=t[5],h=t[9],d=t[13],f=t[2],m=t[6],A=t[10],v=t[14];return t[3]*(+o*h*m-r*d*m-o*c*A+n*d*A+r*c*v-n*h*v)+t[7]*(+e*h*v-e*d*A+o*l*A-r*l*v+r*d*f-o*h*f)+t[11]*(+e*d*m-e*c*v-o*l*m+n*l*v+o*c*f-n*d*f)+t[15]*(-r*c*f-e*h*m+e*c*A+r*l*m-n*l*A+n*h*f)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],c=t[5],h=t[6],d=t[7],f=t[8],m=t[9],A=t[10],v=t[11],y=t[12],x=t[13],_=t[14],w=t[15],E=m*_*d-x*A*d+x*h*v-c*_*v-m*h*w+c*A*w,S=y*A*d-f*_*d-y*h*v+l*_*v+f*h*w-l*A*w,C=f*x*d-y*m*d+y*c*v-l*x*v-f*c*w+l*m*w,I=y*m*h-f*x*h-y*c*A+l*x*A+f*c*_-l*m*_,M=e*E+n*S+r*C+o*I;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/M;return t[0]=E*B,t[1]=(x*A*o-m*_*o-x*r*v+n*_*v+m*r*w-n*A*w)*B,t[2]=(c*_*o-x*h*o+x*r*d-n*_*d-c*r*w+n*h*w)*B,t[3]=(m*h*o-c*A*o-m*r*d+n*A*d+c*r*v-n*h*v)*B,t[4]=S*B,t[5]=(f*_*o-y*A*o+y*r*v-e*_*v-f*r*w+e*A*w)*B,t[6]=(y*h*o-l*_*o-y*r*d+e*_*d+l*r*w-e*h*w)*B,t[7]=(l*A*o-f*h*o+f*r*d-e*A*d-l*r*v+e*h*v)*B,t[8]=C*B,t[9]=(y*m*o-f*x*o-y*n*v+e*x*v+f*n*w-e*m*w)*B,t[10]=(l*x*o-y*c*o+y*n*d-e*x*d-l*n*w+e*c*w)*B,t[11]=(f*c*o-l*m*o-f*n*d+e*m*d+l*n*v-e*c*v)*B,t[12]=I*B,t[13]=(f*x*r-y*m*r+y*n*A-e*x*A-f*n*_+e*m*_)*B,t[14]=(y*c*r-l*x*r-y*n*h+e*x*h+l*n*_-e*c*_)*B,t[15]=(l*m*r-f*c*r+f*n*h-e*m*h-l*n*A+e*c*A)*B,this}scale(t){const e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,o=t.x,l=t.y,c=t.z,h=r*o,d=r*l;return this.set(h*o+n,h*l-s*c,h*c+s*l,0,h*l+s*c,d*l+n,d*c-s*o,0,h*c-s*l,d*c+s*o,r*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,o,l){return this.set(1,n,o,0,t,1,l,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,o=e._x,l=e._y,c=e._z,h=e._w,d=o+o,f=l+l,m=c+c,A=o*d,v=o*f,y=o*m,x=l*f,_=l*m,w=c*m,E=h*d,S=h*f,C=h*m,I=n.x,M=n.y,B=n.z;return r[0]=(1-(x+w))*I,r[1]=(v+C)*I,r[2]=(y-S)*I,r[3]=0,r[4]=(v-C)*M,r[5]=(1-(A+w))*M,r[6]=(_+E)*M,r[7]=0,r[8]=(y+S)*B,r[9]=(_-E)*B,r[10]=(1-(A+x))*B,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let o=fi.set(r[0],r[1],r[2]).length();const l=fi.set(r[4],r[5],r[6]).length(),c=fi.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],mi.copy(this);const h=1/o,d=1/l,f=1/c;return mi.elements[0]*=h,mi.elements[1]*=h,mi.elements[2]*=h,mi.elements[4]*=d,mi.elements[5]*=d,mi.elements[6]*=d,mi.elements[8]*=f,mi.elements[9]*=f,mi.elements[10]*=f,e.setFromRotationMatrix(mi),n.x=o,n.y=l,n.z=c,this}makePerspective(t,e,n,r,o,l){const c=this.elements,h=2*o/(e-t),d=2*o/(n-r),a=(e+t)/(e-t),b=(n+r)/(n-r),f=-(l+o)/(l-o),m=-2*l*o/(l-o);return c[0]=h,c[4]=0,c[8]=a,c[12]=0,c[1]=0,c[5]=d,c[9]=b,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=m,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,n,r,o,l){const c=this.elements,h=1/(e-t),d=1/(n-r),p=1/(l-o),f=(e+t)*h,m=(n+r)*d,A=(l+o)*p;return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=-2*p,c[14]=-A,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const fi=new On,mi=new pi,gi=new On(0,0,0),Ai=new On(1,1,1),vi=new On,bi=new On,yi=new On,xi=new pi,_i=new Pn;class wi{constructor(t=0,e=0,n=0,r=wi.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,o=r[0],l=r[4],c=r[8],h=r[1],d=r[5],f=r[9],m=r[2],A=r[6],v=r[10];switch(e){case"XYZ":this._y=Math.asin(rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(A,d),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,v),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(rn(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-m,v),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-rn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(A,v),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(rn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(c,v));break;case"XZY":this._z=Math.asin(-rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(A,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(q,t,e){return xi.makeRotationFromQuaternion(q),this.setFromRotationMatrix(xi,t,e)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return _i.setFromEuler(this),this.setFromQuaternion(_i,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wi.DEFAULT_ORDER="XYZ";class Ei{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Si=0;const Ci=new On,Ii=new Pn,Mi=new pi,Bi=new On,Ti=new On,ki=new On,Ri=new Pn,Li=new On(1,0,0),Di=new On(0,1,0),Pi=new On(0,0,1),Oi={type:"added"},Fi={type:"removed"};class Ni extends Ke{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Si++}),this.uuid=nn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ni.DEFAULT_UP.clone();const t=new On,e=new wi,n=new Pn,r=new On(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new pi},normalMatrix:{value:new fn}}),this.matrix=new pi,this.matrixWorld=new pi,this.matrixAutoUpdate=Ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ei,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(q){return this.quaternion.premultiply(q),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(q){this.quaternion.copy(q)}rotateOnAxis(t,e){return Ii.setFromAxisAngle(t,e),this.quaternion.multiply(Ii),this}rotateOnWorldAxis(t,e){return Ii.setFromAxisAngle(t,e),this.quaternion.premultiply(Ii),this}rotateX(t){return this.rotateOnAxis(Li,t)}rotateY(t){return this.rotateOnAxis(Di,t)}rotateZ(t){return this.rotateOnAxis(Pi,t)}translateOnAxis(t,e){return Ci.copy(t).applyQuaternion(this.quaternion),this.position.add(Ci.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Li,t)}translateY(t){return this.translateOnAxis(Di,t)}translateZ(t){return this.translateOnAxis(Pi,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Mi.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Bi.copy(t):Bi.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ti.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mi.lookAt(Ti,Bi,this.up):Mi.lookAt(Bi,Ti,this.up),this.quaternion.setFromRotationMatrix(Mi),r&&(Mi.extractRotation(r.matrixWorld),Ii.setFromRotationMatrix(Mi),this.quaternion.premultiply(Ii.invert()))}add(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,this.children.push(object),object.dispatchEvent(Oi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}remove(object){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(object);return-1!==t&&(object.parent=null,this.children.splice(t,1),object.dispatchEvent(Fi)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let i=0;i<this.children.length;i++){const object=this.children[i];object.parent=null,object.dispatchEvent(Fi)}return this.children.length=0,this}attach(object){return this.updateWorldMatrix(!0,!1),Mi.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),Mi.multiply(object.parent.matrixWorld)),object.applyMatrix4(Mi),this.add(object),object.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const object=this.children[i].getObjectByProperty(t,e);if(void 0!==object)return object}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ti,t,ki),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ti,Ri,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++){const n=e[i];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let i=0,e=t.length;i<e;i++){const e=t[i];!0===e.matrixWorldAutoUpdate&&e.updateWorldMatrix(!1,!0)}}}toJSON(meta){const t=void 0===meta||"string"==typeof meta,output={};t&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const object={};function e(t,element){return void 0===t[element.uuid]&&(t[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),object.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=e(meta.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let i=0,t=n.length;i<t;i++){const t=n[i];e(meta.shapes,t)}else e(meta.shapes,n)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(e(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(e(meta.materials,this.material[i]));object.material=t}else object.material=e(meta.materials,this.material);if(this.children.length>0){object.children=[];for(let i=0;i<this.children.length;i++)object.children.push(this.children[i].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(let i=0;i<this.animations.length;i++){const t=this.animations[i];object.animations.push(e(meta.animations,t))}}if(t){const t=n(meta.geometries),e=n(meta.materials),r=n(meta.textures),o=n(meta.images),l=n(meta.shapes),c=n(meta.skeletons),h=n(meta.animations),d=n(meta.nodes);t.length>0&&(output.geometries=t),e.length>0&&(output.materials=e),r.length>0&&(output.textures=r),o.length>0&&(output.images=o),l.length>0&&(output.shapes=l),c.length>0&&(output.skeletons=c),h.length>0&&(output.animations=h),d.length>0&&(output.nodes=d)}return output.object=object,output;function n(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(source,t=!0){if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=source.matrixWorldAutoUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===t)for(let i=0;i<source.children.length;i++){const t=source.children[i];this.add(t.clone())}return this}}Ni.DEFAULT_UP=new On(0,1,0),Ni.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ui=new On,Qi=new On,zi=new On,Gi=new On,Hi=new On,Vi=new On,ji=new On,Wi=new On,$i=new On,qi=new On;let Yi=!1;class Xi{constructor(a=new On,b=new On,t=new On){this.a=a,this.b=b,this.c=t}static getNormal(a,b,t,e){e.subVectors(t,b),Ui.subVectors(a,b),e.cross(Ui);const n=e.lengthSq();return n>0?e.multiplyScalar(1/Math.sqrt(n)):e.set(0,0,0)}static getBarycoord(t,a,b,e,n){Ui.subVectors(e,a),Qi.subVectors(b,a),zi.subVectors(t,a);const r=Ui.dot(Ui),o=Ui.dot(Qi),l=Ui.dot(zi),c=Qi.dot(Qi),h=Qi.dot(zi),d=r*c-o*o;if(0===d)return n.set(-2,-1,-1);const f=1/d,u=(c*l-o*h)*f,m=(r*h-o*l)*f;return n.set(1-u-m,m,u)}static containsPoint(t,a,b,e){return this.getBarycoord(t,a,b,e,Gi),Gi.x>=0&&Gi.y>=0&&Gi.x+Gi.y<=1}static getUV(t,e,n,r,o,l,c,h){return!1===Yi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yi=!0),this.getInterpolation(t,e,n,r,o,l,c,h)}static getInterpolation(t,e,n,r,o,l,c,h){return this.getBarycoord(t,e,n,r,Gi),h.setScalar(0),h.addScaledVector(o,Gi.x),h.addScaledVector(l,Gi.y),h.addScaledVector(c,Gi.z),h}static isFrontFacing(a,b,t,e){return Ui.subVectors(t,b),Qi.subVectors(a,b),Ui.cross(Qi).dot(e)<0}set(a,b,t){return this.a.copy(a),this.b.copy(b),this.c.copy(t),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ui.subVectors(this.c,this.b),Qi.subVectors(this.a,this.b),.5*Ui.cross(Qi).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Xi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Xi.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,o){return!1===Yi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Yi=!0),Xi.getInterpolation(t,this.a,this.b,this.c,e,n,r,o)}getInterpolation(t,e,n,r,o){return Xi.getInterpolation(t,this.a,this.b,this.c,e,n,r,o)}containsPoint(t){return Xi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Xi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(p,t){const a=this.a,b=this.b,e=this.c;let n,r;Hi.subVectors(b,a),Vi.subVectors(e,a),Wi.subVectors(p,a);const o=Hi.dot(Wi),l=Vi.dot(Wi);if(o<=0&&l<=0)return t.copy(a);$i.subVectors(p,b);const c=Hi.dot($i),h=Vi.dot($i);if(c>=0&&h<=c)return t.copy(b);const d=o*h-c*l;if(d<=0&&o>=0&&c<=0)return n=o/(o-c),t.copy(a).addScaledVector(Hi,n);qi.subVectors(p,e);const f=Hi.dot(qi),m=Vi.dot(qi);if(m>=0&&f<=m)return t.copy(e);const A=f*l-o*m;if(A<=0&&l>=0&&m<=0)return r=l/(l-m),t.copy(a).addScaledVector(Vi,r);const v=c*m-f*h;if(v<=0&&h-c>=0&&f-m>=0)return ji.subVectors(e,b),r=(h-c)/(h-c+(f-m)),t.copy(b).addScaledVector(ji,r);const y=1/(v+A+d);return n=A*y,r=d*y,t.copy(a).addScaledVector(Hi,n).addScaledVector(Vi,r)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Ki=0;class Ji extends Ke{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ki++}),this.uuid=nn(),this.name="",this.type="Material",this.blending=E,this.side=y,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=U,this.blendEquation=B,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Y,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=We,this.stencilZFail=We,this.stencilZPass=We,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(meta){const t=void 0===meta||"string"==typeof meta;t&&(meta={textures:{},images:{}});const data={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function e(t){const e=[];for(const n in t){const data=t[n];delete data.metadata,e.push(data)}return e}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(data.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(data.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(data.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(data.iridescenceMap=this.iridescenceMap.toJSON(meta).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(data.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(meta).uuid),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==E&&(data.blending=this.blending),this.side!==y&&(data.side=this.side),this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),data.depthFunc=this.depthFunc,data.depthTest=this.depthTest,data.depthWrite=this.depthWrite,data.colorWrite=this.colorWrite,data.stencilWrite=this.stencilWrite,data.stencilWriteMask=this.stencilWriteMask,data.stencilFunc=this.stencilFunc,data.stencilRef=this.stencilRef,data.stencilFuncMask=this.stencilFuncMask,data.stencilFail=this.stencilFail,data.stencilZFail=this.stencilZFail,data.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(data.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(data.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=this.flatShading),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),!1===this.fog&&(data.fog=!1),Object.keys(this.userData).length>0&&(data.userData=this.userData),t){const t=e(meta.textures),n=e(meta.images);t.length>0&&(data.textures=t),n.length>0&&(data.images=n)}return data}clone(){return(new this.constructor).copy(this)}copy(source){this.name=source.name,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;const t=source.clippingPlanes;let e=null;if(null!==t){const n=t.length;e=new Array(n);for(let i=0;i!==n;++i)e[i]=t[i].clone()}return this.clippingPlanes=e,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.forceSinglePass=source.forceSinglePass,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const Zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},er={h:0,s:0,l:0},nr={h:0,s:0,l:0};function ir(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}class rr{constructor(t,g,b){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===g&&void 0===b?this.set(t):this.setRGB(t,g,b)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ve){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,En.toWorkingColorSpace(this,e),this}setRGB(t,g,b,e=En.workingColorSpace){return this.r=t,this.g=g,this.b=b,En.toWorkingColorSpace(this,e),this}setHSL(t,s,e,n=En.workingColorSpace){if(t=sn(t,1),s=rn(s,0,1),e=rn(e,0,1),0===s)this.r=this.g=this.b=e;else{const p=e<=.5?e*(1+s):e+s-e*s,q=2*e-p;this.r=ir(q,p,t+1/3),this.g=ir(q,p,t),this.b=ir(q,p,t-1/3)}return En.toWorkingColorSpace(this,n),this}setStyle(style,t=Ve){function e(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(style)){let r;const o=n[1],l=n[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,En.toWorkingColorSpace(this,t),e(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,En.toWorkingColorSpace(this,t),e(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const n=parseFloat(r[1])/360,s=parseFloat(r[2])/100,o=parseFloat(r[3])/100;return e(r[4]),this.setHSL(n,s,o,t)}break;default:console.warn("THREE.Color: Unknown color model "+style)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(style)){const e=n[1],r=e.length;if(3===r)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(e,16),t);console.warn("THREE.Color: Invalid hex color "+style)}else if(style&&style.length>0)return this.setColorName(style,t);return this}setColorName(style,t=Ve){const e=Zi[style.toLowerCase()];return void 0!==e?this.setHex(e,t):console.warn("THREE.Color: Unknown color "+style),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=vn(t.r),this.g=vn(t.g),this.b=vn(t.b),this}copyLinearToSRGB(t){return this.r=bn(t.r),this.g=bn(t.g),this.b=bn(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ve){return En.fromWorkingColorSpace(sr.copy(this),t),rn(255*sr.r,0,255)<<16^rn(255*sr.g,0,255)<<8^rn(255*sr.b,0,255)<<0}getHexString(t=Ve){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=En.workingColorSpace){En.fromWorkingColorSpace(sr.copy(this),e);const n=sr.r,g=sr.g,b=sr.b,r=Math.max(n,g,b),o=Math.min(n,g,b);let l,c;const h=(o+r)/2;if(o===r)l=0,c=0;else{const t=r-o;switch(c=h<=.5?t/(r+o):t/(2-r-o),r){case n:l=(g-b)/t+(g<b?6:0);break;case g:l=(b-n)/t+2;break;case b:l=(n-g)/t+4}l/=6}return t.h=l,t.s=c,t.l=h,t}getRGB(t,e=En.workingColorSpace){return En.fromWorkingColorSpace(sr.copy(this),e),t.r=sr.r,t.g=sr.g,t.b=sr.b,t}getStyle(t=Ve){En.fromWorkingColorSpace(sr.copy(this),t);const e=sr.r,g=sr.g,b=sr.b;return t!==Ve?`color(${t} ${e.toFixed(3)} ${g.toFixed(3)} ${b.toFixed(3)})`:`rgb(${255*e|0},${255*g|0},${255*b|0})`}offsetHSL(t,s,e){return this.getHSL(er),er.h+=t,er.s+=s,er.l+=e,this.setHSL(er.h,er.s,er.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(er),t.getHSL(nr);const n=an(er.h,nr.h,e),s=an(er.s,nr.s,e),r=an(er.l,nr.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,g=this.g,b=this.b,n=t.elements;return this.r=n[0]*e+n[3]*g+n[6]*b,this.g=n[1]*e+n[4]*g+n[7]*b,this.b=n[2]*e+n[5]*g+n[8]*b,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const sr=new rr;rr.NAMES=Zi;class ar extends Ji{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}const or=lr();function lr(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),o=new Uint32Array(512);for(let i=0;i<256;++i){const t=i-127;t<-27?(r[i]=0,r[256|i]=32768,o[i]=24,o[256|i]=24):t<-14?(r[i]=1024>>-t-14,r[256|i]=1024>>-t-14|32768,o[i]=-t-1,o[256|i]=-t-1):t<=15?(r[i]=t+15<<10,r[256|i]=t+15<<10|32768,o[i]=13,o[256|i]=13):t<128?(r[i]=31744,r[256|i]=64512,o[i]=24,o[256|i]=24):(r[i]=31744,r[256|i]=64512,o[i]=13,o[256|i]=13)}const l=new Uint32Array(2048),c=new Uint32Array(64),h=new Uint32Array(64);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,l[i]=t|e}for(let i=1024;i<2048;++i)l[i]=939524096+(i-1024<<13);for(let i=1;i<31;++i)c[i]=i<<23;c[31]=1199570944,c[32]=2147483648;for(let i=33;i<63;++i)c[i]=2147483648+(i-32<<23);c[63]=3347054592;for(let i=1;i<64;++i)32!==i&&(h[i]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:o,mantissaTable:l,exponentTable:c,offsetTable:h}}function cr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=rn(t,-65504,65504),or.floatView[0]=t;const e=or.uint32View[0],n=e>>23&511;return or.baseTable[n]+((8388607&e)>>or.shiftTable[n])}function ur(t){const e=t>>10;return or.uint32View[0]=or.mantissaTable[or.offsetTable[e]+(1023&t)]+or.exponentTable[e],or.floatView[0]}const dr={toHalfFloat:cr,fromHalfFloat:ur},pr=new On,fr=new pn;class mr{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=qe,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let i=0,e=this.count;i<e;i++)fr.fromBufferAttribute(this,i),fr.applyMatrix3(t),this.setXY(i,fr.x,fr.y);else if(3===this.itemSize)for(let i=0,e=this.count;i<e;i++)pr.fromBufferAttribute(this,i),pr.applyMatrix3(t),this.setXYZ(i,pr.x,pr.y,pr.z);return this}applyMatrix4(t){for(let i=0,e=this.count;i<e;i++)pr.fromBufferAttribute(this,i),pr.applyMatrix4(t),this.setXYZ(i,pr.x,pr.y,pr.z);return this}applyNormalMatrix(t){for(let i=0,e=this.count;i<e;i++)pr.fromBufferAttribute(this,i),pr.applyNormalMatrix(t),this.setXYZ(i,pr.x,pr.y,pr.z);return this}transformDirection(t){for(let i=0,e=this.count;i<e;i++)pr.fromBufferAttribute(this,i),pr.transformDirection(t),this.setXYZ(i,pr.x,pr.y,pr.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=hn(e,this.array)),e}setX(t,e){return this.normalized&&(e=un(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=hn(e,this.array)),e}setY(t,e){return this.normalized&&(e=un(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=hn(e,this.array)),e}setZ(t,e){return this.normalized&&(e=un(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=hn(e,this.array)),e}setW(t,e){return this.normalized&&(e=un(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=un(e,this.array),n=un(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=un(e,this.array),n=un(n,this.array),r=un(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=un(e,this.array),n=un(n,this.array),r=un(r,this.array),o=un(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),this.usage!==qe&&(data.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(data.updateRange=this.updateRange),data}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class gr extends mr{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Ar extends mr{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class vr extends mr{constructor(t,e,n){super(new Float32Array(t),e,n)}}let yr=0;const xr=new pi,_r=new Ni,wr=new On,Er=new Un,Sr=new Un,Cr=new On;class Ir extends Ke{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yr++}),this.uuid=nn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(gn(t)?Ar:gr)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new fn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(q){return xr.makeRotationFromQuaternion(q),this.applyMatrix4(xr),this}rotateX(t){return xr.makeRotationX(t),this.applyMatrix4(xr),this}rotateY(t){return xr.makeRotationY(t),this.applyMatrix4(xr),this}rotateZ(t){return xr.makeRotationZ(t),this.applyMatrix4(xr),this}translate(t,e,n){return xr.makeTranslation(t,e,n),this.applyMatrix4(xr),this}scale(t,e,n){return xr.makeScale(t,e,n),this.applyMatrix4(xr),this}lookAt(t){return _r.lookAt(t),_r.updateMatrix(),this.applyMatrix4(_r.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wr).negate(),this.translate(wr.x,wr.y,wr.z),this}setFromPoints(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new vr(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Un);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new On(-1/0,-1/0,-1/0),new On(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];Er.setFromBufferAttribute(t),this.morphTargetsRelative?(Cr.addVectors(this.boundingBox.min,Er.min),this.boundingBox.expandByPoint(Cr),Cr.addVectors(this.boundingBox.max,Er.max),this.boundingBox.expandByPoint(Cr)):(this.boundingBox.expandByPoint(Er.min),this.boundingBox.expandByPoint(Er.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ii);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new On,1/0);if(t){const n=this.boundingSphere.center;if(Er.setFromBufferAttribute(t),e)for(let i=0,t=e.length;i<t;i++){const t=e[i];Sr.setFromBufferAttribute(t),this.morphTargetsRelative?(Cr.addVectors(Er.min,Sr.min),Er.expandByPoint(Cr),Cr.addVectors(Er.max,Sr.max),Er.expandByPoint(Cr)):(Er.expandByPoint(Sr.min),Er.expandByPoint(Sr.max))}Er.getCenter(n);let r=0;for(let i=0,e=t.count;i<e;i++)Cr.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Cr));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],l=this.morphTargetsRelative;for(let e=0,c=o.count;e<c;e++)Cr.fromBufferAttribute(o,e),l&&(wr.fromBufferAttribute(t,e),Cr.add(wr)),r=Math.max(r,n.distanceToSquared(Cr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,o=e.normal.array,l=e.uv.array,c=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new mr(new Float32Array(4*c),4));const h=this.getAttribute("tangent").array,d=[],f=[];for(let i=0;i<c;i++)d[i]=new On,f[i]=new On;const m=new On,A=new On,v=new On,y=new pn,x=new pn,_=new pn,w=new On,E=new On;function S(a,b,t){m.fromArray(r,3*a),A.fromArray(r,3*b),v.fromArray(r,3*t),y.fromArray(l,2*a),x.fromArray(l,2*b),_.fromArray(l,2*t),A.sub(m),v.sub(m),x.sub(y),_.sub(y);const e=1/(x.x*_.y-_.x*x.y);isFinite(e)&&(w.copy(A).multiplyScalar(_.y).addScaledVector(v,-x.y).multiplyScalar(e),E.copy(v).multiplyScalar(x.x).addScaledVector(A,-_.x).multiplyScalar(e),d[a].add(w),d[b].add(w),d[t].add(w),f[a].add(E),f[b].add(E),f[t].add(E))}let C=this.groups;0===C.length&&(C=[{start:0,count:n.length}]);for(let i=0,t=C.length;i<t;++i){const t=C[i],e=t.start;for(let r=e,o=e+t.count;r<o;r+=3)S(n[r+0],n[r+1],n[r+2])}const I=new On,M=new On,B=new On,T=new On;function k(t){B.fromArray(o,3*t),T.copy(B);const e=d[t];I.copy(e),I.sub(B.multiplyScalar(B.dot(e))).normalize(),M.crossVectors(T,e);const n=M.dot(f[t])<0?-1:1;h[4*t]=I.x,h[4*t+1]=I.y,h[4*t+2]=I.z,h[4*t+3]=n}for(let i=0,t=C.length;i<t;++i){const t=C[i],e=t.start;for(let r=e,o=e+t.count;r<o;r+=3)k(n[r+0]),k(n[r+1]),k(n[r+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new mr(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let i=0,t=n.count;i<t;i++)n.setXYZ(i,0,0,0);const r=new On,o=new On,l=new On,c=new On,h=new On,d=new On,f=new On,m=new On;if(t)for(let i=0,A=t.count;i<A;i+=3){const A=t.getX(i+0),v=t.getX(i+1),y=t.getX(i+2);r.fromBufferAttribute(e,A),o.fromBufferAttribute(e,v),l.fromBufferAttribute(e,y),f.subVectors(l,o),m.subVectors(r,o),f.cross(m),c.fromBufferAttribute(n,A),h.fromBufferAttribute(n,v),d.fromBufferAttribute(n,y),c.add(f),h.add(f),d.add(f),n.setXYZ(A,c.x,c.y,c.z),n.setXYZ(v,h.x,h.y,h.z),n.setXYZ(y,d.x,d.y,d.z)}else for(let i=0,t=e.count;i<t;i+=3)r.fromBufferAttribute(e,i+0),o.fromBufferAttribute(e,i+1),l.fromBufferAttribute(e,i+2),f.subVectors(l,o),m.subVectors(r,o),f.cross(m),n.setXYZ(i+0,f.x,f.y,f.z),n.setXYZ(i+1,f.x,f.y,f.z),n.setXYZ(i+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let i=0,e=t.count;i<e;i++)Cr.fromBufferAttribute(t,i),Cr.normalize(),t.setXYZ(i,Cr.x,Cr.y,Cr.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,o=t.normalized,l=new n.constructor(e.length*r);let c=0,h=0;for(let i=0,o=e.length;i<o;i++){c=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(let t=0;t<r;t++)l[h++]=n[c++]}return new mr(l,r,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ir,n=this.index.array,r=this.attributes;for(const o in r){const l=t(r[o],n);e.setAttribute(o,l)}const o=this.morphAttributes;for(const r in o){const l=[],c=o[r];for(let i=0,e=c.length;i<e;i++){const e=t(c[i],n);l.push(e)}e.morphAttributes[r]=l}e.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let i=0,t=l.length;i<t;i++){const t=l[i];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const data={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const e in t)void 0!==t[e]&&(data[e]=t[e]);return data}data.data={attributes:{}};const t=this.index;null!==t&&(data.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const e=this.attributes;for(const t in e){const n=e[t];data.data.attributes[t]=n.toJSON(data.data)}const n={};let r=!1;for(const t in this.morphAttributes){const e=this.morphAttributes[t],o=[];for(let i=0,t=e.length;i<t;i++){const t=e[i];o.push(t.toJSON(data.data))}o.length>0&&(n[t]=o,r=!0)}r&&(data.data.morphAttributes=n,data.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(data.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(data.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),data}clone(){return(new this.constructor).copy(this)}copy(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const data={};this.name=source.name;const t=source.index;null!==t&&this.setIndex(t.clone(data));const e=source.attributes;for(const t in e){const n=e[t];this.setAttribute(t,n.clone(data))}const n=source.morphAttributes;for(const t in n){const e=[],r=n[t];for(let i=0,t=r.length;i<t;i++)e.push(r[i].clone(data));this.morphAttributes[t]=e}this.morphTargetsRelative=source.morphTargetsRelative;const r=source.groups;for(let i=0,t=r.length;i<t;i++){const t=r[i];this.addGroup(t.start,t.count,t.materialIndex)}const o=source.boundingBox;null!==o&&(this.boundingBox=o.clone());const l=source.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Mr=new pi,Br=new di,Tr=new ii,kr=new On,Rr=new On,Lr=new On,Dr=new On,Pr=new On,Or=new On,Fr=new pn,Nr=new pn,Ur=new pn,Qr=new On,zr=new On,Gr=new On,Hr=new On,Vr=new On;class jr extends Ni{constructor(t=new Ir,e=new ar){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=source.material,this.geometry=source.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const c=this.morphTargetInfluences;if(o&&c){Or.set(0,0,0);for(let i=0,n=o.length;i<n;i++){const n=c[i],r=o[i];0!==n&&(Pr.fromBufferAttribute(r,t),l?Or.addScaledVector(Pr,n):Or.addScaledVector(Pr.sub(e),n))}e.add(Or)}return this.isSkinnedMesh&&this.applyBoneTransform(t,e),e}raycast(t,e){const n=this.geometry,r=this.material,o=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Tr.copy(n.boundingSphere),Tr.applyMatrix4(o),Br.copy(t.ray).recast(t.near),!1===Tr.containsPoint(Br.origin)){if(null===Br.intersectSphere(Tr,kr))return;if(Br.origin.distanceToSquared(kr)>(t.far-t.near)**2)return}if(Mr.copy(o).invert(),Br.copy(t.ray).applyMatrix4(Mr),null!==n.boundingBox&&!1===Br.intersectsBox(n.boundingBox))return;let l;const c=n.index,h=n.attributes.position,d=n.attributes.uv,f=n.attributes.uv2,m=n.attributes.normal,A=n.groups,v=n.drawRange;if(null!==c)if(Array.isArray(r))for(let i=0,n=A.length;i<n;i++){const n=A[i],o=r[n.materialIndex];for(let r=Math.max(n.start,v.start),h=Math.min(c.count,Math.min(n.start+n.count,v.start+v.count));r<h;r+=3){const a=c.getX(r),b=c.getX(r+1),h=c.getX(r+2);(l=Wr(this,o,t,Br,d,f,m,a,b,h))&&(l.faceIndex=Math.floor(r/3),l.face.materialIndex=n.materialIndex,e.push(l))}}else{for(let i=Math.max(0,v.start),n=Math.min(c.count,v.start+v.count);i<n;i+=3){const a=c.getX(i),b=c.getX(i+1),n=c.getX(i+2);(l=Wr(this,r,t,Br,d,f,m,a,b,n))&&(l.faceIndex=Math.floor(i/3),e.push(l))}}else if(void 0!==h)if(Array.isArray(r))for(let i=0,n=A.length;i<n;i++){const n=A[i],o=r[n.materialIndex];for(let r=Math.max(n.start,v.start),c=Math.min(h.count,Math.min(n.start+n.count,v.start+v.count));r<c;r+=3){(l=Wr(this,o,t,Br,d,f,m,r,r+1,r+2))&&(l.faceIndex=Math.floor(r/3),l.face.materialIndex=n.materialIndex,e.push(l))}}else{for(let i=Math.max(0,v.start),n=Math.min(h.count,v.start+v.count);i<n;i+=3){(l=Wr(this,r,t,Br,d,f,m,i,i+1,i+2))&&(l.faceIndex=Math.floor(i/3),e.push(l))}}}}function Wr(object,t,e,n,r,o,l,a,b,c){object.getVertexPosition(a,Rr),object.getVertexPosition(b,Lr),object.getVertexPosition(c,Dr);const h=function(object,t,e,n,r,o,l,c){let h;if(null===(h=t.side===x?n.intersectTriangle(l,o,r,!0,c):n.intersectTriangle(r,o,l,t.side===y,c)))return null;Vr.copy(c),Vr.applyMatrix4(object.matrixWorld);const d=e.ray.origin.distanceTo(Vr);return d<e.near||d>e.far?null:{distance:d,point:Vr.clone(),object:object}}(object,t,e,n,Rr,Lr,Dr,Hr);if(h){r&&(Fr.fromBufferAttribute(r,a),Nr.fromBufferAttribute(r,b),Ur.fromBufferAttribute(r,c),h.uv=Xi.getInterpolation(Hr,Rr,Lr,Dr,Fr,Nr,Ur,new pn)),o&&(Fr.fromBufferAttribute(o,a),Nr.fromBufferAttribute(o,b),Ur.fromBufferAttribute(o,c),h.uv2=Xi.getInterpolation(Hr,Rr,Lr,Dr,Fr,Nr,Ur,new pn)),l&&(Qr.fromBufferAttribute(l,a),zr.fromBufferAttribute(l,b),Gr.fromBufferAttribute(l,c),h.normal=Xi.getInterpolation(Hr,Rr,Lr,Dr,Qr,zr,Gr,new On),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const t={a:a,b:b,c:c,normal:new On,materialIndex:0};Xi.getNormal(Rr,Lr,Dr,t.normal),h.face=t}return h}class $r extends Ir{constructor(t=1,e=1,n=1,r=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:l};const c=this;r=Math.floor(r),o=Math.floor(o),l=Math.floor(l);const h=[],d=[],f=[],m=[];let A=0,v=0;function y(u,t,e,n,r,o,l,y,x,_,w){const E=o/x,S=l/_,C=o/2,I=l/2,M=y/2,B=x+1,T=_+1;let k=0,R=0;const L=new On;for(let o=0;o<T;o++){const l=o*S-I;for(let c=0;c<B;c++){const h=c*E-C;L[u]=h*n,L[t]=l*r,L[e]=M,d.push(L.x,L.y,L.z),L[u]=0,L[t]=0,L[e]=y>0?1:-1,f.push(L.x,L.y,L.z),m.push(c/x),m.push(1-o/_),k+=1}}for(let t=0;t<_;t++)for(let e=0;e<x;e++){const a=A+e+B*t,b=A+e+B*(t+1),n=A+(e+1)+B*(t+1),r=A+(e+1)+B*t;h.push(a,b,r),h.push(b,n,r),R+=6}c.addGroup(v,R,w),v+=R,A+=k}y("z","y","x",-1,-1,n,e,t,l,o,0),y("z","y","x",1,-1,n,e,-t,l,o,1),y("x","z","y",1,1,t,n,e,r,l,2),y("x","z","y",1,-1,t,n,-e,r,l,3),y("x","y","z",1,-1,t,e,n,r,o,4),y("x","y","z",-1,-1,t,e,-n,r,o,5),this.setIndex(h),this.setAttribute("position",new vr(d,3)),this.setAttribute("normal",new vr(f,3)),this.setAttribute("uv",new vr(m,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new $r(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}function qr(t){const e={};for(const u in t){e[u]={};for(const p in t[u]){const n=t[u][p];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[u][p]=null):e[u][p]=n.clone():Array.isArray(n)?e[u][p]=n.slice():e[u][p]=n}}return e}function Yr(t){const e={};for(let u=0;u<t.length;u++){const n=qr(t[u]);for(const p in n)e[p]=n[p]}return e}function Xr(t){return null===t.getRenderTarget()&&t.outputEncoding===Ue?Ve:je}const Kr={clone:qr,merge:Yr};var Jr="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Zr="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class ts extends Ji{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Jr,this.fragmentShader=Zr,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(source){return super.copy(source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=qr(source.uniforms),this.uniformsGroups=function(t){const e=[];for(let u=0;u<t.length;u++)e.push(t[u].clone());return e}(source.uniformsGroups),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}toJSON(meta){const data=super.toJSON(meta);data.glslVersion=this.glslVersion,data.uniforms={};for(const t in this.uniforms){const e=this.uniforms[t].value;e&&e.isTexture?data.uniforms[t]={type:"t",value:e.toJSON(meta).uuid}:e&&e.isColor?data.uniforms[t]={type:"c",value:e.getHex()}:e&&e.isVector2?data.uniforms[t]={type:"v2",value:e.toArray()}:e&&e.isVector3?data.uniforms[t]={type:"v3",value:e.toArray()}:e&&e.isVector4?data.uniforms[t]={type:"v4",value:e.toArray()}:e&&e.isMatrix3?data.uniforms[t]={type:"m3",value:e.toArray()}:e&&e.isMatrix4?data.uniforms[t]={type:"m4",value:e.toArray()}:data.uniforms[t]={value:e}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader;const t={};for(const e in this.extensions)!0===this.extensions[e]&&(t[e]=!0);return Object.keys(t).length>0&&(data.extensions=t),data}}class es extends Ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pi,this.projectionMatrix=new pi,this.projectionMatrixInverse=new pi}copy(source,t){return super.copy(source,t),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class ns extends es{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(source,t){return super.copy(source,t),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*en*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*tn*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*en*Math.atan(Math.tan(.5*tn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,o,l){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*tn*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r;const view=this.view;if(null!==this.view&&this.view.enabled){const t=view.fullWidth,l=view.fullHeight;o+=view.offsetX*r/t,e-=view.offsetY*n/l,r*=view.width/t,n*=view.height/l}const l=this.filmOffset;0!==l&&(o+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}const is=-90,rs=1;class ss extends Ni{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new ns(is,rs,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const o=new ns(is,rs,t,e);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);const l=new ns(is,rs,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),this.add(l);const c=new ns(is,rs,t,e);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),this.add(c);const h=new ns(is,rs,t,e);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,1),this.add(h);const d=new ns(is,rs,t,e);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),this.add(d)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,o,l,c,h,d]=this.children,f=t.getRenderTarget(),m=t.toneMapping,A=t.xr.enabled;t.toneMapping=it,t.xr.enabled=!1;const v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,l),t.setRenderTarget(n,3),t.render(e,c),t.setRenderTarget(n,4),t.render(e,h),n.texture.generateMipmaps=v,t.setRenderTarget(n,5),t.render(e,d),t.setRenderTarget(f),t.toneMapping=m,t.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class as extends Tn{constructor(t,e,n,r,o,l,c,h,d,f){super(t=void 0!==t?t:[],e=void 0!==e?e:ut,n,r,o,l,c,h,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class os extends Rn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const image={width:t,height:t,depth:1},n=[image,image,image,image,image,image];this.texture=new as(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:wt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new $r(5,5,5),o=new ts({name:"CubemapFromEquirect",uniforms:qr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:x,blending:w});o.uniforms.tEquirect.value=e;const l=new jr(r,o),c=e.minFilter;return e.minFilter===St&&(e.minFilter=wt),new ss(1,10,this).update(t,l),e.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(t,e,n,r){const o=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(o)}}const ls=new On,cs=new On,hs=new fn;class us{constructor(t=new On(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(a,b,t){const e=ls.subVectors(t,b).cross(cs.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(e,a),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(line,t){const e=line.delta(ls),n=this.normal.dot(e);if(0===n)return 0===this.distanceToPoint(line.start)?t.copy(line.start):null;const r=-(line.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(line.start).addScaledVector(e,r)}intersectsLine(line){const t=this.distanceToPoint(line.start),e=this.distanceToPoint(line.end);return t<0&&e>0||e<0&&t>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||hs.getNormalMatrix(t),r=this.coplanarPoint(ls).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ds=new ii,ps=new On;class fs{constructor(t=new us,e=new us,n=new us,r=new us,o=new us,l=new us){this.planes=[t,e,n,r,o,l]}set(t,e,n,r,o,l){const c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(l),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],o=n[1],l=n[2],c=n[3],h=n[4],d=n[5],f=n[6],m=n[7],A=n[8],v=n[9],y=n[10],x=n[11],_=n[12],w=n[13],E=n[14],S=n[15];return e[0].setComponents(c-r,m-h,x-A,S-_).normalize(),e[1].setComponents(c+r,m+h,x+A,S+_).normalize(),e[2].setComponents(c+o,m+d,x+v,S+w).normalize(),e[3].setComponents(c-o,m-d,x-v,S-w).normalize(),e[4].setComponents(c-l,m-f,x-y,S-E).normalize(),e[5].setComponents(c+l,m+f,x+y,S+E).normalize(),this}intersectsObject(object){if(void 0!==object.boundingSphere)null===object.boundingSphere&&object.computeBoundingSphere(),ds.copy(object.boundingSphere).applyMatrix4(object.matrixWorld);else{const t=object.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ds.copy(t.boundingSphere).applyMatrix4(object.matrixWorld)}return this.intersectsSphere(ds)}intersectsSprite(t){return ds.center.set(0,0,0),ds.radius=.7071067811865476,ds.applyMatrix4(t.matrixWorld),this.intersectsSphere(ds)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(ps.x=n.normal.x>0?t.max.x:t.min.x,ps.y=n.normal.y>0?t.max.y:t.min.y,ps.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(ps)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ms(){let t=null,e=!1,n=null,r=null;function o(time,e){n(time,e),r=t.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function gs(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const data=r.get(e);data&&(t.deleteBuffer(data.buffer),r.delete(e))},update:function(e,o){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const data=r.get(e);void 0===data?r.set(e,function(e,r){const o=e.array,l=e.usage,c=t.createBuffer();let h;if(t.bindBuffer(r,c),t.bufferData(r,o,l),e.onUploadCallback(),o instanceof Float32Array)h=5126;else if(o instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");h=5131}else h=5123;else if(o instanceof Int16Array)h=5122;else if(o instanceof Uint32Array)h=5125;else if(o instanceof Int32Array)h=5124;else if(o instanceof Int8Array)h=5120;else if(o instanceof Uint8Array)h=5121;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);h=5121}return{buffer:c,type:h,bytesPerElement:o.BYTES_PER_ELEMENT,version:e.version}}(e,o)):data.version<e.version&&(function(e,r,o){const l=r.array,c=r.updateRange;t.bindBuffer(o,e),-1===c.count?t.bufferSubData(o,0,l):(n?t.bufferSubData(o,c.offset*l.BYTES_PER_ELEMENT,l,c.offset,c.count):t.bufferSubData(o,c.offset*l.BYTES_PER_ELEMENT,l.subarray(c.offset,c.offset+c.count)),c.count=-1),r.onUploadCallback()}(data.buffer,e,o),data.version=e.version)}}}class As extends Ir{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const o=t/2,l=e/2,c=Math.floor(n),h=Math.floor(r),d=c+1,f=h+1,m=t/c,A=e/h,v=[],y=[],x=[],_=[];for(let t=0;t<f;t++){const e=t*A-l;for(let n=0;n<d;n++){const r=n*m-o;y.push(r,-e,0),x.push(0,0,1),_.push(n/c),_.push(1-t/h)}}for(let t=0;t<h;t++)for(let e=0;e<c;e++){const a=e+d*t,b=e+d*(t+1),n=e+1+d*(t+1),r=e+1+d*t;v.push(a,b,r),v.push(b,n,r)}this.setIndex(v),this.setAttribute("position",new vr(y,3)),this.setAttribute("normal",new vr(x,3)),this.setAttribute("uv",new vr(_,2))}copy(source){return super.copy(source),this.parameters=Object.assign({},source.parameters),this}static fromJSON(data){return new As(data.width,data.height,data.widthSegments,data.heightSegments)}}const vs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},bs={common:{diffuse:{value:new rr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fn},alphaMap:{value:null},alphaMapTransform:{value:new fn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fn},normalScale:{value:new pn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new fn}},sprite:{diffuse:{value:new rr(16777215)},opacity:{value:1},center:{value:new pn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fn},alphaMap:{value:null},alphaTest:{value:0}}},ys={basic:{uniforms:Yr([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.fog]),vertexShader:vs.meshbasic_vert,fragmentShader:vs.meshbasic_frag},lambert:{uniforms:Yr([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,bs.lights,{emissive:{value:new rr(0)}}]),vertexShader:vs.meshlambert_vert,fragmentShader:vs.meshlambert_frag},phong:{uniforms:Yr([bs.common,bs.specularmap,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,bs.lights,{emissive:{value:new rr(0)},specular:{value:new rr(1118481)},shininess:{value:30}}]),vertexShader:vs.meshphong_vert,fragmentShader:vs.meshphong_frag},standard:{uniforms:Yr([bs.common,bs.envmap,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.roughnessmap,bs.metalnessmap,bs.fog,bs.lights,{emissive:{value:new rr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vs.meshphysical_vert,fragmentShader:vs.meshphysical_frag},toon:{uniforms:Yr([bs.common,bs.aomap,bs.lightmap,bs.emissivemap,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.gradientmap,bs.fog,bs.lights,{emissive:{value:new rr(0)}}]),vertexShader:vs.meshtoon_vert,fragmentShader:vs.meshtoon_frag},matcap:{uniforms:Yr([bs.common,bs.bumpmap,bs.normalmap,bs.displacementmap,bs.fog,{matcap:{value:null}}]),vertexShader:vs.meshmatcap_vert,fragmentShader:vs.meshmatcap_frag},points:{uniforms:Yr([bs.points,bs.fog]),vertexShader:vs.points_vert,fragmentShader:vs.points_frag},dashed:{uniforms:Yr([bs.common,bs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vs.linedashed_vert,fragmentShader:vs.linedashed_frag},depth:{uniforms:Yr([bs.common,bs.displacementmap]),vertexShader:vs.depth_vert,fragmentShader:vs.depth_frag},normal:{uniforms:Yr([bs.common,bs.bumpmap,bs.normalmap,bs.displacementmap,{opacity:{value:1}}]),vertexShader:vs.meshnormal_vert,fragmentShader:vs.meshnormal_frag},sprite:{uniforms:Yr([bs.sprite,bs.fog]),vertexShader:vs.sprite_vert,fragmentShader:vs.sprite_frag},background:{uniforms:{uvTransform:{value:new fn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:vs.background_vert,fragmentShader:vs.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:vs.backgroundCube_vert,fragmentShader:vs.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vs.cube_vert,fragmentShader:vs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vs.equirect_vert,fragmentShader:vs.equirect_frag},distanceRGBA:{uniforms:Yr([bs.common,bs.displacementmap,{referencePosition:{value:new On},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vs.distanceRGBA_vert,fragmentShader:vs.distanceRGBA_frag},shadow:{uniforms:Yr([bs.lights,bs.fog,{color:{value:new rr(0)},opacity:{value:1}}]),vertexShader:vs.shadow_vert,fragmentShader:vs.shadow_frag}};ys.physical={uniforms:Yr([ys.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fn},clearcoatNormalScale:{value:new pn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fn},sheen:{value:0},sheenColor:{value:new rr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fn},transmissionSamplerSize:{value:new pn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fn},attenuationDistance:{value:0},attenuationColor:{value:new rr(0)},specularColor:{value:new rr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fn}}]),vertexShader:vs.meshphysical_vert,fragmentShader:vs.meshphysical_frag};const xs={r:0,b:0,g:0};function _s(t,e,n,r,o,l,c){const h=new rr(0);let d,f,m=!0===l?0:1,A=null,v=0,_=null;function w(e,n){e.getRGB(xs,Xr(t)),r.buffers.color.setClear(xs.r,xs.g,xs.b,n,c)}return{getClearColor:function(){return h},setClearColor:function(t,e=1){h.set(t),w(h,m=e)},getClearAlpha:function(){return m},setClearAlpha:function(t){w(h,m=t)},render:function(r,l){let c=!1,E=!0===l.isScene?l.background:null;E&&E.isTexture&&(E=(l.backgroundBlurriness>0?n:e).get(E));const S=t.xr,C=S.getSession&&S.getSession();C&&"additive"===C.environmentBlendMode&&(E=null),null===E?w(h,m):E&&E.isColor&&(w(E,1),c=!0),(t.autoClear||c)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),E&&(E.isCubeTexture||E.mapping===gt)?(void 0===f&&((f=new jr(new $r(1,1,1),new ts({name:"BackgroundCubeMaterial",uniforms:qr(ys.backgroundCube.uniforms),vertexShader:ys.backgroundCube.vertexShader,fragmentShader:ys.backgroundCube.fragmentShader,side:x,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(f)),f.material.uniforms.envMap.value=E,f.material.uniforms.flipEnvMap.value=E.isCubeTexture&&!1===E.isRenderTargetTexture?-1:1,f.material.uniforms.backgroundBlurriness.value=l.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=l.backgroundIntensity,f.material.toneMapped=E.encoding!==Ue,A===E&&v===E.version&&_===t.toneMapping||(f.material.needsUpdate=!0,A=E,v=E.version,_=t.toneMapping),f.layers.enableAll(),r.unshift(f,f.geometry,f.material,0,0,null)):E&&E.isTexture&&(void 0===d&&((d=new jr(new As(2,2),new ts({name:"BackgroundMaterial",uniforms:qr(ys.background.uniforms),vertexShader:ys.background.vertexShader,fragmentShader:ys.background.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(d)),d.material.uniforms.t2D.value=E,d.material.uniforms.backgroundIntensity.value=l.backgroundIntensity,d.material.toneMapped=E.encoding!==Ue,!0===E.matrixAutoUpdate&&E.updateMatrix(),d.material.uniforms.uvTransform.value.copy(E.matrix),A===E&&v===E.version&&_===t.toneMapping||(d.material.needsUpdate=!0,A=E,v=E.version,_=t.toneMapping),d.layers.enableAll(),r.unshift(d,d.geometry,d.material,0,0,null))}}}function ws(t,e,n,r){const o=t.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),c=r.isWebGL2||null!==l,h={},d=y(null);let f=d,m=!1;function A(e){return r.isWebGL2?t.bindVertexArray(e):l.bindVertexArrayOES(e)}function v(e){return r.isWebGL2?t.deleteVertexArray(e):l.deleteVertexArrayOES(e)}function y(t){const e=[],n=[],r=[];for(let i=0;i<o;i++)e[i]=0,n[i]=0,r[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function x(){const t=f.newAttributes;for(let i=0,e=t.length;i<e;i++)t[i]=0}function _(t){w(t,0)}function w(n,o){const l=f.newAttributes,c=f.enabledAttributes,h=f.attributeDivisors;if(l[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),h[n]!==o){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,o),h[n]=o}}function E(){const e=f.newAttributes,n=f.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function S(e,n,o,l,c,h){!0!==r.isWebGL2||5124!==o&&5125!==o?t.vertexAttribPointer(e,n,o,l,c,h):t.vertexAttribIPointer(e,n,o,c,h)}function C(){I(),m=!0,f!==d&&A((f=d).object)}function I(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:function(object,o,d,v,C){let I=!1;if(c){const e=function(e,n,o){const c=!0===o.wireframe;let d=h[e.id];void 0===d&&(d={},h[e.id]=d);let f=d[n.id];void 0===f&&(f={},d[n.id]=f);let m=f[c];return void 0===m&&(m=y(r.isWebGL2?t.createVertexArray():l.createVertexArrayOES()),f[c]=m),m}(v,d,o);f!==e&&A((f=e).object),(I=function(object,t,e,n){const r=f.attributes,o=t.attributes;let l=0;const c=e.getAttributes();for(const t in c){const e=c[t];if(e.location>=0){const e=r[t];let n=o[t];if(void 0===n&&("instanceMatrix"===t&&object.instanceMatrix&&(n=object.instanceMatrix),"instanceColor"===t&&object.instanceColor&&(n=object.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;l++}}return f.attributesNum!==l||f.index!==n}(object,v,d,C))&&function(object,t,e,n){const r={},o=t.attributes;let l=0;const c=e.getAttributes();for(const t in c){const e=c[t];if(e.location>=0){let e=o[t];void 0===e&&("instanceMatrix"===t&&object.instanceMatrix&&(e=object.instanceMatrix),"instanceColor"===t&&object.instanceColor&&(e=object.instanceColor));const data={};data.attribute=e,e&&e.data&&(data.data=e.data),r[t]=data,l++}}f.attributes=r,f.attributesNum=l,f.index=n}(object,v,d,C)}else{const t=!0===o.wireframe;f.geometry===v.id&&f.program===d.id&&f.wireframe===t||(f.geometry=v.id,f.program=d.id,f.wireframe=t,I=!0)}null!==C&&n.update(C,34963),(I||m)&&(m=!1,function(object,o,l,c){if(!1===r.isWebGL2&&(object.isInstancedMesh||c.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const h=c.attributes,d=l.getAttributes(),f=o.defaultAttributeValues;for(const e in d){const r=d[e];if(r.location>=0){let o=h[e];if(void 0===o&&("instanceMatrix"===e&&object.instanceMatrix&&(o=object.instanceMatrix),"instanceColor"===e&&object.instanceColor&&(o=object.instanceColor)),void 0!==o){const e=o.normalized,l=o.itemSize,h=n.get(o);if(void 0===h)continue;const d=h.buffer,f=h.type,m=h.bytesPerElement;if(o.isInterleavedBufferAttribute){const data=o.data,n=data.stride,h=o.offset;if(data.isInstancedInterleavedBuffer){for(let i=0;i<r.locationSize;i++)w(r.location+i,data.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=data.meshPerAttribute*data.count)}else for(let i=0;i<r.locationSize;i++)_(r.location+i);t.bindBuffer(34962,d);for(let i=0;i<r.locationSize;i++)S(r.location+i,l/r.locationSize,f,e,n*m,(h+l/r.locationSize*i)*m)}else{if(o.isInstancedBufferAttribute){for(let i=0;i<r.locationSize;i++)w(r.location+i,o.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let i=0;i<r.locationSize;i++)_(r.location+i);t.bindBuffer(34962,d);for(let i=0;i<r.locationSize;i++)S(r.location+i,l/r.locationSize,f,e,l*m,l/r.locationSize*i*m)}}else if(void 0!==f){const n=f[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r.location,n);break;case 3:t.vertexAttrib3fv(r.location,n);break;case 4:t.vertexAttrib4fv(r.location,n);break;default:t.vertexAttrib1fv(r.location,n)}}}}E()}(object,o,d,v),null!==C&&t.bindBuffer(34963,n.get(C).buffer))},reset:C,resetDefaultState:I,dispose:function(){C();for(const t in h){const e=h[t];for(const t in e){const n=e[t];for(const t in n)v(n[t].object),delete n[t];delete e[t]}delete h[t]}},releaseStatesOfGeometry:function(t){if(void 0===h[t.id])return;const e=h[t.id];for(const t in e){const n=e[t];for(const t in n)v(n[t].object),delete n[t];delete e[t]}delete h[t.id]},releaseStatesOfProgram:function(t){for(const e in h){const n=h[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)v(r[t].object),delete r[t];delete n[t.id]}},initAttributes:x,enableAttribute:_,disableUnusedAttributes:E}}function Es(t,e,n,r){const o=r.isWebGL2;let l;this.setMode=function(t){l=t},this.render=function(e,r){t.drawArrays(l,e,r),n.update(r,l,1)},this.renderInstances=function(r,c,h){if(0===h)return;let d,f;if(o)d=t,f="drawArraysInstanced";else if(f="drawArraysInstancedANGLE",null===(d=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](l,r,c,h),n.update(c,l,h)}}function Ss(t,e,n){let r;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let c=void 0!==n.precision?n.precision:"highp";const h=o(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const d=l||e.has("WEBGL_draw_buffers"),f=!0===n.logarithmicDepthBuffer,m=t.getParameter(34930),A=t.getParameter(35660),v=t.getParameter(3379),y=t.getParameter(34076),x=t.getParameter(34921),_=t.getParameter(36347),w=t.getParameter(36348),E=t.getParameter(36349),S=A>0,C=l||e.has("OES_texture_float");return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:c,logarithmicDepthBuffer:f,maxTextures:m,maxVertexTextures:A,maxTextureSize:v,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:_,maxVaryings:w,maxFragmentUniforms:E,vertexTextures:S,floatFragmentTextures:C,floatVertexTextures:S&&C,maxSamples:l?t.getParameter(36183):0}}function Cs(t){const e=this;let n=null,r=0,o=!1,l=!1;const c=new us,h=new fn,d={value:null,needsUpdate:!1};function f(t,n,r,o){const l=null!==t?t.length:0;let f=null;if(0!==l){if(f=d.value,!0!==o||null===f){const e=r+4*l,o=n.matrixWorldInverse;h.getNormalMatrix(o),(null===f||f.length<e)&&(f=new Float32Array(e));for(let i=0,e=r;i!==l;++i,e+=4)c.copy(t[i]).applyMatrix4(o,h),c.normal.toArray(f,e),f[e+3]=c.constant}d.value=f,d.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,f}this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||o;return o=e,r=t.length,n},this.beginShadows=function(){l=!0,f(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(t,e){n=f(t,e,0)},this.setState=function(c,h,m){const A=c.clippingPlanes,v=c.clipIntersection,y=c.clipShadows,x=t.get(c);if(!o||null===A||0===A.length||l&&!y)l?f(null):function(){d.value!==n&&(d.value=n,d.needsUpdate=r>0);e.numPlanes=r,e.numIntersection=0}();else{const t=l?0:r,e=4*t;let o=x.clippingState||null;d.value=o,o=f(A,h,e,m);for(let i=0;i!==e;++i)o[i]=n[i];x.clippingState=o,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=t}}}function Is(t){let e=new WeakMap;function n(t,e){return e===ft?t.mapping=ut:e===mt&&(t.mapping=pt),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const o=e.get(n);void 0!==o&&(e.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(l===ft||l===mt){if(e.has(o))return n(e.get(o).texture,o.mapping);{const image=o.image;if(image&&image.height>0){const l=new os(image.height/2);return l.fromEquirectangularTexture(t,o),e.set(o,l),o.addEventListener("dispose",r),n(l.texture,o.mapping)}return null}}}return o},dispose:function(){e=new WeakMap}}}class Ms extends es{constructor(t=-1,e=1,n=1,r=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(source,t){return super.copy(source,t),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}setViewOffset(t,e,n,r,o,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-t,l=n+t,c=r+e,h=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l=(o+=t*this.view.offsetX)+t*this.view.width,h=(c-=e*this.view.offsetY)-e*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(meta){const data=super.toJSON(meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}const Bs=4,Ts=[.125,.215,.35,.446,.526,.582],ks=20,Rs=new Ms,Ls=new rr;let Ds=null;const Ps=(1+Math.sqrt(5))/2,Os=1/Ps,Fs=[new On(1,1,1),new On(-1,1,1),new On(1,1,-1),new On(-1,1,-1),new On(0,Ps,Os),new On(0,Ps,-Os),new On(Os,0,Ps),new On(-Os,0,Ps),new On(Ps,Os,0),new On(-Ps,Os,0)];class Ns{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Ds=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Gs(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=zs(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let i=0;i<this._lodPlanes.length;i++)this._lodPlanes[i].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ds),t.scissorTest=!1,Qs(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===ut||t.mapping===pt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Ds=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:wt,minFilter:wt,generateMipmaps:!1,type:Lt,format:Nt,encoding:Ne,depthBuffer:!1},r=Us(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Us(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],r=[];let o=t;const l=t-Bs+1+Ts.length;for(let i=0;i<l;i++){const l=Math.pow(2,o);n.push(l);let c=1/l;i>t-Bs?c=Ts[i-t+Bs-1]:0===i&&(c=0),r.push(c);const h=1/(l-2),d=-h,f=1+h,m=[d,d,f,d,f,f,d,d,f,f,d,f],A=6,v=6,y=3,x=2,_=1,w=new Float32Array(y*v*A),E=new Float32Array(x*v*A),S=new Float32Array(_*v*A);for(let t=0;t<A;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];w.set(r,y*v*t),E.set(m,x*v*t);const o=[t,t,t,t,t,t];S.set(o,_*v*t)}const C=new Ir;C.setAttribute("position",new mr(w,y)),C.setAttribute("uv",new mr(E,x)),C.setAttribute("faceIndex",new mr(S,_)),e.push(C),o>Bs&&o--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(t,e,n){const r=new Float32Array(ks),o=new On(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:ks,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Hs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}(r,t,e)}return r}_compileMaterial(t){const e=new jr(this._lodPlanes[0],t);this._renderer.compile(e,Rs)}_sceneToCubeUV(t,e,n,r){const o=new ns(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor(Ls),h.toneMapping=it,h.autoClear=!1;const m=new ar({name:"PMREM.Background",side:x,depthWrite:!1,depthTest:!1}),A=new jr(new $r,m);let v=!1;const y=t.background;y?y.isColor&&(m.color.copy(y),t.background=null,v=!0):(m.color.copy(Ls),v=!0);for(let i=0;i<6;i++){const col=i%3;0===col?(o.up.set(0,l[i],0),o.lookAt(c[i],0,0)):1===col?(o.up.set(0,0,l[i]),o.lookAt(0,c[i],0)):(o.up.set(0,l[i],0),o.lookAt(0,0,c[i]));const e=this._cubeSize;Qs(r,col*e,i>2?e:0,e,e),h.setRenderTarget(r),v&&h.render(A,o),h.render(t,o)}A.geometry.dispose(),A.material.dispose(),h.toneMapping=f,h.autoClear=d,t.background=y}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===ut||t.mapping===pt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Gs()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zs());const o=r?this._cubemapMaterial:this._equirectMaterial,l=new jr(this._lodPlanes[0],o);o.uniforms.envMap.value=t;const c=this._cubeSize;Qs(e,0,0,3*c,2*c),n.setRenderTarget(e),n.render(l,Rs)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Fs[(i-1)%Fs.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,r,o){const l=this._pingPongRenderTarget;this._halfBlur(t,l,e,n,r,"latitudinal",o),this._halfBlur(l,t,n,n,r,"longitudinal",o)}_halfBlur(t,e,n,r,o,l,c){const h=this._renderer,d=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new jr(this._lodPlanes[r],d),m=d.uniforms,A=this._sizeLods[n]-1,v=isFinite(o)?Math.PI/(2*A):2*Math.PI/(2*ks-1),y=o/v,x=isFinite(o)?1+Math.floor(3*y):ks;x>ks&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${ks}`);const _=[];let w=0;for(let i=0;i<ks;++i){const t=i/y,e=Math.exp(-t*t/2);_.push(e),0===i?w+=e:i<x&&(w+=2*e)}for(let i=0;i<_.length;i++)_[i]=_[i]/w;m.envMap.value=t.texture,m.samples.value=x,m.weights.value=_,m.latitudinal.value="latitudinal"===l,c&&(m.poleAxis.value=c);const{_lodMax:E}=this;m.dTheta.value=v,m.mipInt.value=E-n;const S=this._sizeLods[r];Qs(e,3*S*(r>E-Bs?r-E+Bs:0),4*(this._cubeSize-S),3*S,2*S),h.setRenderTarget(e),h.render(f,Rs)}}function Us(t,e,n){const r=new Rn(t,e,n);return r.texture.mapping=gt,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qs(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function zs(){return new ts({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Hs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}function Gs(){return new ts({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Hs(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}function Hs(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Vs(t){let e=new WeakMap,n=null;function r(t){const n=t.target;n.removeEventListener("dispose",r);const o=e.get(n);void 0!==o&&(e.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture){const l=o.mapping,c=l===ft||l===mt,h=l===ut||l===pt;if(c||h){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let r=e.get(o);return null===n&&(n=new Ns(t)),r=c?n.fromEquirectangular(o,r):n.fromCubemap(o,r),e.set(o,r),r.texture}if(e.has(o))return e.get(o).texture;{const image=o.image;if(c&&image&&image.height>0||h&&image&&function(image){let t=0;for(let i=0;i<6;i++)void 0!==image[i]&&t++;return 6===t}(image)){null===n&&(n=new Ns(t));const l=c?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,l),o.addEventListener("dispose",r),l.texture}return null}}}return o},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function js(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Ws(t,e,n,r){const o={},l=new WeakMap;function c(t){const h=t.target;null!==h.index&&e.remove(h.index);for(const t in h.attributes)e.remove(h.attributes[t]);h.removeEventListener("dispose",c),delete o[h.id];const d=l.get(h);d&&(e.remove(d),l.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,n.memory.geometries--}function h(t){const n=[],r=t.index,o=t.attributes.position;let c=0;if(null!==r){const t=r.array;c=r.version;for(let i=0,e=t.length;i<e;i+=3){const a=t[i+0],b=t[i+1],e=t[i+2];n.push(a,b,b,e,e,a)}}else{const t=o.array;c=o.version;for(let i=0,e=t.length/3-1;i<e;i+=3){const a=i+0,b=i+1,t=i+2;n.push(a,b,b,t,t,a)}}const h=new(gn(n)?Ar:gr)(n,1);h.version=c;const d=l.get(t);d&&e.remove(d),l.set(t,h)}return{get:function(object,t){return!0===o[t.id]?t:(t.addEventListener("dispose",c),o[t.id]=!0,n.memory.geometries++,t)},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let i=0,t=n.length;i<t;i++)e.update(n[i],34962)}},getWireframeAttribute:function(t){const e=l.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&h(t)}else h(t);return l.get(t)}}}function $s(t,e,n,r){const o=r.isWebGL2;let l,c,h;this.setMode=function(t){l=t},this.setIndex=function(t){c=t.type,h=t.bytesPerElement},this.render=function(e,r){t.drawElements(l,r,c,e*h),n.update(r,l,1)},this.renderInstances=function(r,d,f){if(0===f)return;let m,A;if(o)m=t,A="drawElementsInstanced";else if(A="drawElementsInstancedANGLE",null===(m=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[A](l,d,c,r*h,f),n.update(d,l,f)}}function qs(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Ys(a,b){return a[0]-b[0]}function Xs(a,b){return Math.abs(b[1])-Math.abs(a[1])}function Ks(t,e,n){const r={},o=new Float32Array(8),l=new WeakMap,c=new kn,h=[];for(let i=0;i<8;i++)h[i]=[i,0];return{update:function(object,d,f){const m=object.morphTargetInfluences;if(!0===e.isWebGL2){const r=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,o=void 0!==r?r.length:0;let h=l.get(d);if(void 0===h||h.count!==o){void 0!==h&&h.texture.dispose();const t=void 0!==d.morphAttributes.position,n=void 0!==d.morphAttributes.normal,r=void 0!==d.morphAttributes.color,f=d.morphAttributes.position||[],m=d.morphAttributes.normal||[],A=d.morphAttributes.color||[];let v=0;!0===t&&(v=1),!0===n&&(v=2),!0===r&&(v=3);let y=d.attributes.position.count*v,x=1;y>e.maxTextureSize&&(x=Math.ceil(y/e.maxTextureSize),y=e.maxTextureSize);const _=new Float32Array(y*x*4*o),w=new Ln(_,y,x,o);w.type=Rt,w.needsUpdate=!0;const E=4*v;for(let i=0;i<o;i++){const e=f[i],o=m[i],l=A[i],h=y*x*4*i;for(let d=0;d<e.count;d++){const f=d*E;!0===t&&(c.fromBufferAttribute(e,d),_[h+f+0]=c.x,_[h+f+1]=c.y,_[h+f+2]=c.z,_[h+f+3]=0),!0===n&&(c.fromBufferAttribute(o,d),_[h+f+4]=c.x,_[h+f+5]=c.y,_[h+f+6]=c.z,_[h+f+7]=0),!0===r&&(c.fromBufferAttribute(l,d),_[h+f+8]=c.x,_[h+f+9]=c.y,_[h+f+10]=c.z,_[h+f+11]=4===l.itemSize?c.w:1)}}h={count:o,texture:w,size:new pn(y,x)},l.set(d,h),d.addEventListener("dispose",function t(){w.dispose(),l.delete(d),d.removeEventListener("dispose",t)})}let A=0;for(let i=0;i<m.length;i++)A+=m[i];const v=d.morphTargetsRelative?1:1-A;f.getUniforms().setValue(t,"morphTargetBaseInfluence",v),f.getUniforms().setValue(t,"morphTargetInfluences",m),f.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}else{const e=void 0===m?0:m.length;let n=r[d.id];if(void 0===n||n.length!==e){n=[];for(let i=0;i<e;i++)n[i]=[i,0];r[d.id]=n}for(let i=0;i<e;i++){const t=n[i];t[0]=i,t[1]=m[i]}n.sort(Xs);for(let i=0;i<8;i++)i<e&&n[i][1]?(h[i][0]=n[i][0],h[i][1]=n[i][1]):(h[i][0]=Number.MAX_SAFE_INTEGER,h[i][1]=0);h.sort(Ys);const l=d.morphAttributes.position,c=d.morphAttributes.normal;let A=0;for(let i=0;i<8;i++){const t=h[i],e=t[0],n=t[1];e!==Number.MAX_SAFE_INTEGER&&n?(l&&d.getAttribute("morphTarget"+i)!==l[e]&&d.setAttribute("morphTarget"+i,l[e]),c&&d.getAttribute("morphNormal"+i)!==c[e]&&d.setAttribute("morphNormal"+i,c[e]),o[i]=n,A+=n):(l&&!0===d.hasAttribute("morphTarget"+i)&&d.deleteAttribute("morphTarget"+i),c&&!0===d.hasAttribute("morphNormal"+i)&&d.deleteAttribute("morphNormal"+i),o[i]=0)}const v=d.morphTargetsRelative?1:1-A;f.getUniforms().setValue(t,"morphTargetBaseInfluence",v),f.getUniforms().setValue(t,"morphTargetInfluences",o)}}}}function Js(t,e,n,r){let o=new WeakMap;function l(t){const e=t.target;e.removeEventListener("dispose",l),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(object){const t=r.render.frame,c=object.geometry,h=e.get(object,c);return o.get(h)!==t&&(e.update(h),o.set(h,t)),object.isInstancedMesh&&(!1===object.hasEventListener("dispose",l)&&object.addEventListener("dispose",l),n.update(object.instanceMatrix,34962),null!==object.instanceColor&&n.update(object.instanceColor,34962)),h},dispose:function(){o=new WeakMap}}}const Zs=new Tn,ta=new Ln,ea=new Dn,na=new as,ia=[],ra=[],sa=new Float32Array(16),aa=new Float32Array(9),oa=new Float32Array(4);function la(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let l=ia[o];if(void 0===l&&(l=new Float32Array(o),ia[o]=l),0!==e){r.toArray(l,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(l,r)}return l}function ca(a,b){if(a.length!==b.length)return!1;for(let i=0,t=a.length;i<t;i++)if(a[i]!==b[i])return!1;return!0}function ha(a,b){for(let i=0,t=b.length;i<t;i++)a[i]=b[i]}function ua(t,e){let n=ra[e];void 0===n&&(n=new Int32Array(e),ra[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function da(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function pa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2fv(this.addr,e),ha(n,e)}}function fa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ca(n,e))return;t.uniform3fv(this.addr,e),ha(n,e)}}function ma(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4fv(this.addr,e),ha(n,e)}}function ga(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ca(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ha(n,e)}else{if(ca(n,r))return;oa.set(r),t.uniformMatrix2fv(this.addr,!1,oa),ha(n,r)}}function Aa(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ca(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ha(n,e)}else{if(ca(n,r))return;aa.set(r),t.uniformMatrix3fv(this.addr,!1,aa),ha(n,r)}}function va(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(ca(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ha(n,e)}else{if(ca(n,r))return;sa.set(r),t.uniformMatrix4fv(this.addr,!1,sa),ha(n,r)}}function ba(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ya(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2iv(this.addr,e),ha(n,e)}}function xa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ca(n,e))return;t.uniform3iv(this.addr,e),ha(n,e)}}function _a(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4iv(this.addr,e),ha(n,e)}}function wa(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ea(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2uiv(this.addr,e),ha(n,e)}}function Sa(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ca(n,e))return;t.uniform3uiv(this.addr,e),ha(n,e)}}function Ca(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4uiv(this.addr,e),ha(n,e)}}function Ia(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2D(e||Zs,o)}function Ma(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||ea,o)}function Ba(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||na,o)}function Ta(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||ta,o)}function ka(t,e){t.uniform1fv(this.addr,e)}function Ra(t,e){const data=la(e,this.size,2);t.uniform2fv(this.addr,data)}function La(t,e){const data=la(e,this.size,3);t.uniform3fv(this.addr,data)}function Da(t,e){const data=la(e,this.size,4);t.uniform4fv(this.addr,data)}function Pa(t,e){const data=la(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,data)}function Oa(t,e){const data=la(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,data)}function Fa(t,e){const data=la(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,data)}function Na(t,e){t.uniform1iv(this.addr,e)}function Ua(t,e){t.uniform2iv(this.addr,e)}function Qa(t,e){t.uniform3iv(this.addr,e)}function za(t,e){t.uniform4iv(this.addr,e)}function Ga(t,e){t.uniform1uiv(this.addr,e)}function Ha(t,e){t.uniform2uiv(this.addr,e)}function Va(t,e){t.uniform3uiv(this.addr,e)}function ja(t,e){t.uniform4uiv(this.addr,e)}function Wa(t,e,n){const r=this.cache,o=e.length,l=ua(n,o);ca(r,l)||(t.uniform1iv(this.addr,l),ha(r,l));for(let i=0;i!==o;++i)n.setTexture2D(e[i]||Zs,l[i])}function $a(t,e,n){const r=this.cache,o=e.length,l=ua(n,o);ca(r,l)||(t.uniform1iv(this.addr,l),ha(r,l));for(let i=0;i!==o;++i)n.setTexture3D(e[i]||ea,l[i])}function qa(t,e,n){const r=this.cache,o=e.length,l=ua(n,o);ca(r,l)||(t.uniform1iv(this.addr,l),ha(r,l));for(let i=0;i!==o;++i)n.setTextureCube(e[i]||na,l[i])}function Ya(t,e,n){const r=this.cache,o=e.length,l=ua(n,o);ca(r,l)||(t.uniform1iv(this.addr,l),ha(r,l));for(let i=0;i!==o;++i)n.setTexture2DArray(e[i]||ta,l[i])}class Xa{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return da;case 35664:return pa;case 35665:return fa;case 35666:return ma;case 35674:return ga;case 35675:return Aa;case 35676:return va;case 5124:case 35670:return ba;case 35667:case 35671:return ya;case 35668:case 35672:return xa;case 35669:case 35673:return _a;case 5125:return wa;case 36294:return Ea;case 36295:return Sa;case 36296:return Ca;case 35678:case 36198:case 36298:case 36306:case 35682:return Ia;case 35679:case 36299:case 36307:return Ma;case 35680:case 36300:case 36308:case 36293:return Ba;case 36289:case 36303:case 36311:case 36292:return Ta}}(e.type)}}class Ka{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return ka;case 35664:return Ra;case 35665:return La;case 35666:return Da;case 35674:return Pa;case 35675:return Oa;case 35676:return Fa;case 5124:case 35670:return Na;case 35667:case 35671:return Ua;case 35668:case 35672:return Qa;case 35669:case 35673:return za;case 5125:return Ga;case 36294:return Ha;case 36295:return Va;case 36296:return ja;case 35678:case 36198:case 36298:case 36306:case 35682:return Wa;case 35679:case 36299:case 36307:return $a;case 35680:case 36300:case 36308:case 36293:return qa;case 36289:case 36303:case 36311:case 36292:return Ya}}(e.type)}}class Ja{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const u=r[i];u.setValue(t,e[u.id],n)}}}const Za=/(\w+)(\])?(\[|\.)?/g;function to(t,e){t.seq.push(e),t.map[e.id]=e}function eo(t,e,n){const path=t.name,r=path.length;for(Za.lastIndex=0;;){const o=Za.exec(path),l=Za.lastIndex;let c=o[1];const h="]"===o[2],d=o[3];if(h&&(c|=0),void 0===d||"["===d&&l+2===r){to(n,void 0===d?new Xa(c,t,e):new Ka(c,t,e));break}{let t=n.map[c];void 0===t&&to(n,t=new Ja(c)),n=t}}}class no{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);eo(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,r){const u=this.map[e];void 0!==u&&u.setValue(t,n,r)}setOptional(t,object,e){const n=object[e];void 0!==n&&this.setValue(t,e,n)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const u=e[i],o=n[u.id];!1!==o.needsUpdate&&u.setValue(t,o.value,r)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const u=t[i];u.id in e&&n.push(u)}return n}}function io(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let ro=0;function so(t,e,n){const r=t.getShaderParameter(e,35713),o=t.getShaderInfoLog(e).trim();if(r&&""===o)return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const r=parseInt(l[1]);return n.toUpperCase()+"\n\n"+o+"\n\n"+function(t,e){const n=t.split("\n"),r=[],o=Math.max(e-6,0),l=Math.min(e+6,n.length);for(let i=o;i<l;i++){const line=i+1;r.push(`${line===e?">":" "} ${line}: ${n[i]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return o}function ao(t,e){const n=function(t){switch(t){case Ne:return["Linear","( value )"];case Ue:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function oo(t,e){let n;switch(e){case st:n="Linear";break;case at:n="Reinhard";break;case ot:n="OptimizedCineon";break;case lt:n="ACESFilmic";break;case ct:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function lo(t){return""!==t}function co(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ho(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const uo=/^[ \t]*#include +<([\w\d./]+)>/gm;function po(t){return t.replace(uo,fo)}function fo(t,e){const n=vs[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return po(n)}const mo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function go(t){return t.replace(mo,Ao)}function Ao(t,e,n,r){let o="";for(let i=parseInt(e);i<parseInt(n);i++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return o}function vo(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function bo(t,e,n,r){const o=t.getContext(),l=n.defines;let c=n.vertexShader,h=n.fragmentShader;const d=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===m?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===A?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===v&&(e="SHADOWMAP_TYPE_VSM"),e}(n),f=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ut:case pt:e="ENVMAP_TYPE_CUBE";break;case gt:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),y=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case pt:e="ENVMAP_MODE_REFRACTION"}return e}(n),x=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case tt:e="ENVMAP_BLENDING_MULTIPLY";break;case et:e="ENVMAP_BLENDING_MIX";break;case nt:e="ENVMAP_BLENDING_ADD"}return e}(n),_=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),w=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lo).join("\n")}(n),E=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(l),S=o.createProgram();let C,I,M=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((C=[E].filter(lo).join("\n")).length>0&&(C+="\n"),(I=[w,E].filter(lo).join("\n")).length>0&&(I+="\n")):(C=[vo(n),"#define SHADER_NAME "+n.shaderName,E,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(lo).join("\n"),I=[w,vo(n),"#define SHADER_NAME "+n.shaderName,E,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+y:"",n.envMap?"#define "+x:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==it?"#define TONE_MAPPING":"",n.toneMapping!==it?vs.tonemapping_pars_fragment:"",n.toneMapping!==it?oo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",vs.encodings_pars_fragment,ao("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(lo).join("\n")),c=ho(c=co(c=po(c),n),n),h=ho(h=co(h=po(h),n),n),c=go(c),h=go(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(M="#version 300 es\n",C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+C,I=["#define varying in",n.glslVersion===Ye?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ye?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+I);const B=M+I+h,T=io(o,35633,M+C+c),k=io(o,35632,B);if(o.attachShader(S,T),o.attachShader(S,k),void 0!==n.index0AttributeName?o.bindAttribLocation(S,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(S,0,"position"),o.linkProgram(S),t.debug.checkShaderErrors){const e=o.getProgramInfoLog(S).trim(),n=o.getShaderInfoLog(T).trim(),r=o.getShaderInfoLog(k).trim();let l=!0,c=!0;if(!1===o.getProgramParameter(S,35714))if(l=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(o,S,T,k);else{const t=so(o,T,"vertex"),n=so(o,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(S,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==r||(c=!1);c&&(this.diagnostics={runnable:l,programLog:e,vertexShader:{log:n,prefix:C},fragmentShader:{log:r,prefix:I}})}let R,L;return o.deleteShader(T),o.deleteShader(k),this.getUniforms=function(){return void 0===R&&(R=new no(o,S)),R},this.getAttributes=function(){return void 0===L&&(L=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let l=1;35674===r.type&&(l=2),35675===r.type&&(l=3),35676===r.type&&(l=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:l}}return n}(o,S)),L},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(S),this.program=void 0},this.name=n.shaderName,this.id=ro++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=T,this.fragmentShader=k,this}let yo=0;class xo{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(t);return!1===l.has(r)&&(l.add(r),r.usedTimes++),!1===l.has(o)&&(l.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(code){const t=this.shaderCache;let e=t.get(code);return void 0===e&&(e=new _o(code),t.set(code,e)),e}}class _o{constructor(code){this.id=yo++,this.code=code,this.usedTimes=0}}function wo(t,e,n,r,o,l,c){const h=new Ei,d=new xo,f=[],m=o.isWebGL2,A=o.logarithmicDepthBuffer,v=o.vertexTextures;let y=o.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(t){return 1===t?"uv2":"uv"}return{getParameters:function(l,h,f,C,object){const I=C.fog,M=object.geometry,B=l.isMeshStandardMaterial?C.environment:null,T=(l.isMeshStandardMaterial?n:e).get(l.envMap||B),k=T&&T.mapping===gt?T.image.height:null,R=w[l.type];null!==l.precision&&(y=o.getMaxPrecision(l.precision))!==l.precision&&console.warn("THREE.WebGLProgram.getParameters:",l.precision,"not supported, using",y,"instead.");const L=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,D=void 0!==L?L.length:0;let P,O,F,N,U=0;if(void 0!==M.morphAttributes.position&&(U=1),void 0!==M.morphAttributes.normal&&(U=2),void 0!==M.morphAttributes.color&&(U=3),R){const t=ys[R];P=t.vertexShader,O=t.fragmentShader}else P=l.vertexShader,O=l.fragmentShader,d.update(l),F=d.getVertexShaderID(l),N=d.getFragmentShaderID(l);const Q=t.getRenderTarget(),z=!0===object.isInstancedMesh,G=!!l.map,H=!!l.matcap,V=!!T,j=!!l.aoMap,W=!!l.lightMap,$=!!l.bumpMap,Y=!!l.normalMap,X=!!l.displacementMap,K=!!l.emissiveMap,J=!!l.metalnessMap,Z=!!l.roughnessMap,tt=l.clearcoat>0,et=l.iridescence>0,nt=l.sheen>0,st=l.transmission>0,at=tt&&!!l.clearcoatMap,ot=tt&&!!l.clearcoatNormalMap,lt=tt&&!!l.clearcoatRoughnessMap,ct=et&&!!l.iridescenceMap,ht=et&&!!l.iridescenceThicknessMap,ut=nt&&!!l.sheenColorMap,pt=nt&&!!l.sheenRoughnessMap,ft=!!l.specularMap,mt=!!l.specularColorMap,At=!!l.specularIntensityMap,vt=st&&!!l.transmissionMap,bt=st&&!!l.thicknessMap,yt=!!l.gradientMap,xt=!!l.alphaMap,_t=l.alphaTest>0,wt=!!l.extensions,Et=!!M.attributes.uv2;return{isWebGL2:m,shaderID:R,shaderName:l.type,vertexShader:P,fragmentShader:O,defines:l.defines,customVertexShaderID:F,customFragmentShaderID:N,isRawShaderMaterial:!0===l.isRawShaderMaterial,glslVersion:l.glslVersion,precision:y,instancing:z,instancingColor:z&&null!==object.instanceColor,supportsVertexTextures:v,outputEncoding:null===Q?t.outputEncoding:!0===Q.isXRRenderTarget?Q.texture.encoding:Ne,map:G,matcap:H,envMap:V,envMapMode:V&&T.mapping,envMapCubeUVHeight:k,aoMap:j,lightMap:W,bumpMap:$,normalMap:Y,displacementMap:v&&X,emissiveMap:K,normalMapObjectSpace:Y&&l.normalMapType===He,normalMapTangentSpace:Y&&l.normalMapType===Ge,decodeVideoTexture:G&&!0===l.map.isVideoTexture&&l.map.encoding===Ue,metalnessMap:J,roughnessMap:Z,clearcoat:tt,clearcoatMap:at,clearcoatNormalMap:ot,clearcoatRoughnessMap:lt,iridescence:et,iridescenceMap:ct,iridescenceThicknessMap:ht,sheen:nt,sheenColorMap:ut,sheenRoughnessMap:pt,specularMap:ft,specularColorMap:mt,specularIntensityMap:At,transmission:st,transmissionMap:vt,thicknessMap:bt,gradientMap:yt,opaque:!1===l.transparent&&l.blending===E,alphaMap:xt,alphaTest:_t,combine:l.combine,mapUv:G&&S(l.map.channel),aoMapUv:j&&S(l.aoMap.channel),lightMapUv:W&&S(l.lightMap.channel),bumpMapUv:$&&S(l.bumpMap.channel),normalMapUv:Y&&S(l.normalMap.channel),displacementMapUv:X&&S(l.displacementMap.channel),emissiveMapUv:K&&S(l.emissiveMap.channel),metalnessMapUv:J&&S(l.metalnessMap.channel),roughnessMapUv:Z&&S(l.roughnessMap.channel),clearcoatMapUv:at&&S(l.clearcoatMap.channel),clearcoatNormalMapUv:ot&&S(l.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:lt&&S(l.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&S(l.iridescenceMap.channel),iridescenceThicknessMapUv:ht&&S(l.iridescenceThicknessMap.channel),sheenColorMapUv:ut&&S(l.sheenColorMap.channel),sheenRoughnessMapUv:pt&&S(l.sheenRoughnessMap.channel),specularMapUv:ft&&S(l.specularMap.channel),specularColorMapUv:mt&&S(l.specularColorMap.channel),specularIntensityMapUv:At&&S(l.specularIntensityMap.channel),transmissionMapUv:vt&&S(l.transmissionMap.channel),thicknessMapUv:bt&&S(l.thicknessMap.channel),alphaMapUv:xt&&S(l.alphaMap.channel),vertexTangents:Y&&!!M.attributes.tangent,vertexColors:l.vertexColors,vertexAlphas:!0===l.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,vertexUvs2:Et,pointsUvs:!0===object.isPoints&&!!M.attributes.uv&&(G||xt),fog:!!I,useFog:!0===l.fog,fogExp2:I&&I.isFogExp2,flatShading:!0===l.flatShading,sizeAttenuation:!0===l.sizeAttenuation,logarithmicDepthBuffer:A,skinning:!0===object.isSkinnedMesh,morphTargets:void 0!==M.morphAttributes.position,morphNormals:void 0!==M.morphAttributes.normal,morphColors:void 0!==M.morphAttributes.color,morphTargetsCount:D,morphTextureStride:U,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numSpotLightMaps:h.spotLightMap.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numSpotLightShadowsWithMaps:h.numSpotLightShadowsWithMaps,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:l.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:l.toneMapped?t.toneMapping:it,useLegacyLights:t.useLegacyLights,premultipliedAlpha:l.premultipliedAlpha,doubleSided:l.side===_,flipSided:l.side===x,useDepthPacking:l.depthPacking>=0,depthPacking:l.depthPacking||0,index0AttributeName:l.index0AttributeName,extensionDerivatives:wt&&!0===l.extensions.derivatives,extensionFragDepth:wt&&!0===l.extensions.fragDepth,extensionDrawBuffers:wt&&!0===l.extensions.drawBuffers,extensionShaderTextureLOD:wt&&!0===l.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||r.has("EXT_shader_texture_lod"),customProgramCacheKey:l.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){h.disableAll(),e.isWebGL2&&h.enable(0),e.supportsVertexTextures&&h.enable(1),e.instancing&&h.enable(2),e.instancingColor&&h.enable(3),e.matcap&&h.enable(4),e.envMap&&h.enable(5),e.normalMapObjectSpace&&h.enable(6),e.normalMapTangentSpace&&h.enable(7),e.clearcoat&&h.enable(8),e.iridescence&&h.enable(9),e.alphaTest&&h.enable(10),e.vertexColors&&h.enable(11),e.vertexAlphas&&h.enable(12),e.vertexUvs2&&h.enable(13),e.vertexTangents&&h.enable(14),t.push(h.mask),h.disableAll(),e.fog&&h.enable(0),e.useFog&&h.enable(1),e.flatShading&&h.enable(2),e.logarithmicDepthBuffer&&h.enable(3),e.skinning&&h.enable(4),e.morphTargets&&h.enable(5),e.morphNormals&&h.enable(6),e.morphColors&&h.enable(7),e.premultipliedAlpha&&h.enable(8),e.shadowMapEnabled&&h.enable(9),e.useLegacyLights&&h.enable(10),e.doubleSided&&h.enable(11),e.flipSided&&h.enable(12),e.useDepthPacking&&h.enable(13),e.dithering&&h.enable(14),e.transmission&&h.enable(15),e.sheen&&h.enable(16),e.decodeVideoTexture&&h.enable(17),e.opaque&&h.enable(18),e.pointsUvs&&h.enable(19),t.push(h.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=w[t.type];let n;if(e){const t=ys[e];n=Kr.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let p=0,t=f.length;p<t;p++){const t=f[p];if(t.cacheKey===n){++(r=t).usedTimes;break}}return void 0===r&&(r=new bo(t,n,e,l),f.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const i=f.indexOf(t);f[i]=f[f.length-1],f.pop(),t.destroy()}},releaseShaderCache:function(t){d.remove(t)},programs:f,dispose:function(){d.dispose()}}}function Eo(){let t=new WeakMap;return{get:function(object){let map=t.get(object);return void 0===map&&(map={},t.set(object,map)),map},remove:function(object){t.delete(object)},update:function(object,e,n){t.get(object)[e]=n},dispose:function(){t=new WeakMap}}}function So(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Co(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Io(){const t=[];let e=0;const n=[],r=[],o=[];function l(object,n,r,o,l,c){let h=t[e];return void 0===h?(h={id:object.id,object:object,geometry:n,material:r,groupOrder:o,renderOrder:object.renderOrder,z:l,group:c},t[e]=h):(h.id=object.id,h.object=object,h.geometry=n,h.material=r,h.groupOrder=o,h.renderOrder=object.renderOrder,h.z=l,h.group=c),e++,h}return{opaque:n,transmissive:r,transparent:o,init:function(){e=0,n.length=0,r.length=0,o.length=0},push:function(object,t,e,c,h,d){const f=l(object,t,e,c,h,d);e.transmission>0?r.push(f):!0===e.transparent?o.push(f):n.push(f)},unshift:function(object,t,e,c,h,d){const f=l(object,t,e,c,h,d);e.transmission>0?r.unshift(f):!0===e.transparent?o.unshift(f):n.unshift(f)},finish:function(){for(let i=e,n=t.length;i<n;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||So),r.length>1&&r.sort(e||Co),o.length>1&&o.sort(e||Co)}}}function Mo(){let t=new WeakMap;return{get:function(e,n){const r=t.get(e);let o;return void 0===r?(o=new Io,t.set(e,[o])):n>=r.length?(o=new Io,r.push(o)):o=r[n],o},dispose:function(){t=new WeakMap}}}function Bo(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new On,color:new rr};break;case"SpotLight":n={position:new On,direction:new On,color:new rr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new On,color:new rr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new On,skyColor:new rr,groundColor:new rr};break;case"RectAreaLight":n={color:new rr,position:new On,halfWidth:new On,halfHeight:new On}}return t[e.id]=n,n}}}let To=0;function ko(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Ro(t,e){const n=new Bo,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let i=0;i<9;i++)o.probe.push(new On);const l=new On,c=new pi,h=new pi;return{setup:function(l,c){let h=0,g=0,b=0;for(let i=0;i<9;i++)o.probe[i].set(0,0,0);let d=0,f=0,m=0,A=0,v=0,y=0,x=0,_=0,w=0,E=0;l.sort(ko);const S=!0===c?Math.PI:1;for(let i=0,t=l.length;i<t;i++){const t=l[i],e=t.color,c=t.intensity,C=t.distance,I=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)h+=e.r*c*S,g+=e.g*c*S,b+=e.b*c*S;else if(t.isLightProbe)for(let e=0;e<9;e++)o.probe[e].addScaledVector(t.sh.coefficients[e],c);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*S),t.castShadow){const shadow=t.shadow,e=r.get(t);e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,o.directionalShadow[d]=e,o.directionalShadowMap[d]=I,o.directionalShadowMatrix[d]=t.shadow.matrix,y++}o.directional[d]=e,d++}else if(t.isSpotLight){const l=n.get(t);l.position.setFromMatrixPosition(t.matrixWorld),l.color.copy(e).multiplyScalar(c*S),l.distance=C,l.coneCos=Math.cos(t.angle),l.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),l.decay=t.decay,o.spot[m]=l;const shadow=t.shadow;if(t.map&&(o.spotLightMap[w]=t.map,w++,shadow.updateMatrices(t),t.castShadow&&E++),o.spotLightMatrix[m]=shadow.matrix,t.castShadow){const e=r.get(t);e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,o.spotShadow[m]=e,o.spotShadowMap[m]=I,_++}m++}else if(t.isRectAreaLight){const r=n.get(t);r.color.copy(e).multiplyScalar(c),r.halfWidth.set(.5*t.width,0,0),r.halfHeight.set(0,.5*t.height,0),o.rectArea[A]=r,A++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*S),e.distance=t.distance,e.decay=t.decay,t.castShadow){const shadow=t.shadow,e=r.get(t);e.shadowBias=shadow.bias,e.shadowNormalBias=shadow.normalBias,e.shadowRadius=shadow.radius,e.shadowMapSize=shadow.mapSize,e.shadowCameraNear=shadow.camera.near,e.shadowCameraFar=shadow.camera.far,o.pointShadow[f]=e,o.pointShadowMap[f]=I,o.pointShadowMatrix[f]=t.shadow.matrix,x++}o.point[f]=e,f++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(c*S),e.groundColor.copy(t.groundColor).multiplyScalar(c*S),o.hemi[v]=e,v++}}A>0&&(e.isWebGL2?(o.rectAreaLTC1=bs.LTC_FLOAT_1,o.rectAreaLTC2=bs.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=bs.LTC_FLOAT_1,o.rectAreaLTC2=bs.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=bs.LTC_HALF_1,o.rectAreaLTC2=bs.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=h,o.ambient[1]=g,o.ambient[2]=b;const C=o.hash;C.directionalLength===d&&C.pointLength===f&&C.spotLength===m&&C.rectAreaLength===A&&C.hemiLength===v&&C.numDirectionalShadows===y&&C.numPointShadows===x&&C.numSpotShadows===_&&C.numSpotMaps===w||(o.directional.length=d,o.spot.length=m,o.rectArea.length=A,o.point.length=f,o.hemi.length=v,o.directionalShadow.length=y,o.directionalShadowMap.length=y,o.pointShadow.length=x,o.pointShadowMap.length=x,o.spotShadow.length=_,o.spotShadowMap.length=_,o.directionalShadowMatrix.length=y,o.pointShadowMatrix.length=x,o.spotLightMatrix.length=_+w-E,o.spotLightMap.length=w,o.numSpotLightShadowsWithMaps=E,C.directionalLength=d,C.pointLength=f,C.spotLength=m,C.rectAreaLength=A,C.hemiLength=v,C.numDirectionalShadows=y,C.numPointShadows=x,C.numSpotShadows=_,C.numSpotMaps=w,o.version=To++)},setupView:function(t,e){let n=0,r=0,d=0,f=0,m=0;const A=e.matrixWorldInverse;for(let i=0,e=t.length;i<e;i++){const e=t[i];if(e.isDirectionalLight){const t=o.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),l.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(l),t.direction.transformDirection(A),n++}else if(e.isSpotLight){const t=o.spot[d];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),t.direction.setFromMatrixPosition(e.matrixWorld),l.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(l),t.direction.transformDirection(A),d++}else if(e.isRectAreaLight){const t=o.rectArea[f];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),h.identity(),c.copy(e.matrixWorld),c.premultiply(A),h.extractRotation(c),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(h),t.halfHeight.applyMatrix4(h),f++}else if(e.isPointLight){const t=o.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),r++}else if(e.isHemisphereLight){const t=o.hemi[m];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(A),m++}}},state:o}}function Lo(t,e){const n=new Ro(t,e),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){o.push(t)}}}function Do(t,e){let n=new WeakMap;return{get:function(r,o=0){const l=n.get(r);let c;return void 0===l?(c=new Lo(t,e),n.set(r,[c])):o>=l.length?(c=new Lo(t,e),l.push(c)):c=l[o],c},dispose:function(){n=new WeakMap}}}class Po extends Ji{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Qe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(source){return super.copy(source),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}class Oo extends Ji{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(source){return super.copy(source),this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}const Fo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",No="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Uo(t,e,n){let r=new fs;const o=new pn,l=new pn,c=new kn,h=new Po({depthPacking:ze}),d=new Oo,f={},A=n.maxTextureSize,E={[y]:x,[x]:y,[_]:_},S=new ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pn},radius:{value:4}},vertexShader:Fo,fragmentShader:No}),C=S.clone();C.defines.HORIZONTAL_PASS=1;const I=new Ir;I.setAttribute("position",new mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new jr(I,S),B=this;function T(shadow,n){const r=e.update(M);S.defines.VSM_SAMPLES!==shadow.blurSamples&&(S.defines.VSM_SAMPLES=shadow.blurSamples,C.defines.VSM_SAMPLES=shadow.blurSamples,S.needsUpdate=!0,C.needsUpdate=!0),null===shadow.mapPass&&(shadow.mapPass=new Rn(o.x,o.y)),S.uniforms.shadow_pass.value=shadow.map.texture,S.uniforms.resolution.value=shadow.mapSize,S.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.mapPass),t.clear(),t.renderBufferDirect(n,null,r,S,M,null),C.uniforms.shadow_pass.value=shadow.mapPass.texture,C.uniforms.resolution.value=shadow.mapSize,C.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.map),t.clear(),t.renderBufferDirect(n,null,r,C,M,null)}function k(object,e,n,r){let o=null;const l=!0===n.isPointLight?object.customDistanceMaterial:object.customDepthMaterial;if(void 0!==l)o=l;else if(o=!0===n.isPointLight?d:h,t.localClippingEnabled&&!0===e.clipShadows&&Array.isArray(e.clippingPlanes)&&0!==e.clippingPlanes.length||e.displacementMap&&0!==e.displacementScale||e.alphaMap&&e.alphaTest>0||e.map&&e.alphaTest>0){const t=o.uuid,n=e.uuid;let r=f[t];void 0===r&&(r={},f[t]=r);let l=r[n];void 0===l&&(l=o.clone(),r[n]=l),o=l}if(o.visible=e.visible,o.wireframe=e.wireframe,o.side=r===v?null!==e.shadowSide?e.shadowSide:e.side:null!==e.shadowSide?e.shadowSide:E[e.side],o.alphaMap=e.alphaMap,o.alphaTest=e.alphaTest,o.map=e.map,o.clipShadows=e.clipShadows,o.clippingPlanes=e.clippingPlanes,o.clipIntersection=e.clipIntersection,o.displacementMap=e.displacementMap,o.displacementScale=e.displacementScale,o.displacementBias=e.displacementBias,o.wireframeLinewidth=e.wireframeLinewidth,o.linewidth=e.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=n}return o}function R(object,n,o,l,c){if(!1===object.visible)return;if(object.layers.test(n.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&c===v)&&(!object.frustumCulled||r.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,object.matrixWorld);const n=e.update(object),r=object.material;if(Array.isArray(r)){const e=n.groups;for(let h=0,d=e.length;h<d;h++){const d=e[h],f=r[d.materialIndex];if(f&&f.visible){const e=k(object,f,l,c);t.renderBufferDirect(o,null,n,e,object,d)}}}else if(r.visible){const e=k(object,r,l,c);t.renderBufferDirect(o,null,n,e,object,null)}}const h=object.children;for(let i=0,t=h.length;i<t;i++)R(h[i],n,o,l,c)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=m,this.render=function(e,n,h){if(!1===B.enabled)return;if(!1===B.autoUpdate&&!1===B.needsUpdate)return;if(0===e.length)return;const d=t.getRenderTarget(),f=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),y=t.state;y.setBlending(w),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);for(let i=0,d=e.length;i<d;i++){const d=e[i],shadow=d.shadow;if(void 0===shadow){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===shadow.autoUpdate&&!1===shadow.needsUpdate)continue;o.copy(shadow.mapSize);const f=shadow.getFrameExtents();if(o.multiply(f),l.copy(shadow.mapSize),(o.x>A||o.y>A)&&(o.x>A&&(l.x=Math.floor(A/f.x),o.x=l.x*f.x,shadow.mapSize.x=l.x),o.y>A&&(l.y=Math.floor(A/f.y),o.y=l.y*f.y,shadow.mapSize.y=l.y)),null===shadow.map){const t=this.type!==v?{minFilter:yt,magFilter:yt}:{};shadow.map=new Rn(o.x,o.y,t),shadow.map.texture.name=d.name+".shadowMap",shadow.camera.updateProjectionMatrix()}t.setRenderTarget(shadow.map),t.clear();const m=shadow.getViewportCount();for(let t=0;t<m;t++){const e=shadow.getViewport(t);c.set(l.x*e.x,l.y*e.y,l.x*e.z,l.y*e.w),y.viewport(c),shadow.updateMatrices(d,t),r=shadow.getFrustum(),R(n,h,shadow.camera,d,this.type)}!0!==shadow.isPointLightShadow&&this.type===v&&T(shadow,h),shadow.needsUpdate=!1}B.needsUpdate=!1,t.setRenderTarget(d,f,m)}}function Qo(t,e,n){const r=n.isWebGL2;const o=new function(){let e=!1;const n=new kn;let r=null;const o=new kn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,g,b,a,r){!0===r&&(e*=a,g*=a,b*=a),n.set(e,g,b,a),!1===o.equals(n)&&(t.clearColor(e,g,b,a),o.copy(n))},reset:function(){e=!1,r=null,o.set(-1,0,0,0)}}},l=new function(){let e=!1,n=null,r=null,o=null;return{setTest:function(t){t?kt(2929):Rt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case j:t.depthFunc(512);break;case W:t.depthFunc(519);break;case $:t.depthFunc(513);break;case Y:t.depthFunc(515);break;case X:t.depthFunc(514);break;case K:t.depthFunc(518);break;case J:t.depthFunc(516);break;case Z:t.depthFunc(517);break;default:t.depthFunc(515)}r=e}},setLocked:function(t){e=t},setClear:function(e){o!==e&&(t.clearDepth(e),o=e)},reset:function(){e=!1,n=null,r=null,o=null}}},c=new function(){let e=!1,n=null,r=null,o=null,l=null,c=null,h=null,d=null,f=null;return{setTest:function(t){e||(t?kt(2960):Rt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,c){r===e&&o===n&&l===c||(t.stencilFunc(e,n,c),r=e,o=n,l=c)},setOp:function(e,n,r){c===e&&h===n&&d===r||(t.stencilOp(e,n,r),c=e,h=n,d=r)},setLocked:function(t){e=t},setClear:function(e){f!==e&&(t.clearStencil(e),f=e)},reset:function(){e=!1,n=null,r=null,o=null,l=null,c=null,h=null,d=null,f=null}}},m=new WeakMap,A=new WeakMap;let v={},y={},tt=new WeakMap,et=[],nt=null,it=!1,st=null,at=null,ot=null,lt=null,ct=null,ht=null,ut=null,pt=!1,ft=null,mt=null,gt=null,At=null,vt=null;const bt=t.getParameter(35661);let yt=!1,xt=0;const _t=t.getParameter(7938);-1!==_t.indexOf("WebGL")?(xt=parseFloat(/^WebGL (\d)/.exec(_t)[1]),yt=xt>=1):-1!==_t.indexOf("OpenGL ES")&&(xt=parseFloat(/^OpenGL ES (\d)/.exec(_t)[1]),yt=xt>=2);let wt=null,Et={};const St=t.getParameter(3088),Ct=t.getParameter(2978),It=(new kn).fromArray(St),Mt=(new kn).fromArray(Ct);function Bt(e,n,r){const data=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let i=0;i<r;i++)t.texImage2D(n+i,0,6408,1,1,0,6408,5121,data);return o}const Tt={};function kt(e){!0!==v[e]&&(t.enable(e),v[e]=!0)}function Rt(e){!1!==v[e]&&(t.disable(e),v[e]=!1)}Tt[3553]=Bt(3553,3553,1),Tt[34067]=Bt(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),kt(2929),l.setFunc(Y),Ot(!1),Ft(d),kt(2884),Pt(w);const Lt={[B]:32774,[T]:32778,[k]:32779};if(r)Lt[R]=32775,Lt[L]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(Lt[R]=t.MIN_EXT,Lt[L]=t.MAX_EXT)}const Dt={[D]:0,[P]:1,[O]:768,[N]:770,[V]:776,[G]:774,[Q]:772,[F]:769,[U]:771,[H]:775,[z]:773};function Pt(e,n,r,o,l,c,h,d){if(e!==w){if(!1===it&&(kt(3042),it=!0),e===M)l=l||n,c=c||r,h=h||o,n===at&&l===ct||(t.blendEquationSeparate(Lt[n],Lt[l]),at=n,ct=l),r===ot&&o===lt&&c===ht&&h===ut||(t.blendFuncSeparate(Dt[r],Dt[o],Dt[c],Dt[h]),ot=r,lt=o,ht=c,ut=h),st=e,pt=!1;else if(e!==st||d!==pt){if(at===B&&ct===B||(t.blendEquation(32774),at=B,ct=B),d)switch(e){case E:t.blendFuncSeparate(1,771,1,771);break;case S:t.blendFunc(1,1);break;case C:t.blendFuncSeparate(0,769,0,1);break;case I:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case E:t.blendFuncSeparate(770,771,1,771);break;case S:t.blendFunc(770,1);break;case C:t.blendFuncSeparate(0,769,0,1);break;case I:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}ot=null,lt=null,ht=null,ut=null,st=e,pt=d}}else!0===it&&(Rt(3042),it=!1)}function Ot(e){ft!==e&&(e?t.frontFace(2304):t.frontFace(2305),ft=e)}function Ft(e){e!==h?(kt(2884),e!==mt&&(e===d?t.cullFace(1029):e===f?t.cullFace(1028):t.cullFace(1032))):Rt(2884),mt=e}function Nt(e,n,r){e?(kt(32823),At===n&&vt===r||(t.polygonOffset(n,r),At=n,vt=r)):Rt(32823)}return{buffers:{color:o,depth:l,stencil:c},enable:kt,disable:Rt,bindFramebuffer:function(e,n){return y[e]!==n&&(t.bindFramebuffer(e,n),y[e]=n,r&&(36009===e&&(y[36160]=n),36160===e&&(y[36009]=n)),!0)},drawBuffers:function(r,o){let l=et,c=!1;if(r)if(void 0===(l=tt.get(o))&&(l=[],tt.set(o,l)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(l.length!==t.length||36064!==l[0]){for(let i=0,e=t.length;i<e;i++)l[i]=36064+i;l.length=t.length,c=!0}}else 36064!==l[0]&&(l[0]=36064,c=!0);else 1029!==l[0]&&(l[0]=1029,c=!0);c&&(n.isWebGL2?t.drawBuffers(l):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(l))},useProgram:function(e){return nt!==e&&(t.useProgram(e),nt=e,!0)},setBlending:Pt,setMaterial:function(t,e){t.side===_?Rt(2884):kt(2884);let n=t.side===x;e&&(n=!n),Ot(n),t.blending===E&&!1===t.transparent?Pt(w):Pt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),o.setMask(t.colorWrite);const r=t.stencilWrite;c.setTest(r),r&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Nt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?kt(32926):Rt(32926)},setFlipSided:Ot,setCullFace:Ft,setLineWidth:function(e){e!==gt&&(yt&&t.lineWidth(e),gt=e)},setPolygonOffset:Nt,setScissorTest:function(t){t?kt(3089):Rt(3089)},activeTexture:function(e){void 0===e&&(e=33984+bt-1),wt!==e&&(t.activeTexture(e),wt=e)},bindTexture:function(e,n,r){void 0===r&&(r=null===wt?33984+bt-1:wt);let o=Et[r];void 0===o&&(o={type:void 0,texture:void 0},Et[r]=o),o.type===e&&o.texture===n||(wt!==r&&(t.activeTexture(r),wt=r),t.bindTexture(e,n||Tt[e]),o.type=e,o.texture=n)},unbindTexture:function(){const e=Et[wt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,n){let r=A.get(n);void 0===r&&(r=new WeakMap,A.set(n,r));let o=r.get(e);void 0===o&&(o=t.getUniformBlockIndex(n,e.name),r.set(e,o))},uniformBlockBinding:function(e,n){const r=A.get(n).get(e);m.get(n)!==r&&(t.uniformBlockBinding(n,r,e.__bindingPointIndex),m.set(n,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===It.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),It.copy(e))},viewport:function(e){!1===Mt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),Mt.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),v={},wt=null,Et={},y={},tt=new WeakMap,et=[],nt=null,it=!1,st=null,at=null,ot=null,lt=null,ct=null,ht=null,ut=null,pt=!1,ft=null,mt=null,gt=null,At=null,vt=null,It.set(0,0,t.canvas.width,t.canvas.height),Mt.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),c.reset()}}}function zo(t,e,n,r,o,l,c){const h=o.isWebGL2,d=o.maxTextures,f=o.maxCubemapSize,m=o.maxTextureSize,A=o.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let _;const w=new WeakMap;let E=!1;try{E="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function S(t,e){return E?new OffscreenCanvas(t,e):An("canvas")}function C(image,t,e,n){let r=1;if((image.width>n||image.height>n)&&(r=n/Math.max(image.width,image.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){const n=t?cn:Math.floor,o=n(r*image.width),l=n(r*image.height);void 0===_&&(_=S(o,l));const canvas=e?S(o,l):_;return canvas.width=o,canvas.height=l,canvas.getContext("2d").drawImage(image,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+image.width+"x"+image.height+") to ("+o+"x"+l+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+image.width+"x"+image.height+")."),image}return image}function I(image){return on(image.width)&&on(image.height)}function M(t,e){return t.generateMipmaps&&e&&t.minFilter!==yt&&t.minFilter!==wt}function B(e){t.generateMipmap(e)}function T(n,r,o,l,c=!1){if(!1===h)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let d=r;return 6403===r&&(5126===o&&(d=33326),5131===o&&(d=33325),5121===o&&(d=33321)),33319===r&&(5126===o&&(d=33328),5131===o&&(d=33327),5121===o&&(d=33323)),6408===r&&(5126===o&&(d=34836),5131===o&&(d=34842),5121===o&&(d=l===Ue&&!1===c?35907:32856),32819===o&&(d=32854),32820===o&&(d=32855)),33325!==d&&33326!==d&&33327!==d&&33328!==d&&34842!==d&&34836!==d||e.get("EXT_color_buffer_float"),d}function k(t,image,e){return!0===M(t,e)||t.isFramebufferTexture&&t.minFilter!==yt&&t.minFilter!==wt?Math.log2(Math.max(image.width,image.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?image.mipmaps.length:1}function R(t){return t===yt||t===xt||t===_t?9728:9729}function L(t){const e=t.target;e.removeEventListener("dispose",L),function(t){const e=r.get(t);if(void 0===e.__webglInit)return;const source=t.source,n=w.get(source);if(n){const r=n[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&P(t),0===Object.keys(n).length&&w.delete(source)}r.remove(t)}(e),e.isVideoTexture&&x.delete(e)}function D(e){const n=e.target;n.removeEventListener("dispose",D),function(e){const n=e.texture,o=r.get(e),l=r.get(n);void 0!==l.__webglTexture&&(t.deleteTexture(l.__webglTexture),c.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(o.__webglFramebuffer[i]),o.__webglDepthbuffer&&t.deleteRenderbuffer(o.__webglDepthbuffer[i]);else{if(t.deleteFramebuffer(o.__webglFramebuffer),o.__webglDepthbuffer&&t.deleteRenderbuffer(o.__webglDepthbuffer),o.__webglMultisampledFramebuffer&&t.deleteFramebuffer(o.__webglMultisampledFramebuffer),o.__webglColorRenderbuffer)for(let i=0;i<o.__webglColorRenderbuffer.length;i++)o.__webglColorRenderbuffer[i]&&t.deleteRenderbuffer(o.__webglColorRenderbuffer[i]);o.__webglDepthRenderbuffer&&t.deleteRenderbuffer(o.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let i=0,e=n.length;i<e;i++){const e=r.get(n[i]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),c.memory.textures--),r.remove(n[i])}r.remove(n),r.remove(e)}(n)}function P(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const source=e.source;delete w.get(source)[n.__cacheKey],c.memory.textures--}let O=0;function F(t,slot){const e=r.get(t);if(t.isVideoTexture&&function(t){const e=c.render.frame;x.get(t)!==e&&(x.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&e.__version!==t.version){const image=t.image;if(null===image)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==image.complete)return void G(e,t,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,e.__webglTexture,33984+slot)}const N={[At]:10497,[vt]:33071,[bt]:33648},U={[yt]:9728,[xt]:9984,[_t]:9986,[wt]:9729,[Et]:9985,[St]:9987};function Q(n,l,c){if(c?(t.texParameteri(n,10242,N[l.wrapS]),t.texParameteri(n,10243,N[l.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,N[l.wrapR]),t.texParameteri(n,10240,U[l.magFilter]),t.texParameteri(n,10241,U[l.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),l.wrapS===vt&&l.wrapT===vt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,R(l.magFilter)),t.texParameteri(n,10241,R(l.minFilter)),l.minFilter!==yt&&l.minFilter!==wt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const c=e.get("EXT_texture_filter_anisotropic");if(l.magFilter===yt)return;if(l.minFilter!==_t&&l.minFilter!==St)return;if(l.type===Rt&&!1===e.has("OES_texture_float_linear"))return;if(!1===h&&l.type===Lt&&!1===e.has("OES_texture_half_float_linear"))return;(l.anisotropy>1||r.get(l).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(l.anisotropy,o.getMaxAnisotropy())),r.get(l).__currentAnisotropy=l.anisotropy)}}function z(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",L));const source=n.source;let o=w.get(source);void 0===o&&(o={},w.set(source,o));const l=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(l!==e.__cacheKey){void 0===o[l]&&(o[l]={texture:t.createTexture(),usedTimes:0},c.memory.textures++,r=!0),o[l].usedTimes++;const h=o[e.__cacheKey];void 0!==h&&(o[e.__cacheKey].usedTimes--,0===h.usedTimes&&P(n)),e.__cacheKey=l,e.__webglTexture=o[l].texture}return r}function G(e,o,slot){let c=3553;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(c=35866),o.isData3DTexture&&(c=32879);const d=z(e,o),source=o.source;n.bindTexture(c,e.__webglTexture,33984+slot);const f=r.get(source);if(source.version!==f.__version||!0===d){n.activeTexture(33984+slot),t.pixelStorei(37440,o.flipY),t.pixelStorei(37441,o.premultiplyAlpha),t.pixelStorei(3317,o.unpackAlignment),t.pixelStorei(37443,0);const e=function(t){return!h&&(t.wrapS!==vt||t.wrapT!==vt||t.minFilter!==yt&&t.minFilter!==wt)}(o)&&!1===I(o.image);let image=C(o.image,e,!1,m);const r=I(image=Y(o,image))||h,A=l.convert(o.format,o.encoding);let v,y=l.convert(o.type),x=T(o.internalFormat,A,y,o.encoding,o.isVideoTexture);Q(c,o,r);const _=o.mipmaps,w=h&&!0!==o.isVideoTexture,E=void 0===f.__version||!0===d,S=k(o,image,r);if(o.isDepthTexture)x=6402,h?x=o.type===Rt?36012:o.type===kt?33190:o.type===Ot?35056:33189:o.type===Rt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),o.format===zt&&6402===x&&o.type!==Bt&&o.type!==kt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),o.type=kt,y=l.convert(o.type)),o.format===Gt&&6402===x&&(x=34041,o.type!==Ot&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),o.type=Ot,y=l.convert(o.type))),E&&(w?n.texStorage2D(3553,1,x,image.width,image.height):n.texImage2D(3553,0,x,image.width,image.height,0,A,y,null));else if(o.isDataTexture)if(_.length>0&&r){w&&E&&n.texStorage2D(3553,S,x,_[0].width,_[0].height);for(let i=0,t=_.length;i<t;i++)v=_[i],w?n.texSubImage2D(3553,i,0,0,v.width,v.height,A,y,v.data):n.texImage2D(3553,i,x,v.width,v.height,0,A,y,v.data);o.generateMipmaps=!1}else w?(E&&n.texStorage2D(3553,S,x,image.width,image.height),n.texSubImage2D(3553,0,0,0,image.width,image.height,A,y,image.data)):n.texImage2D(3553,0,x,image.width,image.height,0,A,y,image.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){w&&E&&n.texStorage3D(35866,S,x,_[0].width,_[0].height,image.depth);for(let i=0,t=_.length;i<t;i++)v=_[i],o.format!==Nt?null!==A?w?n.compressedTexSubImage3D(35866,i,0,0,0,v.width,v.height,image.depth,A,v.data,0,0):n.compressedTexImage3D(35866,i,x,v.width,v.height,image.depth,0,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?n.texSubImage3D(35866,i,0,0,0,v.width,v.height,image.depth,A,y,v.data):n.texImage3D(35866,i,x,v.width,v.height,image.depth,0,A,y,v.data)}else{w&&E&&n.texStorage2D(3553,S,x,_[0].width,_[0].height);for(let i=0,t=_.length;i<t;i++)v=_[i],o.format!==Nt?null!==A?w?n.compressedTexSubImage2D(3553,i,0,0,v.width,v.height,A,v.data):n.compressedTexImage2D(3553,i,x,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?n.texSubImage2D(3553,i,0,0,v.width,v.height,A,y,v.data):n.texImage2D(3553,i,x,v.width,v.height,0,A,y,v.data)}else if(o.isDataArrayTexture)w?(E&&n.texStorage3D(35866,S,x,image.width,image.height,image.depth),n.texSubImage3D(35866,0,0,0,0,image.width,image.height,image.depth,A,y,image.data)):n.texImage3D(35866,0,x,image.width,image.height,image.depth,0,A,y,image.data);else if(o.isData3DTexture)w?(E&&n.texStorage3D(32879,S,x,image.width,image.height,image.depth),n.texSubImage3D(32879,0,0,0,0,image.width,image.height,image.depth,A,y,image.data)):n.texImage3D(32879,0,x,image.width,image.height,image.depth,0,A,y,image.data);else if(o.isFramebufferTexture){if(E)if(w)n.texStorage2D(3553,S,x,image.width,image.height);else{let t=image.width,e=image.height;for(let i=0;i<S;i++)n.texImage2D(3553,i,x,t,e,0,A,y,null),t>>=1,e>>=1}}else if(_.length>0&&r){w&&E&&n.texStorage2D(3553,S,x,_[0].width,_[0].height);for(let i=0,t=_.length;i<t;i++)v=_[i],w?n.texSubImage2D(3553,i,0,0,A,y,v):n.texImage2D(3553,i,x,A,y,v);o.generateMipmaps=!1}else w?(E&&n.texStorage2D(3553,S,x,image.width,image.height),n.texSubImage2D(3553,0,0,0,A,y,image)):n.texImage2D(3553,0,x,A,y,image);M(o,r)&&B(c),f.__version=source.version,o.onUpdate&&o.onUpdate(o)}e.__version=o.version}function H(e,o,c,h,d){const f=l.convert(c.format,c.encoding),m=l.convert(c.type),A=T(c.internalFormat,f,m,c.encoding);r.get(o).__hasExternalTextures||(32879===d||35866===d?n.texImage3D(d,0,A,o.width,o.height,o.depth,0,f,m,null):n.texImage2D(d,0,A,o.width,o.height,0,f,m,null)),n.bindFramebuffer(36160,e),$(o)?v.framebufferTexture2DMultisampleEXT(36160,h,d,r.get(c).__webglTexture,0,W(o)):(3553===d||d>=34069&&d<=34074)&&t.framebufferTexture2D(36160,h,d,r.get(c).__webglTexture,0),n.bindFramebuffer(36160,null)}function V(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let o=33189;if(r||$(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Rt?o=36012:e.type===kt&&(o=33190));const r=W(n);$(n)?v.renderbufferStorageMultisampleEXT(36161,r,o,n.width,n.height):t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const o=W(n);r&&!1===$(n)?t.renderbufferStorageMultisample(36161,o,35056,n.width,n.height):$(n)?v.renderbufferStorageMultisampleEXT(36161,o,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const o=e[i],c=l.convert(o.format,o.encoding),h=l.convert(o.type),d=T(o.internalFormat,c,h,o.encoding),f=W(n);r&&!1===$(n)?t.renderbufferStorageMultisample(36161,f,d,n.width,n.height):$(n)?v.renderbufferStorageMultisampleEXT(36161,f,d,n.width,n.height):t.renderbufferStorage(36161,d,n.width,n.height)}}t.bindRenderbuffer(36161,null)}function j(e){const o=r.get(e),l=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!o.__autoAllocateDepthBuffer){if(l)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,o){if(o&&o.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!o.depthTexture||!o.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(o.depthTexture).__webglTexture&&o.depthTexture.image.width===o.width&&o.depthTexture.image.height===o.height||(o.depthTexture.image.width=o.width,o.depthTexture.image.height=o.height,o.depthTexture.needsUpdate=!0),F(o.depthTexture,0);const l=r.get(o.depthTexture).__webglTexture,c=W(o);if(o.depthTexture.format===zt)$(o)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,l,0,c):t.framebufferTexture2D(36160,36096,3553,l,0);else{if(o.depthTexture.format!==Gt)throw new Error("Unknown depthTexture format");$(o)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,l,0,c):t.framebufferTexture2D(36160,33306,3553,l,0)}}(o.__webglFramebuffer,e)}else if(l){o.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,o.__webglFramebuffer[i]),o.__webglDepthbuffer[i]=t.createRenderbuffer(),V(o.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,o.__webglFramebuffer),o.__webglDepthbuffer=t.createRenderbuffer(),V(o.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function W(t){return Math.min(A,t.samples)}function $(t){const n=r.get(t);return h&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Y(t,image){const n=t.encoding,r=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===Xe?image:(n!==Ne&&(n===Ue?!1===h?!0===e.has("EXT_sRGB")&&r===Nt?(t.format=Xe,t.minFilter=wt,t.generateMipmaps=!1):image=Cn.sRGBToLinear(image):r===Nt&&o===Ct||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),image)}this.allocateTextureUnit=function(){const t=O;return t>=d&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+d),O+=1,t},this.resetTextureUnits=function(){O=0},this.setTexture2D=F,this.setTexture2DArray=function(t,slot){const e=r.get(t);t.version>0&&e.__version!==t.version?G(e,t,slot):n.bindTexture(35866,e.__webglTexture,33984+slot)},this.setTexture3D=function(t,slot){const e=r.get(t);t.version>0&&e.__version!==t.version?G(e,t,slot):n.bindTexture(32879,e.__webglTexture,33984+slot)},this.setTextureCube=function(e,slot){const o=r.get(e);e.version>0&&o.__version!==e.version?function(e,o,slot){if(6!==o.image.length)return;const c=z(e,o),source=o.source;n.bindTexture(34067,e.__webglTexture,33984+slot);const d=r.get(source);if(source.version!==d.__version||!0===c){n.activeTexture(33984+slot),t.pixelStorei(37440,o.flipY),t.pixelStorei(37441,o.premultiplyAlpha),t.pixelStorei(3317,o.unpackAlignment),t.pixelStorei(37443,0);const e=o.isCompressedTexture||o.image[0].isCompressedTexture,r=o.image[0]&&o.image[0].isDataTexture,m=[];for(let i=0;i<6;i++)m[i]=e||r?r?o.image[i].image:o.image[i]:C(o.image[i],!1,!0,f),m[i]=Y(o,m[i]);const image=m[0],A=I(image)||h,v=l.convert(o.format,o.encoding),y=l.convert(o.type),x=T(o.internalFormat,v,y,o.encoding),_=h&&!0!==o.isVideoTexture,w=void 0===d.__version||!0===c;let E,S=k(o,image,A);if(Q(34067,o,A),e){_&&w&&n.texStorage2D(34067,S,x,image.width,image.height);for(let i=0;i<6;i++){E=m[i].mipmaps;for(let t=0;t<E.length;t++){const e=E[t];o.format!==Nt?null!==v?_?n.compressedTexSubImage2D(34069+i,t,0,0,e.width,e.height,v,e.data):n.compressedTexImage2D(34069+i,t,x,e.width,e.height,0,e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?n.texSubImage2D(34069+i,t,0,0,e.width,e.height,v,y,e.data):n.texImage2D(34069+i,t,x,e.width,e.height,0,v,y,e.data)}}}else{E=o.mipmaps,_&&w&&(E.length>0&&S++,n.texStorage2D(34067,S,x,m[0].width,m[0].height));for(let i=0;i<6;i++)if(r){_?n.texSubImage2D(34069+i,0,0,0,m[i].width,m[i].height,v,y,m[i].data):n.texImage2D(34069+i,0,x,m[i].width,m[i].height,0,v,y,m[i].data);for(let t=0;t<E.length;t++){const e=E[t],r=e.image[i].image;_?n.texSubImage2D(34069+i,t+1,0,0,r.width,r.height,v,y,r.data):n.texImage2D(34069+i,t+1,x,r.width,r.height,0,v,y,r.data)}}else{_?n.texSubImage2D(34069+i,0,0,0,v,y,m[i]):n.texImage2D(34069+i,0,x,v,y,m[i]);for(let t=0;t<E.length;t++){const e=E[t];_?n.texSubImage2D(34069+i,t+1,0,0,v,y,e.image[i]):n.texImage2D(34069+i,t+1,x,v,y,e.image[i])}}}M(o,A)&&B(34067),d.__version=source.version,o.onUpdate&&o.onUpdate(o)}e.__version=o.version}(o,e,slot):n.bindTexture(34067,o.__webglTexture,33984+slot)},this.rebindTextures=function(t,e,n){const o=r.get(t);void 0!==e&&H(o.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&j(t)},this.setupRenderTarget=function(e){const d=e.texture,f=r.get(e),m=r.get(d);e.addEventListener("dispose",D),!0!==e.isWebGLMultipleRenderTargets&&(void 0===m.__webglTexture&&(m.__webglTexture=t.createTexture()),m.__version=d.version,c.memory.textures++);const A=!0===e.isWebGLCubeRenderTarget,v=!0===e.isWebGLMultipleRenderTargets,y=I(e)||h;if(A){f.__webglFramebuffer=[];for(let i=0;i<6;i++)f.__webglFramebuffer[i]=t.createFramebuffer()}else{if(f.__webglFramebuffer=t.createFramebuffer(),v)if(o.drawBuffers){const n=e.texture;for(let i=0,e=n.length;i<e;i++){const e=r.get(n[i]);void 0===e.__webglTexture&&(e.__webglTexture=t.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(h&&e.samples>0&&!1===$(e)){const r=v?d:[d];f.__webglMultisampledFramebuffer=t.createFramebuffer(),f.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer);for(let i=0;i<r.length;i++){const n=r[i];f.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(36161,f.__webglColorRenderbuffer[i]);const o=l.convert(n.format,n.encoding),c=l.convert(n.type),h=T(n.internalFormat,o,c,n.encoding,!0===e.isXRRenderTarget),d=W(e);t.renderbufferStorageMultisample(36161,d,h,e.width,e.height),t.framebufferRenderbuffer(36160,36064+i,36161,f.__webglColorRenderbuffer[i])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(f.__webglDepthRenderbuffer=t.createRenderbuffer(),V(f.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}}if(A){n.bindTexture(34067,m.__webglTexture),Q(34067,d,y);for(let i=0;i<6;i++)H(f.__webglFramebuffer[i],e,d,36064,34069+i);M(d,y)&&B(34067),n.unbindTexture()}else if(v){const t=e.texture;for(let i=0,o=t.length;i<o;i++){const o=t[i],l=r.get(o);n.bindTexture(3553,l.__webglTexture),Q(3553,o,y),H(f.__webglFramebuffer,e,o,36064+i,3553),M(o,y)&&B(3553)}n.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(h?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(t,m.__webglTexture),Q(t,d,y),H(f.__webglFramebuffer,e,d,36064,t),M(d,y)&&B(t),n.unbindTexture()}e.depthBuffer&&j(e)},this.updateRenderTargetMipmap=function(t){const e=I(t)||h,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let i=0,l=o.length;i<l;i++){const l=o[i];if(M(l,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(l).__webglTexture;n.bindTexture(e,o),B(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(h&&e.samples>0&&!1===$(e)){const o=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],l=e.width,c=e.height;let mask=16384;const h=[],d=e.stencilBuffer?33306:36096,f=r.get(e),m=!0===e.isWebGLMultipleRenderTargets;if(m)for(let i=0;i<o.length;i++)n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+i,36161,null),n.bindFramebuffer(36160,f.__webglFramebuffer),t.framebufferTexture2D(36009,36064+i,3553,null,0);n.bindFramebuffer(36008,f.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,f.__webglFramebuffer);for(let i=0;i<o.length;i++){h.push(36064+i),e.depthBuffer&&h.push(d);const n=void 0!==f.__ignoreDepthValues&&f.__ignoreDepthValues;if(!1===n&&(e.depthBuffer&&(mask|=256),e.stencilBuffer&&(mask|=1024)),m&&t.framebufferRenderbuffer(36008,36064,36161,f.__webglColorRenderbuffer[i]),!0===n&&(t.invalidateFramebuffer(36008,[d]),t.invalidateFramebuffer(36009,[d])),m){const e=r.get(o[i]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,l,c,0,0,l,c,mask,9728),y&&t.invalidateFramebuffer(36008,h)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),m)for(let i=0;i<o.length;i++){n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+i,36161,f.__webglColorRenderbuffer[i]);const e=r.get(o[i]).__webglTexture;n.bindFramebuffer(36160,f.__webglFramebuffer),t.framebufferTexture2D(36009,36064+i,3553,e,0)}n.bindFramebuffer(36009,f.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=H,this.useMultisampledRTT=$}function Go(t,e,n){const r=n.isWebGL2;return{convert:function(p,n=null){let o;if(p===Ct)return 5121;if(p===Dt)return 32819;if(p===Pt)return 32820;if(p===It)return 5120;if(p===Mt)return 5122;if(p===Bt)return 5123;if(p===Tt)return 5124;if(p===kt)return 5125;if(p===Rt)return 5126;if(p===Lt)return r?5131:null!==(o=e.get("OES_texture_half_float"))?o.HALF_FLOAT_OES:null;if(p===Ft)return 6406;if(p===Nt)return 6408;if(p===Ut)return 6409;if(p===Qt)return 6410;if(p===zt)return 6402;if(p===Gt)return 34041;if(p===Xe)return null!==(o=e.get("EXT_sRGB"))?o.SRGB_ALPHA_EXT:null;if(p===Ht)return 6403;if(p===Vt)return 36244;if(p===jt)return 33319;if(p===Wt)return 33320;if(p===$t)return 36249;if(p===qt||p===Yt||p===Xt||p===Kt)if(n===Ue){if(null===(o=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(p===qt)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===Yt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===Xt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===Kt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(o=e.get("WEBGL_compressed_texture_s3tc")))return null;if(p===qt)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===Yt)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===Xt)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===Kt)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===Jt||p===Zt||p===te||p===ee){if(null===(o=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(p===Jt)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===Zt)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===te)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===ee)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(p===ne)return null!==(o=e.get("WEBGL_compressed_texture_etc1"))?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===ie||p===re){if(null===(o=e.get("WEBGL_compressed_texture_etc")))return null;if(p===ie)return n===Ue?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(p===re)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(p===se||p===ae||p===oe||p===le||p===ce||p===he||p===ue||p===de||p===pe||p===fe||p===me||p===ge||p===Ae||p===ve){if(null===(o=e.get("WEBGL_compressed_texture_astc")))return null;if(p===se)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===ae)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===oe)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===le)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===ce)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===he)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===ue)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===de)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===pe)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===fe)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===me)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===ge)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===Ae)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===ve)return n===Ue?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===be){if(null===(o=e.get("EXT_texture_compression_bptc")))return null;if(p===be)return n===Ue?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(p===ye||p===xe||p===_e||p===we){if(null===(o=e.get("EXT_texture_compression_rgtc")))return null;if(p===be)return o.COMPRESSED_RED_RGTC1_EXT;if(p===xe)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(p===_e)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(p===we)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return p===Ot?r?34042:null!==(o=e.get("WEBGL_depth_texture"))?o.UNSIGNED_INT_24_8_WEBGL:null:void 0!==t[p]?t[p]:null}}}class Ho extends ns{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Vo extends Ni{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jo={type:"move"};class Wo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Vo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Vo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new On,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new On),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Vo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new On,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new On),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,o=null,l=null;const c=this._targetRay,h=this._grip,d=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(d&&t.hand){l=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n),o=this._getHandJoint(d,r);null!==t&&(o.matrix.fromArray(t.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=t.radius),o.visible=null!==t}const r=d.joints["index-finger-tip"],o=d.joints["thumb-tip"],c=r.position.distanceTo(o.position),h=.02,f=.005;d.inputState.pinching&&c>h+f?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&c<=h-f&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==h&&t.gripSpace&&null!==(o=e.getPose(t.gripSpace,n))&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1);null!==c&&(null===(r=e.getPose(t.targetRaySpace,n))&&null!==o&&(r=o),null!==r&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(jo)))}return null!==c&&(c.visible=null!==r),null!==h&&(h.visible=null!==o),null!==d&&(d.visible=null!==l),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Vo;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class $o extends Tn{constructor(t,e,n,r,o,l,c,h,d,f){if((f=void 0!==f?f:zt)!==zt&&f!==Gt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&f===zt&&(n=kt),void 0===n&&f===Gt&&(n=Ot),super(null,r,o,l,c,h,f,n,d),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==c?c:yt,this.minFilter=void 0!==h?h:yt,this.flipY=!1,this.generateMipmaps=!1}}class qo extends Ke{constructor(t,e){super();const n=this;let r=null,o=1,l=null,c="local-floor",h=1,d=null,f=null,m=null,A=null,v=null,y=null;const x=e.getContextAttributes();let _=null,w=null;const E=[],S=[],C=new Set,I=new Map,M=new ns;M.layers.enable(1),M.viewport=new kn;const B=new ns;B.layers.enable(2),B.viewport=new kn;const T=[M,B],k=new Ho;k.layers.enable(1),k.layers.enable(2);let R=null,L=null;function D(t){const e=S.indexOf(t.inputSource);if(-1===e)return;const n=E[e];void 0!==n&&n.dispatchEvent({type:t.type,data:t.inputSource})}function P(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",O);for(let i=0;i<E.length;i++){const t=S[i];null!==t&&(S[i]=null,E[i].disconnect(t))}R=null,L=null,t.setRenderTarget(_),v=null,A=null,m=null,r=null,w=null,z.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function O(t){for(let i=0;i<t.removed.length;i++){const e=t.removed[i],n=S.indexOf(e);n>=0&&(S[n]=null,E[n].disconnect(e))}for(let i=0;i<t.added.length;i++){const e=t.added[i];let n=S.indexOf(e);if(-1===n){for(let i=0;i<E.length;i++){if(i>=S.length){S.push(e),n=i;break}if(null===S[i]){S[i]=e,n=i;break}}if(-1===n)break}const r=E[n];r&&r.connect(e)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=E[t];return void 0===e&&(e=new Wo,E[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=E[t];return void 0===e&&(e=new Wo,E[t]=e),e.getGripSpace()},this.getHand=function(t){let e=E[t];return void 0===e&&(e=new Wo,E[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){c=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||l},this.setReferenceSpace=function(t){d=t},this.getBaseLayer=function(){return null!==A?A:v},this.getBinding=function(){return m},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(f){if(null!==(r=f)){if(_=t.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",P),r.addEventListener("inputsourceschange",O),!0!==x.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||x.antialias,alpha:x.alpha,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:v}),w=new Rn(v.framebufferWidth,v.framebufferHeight,{format:Nt,type:Ct,encoding:t.outputEncoding,stencilBuffer:x.stencil})}else{let n=null,l=null,c=null;x.depth&&(c=x.stencil?35056:33190,n=x.stencil?Gt:zt,l=x.stencil?Ot:kt);const h={colorFormat:32856,depthFormat:c,scaleFactor:o};m=new XRWebGLBinding(r,e),A=m.createProjectionLayer(h),r.updateRenderState({layers:[A]}),w=new Rn(A.textureWidth,A.textureHeight,{format:Nt,type:Ct,depthTexture:new $o(A.textureWidth,A.textureHeight,l,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:x.stencil,encoding:t.outputEncoding,samples:x.antialias?4:0}),t.properties.get(w).__ignoreDepthValues=A.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(h),d=null,l=await r.requestReferenceSpace(c),z.setContext(r),z.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const F=new On,N=new On;function U(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===r)return;k.near=B.near=M.near=t.near,k.far=B.far=M.far=t.far,R===k.near&&L===k.far||(r.updateRenderState({depthNear:k.near,depthFar:k.far}),R=k.near,L=k.far);const e=t.parent,n=k.cameras;U(k,e);for(let i=0;i<n.length;i++)U(n[i],e);2===n.length?function(t,e,n){F.setFromMatrixPosition(e.matrixWorld),N.setFromMatrixPosition(n.matrixWorld);const r=F.distanceTo(N),o=e.projectionMatrix.elements,l=n.projectionMatrix.elements,c=o[14]/(o[10]-1),h=o[14]/(o[10]+1),d=(o[9]+1)/o[5],f=(o[9]-1)/o[5],m=(o[8]-1)/o[0],A=(l[8]+1)/l[0],v=c*m,y=c*A,x=r/(-m+A),_=x*-m;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(_),t.translateZ(x),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const w=c+x,E=h+x,S=v-_,C=y+(r-_),I=d*h/E*w,M=f*h/E*w;t.projectionMatrix.makePerspective(S,C,I,M,w,E),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(k,M,B):k.projectionMatrix.copy(M.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const r=t.children;for(let i=0,t=r.length;i<t;i++)r[i].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*en*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,k,e)},this.getCamera=function(){return k},this.getFoveation=function(){if(null!==A||null!==v)return h},this.setFoveation=function(t){h=t,null!==A&&(A.fixedFoveation=t),null!==v&&void 0!==v.fixedFoveation&&(v.fixedFoveation=t)},this.getPlanes=function(){return C};let Q=null;const z=new ms;z.setAnimationLoop(function(time,e){if(f=e.getViewerPose(d||l),y=e,null!==f){const e=f.views;null!==v&&(t.setRenderTargetFramebuffer(w,v.framebuffer),t.setRenderTarget(w));let n=!1;e.length!==k.cameras.length&&(k.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const view=e[i];let r=null;if(null!==v)r=v.getViewport(view);else{const e=m.getViewSubImage(A,view);r=e.viewport,0===i&&(t.setRenderTargetTextures(w,e.colorTexture,A.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(w))}let o=T[i];void 0===o&&((o=new ns).layers.enable(i),o.viewport=new kn,T[i]=o),o.matrix.fromArray(view.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(view.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(r.x,r.y,r.width,r.height),0===i&&(k.matrix.copy(o.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),!0===n&&k.cameras.push(o)}}for(let i=0;i<E.length;i++){const t=S[i],n=E[i];null!==t&&void 0!==n&&n.update(t,e,d||l)}if(Q&&Q(time,e),e.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:e.detectedPlanes});let t=null;for(const n of C)e.detectedPlanes.has(n)||(null===t&&(t=[]),t.push(n));if(null!==t)for(const e of t)C.delete(e),I.delete(e),n.dispatchEvent({type:"planeremoved",data:e});for(const t of e.detectedPlanes)if(C.has(t)){const e=I.get(t);t.lastChangedTime>e&&(I.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else C.add(t),I.set(t,e.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}y=null}),this.setAnimationLoop=function(t){Q=t},this.dispose=function(){}}}function Yo(t,e){function n(map,t){!0===map.matrixAutoUpdate&&map.updateMatrix(),t.value.copy(map.matrix)}function r(r,o){r.opacity.value=o.opacity,o.color&&r.diffuse.value.copy(o.color),o.emissive&&r.emissive.value.copy(o.emissive).multiplyScalar(o.emissiveIntensity),o.map&&(r.map.value=o.map,n(o.map,r.mapTransform)),o.alphaMap&&(r.alphaMap.value=o.alphaMap,n(o.alphaMap,r.alphaMapTransform)),o.bumpMap&&(r.bumpMap.value=o.bumpMap,n(o.bumpMap,r.bumpMapTransform),r.bumpScale.value=o.bumpScale,o.side===x&&(r.bumpScale.value*=-1)),o.normalMap&&(r.normalMap.value=o.normalMap,n(o.normalMap,r.normalMapTransform),r.normalScale.value.copy(o.normalScale),o.side===x&&r.normalScale.value.negate()),o.displacementMap&&(r.displacementMap.value=o.displacementMap,n(o.displacementMap,r.displacementMapTransform),r.displacementScale.value=o.displacementScale,r.displacementBias.value=o.displacementBias),o.emissiveMap&&(r.emissiveMap.value=o.emissiveMap,n(o.emissiveMap,r.emissiveMapTransform)),o.specularMap&&(r.specularMap.value=o.specularMap,n(o.specularMap,r.specularMapTransform)),o.alphaTest>0&&(r.alphaTest.value=o.alphaTest);const l=e.get(o).envMap;if(l&&(r.envMap.value=l,r.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1,r.reflectivity.value=o.reflectivity,r.ior.value=o.ior,r.refractionRatio.value=o.refractionRatio),o.lightMap){r.lightMap.value=o.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=o.lightMapIntensity*e,n(o.lightMap,r.lightMapTransform)}o.aoMap&&(r.aoMap.value=o.aoMap,r.aoMapIntensity.value=o.aoMapIntensity,n(o.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Xr(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,o,l,c,h){o.isMeshBasicMaterial?r(t,o):o.isMeshLambertMaterial?r(t,o):o.isMeshToonMaterial?(r(t,o),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,o)):o.isMeshPhongMaterial?(r(t,o),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,o)):o.isMeshStandardMaterial?(r(t,o),function(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform)),e.get(r).envMap&&(t.envMapIntensity.value=r.envMapIntensity)}(t,o),o.isMeshPhysicalMaterial&&function(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===x&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,o,h)):o.isMeshMatcapMaterial?(r(t,o),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,o)):o.isMeshDepthMaterial?r(t,o):o.isMeshDistanceMaterial?(r(t,o),function(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,o)):o.isMeshNormalMaterial?r(t,o):o.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,o),o.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,o)):o.isPointsMaterial?function(t,e,r,o){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*o,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,o,l,c):o.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,o):o.isShadowMaterial?(t.color.value.copy(o.color),t.opacity.value=o.opacity):o.isShaderMaterial&&(o.uniformsNeedUpdate=!1)}}}function Xo(t,e,n,r){let o={},l={},c=[];const h=n.isWebGL2?t.getParameter(35375):0;function d(t,e,n){const r=t.value;if(void 0===n[e]){if("number"==typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],o=[];for(let i=0;i<t.length;i++)o.push(t[i].clone());n[e]=o}return!0}if("number"==typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],o=Array.isArray(r)?r:[r];for(let i=0;i<t.length;i++){const e=t[i];if(!1===e.equals(o[i]))return e.copy(o[i]),!0}}return!1}function f(t){const e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function m(e){const n=e.target;n.removeEventListener("dispose",m);const r=c.indexOf(n.__bindingPointIndex);c.splice(r,1),t.deleteBuffer(o[n.id]),delete o[n.id],delete l[n.id]}return{bind:function(t,e){const n=e.program;r.uniformBlockBinding(t,n)},update:function(n,A){let v=o[n.id];void 0===v&&(function(t){const e=t.uniforms;let n=0,r=0;for(let i=0,t=e.length;i<t;i++){const t=e[i],o={boundary:0,storage:0},l=Array.isArray(t.value)?t.value:[t.value];for(let t=0,e=l.length;t<e;t++){const e=l[t],n=f(e);o.boundary+=n.boundary,o.storage+=n.storage}if(t.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,i>0){const e=16-(r=n%16);0!==r&&e-o.boundary<0&&(n+=16-r,t.__offset=n)}n+=o.storage}(r=n%16)>0&&(n+=16-r),t.__size=n,t.__cache={}}(n),v=function(e){const n=function(){for(let i=0;i<h;i++)if(-1===c.indexOf(i))return c.push(i),i;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const r=t.createBuffer(),o=e.__size,l=e.usage;return t.bindBuffer(35345,r),t.bufferData(35345,o,l),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,r),r}(n),o[n.id]=v,n.addEventListener("dispose",m));const y=A.program;r.updateUBOMapping(n,y);const x=e.render.frame;l[n.id]!==x&&(function(e){const n=o[e.id],r=e.uniforms,l=e.__cache;t.bindBuffer(35345,n);for(let i=0,e=r.length;i<e;i++){const e=r[i];if(!0===d(e,i,l)){const n=e.__offset,r=Array.isArray(e.value)?e.value:[e.value];let o=0;for(let i=0;i<r.length;i++){const l=r[i],c=f(l);"number"==typeof l?(e.__data[0]=l,t.bufferSubData(35345,n+o,e.__data)):l.isMatrix3?(e.__data[0]=l.elements[0],e.__data[1]=l.elements[1],e.__data[2]=l.elements[2],e.__data[3]=l.elements[0],e.__data[4]=l.elements[3],e.__data[5]=l.elements[4],e.__data[6]=l.elements[5],e.__data[7]=l.elements[0],e.__data[8]=l.elements[6],e.__data[9]=l.elements[7],e.__data[10]=l.elements[8],e.__data[11]=l.elements[0]):(l.toArray(e.__data,o),o+=c.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,n,e.__data)}}t.bindBuffer(35345,null)}(n),l[n.id]=x)},dispose:function(){for(const e in o)t.deleteBuffer(o[e]);c=[],o={},l={}}}}function Ko(){const canvas=An("canvas");return canvas.style.display="block",canvas}class Jo{constructor(t={}){const{canvas:canvas=Ko(),context:e=null,depth:n=!0,stencil:r=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:m=!1}=t;let A;this.isWebGLRenderer=!0,A=null!==e?e.getContextAttributes().alpha:o;let v=null,w=null;const E=[],S=[];this.domElement=canvas,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ne,this.useLegacyLights=!0,this.toneMapping=it,this.toneMappingExposure=1;const C=this;let I=!1,M=0,B=0,T=null,k=-1,R=null;const L=new kn,D=new kn;let P=null,O=canvas.width,F=canvas.height,N=1,U=null,Q=null;const z=new kn(0,0,O,F),G=new kn(0,0,O,F);let H=!1;const V=new fs;let j=!1,W=!1,$=null;const Y=new pi,X=new On,K={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return null===T?N:1}let Z,tt,et,nt,st,at,ot,lt,ct,ht,ut,pt,ft,mt,gt,At,vt,bt,yt,xt,_t,wt,Et,It,Mt=e;function Bt(t,e){for(let i=0;i<t.length;i++){const n=t[i],r=canvas.getContext(n,e);if(null!==r)return r}return null}try{const t={alpha:!0,depth:n,stencil:r,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:m};if("setAttribute"in canvas&&canvas.setAttribute("data-engine",`three.js r${c}`),canvas.addEventListener("webglcontextlost",Dt,!1),canvas.addEventListener("webglcontextrestored",Pt,!1),canvas.addEventListener("webglcontextcreationerror",Ot,!1),null===Mt){const e=["webgl2","webgl","experimental-webgl"];if(!0===C.isWebGL1Renderer&&e.shift(),null===(Mt=Bt(e,t)))throw Bt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Mt.getShaderPrecisionFormat&&(Mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Tt(){Z=new js(Mt),tt=new Ss(Mt,Z,t),Z.init(tt),wt=new Go(Mt,Z,tt),et=new Qo(Mt,Z,tt),nt=new qs,st=new Eo,at=new zo(Mt,Z,et,st,tt,wt,nt),ot=new Is(C),lt=new Vs(C),ct=new gs(Mt,tt),Et=new ws(Mt,Z,ct,tt),ht=new Ws(Mt,ct,nt,Et),ut=new Js(Mt,ht,ct,nt),yt=new Ks(Mt,tt,at),At=new Cs(st),pt=new wo(C,ot,lt,Z,tt,Et,At),ft=new Yo(C,st),mt=new Mo,gt=new Do(Z,tt),bt=new _s(C,ot,lt,et,ut,A,h),vt=new Uo(C,ut,tt),It=new Xo(Mt,nt,tt,et),xt=new Es(Mt,Z,nt,tt),_t=new $s(Mt,Z,nt,tt),nt.programs=pt.programs,C.capabilities=tt,C.extensions=Z,C.properties=st,C.renderLists=mt,C.shadowMap=vt,C.state=et,C.info=nt}Tt();const kt=new qo(C,Mt);function Dt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Pt(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const t=nt.autoReset,e=vt.enabled,n=vt.autoUpdate,r=vt.needsUpdate,o=vt.type;Tt(),nt.autoReset=t,vt.enabled=e,vt.autoUpdate=n,vt.needsUpdate=r,vt.type=o}function Ot(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Ft(t){const e=t.target;e.removeEventListener("dispose",Ft),function(t){(function(t){const e=st.get(t).programs;void 0!==e&&(e.forEach(function(t){pt.releaseProgram(t)}),t.isShaderMaterial&&pt.releaseShaderCache(t))})(t),st.remove(t)}(e)}this.xr=kt,this.getContext=function(){return Mt},this.getContextAttributes=function(){return Mt.getContextAttributes()},this.forceContextLoss=function(){const t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(t){void 0!==t&&(N=t,this.setSize(O,F,!1))},this.getSize=function(t){return t.set(O,F)},this.setSize=function(t,e,n=!0){kt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=t,F=e,canvas.width=Math.floor(t*N),canvas.height=Math.floor(e*N),!0===n&&(canvas.style.width=t+"px",canvas.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(O*N,F*N).floor()},this.setDrawingBufferSize=function(t,e,n){O=t,F=e,N=n,canvas.width=Math.floor(t*n),canvas.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(L)},this.getViewport=function(t){return t.copy(z)},this.setViewport=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),et.viewport(L.copy(z).multiplyScalar(N).floor())},this.getScissor=function(t){return t.copy(G)},this.setScissor=function(t,e,n,r){t.isVector4?G.set(t.x,t.y,t.z,t.w):G.set(t,e,n,r),et.scissor(D.copy(G).multiplyScalar(N).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(t){et.setScissorTest(H=t)},this.setOpaqueSort=function(t){U=t},this.setTransparentSort=function(t){Q=t},this.getClearColor=function(t){return t.copy(bt.getClearColor())},this.setClearColor=function(){bt.setClearColor.apply(bt,arguments)},this.getClearAlpha=function(){return bt.getClearAlpha()},this.setClearAlpha=function(){bt.setClearAlpha.apply(bt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),Mt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){canvas.removeEventListener("webglcontextlost",Dt,!1),canvas.removeEventListener("webglcontextrestored",Pt,!1),canvas.removeEventListener("webglcontextcreationerror",Ot,!1),mt.dispose(),gt.dispose(),st.dispose(),ot.dispose(),lt.dispose(),ut.dispose(),Et.dispose(),It.dispose(),pt.dispose(),kt.dispose(),kt.removeEventListener("sessionstart",Qt),kt.removeEventListener("sessionend",zt),$&&($.dispose(),$=null),Gt.stop()},this.renderBufferDirect=function(t,e,n,r,object,o){null===e&&(e=K);const l=object.isMesh&&object.matrixWorld.determinant()<0,c=function(t,e,n,r,object){!0!==e.isScene&&(e=K);at.resetTextureUnits();const o=e.fog,l=r.isMeshStandardMaterial?e.environment:null,c=null===T?C.outputEncoding:!0===T.isXRRenderTarget?T.texture.encoding:Ne,h=(r.isMeshStandardMaterial?lt:ot).get(r.envMap||l),d=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,f=!!r.normalMap&&!!n.attributes.tangent,m=!!n.morphAttributes.position,A=!!n.morphAttributes.normal,v=!!n.morphAttributes.color,y=r.toneMapped?C.toneMapping:it,x=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==x?x.length:0,E=st.get(r),S=w.state.lights;if(!0===j&&(!0===W||t!==R)){const e=t===R&&r.id===k;At.setState(r,t,e)}let I=!1;r.version===E.__version?E.needsLights&&E.lightsStateVersion!==S.state.version?I=!0:E.outputEncoding!==c?I=!0:object.isInstancedMesh&&!1===E.instancing?I=!0:object.isInstancedMesh||!0!==E.instancing?object.isSkinnedMesh&&!1===E.skinning?I=!0:object.isSkinnedMesh||!0!==E.skinning?E.envMap!==h?I=!0:!0===r.fog&&E.fog!==o?I=!0:void 0===E.numClippingPlanes||E.numClippingPlanes===At.numPlanes&&E.numIntersection===At.numIntersection?E.vertexAlphas!==d?I=!0:E.vertexTangents!==f?I=!0:E.morphTargets!==m?I=!0:E.morphNormals!==A?I=!0:E.morphColors!==v?I=!0:E.toneMapping!==y?I=!0:!0===tt.isWebGL2&&E.morphTargetsCount!==_&&(I=!0):I=!0:I=!0:I=!0:(I=!0,E.__version=r.version);let M=E.currentProgram;!0===I&&(M=Wt(r,e,object));let B=!1,L=!1,D=!1;const P=M.getUniforms(),O=E.uniforms;et.useProgram(M.program)&&(B=!0,L=!0,D=!0);r.id!==k&&(k=r.id,L=!0);if(B||R!==t){if(P.setValue(Mt,"projectionMatrix",t.projectionMatrix),tt.logarithmicDepthBuffer&&P.setValue(Mt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),R!==t&&(R=t,L=!0,D=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=P.map.cameraPosition;void 0!==e&&e.setValue(Mt,X.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(Mt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||object.isSkinnedMesh)&&P.setValue(Mt,"viewMatrix",t.matrixWorldInverse)}if(object.isSkinnedMesh){P.setOptional(Mt,object,"bindMatrix"),P.setOptional(Mt,object,"bindMatrixInverse");const t=object.skeleton;t&&(tt.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),P.setValue(Mt,"boneTexture",t.boneTexture,at),P.setValue(Mt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const U=n.morphAttributes;(void 0!==U.position||void 0!==U.normal||void 0!==U.color&&!0===tt.isWebGL2)&&yt.update(object,n,M);(L||E.receiveShadow!==object.receiveShadow)&&(E.receiveShadow=object.receiveShadow,P.setValue(Mt,"receiveShadow",object.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=h,O.flipEnvMap.value=h.isCubeTexture&&!1===h.isRenderTargetTexture?-1:1);L&&(P.setValue(Mt,"toneMappingExposure",C.toneMappingExposure),E.needsLights&&(z=D,(Q=O).ambientLightColor.needsUpdate=z,Q.lightProbe.needsUpdate=z,Q.directionalLights.needsUpdate=z,Q.directionalLightShadows.needsUpdate=z,Q.pointLights.needsUpdate=z,Q.pointLightShadows.needsUpdate=z,Q.spotLights.needsUpdate=z,Q.spotLightShadows.needsUpdate=z,Q.rectAreaLights.needsUpdate=z,Q.hemisphereLights.needsUpdate=z),o&&!0===r.fog&&ft.refreshFogUniforms(O,o),ft.refreshMaterialUniforms(O,r,N,F,$),no.upload(Mt,E.uniformsList,O,at));var Q,z;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(no.upload(Mt,E.uniformsList,O,at),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&P.setValue(Mt,"center",object.center);if(P.setValue(Mt,"modelViewMatrix",object.modelViewMatrix),P.setValue(Mt,"normalMatrix",object.normalMatrix),P.setValue(Mt,"modelMatrix",object.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let i=0,e=t.length;i<e;i++)if(tt.isWebGL2){const e=t[i];It.update(e,M),It.bind(e,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(t,e,n,r,object);et.setMaterial(r,l);let h=n.index,d=1;!0===r.wireframe&&(h=ht.getWireframeAttribute(n),d=2);const f=n.drawRange,m=n.attributes.position;let A=f.start*d,v=(f.start+f.count)*d;null!==o&&(A=Math.max(A,o.start*d),v=Math.min(v,(o.start+o.count)*d)),null!==h?(A=Math.max(A,0),v=Math.min(v,h.count)):null!=m&&(A=Math.max(A,0),v=Math.min(v,m.count));const y=v-A;if(y<0||y===1/0)return;let x;Et.setup(object,r,c,n,h);let _=xt;if(null!==h&&(x=ct.get(h),(_=_t).setIndex(x)),object.isMesh)!0===r.wireframe?(et.setLineWidth(r.wireframeLinewidth*J()),_.setMode(1)):_.setMode(4);else if(object.isLine){let t=r.linewidth;void 0===t&&(t=1),et.setLineWidth(t*J()),object.isLineSegments?_.setMode(1):object.isLineLoop?_.setMode(2):_.setMode(3)}else object.isPoints?_.setMode(0):object.isSprite&&_.setMode(4);if(object.isInstancedMesh)_.renderInstances(A,y,object.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);_.renderInstances(A,y,e)}else _.render(A,y)},this.compile=function(t,e){function n(t,e,object){!0===t.transparent&&t.side===_&&!1===t.forceSinglePass?(t.side=x,t.needsUpdate=!0,Wt(t,e,object),t.side=y,t.needsUpdate=!0,Wt(t,e,object),t.side=_):Wt(t,e,object)}(w=gt.get(t)).init(),S.push(w),t.traverseVisible(function(object){object.isLight&&object.layers.test(e.layers)&&(w.pushLight(object),object.castShadow&&w.pushShadow(object))}),w.setupLights(C.useLegacyLights),t.traverse(function(object){const e=object.material;if(e)if(Array.isArray(e))for(let i=0;i<e.length;i++){n(e[i],t,object)}else n(e,t,object)}),S.pop(),w=null};let Ut=null;function Qt(){Gt.stop()}function zt(){Gt.start()}const Gt=new ms;function Ht(t,e,n,r){const o=t.opaque,c=t.transmissive,h=t.transparent;w.setupLightsView(n),!0===j&&At.setGlobalState(C.clippingPlanes,n),c.length>0&&function(t,e,n,r){if(null===$){const t=tt.isWebGL2;$=new Rn(1024,1024,{generateMipmaps:!0,type:Z.has("EXT_color_buffer_half_float")?Lt:Ct,minFilter:St,samples:t&&!0===l?4:0})}const o=C.getRenderTarget();C.setRenderTarget($),C.clear();const c=C.toneMapping;C.toneMapping=it,Vt(t,n,r),at.updateMultisampleRenderTarget($),at.updateRenderTargetMipmap($);let h=!1;for(let i=0,t=e.length;i<t;i++){const t=e[i],object=t.object,o=t.geometry,l=t.material,c=t.group;if(l.side===_&&object.layers.test(r.layers)){const t=l.side;l.side=x,l.needsUpdate=!0,jt(object,n,r,o,l,c),l.side=t,l.needsUpdate=!0,h=!0}}!0===h&&(at.updateMultisampleRenderTarget($),at.updateRenderTargetMipmap($));C.setRenderTarget(o),C.toneMapping=c}(o,c,e,n),r&&et.viewport(L.copy(r)),o.length>0&&Vt(o,e,n),c.length>0&&Vt(c,e,n),h.length>0&&Vt(h,e,n),et.buffers.depth.setTest(!0),et.buffers.depth.setMask(!0),et.buffers.color.setMask(!0),et.setPolygonOffset(!1)}function Vt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],object=o.object,l=o.geometry,c=null===r?o.material:r,h=o.group;object.layers.test(n.layers)&&jt(object,e,n,l,c,h)}}function jt(object,t,e,n,r,o){object.onBeforeRender(C,t,e,n,r,o),object.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),r.onBeforeRender(C,t,e,n,object,o),!0===r.transparent&&r.side===_&&!1===r.forceSinglePass?(r.side=x,r.needsUpdate=!0,C.renderBufferDirect(e,t,n,r,object,o),r.side=y,r.needsUpdate=!0,C.renderBufferDirect(e,t,n,r,object,o),r.side=_):C.renderBufferDirect(e,t,n,r,object,o),object.onAfterRender(C,t,e,n,r,o)}function Wt(t,e,object){!0!==e.isScene&&(e=K);const n=st.get(t),r=w.state.lights,o=w.state.shadowsArray,l=r.state.version,c=pt.getParameters(t,r.state,o,e,object),h=pt.getProgramCacheKey(c);let d=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?lt:ot).get(t.envMap||n.environment),void 0===d&&(t.addEventListener("dispose",Ft),d=new Map,n.programs=d);let f=d.get(h);if(void 0!==f){if(n.currentProgram===f&&n.lightsStateVersion===l)return $t(t,c),f}else c.uniforms=pt.getUniforms(t),t.onBuild(object,c,C),t.onBeforeCompile(c,C),f=pt.acquireProgram(c,h),d.set(h,f),n.uniforms=c.uniforms;const m=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(m.clippingPlanes=At.uniform),$t(t,c),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=l,n.needsLights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.directionalLightShadows.value=r.state.directionalShadow,m.spotLights.value=r.state.spot,m.spotLightShadows.value=r.state.spotShadow,m.rectAreaLights.value=r.state.rectArea,m.ltc_1.value=r.state.rectAreaLTC1,m.ltc_2.value=r.state.rectAreaLTC2,m.pointLights.value=r.state.point,m.pointLightShadows.value=r.state.pointShadow,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotLightMatrix.value=r.state.spotLightMatrix,m.spotLightMap.value=r.state.spotLightMap,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);const A=f.getUniforms(),v=no.seqWithValue(A.seq,m);return n.currentProgram=f,n.uniformsList=v,f}function $t(t,e){const n=st.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Gt.setAnimationLoop(function(time){Ut&&Ut(time)}),"undefined"!=typeof self&&Gt.setContext(self),this.setAnimationLoop=function(t){Ut=t,kt.setAnimationLoop(t),null===t?Gt.stop():Gt.start()},kt.addEventListener("sessionstart",Qt),kt.addEventListener("sessionend",zt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===I)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===kt.enabled&&!0===kt.isPresenting&&(!0===kt.cameraAutoUpdate&&kt.updateCamera(e),e=kt.getCamera()),!0===t.isScene&&t.onBeforeRender(C,t,e,T),(w=gt.get(t,S.length)).init(),S.push(w),Y.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),V.setFromProjectionMatrix(Y),W=this.localClippingEnabled,j=At.init(this.clippingPlanes,W),(v=mt.get(t,E.length)).init(),E.push(v),function t(object,e,n,r){if(!1===object.visible)return;const o=object.layers.test(e.layers);if(o)if(object.isGroup)n=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(e);else if(object.isLight)w.pushLight(object),object.castShadow&&w.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||V.intersectsSprite(object)){r&&X.setFromMatrixPosition(object.matrixWorld).applyMatrix4(Y);const t=ut.update(object),e=object.material;e.visible&&v.push(object,t,e,n,X.z,null)}}else if((object.isMesh||object.isLine||object.isPoints)&&(object.isSkinnedMesh&&object.skeleton.frame!==nt.render.frame&&(object.skeleton.update(),object.skeleton.frame=nt.render.frame),!object.frustumCulled||V.intersectsObject(object))){r&&X.setFromMatrixPosition(object.matrixWorld).applyMatrix4(Y);const t=ut.update(object),e=object.material;if(Array.isArray(e)){const r=t.groups;for(let i=0,o=r.length;i<o;i++){const o=r[i],l=e[o.materialIndex];l&&l.visible&&v.push(object,t,l,n,X.z,o)}}else e.visible&&v.push(object,t,e,n,X.z,null)}const l=object.children;for(let i=0,o=l.length;i<o;i++)t(l[i],e,n,r)}(t,e,0,C.sortObjects),v.finish(),!0===C.sortObjects&&v.sort(U,Q),!0===j&&At.beginShadows();const n=w.state.shadowsArray;if(vt.render(n,t,e),!0===j&&At.endShadows(),!0===this.info.autoReset&&this.info.reset(),bt.render(v,t),w.setupLights(C.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let i=0,e=n.length;i<e;i++){const e=n[i];Ht(v,t,e,e.viewport)}}else Ht(v,t,e);null!==T&&(at.updateMultisampleRenderTarget(T),at.updateRenderTargetMipmap(T)),!0===t.isScene&&t.onAfterRender(C,t,e),Et.resetDefaultState(),k=-1,R=null,S.pop(),w=S.length>0?S[S.length-1]:null,E.pop(),v=E.length>0?E[E.length-1]:null},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(t,e,n){st.get(t.texture).__webglTexture=e,st.get(t.depthTexture).__webglTexture=n;const r=st.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Z.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=st.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){T=t,M=e,B=n;let r=!0,o=null,l=!1,c=!1;if(t){const n=st.get(t);void 0!==n.__useDefaultFramebuffer?(et.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?at.setupRenderTarget(t):n.__hasExternalTextures&&at.rebindTextures(t,st.get(t.texture).__webglTexture,st.get(t.depthTexture).__webglTexture);const h=t.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(c=!0);const d=st.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(o=d[e],l=!0):o=tt.isWebGL2&&t.samples>0&&!1===at.useMultisampledRTT(t)?st.get(t).__webglMultisampledFramebuffer:d,L.copy(t.viewport),D.copy(t.scissor),P=t.scissorTest}else L.copy(z).multiplyScalar(N).floor(),D.copy(G).multiplyScalar(N).floor(),P=H;if(et.bindFramebuffer(36160,o)&&tt.drawBuffers&&r&&et.drawBuffers(t,o),et.viewport(L),et.scissor(D),et.setScissorTest(P),l){const r=st.get(t.texture);Mt.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(c){const r=st.get(t.texture),o=e||0;Mt.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,o)}k=-1},this.readRenderTargetPixels=function(t,e,n,r,o,l,c){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=st.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){et.bindFramebuffer(36160,h);try{const c=t.texture,h=c.format,d=c.type;if(h!==Nt&&wt.convert(h)!==Mt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const f=d===Lt&&(Z.has("EXT_color_buffer_half_float")||tt.isWebGL2&&Z.has("EXT_color_buffer_float"));if(!(d===Ct||wt.convert(d)===Mt.getParameter(35738)||d===Rt&&(tt.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float"))||f))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-o&&Mt.readPixels(e,n,r,o,wt.convert(h),wt.convert(d),l)}finally{const t=null!==T?st.get(T).__webglFramebuffer:null;et.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),o=Math.floor(e.image.width*r),l=Math.floor(e.image.height*r);at.setTexture2D(e,0),Mt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,o,l),et.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const o=e.image.width,l=e.image.height,c=wt.convert(n.format),h=wt.convert(n.type);at.setTexture2D(n,0),Mt.pixelStorei(37440,n.flipY),Mt.pixelStorei(37441,n.premultiplyAlpha),Mt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?Mt.texSubImage2D(3553,r,t.x,t.y,o,l,c,h,e.image.data):e.isCompressedTexture?Mt.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,c,e.mipmaps[0].data):Mt.texSubImage2D(3553,r,t.x,t.y,c,h,e.image),0===r&&n.generateMipmaps&&Mt.generateMipmap(3553),et.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,o=0){if(C.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const l=t.max.x-t.min.x+1,c=t.max.y-t.min.y+1,h=t.max.z-t.min.z+1,d=wt.convert(r.format),f=wt.convert(r.type);let m;if(r.isData3DTexture)at.setTexture3D(r,0),m=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");at.setTexture2DArray(r,0),m=35866}Mt.pixelStorei(37440,r.flipY),Mt.pixelStorei(37441,r.premultiplyAlpha),Mt.pixelStorei(3317,r.unpackAlignment);const A=Mt.getParameter(3314),v=Mt.getParameter(32878),y=Mt.getParameter(3316),x=Mt.getParameter(3315),_=Mt.getParameter(32877),image=n.isCompressedTexture?n.mipmaps[0]:n.image;Mt.pixelStorei(3314,image.width),Mt.pixelStorei(32878,image.height),Mt.pixelStorei(3316,t.min.x),Mt.pixelStorei(3315,t.min.y),Mt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?Mt.texSubImage3D(m,o,e.x,e.y,e.z,l,c,h,d,f,image.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Mt.compressedTexSubImage3D(m,o,e.x,e.y,e.z,l,c,h,d,image.data)):Mt.texSubImage3D(m,o,e.x,e.y,e.z,l,c,h,d,f,image),Mt.pixelStorei(3314,A),Mt.pixelStorei(32878,v),Mt.pixelStorei(3316,y),Mt.pixelStorei(3315,x),Mt.pixelStorei(32877,_),0===o&&r.generateMipmaps&&Mt.generateMipmap(m),et.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?at.setTextureCube(t,0):t.isData3DTexture?at.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?at.setTexture2DArray(t,0):at.setTexture2D(t,0),et.unbindTexture()},this.resetState=function(){M=0,B=0,T=null,et.reset(),Et.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}}(class extends Jo{}).prototype.isWebGL1Renderer=!0;class Zo extends Ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(source,t){return super.copy(source,t),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),this.backgroundBlurriness=source.backgroundBlurriness,this.backgroundIntensity=source.backgroundIntensity,null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.matrixAutoUpdate=source.matrixAutoUpdate,this}toJSON(meta){const data=super.toJSON(meta);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(data.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(data.object.backgroundIntensity=this.backgroundIntensity),data}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class tl{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=qe,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=nn()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nn()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(t,this.stride);return e.setUsage(this.usage),e}onUpload(t){return this.onUploadCallback=t,this}toJSON(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nn()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const el=new On;class nl{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,e=this.data.count;i<e;i++)el.fromBufferAttribute(this,i),el.applyMatrix4(t),this.setXYZ(i,el.x,el.y,el.z);return this}applyNormalMatrix(t){for(let i=0,e=this.count;i<e;i++)el.fromBufferAttribute(this,i),el.applyNormalMatrix(t),this.setXYZ(i,el.x,el.y,el.z);return this}transformDirection(t){for(let i=0,e=this.count;i<e;i++)el.fromBufferAttribute(this,i),el.transformDirection(t),this.setXYZ(i,el.x,el.y,el.z);return this}setX(t,e){return this.normalized&&(e=un(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=un(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=un(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=un(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=hn(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=hn(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=hn(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=hn(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=un(e,this.array),n=un(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=un(e,this.array),n=un(n,this.array),r=un(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=un(e,this.array),n=un(n,this.array),r=un(r,this.array),o=un(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return new mr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new nl(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const e=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[e+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const il=new On,rl=new kn,sl=new kn,al=new On,ll=new pi,cl=new On;class hl extends jr{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pi,this.bindMatrixInverse=new pi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Un),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)cl.fromBufferAttribute(e,i),this.applyBoneTransform(i,cl),this.boundingBox.expandByPoint(cl)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ii),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)cl.fromBufferAttribute(e,i),this.applyBoneTransform(i,cl),this.boundingSphere.expandByPoint(cl)}copy(source,t){return super.copy(source,t),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new kn,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.fromBufferAttribute(e,i);const n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;rl.fromBufferAttribute(r.attributes.skinIndex,t),sl.fromBufferAttribute(r.attributes.skinWeight,t),il.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const t=sl.getComponent(i);if(0!==t){const r=rl.getComponent(i);ll.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(al.copy(il).applyMatrix4(ll),t)}}return e.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,e)}}class pl extends Ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class fl extends Tn{constructor(data=null,t=1,e=1,n,r,o,l,c,h=yt,d=yt,f,m){super(null,o,l,c,h,d,n,r,f,m),this.isDataTexture=!0,this.image={data:data,width:t,height:e},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ml=new pi,gl=new pi;class Al{constructor(t=[],e=[]){this.uuid=nn(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,t=this.bones.length;i<t;i++)this.boneInverses.push(new pi)}}calculateInverses(){this.boneInverses.length=0;for(let i=0,t=this.bones.length;i<t;i++){const t=new pi;this.bones[i]&&t.copy(this.bones[i].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&t.matrixWorld.copy(this.boneInverses[i]).invert()}for(let i=0,t=this.bones.length;i<t;i++){const t=this.bones[i];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:gl;ml.multiplyMatrices(r,e[i]),ml.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Al(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=ln(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new fl(e,t,t,Nt,Rt);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let i=0,e=this.bones.length;i<e;i++){const e=this.bones[i];if(e.name===t)return e}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,n=t.bones.length;i<n;i++){const n=t.bones[i];let r=e[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new pl),this.bones.push(r),this.boneInverses.push((new pi).fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const data={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};data.uuid=this.uuid;const t=this.bones,e=this.boneInverses;for(let i=0,n=t.length;i<n;i++){const n=t[i];data.bones.push(n.uuid);const r=e[i];data.boneInverses.push(r.toArray())}return data}}class vl extends mr{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(source){return super.copy(source),this.meshPerAttribute=source.meshPerAttribute,this}toJSON(){const data=super.toJSON();return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}const bl=new pi,yl=new pi,xl=[],_l=new Un,wl=new pi,El=new jr,Sl=new ii;class Cl extends jr{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new vl(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,wl)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Un),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,bl),_l.copy(t.boundingBox).applyMatrix4(bl),this.boundingBox.union(_l)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new ii),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,bl),Sl.copy(t.boundingSphere).applyMatrix4(bl),this.boundingSphere.union(Sl)}copy(source,t){return super.copy(source,t),this.instanceMatrix.copy(source.instanceMatrix),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(El.geometry=this.geometry,El.material=this.material,void 0!==El.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Sl.copy(this.boundingSphere),Sl.applyMatrix4(n),!1!==t.ray.intersectsSphere(Sl)))for(let o=0;o<r;o++){this.getMatrixAt(o,bl),yl.multiplyMatrices(n,bl),El.matrixWorld=yl,El.raycast(t,xl);for(let i=0,t=xl.length;i<t;i++){const t=xl[i];t.instanceId=o,t.object=this,e.push(t)}xl.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new vl(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Il extends Ji{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.fog=source.fog,this}}const Ml=new On,Bl=new On,Tl=new pi,kl=new di,Rl=new ii;class Ll extends Ni{constructor(t=new Ir,e=new Il){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),this.material=source.material,this.geometry=source.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let i=1,t=e.count;i<t;i++)Ml.fromBufferAttribute(e,i-1),Bl.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Ml.distanceTo(Bl);t.setAttribute("lineDistance",new vr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rl.copy(n.boundingSphere),Rl.applyMatrix4(r),Rl.radius+=o,!1===t.ray.intersectsSphere(Rl))return;Tl.copy(r).invert(),kl.copy(t.ray).applyMatrix4(Tl);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=new On,f=new On,m=new On,A=new On,v=this.isLineSegments?2:1,y=n.index,x=n.attributes.position;if(null!==y){for(let i=Math.max(0,l.start),n=Math.min(y.count,l.start+l.count)-1;i<n;i+=v){const a=y.getX(i),b=y.getX(i+1);if(d.fromBufferAttribute(x,a),f.fromBufferAttribute(x,b),kl.distanceSqToSegment(d,f,A,m)>h)continue;A.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(A);n<t.near||n>t.far||e.push({distance:n,point:m.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,l.start),n=Math.min(x.count,l.start+l.count)-1;i<n;i+=v){if(d.fromBufferAttribute(x,i),f.fromBufferAttribute(x,i+1),kl.distanceSqToSegment(d,f,A,m)>h)continue;A.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(A);n<t.near||n>t.far||e.push({distance:n,point:m.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const Dl=new On,Pl=new On;class Ol extends Ll{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let i=0,t=e.count;i<t;i+=2)Dl.fromBufferAttribute(e,i),Pl.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Dl.distanceTo(Pl);t.setAttribute("lineDistance",new vr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Fl extends Ll{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Nl extends Ji{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}const Ul=new pi,Ql=new di,zl=new ii,Gl=new On;class Hl extends Ni{constructor(t=new Ir,e=new Nl){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(source,t){return super.copy(source,t),this.material=source.material,this.geometry=source.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),zl.copy(n.boundingSphere),zl.applyMatrix4(r),zl.radius+=o,!1===t.ray.intersectsSphere(zl))return;Ul.copy(r).invert(),Ql.copy(t.ray).applyMatrix4(Ul);const c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=n.index,f=n.attributes.position;if(null!==d){for(let i=Math.max(0,l.start),n=Math.min(d.count,l.start+l.count);i<n;i++){const a=d.getX(i);Gl.fromBufferAttribute(f,a),Vl(Gl,a,h,r,t,e,this)}}else{for(let i=Math.max(0,l.start),n=Math.min(f.count,l.start+l.count);i<n;i++)Gl.fromBufferAttribute(f,i),Vl(Gl,i,h,r,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Vl(t,e,n,r,o,l,object){const c=Ql.distanceSqToPoint(t);if(c<n){const n=new On;Ql.closestPointToPoint(t,n),n.applyMatrix4(r);const h=o.ray.origin.distanceTo(n);if(h<o.near||h>o.far)return;l.push({distance:h,distanceToRay:Math.sqrt(c),point:n,index:e,face:null,object:object})}}class jl extends Tn{constructor(video,t,e,n,r,o,l,c,h){super(video,t,e,n,r,o,l,c,h),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:wt,this.magFilter=void 0!==r?r:wt,this.generateMipmaps=!1;const d=this;"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback(function t(){d.needsUpdate=!0,video.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const video=this.image;!1==="requestVideoFrameCallback"in video&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Wl extends Tn{constructor(t,e,n,r,o,l,c,h,d,f,m,A){super(null,l,c,h,d,f,r,o,m,A),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class $l extends Wl{constructor(t,e,n,r,o,l){super(t,e,n,o,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=vt}}class ql extends Tn{constructor(canvas,t,e,n,r,o,l,c,h){super(canvas,t,e,n,r,o,l,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Yl extends Ji{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ge,this.normalScale=new pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(source){return super.copy(source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapIntensity=source.envMapIntensity,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}class Xl extends Yl{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rr(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(source){return super.copy(source),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.ior=source.ior,this.iridescence=source.iridescence,this.iridescenceMap=source.iridescenceMap,this.iridescenceIOR=source.iridescenceIOR,this.iridescenceThicknessRange=[...source.iridescenceThicknessRange],this.iridescenceThicknessMap=source.iridescenceThicknessMap,this.sheen=source.sheen,this.sheenColor.copy(source.sheenColor),this.sheenColorMap=source.sheenColorMap,this.sheenRoughness=source.sheenRoughness,this.sheenRoughnessMap=source.sheenRoughnessMap,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this.thickness=source.thickness,this.thicknessMap=source.thicknessMap,this.attenuationDistance=source.attenuationDistance,this.attenuationColor.copy(source.attenuationColor),this.specularIntensity=source.specularIntensity,this.specularIntensityMap=source.specularIntensityMap,this.specularColor.copy(source.specularColor),this.specularColorMap=source.specularColorMap,this}}function Kl(t,e,n){return Zl(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Jl(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Zl(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)}function tc(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort(function(i,e){return t[i]-t[e]}),n}function ec(t,e,n){const r=t.length,o=new t.constructor(r);for(let i=0,l=0;l!==r;++i){const r=n[i]*e;for(let n=0;n!==e;++n)o[l++]=t[r+n]}return o}function nc(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let l=o[r];if(void 0!==l)if(Array.isArray(l))do{void 0!==(l=o[r])&&(e.push(o.time),n.push.apply(n,l)),o=t[i++]}while(void 0!==o);else if(void 0!==l.toArray)do{void 0!==(l=o[r])&&(e.push(o.time),l.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(l=o[r])&&(e.push(o.time),n.push(l)),o=t[i++]}while(void 0!==o)}class ic{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{let l;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<o)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(o=r,t<(r=e[++n]))break e}l=e.length;break n}if(t>=o)break t;{const c=e[1];t<c&&(n=2,o=c);for(let l=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=o,t>=(o=e[--n-1]))break e}l=n,n=0}}for(;n<l;){const r=n+l>>>1;t<e[r]?l=r:n=r+1}if(r=e[n],void 0===(o=e[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r;for(let i=0;i!==r;++i)e[i]=n[o+i];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class rc extends ic{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Te,endingEnd:Te}}intervalChanged_(t,e,n){const r=this.parameterPositions;let o=t-2,l=t+1,c=r[o],h=r[l];if(void 0===c)switch(this.getSettings_().endingStart){case ke:o=t,c=2*e-n;break;case Re:c=e+r[o=r.length-2]-r[o+1];break;default:o=t,c=n}if(void 0===h)switch(this.getSettings_().endingEnd){case ke:l=t,h=2*n-e;break;case Re:l=1,h=n+r[1]-r[0];break;default:l=t-1,h=e}const d=.5*(n-e),f=this.valueSize;this._weightPrev=d/(e-c),this._weightNext=d/(h-n),this._offsetPrev=o*f,this._offsetNext=l*f}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,d=h-c,f=this._offsetPrev,m=this._offsetNext,A=this._weightPrev,v=this._weightNext,p=(n-e)/(r-e),y=p*p,x=y*p,_=-A*x+2*A*y-A*p,w=(1+A)*x+(-1.5-2*A)*y+(-.5+A)*p+1,E=(-1-v)*x+(1.5+v)*y+.5*p,S=v*x-v*y;for(let i=0;i!==c;++i)o[i]=_*l[f+i]+w*l[d+i]+E*l[h+i]+S*l[m+i];return o}}class sc extends ic{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,d=h-c,f=(n-e)/(r-e),m=1-f;for(let i=0;i!==c;++i)o[i]=l[d+i]*m+l[h+i]*f;return o}}class ac extends ic{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class oc{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Jl(e,this.TimeBufferType),this.values=Jl(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(track){const t=track.constructor;let e;if(t.toJSON!==this.toJSON)e=t.toJSON(track);else{e={name:track.name,times:Jl(track.times,Array),values:Jl(track.values,Array)};const t=track.getInterpolation();t!==track.DefaultInterpolation&&(e.interpolation=t)}return e.type=track.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new ac(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new sc(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new rc(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Ie:e=this.InterpolantFactoryMethodDiscrete;break;case Me:e=this.InterpolantFactoryMethodLinear;break;case Be:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ie;case this.InterpolantFactoryMethodLinear:return Me;case this.InterpolantFactoryMethodSmooth:return Be}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){const n=this.times,r=n.length;let o=0,l=r-1;for(;o!==r&&n[o]<t;)++o;for(;-1!==l&&n[l]>e;)--l;if(++l,0!==o||l!==r){o>=l&&(o=(l=Math.max(l,1))-1);const t=this.getValueSize();this.times=Kl(n,o,l),this.values=Kl(this.values,o*t,l*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let l=null;for(let i=0;i!==o;i++){const e=n[i];if("number"==typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,e),t=!1;break}if(null!==l&&l>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,e,l),t=!1;break}l=e}if(void 0!==r&&Zl(r))for(let i=0,e=r.length;i!==e;++i){const e=r[i];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,e),t=!1;break}}return t}optimize(){const t=Kl(this.times),e=Kl(this.values),n=this.getValueSize(),r=this.getInterpolation()===Be,o=t.length-1;let l=1;for(let i=1;i<o;++i){let o=!1;const time=t[i];if(time!==t[i+1]&&(1!==i||time!==t[0]))if(r)o=!0;else{const t=i*n,r=t-n,l=t+n;for(let c=0;c!==n;++c){const n=e[t+c];if(n!==e[r+c]||n!==e[l+c]){o=!0;break}}}if(o){if(i!==l){t[l]=t[i];const r=i*n,o=l*n;for(let t=0;t!==n;++t)e[o+t]=e[r+t]}++l}}if(o>0){t[l]=t[o];for(let t=o*n,r=l*n,c=0;c!==n;++c)e[r+c]=e[t+c];++l}return l!==t.length?(this.times=Kl(t,0,l),this.values=Kl(e,0,l*n)):(this.times=t,this.values=e),this}clone(){const t=Kl(this.times,0),e=Kl(this.values,0),track=new(0,this.constructor)(this.name,t,e);return track.createInterpolant=this.createInterpolant,track}}oc.prototype.TimeBufferType=Float32Array,oc.prototype.ValueBufferType=Float32Array,oc.prototype.DefaultInterpolation=Me;class lc extends oc{}lc.prototype.ValueTypeName="bool",lc.prototype.ValueBufferType=Array,lc.prototype.DefaultInterpolation=Ie,lc.prototype.InterpolantFactoryMethodLinear=void 0,lc.prototype.InterpolantFactoryMethodSmooth=void 0;class cc extends oc{}cc.prototype.ValueTypeName="color";class hc extends oc{}hc.prototype.ValueTypeName="number";class uc extends ic{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=(n-e)/(r-e);let d=t*c;for(let t=d+c;d!==t;d+=4)Pn.slerpFlat(o,0,l,d-c,l,d,h);return o}}class dc extends oc{InterpolantFactoryMethodLinear(t){return new uc(this.times,this.values,this.getValueSize(),t)}}dc.prototype.ValueTypeName="quaternion",dc.prototype.DefaultInterpolation=Me,dc.prototype.InterpolantFactoryMethodSmooth=void 0;class pc extends oc{}pc.prototype.ValueTypeName="string",pc.prototype.ValueBufferType=Array,pc.prototype.DefaultInterpolation=Ie,pc.prototype.InterpolantFactoryMethodLinear=void 0,pc.prototype.InterpolantFactoryMethodSmooth=void 0;class fc extends oc{}fc.prototype.ValueTypeName="vector";class mc{constructor(t,e=-1,n,r=Le){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=nn(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let i=0,t=n.length;i!==t;++i)e.push(gc(n[i]).scale(r));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let i=0,t=n.length;i!==t;++i)e.push(oc.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const o=e.length,l=[];for(let i=0;i<o;i++){let t=[],c=[];t.push((i+o-1)%o,i,(i+1)%o),c.push(0,1,0);const h=tc(t);t=ec(t,1,h),c=ec(c,1,h),r||0!==t[0]||(t.push(o),c.push(c[0])),l.push(new hc(".morphTargetInfluences["+e[i].name+"]",t,c).scale(1/n))}return new this(t,-1,l)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},pattern=/^([\w-]*?)([\d]+)$/;for(let i=0,e=t.length;i<e;i++){const e=t[i],n=e.name.match(pattern);if(n&&n.length>1){const t=n[1];let o=r[t];o||(r[t]=o=[]),o.push(e)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,o){if(0!==n.length){const l=[],c=[];nc(n,l,c,r),0!==l.length&&o.push(new t(e,l,c))}},r=[],o=t.name||"default",l=t.fps||30,c=t.blendMode;let h=t.length||-1;const d=t.hierarchy||[];for(let t=0;t<d.length;t++){const o=d[t].keys;if(o&&0!==o.length)if(o[0].morphTargets){const t={};let e;for(e=0;e<o.length;e++)if(o[e].morphTargets)for(let n=0;n<o[e].morphTargets.length;n++)t[o[e].morphTargets[n]]=-1;for(const n in t){const t=[],l=[];for(let r=0;r!==o[e].morphTargets.length;++r){const r=o[e];t.push(r.time),l.push(r.morphTarget===n?1:0)}r.push(new hc(".morphTargetInfluence["+n+"]",t,l))}h=t.length*l}else{const l=".bones["+e[t].name+"]";n(fc,l+".position",o,"pos",r),n(dc,l+".quaternion",o,"rot",r),n(fc,l+".scale",o,"scl",r)}}return 0===r.length?null:new this(o,h,r,c)}resetDuration(){let t=0;for(let i=0,e=this.tracks.length;i!==e;++i){const track=this.tracks[i];t=Math.max(t,track.times[track.times.length-1])}return this.duration=t,this}trim(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hc;case"vector":case"vector2":case"vector3":case"vector4":return fc;case"color":return cc;case"quaternion":return dc;case"bool":case"boolean":return lc;case"string":return pc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];nc(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ac={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class vc{constructor(t,e,n){const r=this;let o=!1,l=0,c=0,h=void 0;const d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){c++,!1===o&&void 0!==r.onStart&&r.onStart(t,l,c),o=!0},this.itemEnd=function(t){l++,void 0!==r.onProgress&&r.onProgress(t,l,c),l===c&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return h?h(t):t},this.setURLModifier=function(t){return h=t,this},this.addHandler=function(t,e){return d.push(t,e),this},this.removeHandler=function(t){const e=d.indexOf(t);return-1!==e&&d.splice(e,2),this},this.getHandler=function(t){for(let i=0,e=d.length;i<e;i+=2){const e=d[i],n=d[i+1];if(e.global&&(e.lastIndex=0),e.test(t))return n}return null}}}const bc=new vc;class yc{constructor(t){this.manager=void 0!==t?t:bc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,o){n.load(t,r,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(path){return this.path=path,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const xc={};class _c extends Error{constructor(t,e){super(t),this.response=e}}class wc extends yc{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Ac.get(t);if(void 0!==o)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(void 0!==xc[t])return void xc[t].push({onLoad:e,onProgress:n,onError:r});xc[t]=[],xc[t].push({onLoad:e,onProgress:n,onError:r});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,h=this.responseType;fetch(l).then(e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=xc[t],r=e.body.getReader(),o=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),l=o?parseInt(o):0,c=0!==l;let h=0;const d=new ReadableStream({start(t){!function e(){r.read().then(({done:r,value:o})=>{if(r)t.close();else{h+=o.byteLength;const r=new ProgressEvent("progress",{lengthComputable:c,loaded:h,total:l});for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onProgress&&t.onProgress(r)}t.enqueue(o),e()}})}()}});return new Response(d)}throw new _c(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`,e)}).then(t=>{switch(h){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(text=>{return(new DOMParser).parseFromString(text,c)});case"json":return t.json();default:if(void 0===c)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(c),label=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(label);return t.arrayBuffer().then(t=>n.decode(t))}}}).then(data=>{Ac.add(t,data);const e=xc[t];delete xc[t];for(let i=0,t=e.length;i<t;i++){const t=e[i];t.onLoad&&t.onLoad(data)}}).catch(e=>{const n=xc[t];if(void 0===n)throw this.manager.itemError(t),e;delete xc[t];for(let i=0,t=n.length;i<t;i++){const t=n[i];t.onError&&t.onError(e)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ec extends yc{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Ac.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout(function(){e&&e(l),o.manager.itemEnd(t)},0),l;const image=An("img");function c(){d(),Ac.add(t,this),e&&e(this),o.manager.itemEnd(t)}function h(e){d(),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){image.removeEventListener("load",c,!1),image.removeEventListener("error",h,!1)}return image.addEventListener("load",c,!1),image.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),o.manager.itemStart(t),image.src=t,image}}class Sc extends yc{constructor(t){super(t)}load(t,e,n,r){const o=this,l=new fl,c=new wc(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(t,function(t){const n=o.parse(t);n&&(void 0!==n.image?l.image=n.image:void 0!==n.data&&(l.image.width=n.width,l.image.height=n.height,l.image.data=n.data),l.wrapS=void 0!==n.wrapS?n.wrapS:vt,l.wrapT=void 0!==n.wrapT?n.wrapT:vt,l.magFilter=void 0!==n.magFilter?n.magFilter:wt,l.minFilter=void 0!==n.minFilter?n.minFilter:wt,l.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(l.encoding=n.encoding),void 0!==n.flipY&&(l.flipY=n.flipY),void 0!==n.format&&(l.format=n.format),void 0!==n.type&&(l.type=n.type),void 0!==n.mipmaps&&(l.mipmaps=n.mipmaps,l.minFilter=St),1===n.mipmapCount&&(l.minFilter=wt),void 0!==n.generateMipmaps&&(l.generateMipmaps=n.generateMipmaps),l.needsUpdate=!0,e&&e(l,n))},n,r),l}}class Cc extends yc{constructor(t){super(t)}load(t,e,n,r){const o=new Tn,l=new Ec(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,function(image){o.image=image,o.needsUpdate=!0,void 0!==e&&e(o)},n,r),o}}class Ic extends Ni{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new rr(t),this.intensity=e}dispose(){}copy(source,t){return super.copy(source,t),this.color.copy(source.color),this.intensity=source.intensity,this}toJSON(meta){const data=super.toJSON(meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),data}}const Mc=new pi,Bc=new On,Tc=new On;class kc{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pn(512,512),this.map=null,this.mapPass=null,this.matrix=new pi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fs,this._frameExtents=new pn(1,1),this._viewportCount=1,this._viewports=[new kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;Bc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Bc),Tc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Tc),e.updateMatrixWorld(),Mc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Mc)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(source){return this.camera=source.camera.clone(),this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const object={};return 0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}}class Rc extends kc{constructor(){super(new ns(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*en*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;n===e.fov&&r===e.aspect&&o===e.far||(e.fov=n,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(source){return super.copy(source),this.focus=source.focus,this}}class Lc extends Ic{constructor(t,e,n=0,r=Math.PI/3,o=0,l=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.distance=n,this.angle=r,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new Rc}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(source,t){return super.copy(source,t),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}const Dc=new pi,Pc=new On,Oc=new On;class Fc extends kc{constructor(){super(new ns(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pn(4,2),this._viewportCount=6,this._viewports=[new kn(2,1,1,1),new kn(0,1,1,1),new kn(3,1,1,1),new kn(1,1,1,1),new kn(3,0,1,1),new kn(1,0,1,1)],this._cubeDirections=[new On(1,0,0),new On(-1,0,0),new On(0,0,1),new On(0,0,-1),new On(0,1,0),new On(0,-1,0)],this._cubeUps=[new On(0,1,0),new On(0,1,0),new On(0,1,0),new On(0,1,0),new On(0,0,1),new On(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),Pc.setFromMatrixPosition(t.matrixWorld),n.position.copy(Pc),Oc.copy(n.position),Oc.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Oc),n.updateMatrixWorld(),r.makeTranslation(-Pc.x,-Pc.y,-Pc.z),Dc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dc)}}class Nc extends Ic{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Fc}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(source,t){return super.copy(source,t),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}class Uc extends kc{constructor(){super(new Ms(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Qc extends Ic{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ni.DEFAULT_UP),this.updateMatrix(),this.target=new Ni,this.shadow=new Uc}dispose(){this.shadow.dispose()}copy(source){return super.copy(source),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}class zc{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let i=0;i<9;i++)this.coefficients.push(new On)}set(t){for(let i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}zero(){for(let i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*r),e.addScaledVector(l[2],.488603*o),e.addScaledVector(l[3],.488603*n),e.addScaledVector(l[4],n*r*1.092548),e.addScaledVector(l[5],r*o*1.092548),e.addScaledVector(l[6],.315392*(3*o*o-1)),e.addScaledVector(l[7],n*o*1.092548),e.addScaledVector(l[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],1.023328*r),e.addScaledVector(l[2],1.023328*o),e.addScaledVector(l[3],1.023328*n),e.addScaledVector(l[4],.858086*n*r),e.addScaledVector(l[5],.858086*r*o),e.addScaledVector(l[6],.743125*o*o-.247708),e.addScaledVector(l[7],.858086*n*o),e.addScaledVector(l[8],.429043*(n*n-r*r)),e}add(t){for(let i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}addScaledSH(t,s){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],s);return this}scale(s){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(s);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-r*r)}}class Gc extends Ic{constructor(t=new zc,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(source){return super.copy(source),this.sh.copy(source.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(meta){const data=super.toJSON(meta);return data.object.sh=this.sh.toArray(),data}}class Hc{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let s="";for(let i=0,e=t.length;i<e;i++)s+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(s))}catch(t){return s}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,path){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(path)&&/^\//.test(t)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:path+t)}}class Vc extends yc{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,l=Ac.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout(function(){e&&e(l),o.manager.itemEnd(t)},0),l;const c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include",c.headers=this.requestHeader,fetch(t,c).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(n){Ac.add(t,n),e&&e(n),o.manager.itemEnd(t)}).catch(function(e){r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}),o.manager.itemStart(t)}}class jc{constructor(t,e,n){let r,o,l;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,o=t*r+r;let l=this.cumulativeWeight;if(0===l){for(let i=0;i!==r;++i)n[o+i]=n[i];l=e}else{const t=e/(l+=e);this._mixBufferRegion(n,o,0,t,r)}this.cumulativeWeight=l}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-o,e)}l>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let i=e,t=e+e;i!==t;++i)if(n[i]!==n[i+e]){c.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let i=n,t=r;i!==t;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,n,r,o){if(r>=.5)for(let i=0;i!==o;++i)t[e+i]=t[n+i]}_slerp(t,e,n,r){Pn.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,o){const l=this._workIndex*o;Pn.multiplyQuaternionsFlat(t,l,t,e,t,n),Pn.slerpFlat(t,e,t,e,t,l,r)}_lerp(t,e,n,r,o){const s=1-r;for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]*s+t[n+i]*r}}_lerpAdditive(t,e,n,r,o){for(let i=0;i!==o;++i){const o=e+i;t[o]=t[o]+t[n+i]*r}}}const Wc=new RegExp("[\\[\\]\\.:\\/]","g"),$c="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",qc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]")+/(WCOD+)?/.source.replace("WCOD",$c)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]")+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]")+"$"),Yc=["material","materials","bones","map"];class Xc{constructor(t,path,e){this.path=path,this.parsedPath=e||Xc.parseTrackName(path),this.node=Xc.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,path,e){return t&&t.isAnimationObjectGroup?new Xc.Composite(t,path,e):new Xc(t,path,e)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Wc,"")}static parseTrackName(t){const e=qc.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Yc.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const source=this.resolvedProperty;for(let i=0,n=source.length;i!==n;++i)t[e++]=source[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let o=e.propertyIndex;if(t||(t=Xc.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let i=0;i<t.length;i++)if(t[i].name===r){r=i;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const l=t[r];if(void 0===l){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xc.Composite=class{constructor(t,path,e){const n=e||Xc.parseTrackName(path);this._targetGroup=t,this._bindings=t.subscribe_(path,n)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].unbind()}},Xc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Xc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Xc.prototype.GetterByBindingType=[Xc.prototype._getValue_direct,Xc.prototype._getValue_array,Xc.prototype._getValue_arrayElement,Xc.prototype._getValue_toArray],Xc.prototype.SetterByBindingTypeAndVersioning=[[Xc.prototype._setValue_direct,Xc.prototype._setValue_direct_setNeedsUpdate,Xc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xc.prototype._setValue_array,Xc.prototype._setValue_array_setNeedsUpdate,Xc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xc.prototype._setValue_arrayElement,Xc.prototype._setValue_arrayElement_setNeedsUpdate,Xc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xc.prototype._setValue_fromArray,Xc.prototype._setValue_fromArray_setNeedsUpdate,Xc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Kc{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const o=e.tracks,l=o.length,c=new Array(l),h={endingStart:Te,endingEnd:Te};for(let i=0;i!==l;++i){const t=o[i].createInterpolant(null);c[i]=t,t.settings=h}this._interpolantSettings=h,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Se,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(time){return this._startTime=time,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,o=r/n,l=n/r;t.warp(1,o,e),this.warp(l,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,o=r.time,l=this.timeScale;let c=this._timeScaleInterpolant;null===c&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=o,h[1]=o+n,d[0]=t/l,d[1]=e/l,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(time,t,e,n){if(!this.enabled)return void this._updateWeight(time);const r=this._startTime;if(null!==r){const n=(time-r)*e;n<0||0===e?t=0:(this._startTime=null,t=e*n)}t*=this._updateTimeScale(time);const o=this._updateTime(t),l=this._updateWeight(time);if(l>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case De:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(l);break;case Le:default:for(let r=0,c=t.length;r!==c;++r)t[r].evaluate(o),e[r].accumulate(n,l)}}}_updateWeight(time){let t=0;if(this.enabled){t=this.weight;const e=this._weightInterpolant;if(null!==e){const n=e.evaluate(time)[0];t*=n,time>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(time){let t=0;if(!this.paused){t=this.timeScale;const e=this._timeScaleInterpolant;if(null!==e){t*=e.evaluate(time)[0],time>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(t){const e=this._clip.duration,n=this.loop;let time=this.time+t,r=this._loopCount;const o=n===Ce;if(0===t)return-1===r?time:o&&1==(1&r)?e-time:time;if(n===Ee){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(time>=e)time=e;else{if(!(time<0)){this.time=time;break t}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),time>=e||time<0){const n=Math.floor(time/e);time-=e*n,r+=Math.abs(n);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=t>0?e:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===l){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=time;if(o&&1==(1&r))return e-time}return time}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=ke,r.endingEnd=ke):(r.endingStart=t?this.zeroSlopeAtStart?ke:Te:Re,r.endingEnd=e?this.zeroSlopeAtEnd?ke:Te:Re)}_scheduleFading(t,e,n){const r=this._mixer,o=r.time;let l=this._weightInterpolant;null===l&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=o,h[0]=e,c[1]=o+t,h[1]=n,this}}const Jc=new Float32Array(1);class Zc extends Ke{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,l=t._propertyBindings,c=t._interpolants,h=n.uuid,d=this._bindingsByRootAndName;let f=d[h];void 0===f&&(f={},d[h]=f);for(let i=0;i!==o;++i){const track=r[i],t=track.name;let o=f[t];if(void 0!==o)++o.referenceCount,l[i]=o;else{if(void 0!==(o=l[i])){null===o._cacheIndex&&(++o.referenceCount,this._addInactiveBinding(o,h,t));continue}const path=e&&e._propertyBindings[i].binding.parsedPath;++(o=new jc(Xc.create(n,t,path),track.ValueTypeName,track.getValueSize())).referenceCount,this._addInactiveBinding(o,h,t),l[i]=o}c[i].resultBuffer=o.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==t.useCount++&&(this._lendBinding(t),t.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.useCount&&(t.restoreOriginalState(),this._takeBackBinding(t))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,o=this._actionsByClip;let l=o[e];if(void 0===l)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=l;else{const e=l.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),l.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,l=this._actionsByClip,c=l[o],h=c.knownActions,d=h[h.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,h[f]=d,h.pop(),t._byClipCacheIndex=null,delete c.actionByRoot[(t._localRoot||this._root).uuid],0===h.length&&delete l[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,t=e.length;i!==t;++i){const t=e[i];0==--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,o=this._bindings;let l=r[e];void 0===l&&(l={},r[e]=l),l[n]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,l=this._bindingsByRootAndName,c=l[r],h=e[e.length-1],d=t._cacheIndex;h._cacheIndex=d,e[d]=h,e.pop(),delete c[o],0===Object.keys(c).length&&delete l[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&((n=new sc(new Float32Array(2),new Float32Array(2),1,Jc)).__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o}clipAction(t,e,n){const r=e||this._root,o=r.uuid;let l="string"==typeof t?mc.findByName(r,t):t;const c=null!==l?l.uuid:t,h=this._actionsByClip[c];let d=null;if(void 0===n&&(n=null!==l?l.blendMode:Le),void 0!==h){const t=h.actionByRoot[o];if(void 0!==t&&t.blendMode===n)return t;d=h.knownActions[0],null===l&&(l=d._clip)}if(null===l)return null;const f=new Kc(this,l,e,n);return this._bindAction(f,d),this._addInactiveAction(f,c,o),f}existingAction(t,e){const n=e||this._root,r=n.uuid,o="string"==typeof t?mc.findByName(n,t):t,l=o?o.uuid:t,c=this._actionsByClip[l];return void 0!==c&&c.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,time=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let i=0;i!==n;++i){e[i]._update(time,t,r,o)}const l=this._bindings,c=this._nActiveBindings;for(let i=0;i!==c;++i)l[i].apply(o);return this}setTime(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){const t=o.knownActions;for(let i=0,n=t.length;i!==n;++i){const n=t[i];this._deactivateAction(n);const r=n._cacheIndex,o=e[e.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(n)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}function eh(a,b){return a.distance-b.distance}function nh(object,t,e,n){if(object.layers.test(t.layers)&&object.raycast(t,e),!0===n){const n=object.children;for(let i=0,r=n.length;i<r;i++)nh(n[i],t,e,!0)}}class ih{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(rn(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:c}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=c);const rh=window,sh=rh.ShadowRoot&&(void 0===rh.ShadyCSS||rh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ah=Symbol(),oh=new WeakMap;class lh{constructor(t,e,n){if(this._$cssResult$=!0,n!==ah)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(sh&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=oh.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&oh.set(s,t))}return t}toString(){return this.cssText}}const ch=(s,t)=>{sh?s.adoptedStyleSheets=t.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):t.forEach(t=>{const e=document.createElement("style"),n=rh.litNonce;void 0!==n&&e.setAttribute("nonce",n),e.textContent=t.cssText,s.appendChild(e)})},hh=sh?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return(t=>new lh("string"==typeof t?t:t+"",void 0,ah))(e)})(t):t;var uh;const dh=window,ph=dh.trustedTypes,fh=ph?ph.emptyScript:"",mh=dh.reactiveElementPolyfillSupport,gh={toAttribute(t,i){switch(i){case Boolean:t=t?fh:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},Ah=(t,i)=>i!==t&&(i==i||t==t),vh={attribute:!0,type:String,converter:gh,reflect:!1,hasChanged:Ah};class bh extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var i;this.finalize(),(null!==(i=this.h)&&void 0!==i?i:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((i,s)=>{const e=this._$Ep(s,i);void 0!==e&&(this._$Ev.set(e,s),t.push(e))}),t}static createProperty(t,i=vh){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s="symbol"==typeof t?Symbol():"__"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const n=this[t];this[i]=e,this.requestUpdate(t,n,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||vh}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const t=new Set(i.flat(1/0).reverse());for(const i of t)s.unshift(hh(i))}else void 0!==i&&s.push(hh(i));return s}static _$Ep(t,i){const s=i.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach(t=>t(this))}addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,i)=>{this.hasOwnProperty(i)&&(this._$Ei.set(i,this[i]),delete this[i])})}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return ch(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach(t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)})}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach(t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)})}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$EO(t,i,s=vh){var e;const n=this.constructor._$Ep(t,s);if(void 0!==n&&!0===s.reflect){const r=(void 0!==(null===(e=s.converter)||void 0===e?void 0:e.toAttribute)?s.converter:gh).toAttribute(i,s.type);this._$El=t,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$El=null}}_$AK(t,i){var s;const e=this.constructor,n=e._$Ev.get(t);if(void 0!==n&&this._$El!==n){const t=e.getPropertyOptions(n),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(s=t.converter)||void 0===s?void 0:s.fromAttribute)?t.converter:gh;this._$El=n,this[n]=r.fromAttribute(i,t.type),this._$El=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||Ah)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((t,i)=>this[i]=t),this._$Ei=void 0);let i=!1;const s=this._$AL;try{(i=this.shouldUpdate(s))?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach(t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)}),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach(t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var yh;bh.finalized=!0,bh.elementProperties=new Map,bh.elementStyles=[],bh.shadowRootOptions={mode:"open"},null==mh||mh({ReactiveElement:bh}),(null!==(uh=dh.reactiveElementVersions)&&void 0!==uh?uh:dh.reactiveElementVersions=[]).push("1.6.1");const xh=window,_h=xh.trustedTypes,wh=_h?_h.createPolicy("lit-html",{createHTML:t=>t}):void 0,Eh="$lit$",Sh=`lit$${(Math.random()+"").slice(9)}$`,Ch="?"+Sh,Ih=`<${Ch}>`,Mh=document,Bh=()=>Mh.createComment(""),u=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Th=Array.isArray,kh=t=>Th(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]),Rh=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Lh=/-->/g,Dh=/>/g,Ph=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),g=/'/g,Oh=/"/g,Fh=/^(?:script|style|textarea|title)$/i,Nh=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),Uh=Nh(1),Qh=(Nh(2),Symbol.for("lit-noChange")),zh=Symbol.for("lit-nothing"),Gh=new WeakMap,Hh=Mh.createTreeWalker(Mh,129,null,!1),Vh=(t,i)=>{const s=t.length-1,e=[];let n,r=2===i?"<svg>":"",u=Rh;for(let i=0;i<s;i++){const s=t[i];let o,l,c=-1,a=0;for(;a<s.length&&(u.lastIndex=a,null!==(l=u.exec(s)));)a=u.lastIndex,u===Rh?"!--"===l[1]?u=Lh:void 0!==l[1]?u=Dh:void 0!==l[2]?(Fh.test(l[2])&&(n=RegExp("</"+l[2],"g")),u=Ph):void 0!==l[3]&&(u=Ph):u===Ph?">"===l[0]?(u=null!=n?n:Rh,c=-1):void 0===l[1]?c=-2:(c=u.lastIndex-l[2].length,o=l[1],u=void 0===l[3]?Ph:'"'===l[3]?Oh:g):u===Oh||u===g?u=Ph:u===Lh||u===Dh?u=Rh:(u=Ph,n=void 0);const h=u===Ph&&t[i+1].startsWith("/>")?" ":"";r+=u===Rh?s+Ih:c>=0?(e.push(o),s.slice(0,c)+Eh+s.slice(c)+Sh+h):s+Sh+(-2===c?(e.push(void 0),i):h)}const o=r+(t[s]||"<?>")+(2===i?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==wh?wh.createHTML(o):o,e]};class jh{constructor({strings:t,_$litType$:i},e){let n;this.parts=[];let r=0,u=0;const o=t.length-1,l=this.parts,[a,c]=Vh(t,i);if(this.el=jh.createElement(a,e),Hh.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(n=Hh.nextNode())&&l.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const i of n.getAttributeNames())if(i.endsWith(Eh)||i.startsWith(Sh)){const s=c[u++];if(t.push(i),void 0!==s){const t=n.getAttribute(s.toLowerCase()+Eh).split(Sh),i=/([.?@])?(.*)/.exec(s);l.push({type:1,index:r,name:i[2],strings:t,ctor:"."===i[1]?Xh:"?"===i[1]?Jh:"@"===i[1]?Zh:Yh})}else l.push({type:6,index:r})}for(const i of t)n.removeAttribute(i)}if(Fh.test(n.tagName)){const t=n.textContent.split(Sh),i=t.length-1;if(i>0){n.textContent=_h?_h.emptyScript:"";for(let s=0;s<i;s++)n.append(t[s],Bh()),Hh.nextNode(),l.push({type:2,index:++r});n.append(t[i],Bh())}}}else if(8===n.nodeType)if(n.data===Ch)l.push({type:2,index:r});else{let t=-1;for(;-1!==(t=n.data.indexOf(Sh,t+1));)l.push({type:7,index:r}),t+=Sh.length-1}r++}}static createElement(t,i){const s=Mh.createElement("template");return s.innerHTML=t,s}}function Wh(t,i,s=t,e){var n,r,o,l;if(i===Qh)return i;let c=void 0!==e?null===(n=s._$Co)||void 0===n?void 0:n[e]:s._$Cl;const h=u(i)?void 0:i._$litDirective$;return(null==c?void 0:c.constructor)!==h&&(null===(r=null==c?void 0:c._$AO)||void 0===r||r.call(c,!1),void 0===h?c=void 0:(c=new h(t))._$AT(t,s,e),void 0!==e?(null!==(o=(l=s)._$Co)&&void 0!==o?o:l._$Co=[])[e]=c:s._$Cl=c),void 0!==c&&(i=Wh(t,c._$AS(t,i.values),c,e)),i}class $h{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:s},parts:e}=this._$AD,n=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:Mh).importNode(s,!0);Hh.currentNode=n;let r=Hh.nextNode(),o=0,l=0,c=e[0];for(;void 0!==c;){if(o===c.index){let i;2===c.type?i=new qh(r,r.nextSibling,this,t):1===c.type?i=new c.ctor(r,c.name,c.strings,this,t):6===c.type&&(i=new tu(r,this,t)),this._$AV.push(i),c=e[++l]}o!==(null==c?void 0:c.index)&&(r=Hh.nextNode(),o++)}return n}v(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class qh{constructor(t,i,s,e){var n;this.type=2,this._$AH=zh,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cp=null===(n=null==e?void 0:e.isConnected)||void 0===n||n}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=Wh(this,t,i),u(t)?t===zh||null==t||""===t?(this._$AH!==zh&&this._$AR(),this._$AH=zh):t!==this._$AH&&t!==Qh&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):kh(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==zh&&u(this._$AH)?this._$AA.nextSibling.data=t:this.$(Mh.createTextNode(t)),this._$AH=t}g(t){var i;const{values:s,_$litType$:e}=t,n="number"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=jh.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===n)this._$AH.v(s);else{const t=new $h(n,this),i=t.u(this.options);t.v(s),this.$(i),this._$AH=t}}_$AC(t){let i=Gh.get(t.strings);return void 0===i&&Gh.set(t.strings,i=new jh(t)),i}T(t){Th(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const n of t)e===i.length?i.push(s=new qh(this.k(Bh()),this.k(Bh()),this,this.options)):s=i[e],s._$AI(n),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class Yh{constructor(t,i,s,e,n){this.type=1,this._$AH=zh,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=n,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=zh}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const n=this.strings;let r=!1;if(void 0===n)t=Wh(this,t,i,0),(r=!u(t)||t!==this._$AH&&t!==Qh)&&(this._$AH=t);else{const e=t;let o,l;for(t=n[0],o=0;o<n.length-1;o++)(l=Wh(this,e[s+o],i,o))===Qh&&(l=this._$AH[o]),r||(r=!u(l)||l!==this._$AH[o]),l===zh?t=zh:t!==zh&&(t+=(null!=l?l:"")+n[o+1]),this._$AH[o]=l}r&&!e&&this.j(t)}j(t){t===zh?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Xh extends Yh{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===zh?void 0:t}}const Kh=_h?_h.emptyScript:"";class Jh extends Yh{constructor(){super(...arguments),this.type=4}j(t){t&&t!==zh?this.element.setAttribute(this.name,Kh):this.element.removeAttribute(this.name)}}class Zh extends Yh{constructor(t,i,s,e,n){super(t,i,s,e,n),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=Wh(this,t,i,0))&&void 0!==s?s:zh)===Qh)return;const e=this._$AH,n=t===zh&&e!==zh||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,r=t!==zh&&(e===zh||n);n&&this.element.removeEventListener(this.name,this,e),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;"function"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class tu{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){Wh(this,t)}}const eu=xh.litHtmlPolyfillSupport;null==eu||eu(jh,qh),(null!==(yh=xh.litHtmlVersions)&&void 0!==yh?yh:xh.litHtmlVersions=[]).push("2.7.2");const nu=(t,i,s)=>{var e,n;const r=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let o=r._$litPart$;if(void 0===o){const t=null!==(n=null==s?void 0:s.renderBefore)&&void 0!==n?n:null;r._$litPart$=o=new qh(i.insertBefore(Bh(),t),t,void 0,null!=s?s:{})}return o._$AI(t),o};var iu,ru;class su extends bh{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=nu(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return Qh}}su.finalized=!0,su._$litElement$=!0,null===(iu=globalThis.litElementHydrateSupport)||void 0===iu||iu.call(globalThis,{LitElement:su});const au=globalThis.litElementPolyfillSupport;null==au||au({LitElement:su});(null!==(ru=globalThis.litElementVersions)&&void 0!==ru?ru:globalThis.litElementVersions=[]).push("3.3.1");const ou=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,lu=ou&&null!=self.XRSession.prototype.requestHitTestSource,cu=null!=self.ResizeObserver,hu=null!=self.IntersectionObserver,uu=lu,du=((()=>{const t=navigator.userAgent||navigator.vendor||self.opera;let e=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)})(),/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent)),pu=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,fu=(/Safari\//.test(navigator.userAgent),/firefox/i.test(navigator.userAgent)),mu=/OculusBrowser/.test(navigator.userAgent),gu=(pu&&/CriOS\//.test(navigator.userAgent),du&&!fu&&!mu),Au=Boolean(window.webkit&&window.webkit.messageHandlers),vu=(()=>{if(pu){if(Au)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const t=document.createElement("a");return Boolean(t.relList&&t.relList.supports&&t.relList.supports("ar"))}}return!1})(),bu=t=>t&&"null"!==t?xu(t):null,yu=()=>{if(uu)return;const t=[];throw ou||t.push("WebXR Device API"),lu||t.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${t.join(", ")}`)},xu=t=>{return new URL(t,window.location.toString()).toString()},_u=(t,e)=>{let n=null;const r=(...r)=>{null==n&&(t(...r),n=self.setTimeout(()=>n=null,e))};return r.flush=()=>{null!=n&&(self.clearTimeout(n),n=null)},r},wu=(t,e)=>{let n=null;return(...r)=>{null!=n&&self.clearTimeout(n),n=self.setTimeout(()=>{n=null,t(...r)},e)}},Eu=(t,e,n)=>Math.max(e,Math.min(n,t)),Su=(()=>{const t=(()=>{var t;if(null===(t=document.documentElement.getAttribute("itemtype"))||void 0===t?void 0:t.includes("schema.org/SearchResultsPage"))return!0;const e=null!=document.head?Array.from(document.head.querySelectorAll("meta")):[];for(const meta of e)if("viewport"===meta.name)return!0;return!1})();return t||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>t?window.devicePixelRatio:1})(),Cu=(()=>{const t=new RegExp("[?&]model-viewer-debug-mode(&|$)");return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(t)})(),Iu=(t=0)=>new Promise(e=>setTimeout(e,t)),Mu=(t,e,n=null)=>new Promise(r=>{t.addEventListener(e,function o(l){n&&!n(l)||(r(l),t.removeEventListener(e,o))})});var Bu=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const Tu=.5,ku=0,Ru=1,Lu=1,Du=Symbol("currentEnvironmentMap"),Pu=Symbol("currentBackground"),Ou=Symbol("updateEnvironment"),Fu=Symbol("cancelEnvironmentUpdate");const Nu=Uh`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${Uh`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Uh`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${Uh`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,Uu=t=>{nu(Nu,t)},Qu=new WeakMap;function zu(t,e){if(e===Pe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Fe||e===Oe){let n=t.getIndex();if(null===n){const e=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let i=0;i<r.count;i++)e.push(i);t.setIndex(e),n=t.getIndex()}const r=n.count-2,o=[];if(e===Fe)for(let i=1;i<=r;i++)o.push(n.getX(0)),o.push(n.getX(i)),o.push(n.getX(i+1));else for(let i=0;i<r;i++)i%2==0?(o.push(n.getX(i)),o.push(n.getX(i+1)),o.push(n.getX(i+2))):(o.push(n.getX(i+2)),o.push(n.getX(i+1)),o.push(n.getX(i)));o.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=t.clone();return l.setIndex(o),l.clearGroups(),l}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class Gu extends yc{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new qu(t)}),this.register(function(t){return new nd(t)}),this.register(function(t){return new id(t)}),this.register(function(t){return new rd(t)}),this.register(function(t){return new Xu(t)}),this.register(function(t){return new Ku(t)}),this.register(function(t){return new Ju(t)}),this.register(function(t){return new Zu(t)}),this.register(function(t){return new $u(t)}),this.register(function(t){return new ed(t)}),this.register(function(t){return new Yu(t)}),this.register(function(t){return new ju(t)}),this.register(function(t){return new sd(t)}),this.register(function(t){return new ad(t)})}load(t,e,n,r){const o=this;let l;l=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Hc.extractUrlBase(t),this.manager.itemStart(t);const c=function(e){r?r(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},h=new wc(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(data){try{o.parse(data,l,function(n){e(n),o.manager.itemEnd(t)},c)}catch(t){c(t)}},n,c)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(data,path,t,e){let n;const r={},o={},l=new TextDecoder;if("string"==typeof data)n=JSON.parse(data);else if(data instanceof ArrayBuffer){if(l.decode(new Uint8Array(data,0,4))===od){try{r[Vu.KHR_BINARY_GLTF]=new hd(data)}catch(t){return void(e&&e(t))}n=JSON.parse(r[Vu.KHR_BINARY_GLTF].content)}else n=JSON.parse(l.decode(data))}else n=data;if(void 0===n.asset||n.asset.version[0]<2)return void(e&&e(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new Dd(n,{path:path||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let i=0;i<this.pluginCallbacks.length;i++){const t=this.pluginCallbacks[i](c);o[t.name]=t,r[t.name]=!0}if(n.extensionsUsed)for(let i=0;i<n.extensionsUsed.length;++i){const t=n.extensionsUsed[i],e=n.extensionsRequired||[];switch(t){case Vu.KHR_MATERIALS_UNLIT:r[t]=new Wu;break;case Vu.KHR_DRACO_MESH_COMPRESSION:r[t]=new ud(n,this.dracoLoader);break;case Vu.KHR_TEXTURE_TRANSFORM:r[t]=new pd;break;case Vu.KHR_MESH_QUANTIZATION:r[t]=new fd;break;default:e.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}c.setExtensions(r),c.setPlugins(o),c.parse(t,e)}parseAsync(data,path){const t=this;return new Promise(function(e,n){t.parse(data,path,e,n)})}}function Hu(){let t={};return{get:function(e){return t[e]},add:function(e,object){t[e]=object},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Vu={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ju{constructor(t){this.parser=t,this.name=Vu.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const o=e.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let c;const h=new rr(16777215);void 0!==l.color&&h.fromArray(l.color);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":(c=new Qc(h)).target.position.set(0,0,-1),c.add(c.target);break;case"point":(c=new Nc(h)).distance=d;break;case"spot":(c=new Lc(h)).distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Md(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,r=n.json.nodes[t],o=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then(function(t){return n._getNodeRef(e.cache,o,t)})}}class Wu{constructor(){this.name=Vu.KHR_MATERIALS_UNLIT}getMaterialType(){return ar}extendParams(t,e,n){const r=[];t.color=new rr(1,1,1),t.opacity=1;const o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const e=o.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==o.baseColorTexture&&r.push(n.assignTexture(t,"map",o.baseColorTexture,Ue))}return Promise.all(r)}}class $u{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(e.emissiveIntensity=r),Promise.resolve()}}class qu{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];if(void 0!==l.clearcoatFactor&&(e.clearcoat=l.clearcoatFactor),void 0!==l.clearcoatTexture&&o.push(n.assignTexture(e,"clearcoatMap",l.clearcoatTexture)),void 0!==l.clearcoatRoughnessFactor&&(e.clearcoatRoughness=l.clearcoatRoughnessFactor),void 0!==l.clearcoatRoughnessTexture&&o.push(n.assignTexture(e,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),void 0!==l.clearcoatNormalTexture&&(o.push(n.assignTexture(e,"clearcoatNormalMap",l.clearcoatNormalTexture)),void 0!==l.clearcoatNormalTexture.scale)){const t=l.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new pn(t,t)}return Promise.all(o)}}class Yu{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return void 0!==l.iridescenceFactor&&(e.iridescence=l.iridescenceFactor),void 0!==l.iridescenceTexture&&o.push(n.assignTexture(e,"iridescenceMap",l.iridescenceTexture)),void 0!==l.iridescenceIor&&(e.iridescenceIOR=l.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==l.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),void 0!==l.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),void 0!==l.iridescenceThicknessTexture&&o.push(n.assignTexture(e,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class Xu{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];e.sheenColor=new rr(0,0,0),e.sheenRoughness=0,e.sheen=1;const l=r.extensions[this.name];return void 0!==l.sheenColorFactor&&e.sheenColor.fromArray(l.sheenColorFactor),void 0!==l.sheenRoughnessFactor&&(e.sheenRoughness=l.sheenRoughnessFactor),void 0!==l.sheenColorTexture&&o.push(n.assignTexture(e,"sheenColorMap",l.sheenColorTexture,Ue)),void 0!==l.sheenRoughnessTexture&&o.push(n.assignTexture(e,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Ku{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];return void 0!==l.transmissionFactor&&(e.transmission=l.transmissionFactor),void 0!==l.transmissionTexture&&o.push(n.assignTexture(e,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Ju{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];e.thickness=void 0!==l.thicknessFactor?l.thicknessFactor:0,void 0!==l.thicknessTexture&&o.push(n.assignTexture(e,"thicknessMap",l.thicknessTexture)),e.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return e.attenuationColor=new rr(c[0],c[1],c[2]),Promise.all(o)}}class Zu{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return e.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class ed{constructor(t){this.parser=t,this.name=Vu.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?Xl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],l=r.extensions[this.name];e.specularIntensity=void 0!==l.specularFactor?l.specularFactor:1,void 0!==l.specularTexture&&o.push(n.assignTexture(e,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return e.specularColor=new rr(c[0],c[1],c[2]),void 0!==l.specularColorTexture&&o.push(n.assignTexture(e,"specularColorMap",l.specularColorTexture,Ue)),Promise.all(o)}}class nd{constructor(t){this.parser=t,this.name=Vu.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],l=e.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,l)}}class id{constructor(t){this.parser=t,this.name=Vu.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;const l=o.extensions[e],source=r.images[l.source];let c=n.textureLoader;if(source.uri){const t=n.options.manager.getHandler(source.uri);null!==t&&(c=t)}return this.detectSupport().then(function(o){if(o)return n.loadTextureImage(t,l.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const image=new Image;image.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",image.onload=image.onerror=function(){t(1===image.height)}})),this.isSupported}}class rd{constructor(t){this.parser=t,this.name=Vu.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;const l=o.extensions[e],source=r.images[l.source];let c=n.textureLoader;if(source.uri){const t=n.options.manager.getHandler(source.uri);null!==t&&(c=t)}return this.detectSupport().then(function(o){if(o)return n.loadTextureImage(t,l.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const image=new Image;image.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",image.onload=image.onerror=function(){t(1===image.height)}})),this.isSupported}}class sd{constructor(t){this.name=Vu.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],r=this.parser.getDependency("buffer",t.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(e){const n=t.byteOffset||0,r=t.byteLength||0,l=t.count,c=t.byteStride,source=new Uint8Array(e,n,r);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(l,c,source,t.mode,t.filter).then(function(t){return t.buffer}):o.ready.then(function(){const e=new ArrayBuffer(l*c);return o.decodeGltfBuffer(new Uint8Array(e),l,c,source,t.mode,t.filter),e})})}return null}}class ad{constructor(t){this.name=Vu.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const t of r.primitives)if(t.mode!==vd.TRIANGLES&&t.mode!==vd.TRIANGLE_STRIP&&t.mode!==vd.TRIANGLE_FAN&&void 0!==t.mode)return null;const o=n.extensions[this.name].attributes,l=[],c={};for(const t in o)l.push(this.parser.getDependency("accessor",o[t]).then(e=>(c[t]=e,c[t])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(t=>{const e=t.pop(),n=e.isGroup?e.children:[e],r=t[0].count,o=[];for(const t of n){const e=new pi,p=new On,q=new Pn,s=new On(1,1,1),n=new Cl(t.geometry,t.material,r);for(let i=0;i<r;i++)c.TRANSLATION&&p.fromBufferAttribute(c.TRANSLATION,i),c.ROTATION&&q.fromBufferAttribute(c.ROTATION,i),c.SCALE&&s.fromBufferAttribute(c.SCALE,i),n.setMatrixAt(i,e.compose(p,q,s));for(const e in c)"TRANSLATION"!==e&&"ROTATION"!==e&&"SCALE"!==e&&t.geometry.setAttribute(e,c[e]);Ni.prototype.copy.call(n,t),this.parser.assignFinalMaterial(n),o.push(n)}return e.isGroup?(e.clear(),e.add(...o),e):o[0]}))}}const od="glTF",ld=12,cd={JSON:1313821514,BIN:5130562};class hd{constructor(data){this.name=Vu.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(data,0,ld),e=new TextDecoder;if(this.header={magic:e.decode(new Uint8Array(data.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==od)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-ld,r=new DataView(data,ld);let o=0;for(;o<n;){const t=r.getUint32(o,!0);o+=4;const n=r.getUint32(o,!0);if(o+=4,n===cd.JSON){const n=new Uint8Array(data,ld+o,t);this.content=e.decode(n)}else if(n===cd.BIN){const e=ld+o;this.body=data.slice(e,e+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ud{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Vu.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,l=t.extensions[this.name].attributes,c={},h={},d={};for(const t in l){const e=wd[t]||t.toLowerCase();c[e]=l[t]}for(const e in t.attributes){const r=wd[e]||e.toLowerCase();if(void 0!==l[e]){const o=n.accessors[t.attributes[e]],l=bd[o.componentType];d[r]=l.name,h[r]=!0===o.normalized}}return e.getDependency("bufferView",o).then(function(t){return new Promise(function(e){r.decodeDracoFile(t,function(t){for(const e in t.attributes){const n=t.attributes[e],r=h[e];void 0!==r&&(n.normalized=r)}e(t)},c,d)})})}}class pd{constructor(){this.name=Vu.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&e.texCoord!==t.channel||void 0!==e.offset||void 0!==e.rotation||void 0!==e.scale?(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0,t):t}}class fd{constructor(){this.name=Vu.KHR_MESH_QUANTIZATION}}class md extends ic{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let i=0;i!==r;i++)e[i]=n[o+i];return e}interpolate_(t,e,n,r){const o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=2*c,d=3*c,td=r-e,p=(n-e)/td,f=p*p,m=f*p,A=t*d,v=A-d,y=-2*m+3*f,x=m-f,_=1-y,w=x-f+p;for(let i=0;i!==c;i++){const t=l[v+i+c],e=l[v+i+h]*td,n=l[A+i+c],r=l[A+i]*td;o[i]=_*t+w*e+y*n+x*r}return o}}const gd=new Pn;class Ad extends md{interpolate_(t,e,n,r){const o=super.interpolate_(t,e,n,r);return gd.fromArray(o).normalize().toArray(o),o}}const vd={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},bd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yd={9728:yt,9729:wt,9984:xt,9985:Et,9986:_t,9987:St},xd={33071:vt,33648:bt,10497:At},_d={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ed={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Sd={CUBICSPLINE:void 0,LINEAR:Me,STEP:Ie},Cd={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Id(t,object,e){for(const n in e.extensions)void 0===t[n]&&(object.userData.gltfExtensions=object.userData.gltfExtensions||{},object.userData.gltfExtensions[n]=e.extensions[n])}function Md(object,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(object.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Bd(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let i=0,n=e.weights.length;i<n;i++)t.morphTargetInfluences[i]=e.weights[i];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let i=0,e=n.length;i<e;i++)t.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Td(t){const e=t.extensions&&t.extensions[Vu.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+kd(e.attributes):t.indices+":"+kd(t.attributes)+":"+t.mode}function kd(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function Rd(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Ld=new pi;class Dd{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Hu,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,o=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),o=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&o<98?this.textureLoader=new Cc(this.options.manager):this.textureLoader=new Vc(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new wc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(t){return t._markDefs&&t._markDefs()}),Promise.all(this._invokeAll(function(t){return t.beforeRoot&&t.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(e){const l={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};Id(o,l,r),Md(l,r),Promise.all(n._invokeAll(function(t){return t.afterRoot&&t.afterRoot(l)})).then(function(){t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=e.length;n<r;n++){const r=e[n].joints;for(let i=0,e=r.length;i<e;i++)t[r[i]].isBone=!0}for(let e=0,r=t.length;e<r;e++){const r=t[e];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,object){if(t.refs[e]<=1)return object;const n=object.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[i,n]of t.children.entries())r(n,e.children[i])};return r(object,n),n.name+="_instance_"+t.uses[e]++,n}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){const n=t(e[i]);if(n)return n}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(t){return t.loadNode&&t.loadNode(e)});break;case"mesh":r=this._invokeOne(function(t){return t.loadMesh&&t.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(t){return t.loadBufferView&&t.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(t){return t.loadMaterial&&t.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(t){return t.loadTexture&&t.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(t){return t.loadAnimation&&t.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(!(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(t,e)})))throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,defs=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(defs.map(function(e,r){return n.getDependency(t,r)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[Vu.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(t,o){n.load(Hc.resolveURL(e.uri,r.path),t,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(t){const n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const t=_d[r.type],e=bd[r.componentType],n=!0===r.normalized,o=new e(r.count*t);return Promise.resolve(new mr(o,t,n))}const o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(t){const o=t[0],l=_d[r.type],c=bd[r.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,f=r.byteOffset||0,m=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,A=!0===r.normalized;let v,y;if(m&&m!==d){const t=Math.floor(f/m),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+t+":"+r.count;let d=e.cache.get(n);d||(v=new c(o,t*m,r.count*m/h),d=new tl(v,m/h),e.cache.add(n,d)),y=new nl(d,l,f%m/h,A)}else v=null===o?new c(r.count*l):new c(o,f,r.count*l),y=new mr(v,l,A);if(void 0!==r.sparse){const e=_d.SCALAR,n=bd[r.sparse.indices.componentType],h=r.sparse.indices.byteOffset||0,d=r.sparse.values.byteOffset||0,f=new n(t[1],h,r.sparse.count*e),m=new c(t[2],d,r.sparse.count*l);null!==o&&(y=new mr(y.array.slice(),y.itemSize,y.normalized));for(let i=0,t=f.length;i<t;i++){const t=f[i];if(y.setX(t,m[i*l]),l>=2&&y.setY(t,m[i*l+1]),l>=3&&y.setZ(t,m[i*l+2]),l>=4&&y.setW(t,m[i*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(t){const e=this.json,n=this.options,r=e.textures[t].source,o=e.images[r];let l=this.textureLoader;if(o.uri){const t=n.manager.getHandler(o.uri);null!==t&&(l=t)}return this.loadTextureImage(t,r,l)}loadTextureImage(t,e,n){const r=this,o=this.json,l=o.textures[t],c=o.images[e],h=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const d=this.loadImageSource(e,n).then(function(e){e.flipY=!1,e.name=l.name||c.name||"",""===e.name&&"string"==typeof c.uri&&!1===c.uri.startsWith("data:image/")&&(e.name=c.uri);const n=(o.samplers||{})[l.sampler]||{};return e.magFilter=yd[n.magFilter]||wt,e.minFilter=yd[n.minFilter]||St,e.wrapS=xd[n.wrapS]||At,e.wrapT=xd[n.wrapT]||At,r.associations.set(e,{textures:t}),e}).catch(function(){return null});return this.textureCache[h]=d,d}loadImageSource(t,e){const n=this,r=this.json,o=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(t=>t.clone());const l=r.images[t],c=self.URL||self.webkitURL;let h=l.uri||"",d=!1;if(void 0!==l.bufferView)h=n.getDependency("bufferView",l.bufferView).then(function(t){d=!0;const e=new Blob([t],{type:l.mimeType});return h=c.createObjectURL(e)});else if(void 0===l.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const f=Promise.resolve(h).then(function(t){return new Promise(function(n,r){let l=n;!0===e.isImageBitmapLoader&&(l=function(t){const e=new Tn(t);e.needsUpdate=!0,n(e)}),e.load(Hc.resolveURL(t,o.path),l,void 0,r)})}).then(function(t){var e;return!0===d&&c.revokeObjectURL(h),t.userData.mimeType=l.mimeType||((e=l.uri).search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/)?"image/jpeg":e.search(/\.webp($|\?)/i)>0||0===e.search(/^data\:image\/webp/)?"image/webp":"image/png"),t}).catch(function(t){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),t});return this.sourceCache[t]=f,f}assignTexture(t,e,n,r){const o=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((l=l.clone()).channel=n.texCoord),o.extensions[Vu.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[Vu.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=o.associations.get(l);l=o.extensions[Vu.KHR_TEXTURE_TRANSFORM].extendTexture(l,t),o.associations.set(l,e)}}return void 0!==r&&(l.encoding=r),t[e]=l,l})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,o=void 0!==e.attributes.color,l=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Nl,Ji.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new Il,Ji.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,this.cache.add(t,e)),n=e}if(r||o||l){let t="ClonedMaterial:"+n.uuid+":";r&&(t+="derivative-tangents:"),o&&(t+="vertex-colors:"),l&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),o&&(e.vertexColors=!0),l&&(e.flatShading=!0),r&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}t.material=n}getMaterialType(){return Yl}loadMaterial(t){const e=this,n=this.json,r=this.extensions,o=n.materials[t];let l;const c={},h=[];if((o.extensions||{})[Vu.KHR_MATERIALS_UNLIT]){const t=r[Vu.KHR_MATERIALS_UNLIT];l=t.getMaterialType(),h.push(t.extendParams(c,o,e))}else{const n=o.pbrMetallicRoughness||{};if(c.color=new rr(1,1,1),c.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;c.color.fromArray(t),c.opacity=t[3]}void 0!==n.baseColorTexture&&h.push(e.assignTexture(c,"map",n.baseColorTexture,Ue)),c.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,c.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(h.push(e.assignTexture(c,"metalnessMap",n.metallicRoughnessTexture)),h.push(e.assignTexture(c,"roughnessMap",n.metallicRoughnessTexture))),l=this._invokeOne(function(e){return e.getMaterialType&&e.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,c)})))}!0===o.doubleSided&&(c.side=_);const d=o.alphaMode||Cd.OPAQUE;if(d===Cd.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,d===Cd.MASK&&(c.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&l!==ar&&(h.push(e.assignTexture(c,"normalMap",o.normalTexture)),c.normalScale=new pn(1,1),void 0!==o.normalTexture.scale)){const t=o.normalTexture.scale;c.normalScale.set(t,t)}return void 0!==o.occlusionTexture&&l!==ar&&(h.push(e.assignTexture(c,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(c.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&l!==ar&&(c.emissive=(new rr).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&l!==ar&&h.push(e.assignTexture(c,"emissiveMap",o.emissiveTexture,Ue)),Promise.all(h).then(function(){const n=new l(c);return o.name&&(n.name=o.name),Md(n,o),e.associations.set(n,{materials:t}),o.extensions&&Id(r,n,o),n})}createUniqueName(t){const e=Xc.sanitizeNodeName(t||"");let n=e;for(let i=1;this.nodeNamesUsed[n];++i)n=e+"_"+i;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function o(t){return n[Vu.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then(function(n){return Pd(n,t,e)})}const l=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],c=Td(n),h=r[c];if(h)l.push(h.promise);else{let t;t=n.extensions&&n.extensions[Vu.KHR_DRACO_MESH_COMPRESSION]?o(n):Pd(new Ir,n,e),r[c]={primitive:n,promise:t},l.push(t)}}return Promise.all(l)}loadMesh(t){const e=this,n=this.json,r=this.extensions,o=n.meshes[t],l=o.primitives,c=[];for(let i=0,t=l.length;i<t;i++){const t=void 0===l[i].material?(void 0===(h=this.cache).DefaultMaterial&&(h.DefaultMaterial=new Yl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:y})),h.DefaultMaterial):this.getDependency("material",l[i].material);c.push(t)}var h;return c.push(e.loadGeometries(l)),Promise.all(c).then(function(n){const c=n.slice(0,n.length-1),h=n[n.length-1],d=[];for(let i=0,n=h.length;i<n;i++){const n=h[i],f=l[i];let m;const A=c[i];if(f.mode===vd.TRIANGLES||f.mode===vd.TRIANGLE_STRIP||f.mode===vd.TRIANGLE_FAN||void 0===f.mode)!0===(m=!0===o.isSkinnedMesh?new hl(n,A):new jr(n,A)).isSkinnedMesh&&m.normalizeSkinWeights(),f.mode===vd.TRIANGLE_STRIP?m.geometry=zu(m.geometry,Oe):f.mode===vd.TRIANGLE_FAN&&(m.geometry=zu(m.geometry,Fe));else if(f.mode===vd.LINES)m=new Ol(n,A);else if(f.mode===vd.LINE_STRIP)m=new Ll(n,A);else if(f.mode===vd.LINE_LOOP)m=new Fl(n,A);else{if(f.mode!==vd.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);m=new Hl(n,A)}Object.keys(m.geometry.morphAttributes).length>0&&Bd(m,o),m.name=e.createUniqueName(o.name||"mesh_"+t),Md(m,o),f.extensions&&Id(r,m,f),e.assignFinalMaterial(m),d.push(m)}for(let i=0,n=d.length;i<n;i++)e.associations.set(d[i],{meshes:t,primitives:i});if(1===d.length)return d[0];const f=new Vo;e.associations.set(f,{meshes:t});for(let i=0,t=d.length;i<t;i++)f.add(d[i]);return f})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new ns(dn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new Ms(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Md(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let i=0,t=e.joints.length;i<t;i++)n.push(this._loadNodeShallow(e.joints[i]));return void 0!==e.inverseBindMatrices?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(t){const n=t.pop(),r=t,o=[],l=[];for(let i=0,t=r.length;i<t;i++){const t=r[i];if(t){o.push(t);const e=new pi;null!==n&&e.fromArray(n.array,16*i),l.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[i])}return new Al(o,l)})}loadAnimation(t){const e=this.json.animations[t],n=e.name?e.name:"animation_"+t,r=[],o=[],l=[],c=[],h=[];for(let i=0,t=e.channels.length;i<t;i++){const t=e.channels[i],n=e.samplers[t.sampler],d=t.target,f=d.node,input=void 0!==e.parameters?e.parameters[n.input]:n.input,output=void 0!==e.parameters?e.parameters[n.output]:n.output;void 0!==d.node&&(r.push(this.getDependency("node",f)),o.push(this.getDependency("accessor",input)),l.push(this.getDependency("accessor",output)),c.push(n),h.push(d))}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(t){const e=t[0],r=t[1],o=t[2],l=t[3],c=t[4],h=[];for(let i=0,t=e.length;i<t;i++){const t=e[i],n=r[i],d=o[i],f=l[i],m=c[i];if(void 0===t)continue;let A;switch(t.updateMatrix(),Ed[m.path]){case Ed.weights:A=hc;break;case Ed.rotation:A=dc;break;case Ed.position:case Ed.scale:default:A=fc}const v=t.name?t.name:t.uuid,y=void 0!==f.interpolation?Sd[f.interpolation]:Me,x=[];Ed[m.path]===Ed.weights?t.traverse(function(object){object.morphTargetInfluences&&x.push(object.name?object.name:object.uuid)}):x.push(v);let _=d.array;if(d.normalized){const t=Rd(_.constructor),e=new Float32Array(_.length);for(let n=0,r=_.length;n<r;n++)e[n]=_[n]*t;_=e}for(let t=0,e=x.length;t<e;t++){const track=new A(x[t]+"."+Ed[m.path],n.array,_,y);"CUBICSPLINE"===f.interpolation&&(track.createInterpolant=function(t){return new(this instanceof dc?Ad:md)(this.times,this.values,this.getValueSize()/3,t)},track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(track)}}return new mc(n,void 0,h)})}createNodeMesh(t){const e=this.json,n=this,r=e.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(t){const e=n._getNodeRef(n.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse(function(t){if(t.isMesh)for(let i=0,e=r.weights.length;i<e;i++)t.morphTargetInfluences[i]=r.weights[i]}),e})}loadNode(t){const e=this,n=this.json.nodes[t],r=e._loadNodeShallow(t),o=[],l=n.children||[];for(let i=0,t=l.length;i<t;i++)o.push(e.getDependency("node",l[i]));const c=void 0===n.skin?Promise.resolve(null):e.getDependency("skin",n.skin);return Promise.all([r,Promise.all(o),c]).then(function(t){const e=t[0],n=t[1],r=t[2];null!==r&&e.traverse(function(t){t.isSkinnedMesh&&t.bind(r,Ld)});for(let i=0,t=n.length;i<t;i++)e.add(n[i]);return e})}_loadNodeShallow(t){const e=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const o=e.nodes[t],l=o.name?r.createUniqueName(o.name):"",c=[],h=r._invokeOne(function(e){return e.createNodeMesh&&e.createNodeMesh(t)});return h&&c.push(h),void 0!==o.camera&&c.push(r.getDependency("camera",o.camera).then(function(t){return r._getNodeRef(r.cameraCache,o.camera,t)})),r._invokeAll(function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)}).forEach(function(t){c.push(t)}),this.nodeCache[t]=Promise.all(c).then(function(e){let c;if((c=!0===o.isBone?new pl:e.length>1?new Vo:1===e.length?e[0]:new Ni)!==e[0])for(let i=0,t=e.length;i<t;i++)c.add(e[i]);if(o.name&&(c.userData.name=o.name,c.name=l),Md(c,o),o.extensions&&Id(n,c,o),void 0!==o.matrix){const t=new pi;t.fromArray(o.matrix),c.applyMatrix4(t)}else void 0!==o.translation&&c.position.fromArray(o.translation),void 0!==o.rotation&&c.quaternion.fromArray(o.rotation),void 0!==o.scale&&c.scale.fromArray(o.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=t,c}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,o=new Vo;n.name&&(o.name=r.createUniqueName(n.name)),Md(o,n),n.extensions&&Id(e,o,n);const l=n.nodes||[],c=[];for(let i=0,t=l.length;i<t;i++)c.push(r.getDependency("node",l[i]));return Promise.all(c).then(function(t){for(let i=0,e=t.length;i<e;i++)o.add(t[i]);return r.associations=(t=>{const e=new Map;for(const[t,n]of r.associations)(t instanceof Ji||t instanceof Tn)&&e.set(t,n);return t.traverse(t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)}),e})(o),o})}}function Pd(t,e,n){const r=e.attributes,o=[];function l(e,r){return n.getDependency("accessor",e).then(function(e){t.setAttribute(r,e)})}for(const e in r){const n=wd[e]||e.toLowerCase();n in t.attributes||o.push(l(r[e],n))}if(void 0!==e.indices&&!t.index){const r=n.getDependency("accessor",e.indices).then(function(e){t.setIndex(e)});o.push(r)}return Md(t,e),function(t,e,n){const r=e.attributes,o=new Un;if(void 0===r.POSITION)return;{const t=n.json.accessors[r.POSITION],e=t.min,l=t.max;if(void 0===e||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new On(e[0],e[1],e[2]),new On(l[0],l[1],l[2])),t.normalized){const e=Rd(bd[t.componentType]);o.min.multiplyScalar(e),o.max.multiplyScalar(e)}}const l=e.targets;if(void 0!==l){const t=new On,e=new On;for(let i=0,r=l.length;i<r;i++){const r=l[i];if(void 0!==r.POSITION){const o=n.json.accessors[r.POSITION],l=o.min,c=o.max;if(void 0!==l&&void 0!==c){if(e.setX(Math.max(Math.abs(l[0]),Math.abs(c[0]))),e.setY(Math.max(Math.abs(l[1]),Math.abs(c[1]))),e.setZ(Math.max(Math.abs(l[2]),Math.abs(c[2]))),o.normalized){const t=Rd(bd[o.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(t)}t.boundingBox=o;const c=new ii;o.getCenter(c.center),c.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=c}(t,e,n),Promise.all(o).then(function(){return void 0!==e.targets?function(t,e,n){let r=!1,o=!1,l=!1;for(let i=0,t=e.length;i<t;i++){const t=e[i];if(void 0!==t.POSITION&&(r=!0),void 0!==t.NORMAL&&(o=!0),void 0!==t.COLOR_0&&(l=!0),r&&o&&l)break}if(!r&&!o&&!l)return Promise.resolve(t);const c=[],h=[],d=[];for(let i=0,f=e.length;i<f;i++){const f=e[i];if(r){const e=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):t.attributes.position;c.push(e)}if(o){const e=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):t.attributes.normal;h.push(e)}if(l){const e=void 0!==f.COLOR_0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;d.push(e)}}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(d)]).then(function(e){const n=e[0],c=e[1],h=e[2];return r&&(t.morphAttributes.position=n),o&&(t.morphAttributes.normal=c),l&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}(t,e.targets,n):t})}class Od{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const e=this.workerCreator();e.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=e}}_getIdleWorker(){for(let i=0;i<this.pool;i++)if(!(this.workerStatus&1<<i))return i;return-1}_onMessage(t,e){const n=this.workersResolve[t];if(n&&n(e),this.queue.length){const{resolve:e,msg:n,transfer:r}=this.queue.shift();this.workersResolve[t]=e,this.workers[t].postMessage(n,r)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,e){return new Promise(n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(t,e)):this.queue.push({resolve:n,msg:t,transfer:e})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var Fd=n(9),Nd=n(137);const Ud=new WeakMap;let Qd,zd=0;class Gd extends yc{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Od,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(path){return this.transcoderPath=path,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupport(t){return this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},t.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const t=new wc(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const e=t.loadAsync("basis_transcoder.js"),n=new wc(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([e,r]).then(([t,e])=>{const n=Gd.BasisWorker.toString(),body=["/* constants */","let _EngineFormat = "+JSON.stringify(Gd.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Gd.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Gd.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([body])),this.transcoderBinary=e,this.workerPool.setWorkerCreator(()=>{const t=new Worker(this.workerSourceURL),e=this.transcoderBinary.slice(0);return t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:e},[e]),t})}),zd>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),zd++}return this.transcoderPending}load(t,e,n,r){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const o=new wc(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials),o.load(t,t=>{if(Ud.has(t)){return Ud.get(t).promise.then(e).catch(r)}this._createTexture(t).then(t=>e?e(t):null).catch(r)},n,r)}_createTextureFrom(t,e){const{mipmaps:n,width:r,height:o,format:l,type:c,error:h,dfdTransferFn:d,dfdFlags:f}=t;if("error"===c)return Promise.reject(h);const m=e.layerCount>1?new $l(n,r,o,e.layerCount,l,Ct):new Wl(n,r,o,l,Ct);return m.minFilter=1===n.length?wt:St,m.magFilter=wt,m.generateMipmaps=!1,m.needsUpdate=!0,m.encoding=d===Fd.b?Ue:Ne,m.premultiplyAlpha=!!(f&Fd.a),m}async _createTexture(t,e={}){const n=Object(Fd.r)(new Uint8Array(t));if(n.vkFormat!==Fd.q)return async function(t){const{vkFormat:e,pixelWidth:n,pixelHeight:r,pixelDepth:o}=t;if(void 0===Hd[e])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const l=t.levels[0];let c,view;if(t.supercompressionScheme===Fd.c)c=l.levelData;else{if(t.supercompressionScheme!==Fd.d)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");Qd||(Qd=new Promise(async t=>{const e=new Nd.a;await e.init(),t(e)})),c=(await Qd).decode(l.levelData,l.uncompressedByteLength)}view=Vd[e]===Rt?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):Vd[e]===Lt?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c;const h=0===o?new fl(view,n,r):new Dn(view,n,r,o);return h.type=Vd[e],h.format=Hd[e],h.encoding=jd[e]||Ne,h.needsUpdate=!0,Promise.resolve(h)}(n);const r=e,o=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:r},[t])).then(t=>this._createTextureFrom(t.data,n));return Ud.set(t,{promise:o}),o}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),zd--,this}}Gd.BasisFormat={ETC1S:0,UASTC_4x4:1},Gd.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Gd.EngineFormat={RGBAFormat:Nt,RGBA_ASTC_4x4_Format:se,RGBA_BPTC_Format:be,RGBA_ETC2_EAC_Format:re,RGBA_PVRTC_4BPPV1_Format:te,RGBA_S3TC_DXT5_Format:Kt,RGB_ETC1_Format:ne,RGB_ETC2_Format:ie,RGB_PVRTC_4BPPV1_Format:Jt,RGB_S3TC_DXT1_Format:qt},Gd.BasisWorker=function(){let t,e,n;const r=_EngineFormat,o=_TranscoderFormat,l=_BasisFormat;self.addEventListener("message",function(c){const A=c.data;switch(A.type){case"init":t=A.config,v=A.transcoderBinary,e=new Promise(t=>{n={wasmBinary:v,onRuntimeInitialized:t},BASIS(n)}).then(()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":e.then(()=>{try{const{width:e,height:c,hasAlpha:v,mipmaps:y,format:x,dfdTransferFn:_,dfdFlags:w}=function(e){const c=new n.KTX2File(new Uint8Array(e));function A(){c.close(),c.delete()}if(!c.isValid())throw A(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const v=c.isUASTC()?l.UASTC_4x4:l.ETC1S,y=c.getWidth(),x=c.getHeight(),_=c.getLayers()||1,w=c.getLevels(),E=c.getHasAlpha(),S=c.getDFDTransferFunc(),C=c.getDFDFlags(),{transcoderFormat:I,engineFormat:M}=function(e,n,c,m){let A,v;const y=e===l.ETC1S?h:d;for(let i=0;i<y.length;i++){const r=y[i];if(t[r.if]&&(r.basisFormat.includes(e)&&!(m&&r.transcoderFormat.length<2)&&(!r.needsPowerOfTwo||f(n)&&f(c))))return A=r.transcoderFormat[m?1:0],v=r.engineFormat[m?1:0],{transcoderFormat:A,engineFormat:v}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),A=o.RGBA32,v=r.RGBAFormat,{transcoderFormat:A,engineFormat:v}}(v,y,x,E);if(!y||!x||!w)throw A(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!c.startTranscoding())throw A(),new Error("THREE.KTX2Loader: .startTranscoding failed");const B=[];for(let t=0;t<w;t++){const e=[];let n,r;for(let o=0;o<_;o++){const l=c.getImageLevelInfo(t,o,0);n=l.origWidth<4?l.origWidth:l.width,r=l.origHeight<4?l.origHeight:l.height;const h=new Uint8Array(c.getImageTranscodedSizeInBytes(t,o,0,I)),d=c.transcodeImage(h,t,o,0,I,0,-1,-1);if(!d)throw A(),new Error("THREE.KTX2Loader: .transcodeImage failed.");e.push(h)}B.push({data:m(e),width:n,height:r})}return A(),{width:y,height:x,hasAlpha:E,mipmaps:B,format:M,dfdTransferFn:S,dfdFlags:C}}(A.buffer),E=[];for(let i=0;i<y.length;++i)E.push(y[i].data.buffer);self.postMessage({type:"transcode",id:A.id,width:e,height:c,hasAlpha:v,mipmaps:y,format:x,dfdTransferFn:_,dfdFlags:w},E)}catch(t){console.error(t),self.postMessage({type:"error",id:A.id,error:t.message})}})}var v});const c=[{if:"astcSupported",basisFormat:[l.UASTC_4x4],transcoderFormat:[o.ASTC_4x4,o.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[l.ETC1S,l.UASTC_4x4],transcoderFormat:[o.BC7_M5,o.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[l.ETC1S,l.UASTC_4x4],transcoderFormat:[o.BC1,o.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[l.ETC1S,l.UASTC_4x4],transcoderFormat:[o.ETC1,o.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[l.ETC1S,l.UASTC_4x4],transcoderFormat:[o.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[l.ETC1S,l.UASTC_4x4],transcoderFormat:[o.PVRTC1_4_RGB,o.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],h=c.sort(function(a,b){return a.priorityETC1S-b.priorityETC1S}),d=c.sort(function(a,b){return a.priorityUASTC-b.priorityUASTC});function f(t){return t<=2||0==(t&t-1)&&0!==t}function m(t){let e=0;for(const n of t)e+=n.byteLength;const n=new Uint8Array(e);let r=0;for(const e of t)n.set(e,r),r+=e.byteLength;return n}};const Hd={[Fd.h]:Nt,[Fd.e]:Nt,[Fd.l]:Nt,[Fd.k]:Nt,[Fd.i]:jt,[Fd.f]:jt,[Fd.n]:jt,[Fd.m]:jt,[Fd.j]:Ht,[Fd.g]:Ht,[Fd.o]:Ht,[Fd.p]:Ht},Vd={[Fd.h]:Rt,[Fd.e]:Lt,[Fd.l]:Ct,[Fd.k]:Ct,[Fd.i]:Rt,[Fd.f]:Lt,[Fd.n]:Ct,[Fd.m]:Ct,[Fd.j]:Rt,[Fd.g]:Lt,[Fd.o]:Ct,[Fd.p]:Ct},jd={[Fd.k]:Ue,[Fd.m]:Ue,[Fd.o]:Ue};var Wd,$d;const qd=Symbol("retainerCount"),Yd=Symbol("recentlyUsed"),Xd=Symbol("evict"),Kd=Symbol("evictionThreshold"),Jd=Symbol("cache");const Zd=t=>{const e=[],n=new Set;for(const r of t){let t=r,o=0;for(;n.has(t);)t=r+"."+ ++o;n.add(t),e.push(t)}return e},tp=t=>{const table=new Map;for(const e of t.mappings)for(const t of e.variants)table.set(t,{material:null,gltfMaterialIndex:e.material});return table};class ep{constructor(t){this.parser=t,this.name="KHR_materials_variants"}afterRoot(t){const e=this.parser,n=e.json;if(void 0===n.extensions||void 0===n.extensions[this.name])return null;const r=n.extensions[this.name].variants||[],o=Zd(r.map(t=>t.name));for(const r of t.scenes)r.traverse(object=>{const t=object;if(!t.isMesh)return;const r=e.associations.get(t);if(null==r||null==r.meshes||null==r.primitives)return;const o=n.meshes[r.meshes].primitives[r.primitives].extensions;o&&o[this.name]&&(t.userData.variantMaterials=tp(o[this.name]))});return t.userData.variants=o,Promise.resolve()}}var np,ip;Tn.DEFAULT_ANISOTROPY=4;const sp=(t,e,n=(()=>{}))=>{const r=t=>{const e=t.loaded/t.total;n(Math.max(0,Math.min(1,isFinite(e)?e:1)))};return new Promise((n,o)=>{e.load(t,n,r,o)})},ap=t=>new Promise((e,n)=>{const script=document.createElement("script");document.body.appendChild(script),script.onload=e,script.onerror=n,script.async=!0,script.src=t}),op=new Map,lp=new Map;let cp;const hp=new class extends yc{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(path){return this.decoderPath=path,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,r){const o=new wc(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,t=>{this.parse(t,e,r)},n,r)}parse(t,e,n){this.decodeDracoFile(t,e,null,null,Ve).catch(n)}decodeDracoFile(t,e,n,r,o=je){const l={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:o};return this.decodeGeometry(t,l).then(e)}decodeGeometry(t,e){const n=JSON.stringify(e);if(Qu.has(t)){const e=Qu.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,l=t.byteLength,c=this._getWorker(o,l).then(n=>(r=n,new Promise((n,l)=>{r._callbacks[o]={resolve:n,reject:l},r.postMessage({type:"decode",id:o,taskConfig:e,buffer:t},[t])}))).then(t=>this._createGeometry(t.geometry));return c.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),Qu.set(t,{key:n,promise:c}),c}_createGeometry(t){const e=new Ir;t.index&&e.setIndex(new mr(t.index.array,1));for(let i=0;i<t.attributes.length;i++){const n=t.attributes[i],r=n.name,o=n.array,l=n.itemSize,c=new mr(o,l);"color"===r&&this._assignVertexColorSpace(c,n.vertexColorSpace),e.setAttribute(r,c)}return e}_assignVertexColorSpace(t,e){if(e!==Ve)return;const n=new rr;for(let i=0,e=t.count;i<e;i++)n.fromBufferAttribute(t,i).convertSRGBToLinear(),t.setXYZ(i,n.r,n.g,n.b)}_loadLibrary(t,e){const n=new wc(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((e,r)=>{n.load(t,e,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=function(){let t,e;function n(t,e,n,o){const l=o.attributeIDs,c=o.attributeTypes;let h,d;const f=e.GetEncodedGeometryType(n);if(f===t.TRIANGULAR_MESH)h=new t.Mesh,d=e.DecodeArrayToMesh(n,n.byteLength,h);else{if(f!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");h=new t.PointCloud,d=e.DecodeArrayToPointCloud(n,n.byteLength,h)}if(!d.ok()||0===h.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const m={index:null,attributes:[]};for(const n in l){const d=self[c[n]];let f,A;if(o.useUniqueIDs)A=l[n],f=e.GetAttributeByUniqueId(h,A);else{if(-1===(A=e.GetAttributeId(h,t[l[n]])))continue;f=e.GetAttribute(h,A)}const v=r(t,e,h,n,d,f);"color"===n&&(v.vertexColorSpace=o.vertexColorSpace),m.attributes.push(v)}return f===t.TRIANGULAR_MESH&&(m.index=function(t,e,n){const r=3*n.num_faces(),o=4*r,l=t._malloc(o);e.GetTrianglesUInt32Array(n,o,l);const c=new Uint32Array(t.HEAPF32.buffer,l,r).slice();return t._free(l),{array:c,itemSize:1}}(t,e,h)),t.destroy(h),m}function r(t,e,n,r,o,l){const c=l.num_components(),h=n.num_points(),d=h*c,f=d*o.BYTES_PER_ELEMENT,m=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,o),A=t._malloc(f);e.GetAttributeDataArrayForAllPoints(n,l,m,f,A);const v=new o(t.HEAPF32.buffer,A,d).slice();return t._free(A),{name:r,array:v,itemSize:c}}onmessage=function(r){const o=r.data;switch(o.type){case"init":t=o.decoderConfig,e=new Promise(function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)});break;case"decode":const r=o.buffer,l=o.taskConfig;e.then(t=>{const e=t.draco,c=new e.Decoder;try{const t=n(e,c,new Int8Array(r),l),h=t.attributes.map(t=>t.array.buffer);t.index&&h.push(t.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:t},h)}catch(t){console.error(t),self.postMessage({type:"error",id:o.id,error:t.message})}finally{e.destroy(c)}})}}}.toString(),body=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([body]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort(function(a,b){return a._taskLoad>b._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let i=0;i<this.workerPool.length;++i)this.workerPool[i].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}};let up;const dp=new Gd;let pp,fp;const mp=Symbol("loader"),gp=Symbol("evictionPolicy"),Ap=Symbol("GLTFInstance");class vp extends Ke{constructor(t){super(),this[ip]=(new Gu).register(t=>new ep(t)),this[Ap]=t,this[mp].setDRACOLoader(hp),this[mp].setKTX2Loader(dp)}static setDRACODecoderLocation(t){cp=t,hp.setDecoderPath(t)}static getDRACODecoderLocation(){return cp}static setKTX2TranscoderLocation(t){up=t,dp.setTranscoderPath(t)}static getKTX2TranscoderLocation(){return up}static setMeshoptDecoderLocation(t){pp!==t&&(pp=t,fp=ap(t).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return pp}static initializeKTX2Loader(t){dp.detectSupport(t)}static get cache(){return op}static clearCache(){op.forEach((t,e)=>{this.delete(e)}),this[gp].reset()}static has(t){return op.has(t)}static async delete(t){if(!this.has(t))return;const e=op.get(t);lp.delete(t),op.delete(t),(await e).dispose()}static hasFinishedLoading(t){return!!lp.get(t)}get[(np=gp,ip=mp,gp)](){return this.constructor[gp]}async preload(t,element,e=(()=>{})){if(this[mp].setWithCredentials(vp.withCredentials),this.dispatchEvent({type:"preload",element:element,src:t}),!op.has(t)){null!=fp&&this[mp].setMeshoptDecoder(await fp);const n=sp(t,this[mp],progress=>{e(.8*progress)}),r=this[Ap],o=n.then(t=>r.prepare(t)).then(t=>(e(.9),new r(t))).catch(t=>(console.error(t),new r));op.set(t,o)}await op.get(t),lp.set(t,!0),e&&e(1)}async load(t,element,e=(()=>{})){await this.preload(t,element,e);const n=await op.get(t),r=await n.clone();return this[gp].retain(t),r.dispose=()=>{this[gp].release(t)},r}}vp[np]=new class{constructor(t,e=5){this[Wd]=new Map,this[$d]=[],this[Jd]=t,this[Kd]=e}set evictionThreshold(t){this[Kd]=t,this[Xd]()}get evictionThreshold(){return this[Kd]}get cache(){return this[Jd]}retainerCount(t){return this[qd].get(t)||0}reset(){this[qd].clear(),this[Yd]=[]}retain(t){this[qd].has(t)||this[qd].set(t,0),this[qd].set(t,this[qd].get(t)+1);const e=this[Yd].indexOf(t);-1!==e&&this[Yd].splice(e,1),this[Yd].unshift(t),this[Xd]()}release(t){this[qd].has(t)&&this[qd].set(t,Math.max(this[qd].get(t)-1,0)),this[Xd]()}[(Wd=qd,$d=Yd,Xd)](){if(!(this[Yd].length<this[Kd]))for(let i=this[Yd].length-1;i>=this[Kd];--i){const t=this[Yd][i];0===this[qd].get(t)&&(this[Jd].delete(t),this[Yd].splice(i,1))}}}(vp);class bp extends Ni{constructor(element=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=element,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new pn(.5,.5),this.addEventListener("removed",function(){this.traverse(function(object){object.element instanceof Element&&null!==object.element.parentNode&&object.element.parentNode.removeChild(object.element)})})}copy(source,t){return super.copy(source,t),this.element=source.element.cloneNode(!0),this.center=source.center,this}}const yp=new On,xp=new pi,_p=new pi,wp=new On,Ep=new On;class Sp{constructor(t={}){const e=this;let n,r,o,l;const c={objects:new WeakMap},h=void 0!==t.element?t.element:document.createElement("div");function d(t,e){return wp.setFromMatrixPosition(t.matrixWorld),Ep.setFromMatrixPosition(e.matrixWorld),wp.distanceToSquared(Ep)}h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:n,height:r}},this.render=function(t,n){!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===n.parent&&!0===n.matrixWorldAutoUpdate&&n.updateMatrixWorld(),xp.copy(n.matrixWorldInverse),_p.multiplyMatrices(n.projectionMatrix,xp),function t(object,n,r){if(object.isCSS2DObject){yp.setFromMatrixPosition(object.matrixWorld),yp.applyMatrix4(_p);const t=!0===object.visible&&yp.z>=-1&&yp.z<=1&&!0===object.layers.test(r.layers);if(object.element.style.display=!0===t?"":"none",!0===t){object.onBeforeRender(e,n,r);const element=object.element;element.style.transform="translate("+-100*object.center.x+"%,"+-100*object.center.y+"%)translate("+(yp.x*o+o)+"px,"+(-yp.y*l+l)+"px)",element.parentNode!==h&&h.appendChild(element),object.onAfterRender(e,n,r)}const f={distanceToCameraSquared:d(r,object)};c.objects.set(object,f)}for(let i=0,e=object.children.length;i<e;i++)t(object.children[i],n,r)}(t,t,n),function(t){const e=function(t){const e=[];return t.traverse(function(object){object.isCSS2DObject&&e.push(object)}),e}(t).sort(function(a,b){if(a.renderOrder!==b.renderOrder)return b.renderOrder-a.renderOrder;const t=c.objects.get(a).distanceToCameraSquared,e=c.objects.get(b).distanceToCameraSquared;return t-e}),n=e.length;for(let i=0,t=e.length;i<t;i++)e[i].element.style.zIndex=n-i}(t)},this.setSize=function(t,e){o=(n=t)/2,l=(r=e)/2,h.style.width=t+"px",h.style.height=e+"px"}}}function Cp(object,t,e){let n=e;const r=new On;return object.updateWorldMatrix(!0,!0),object.traverseVisible(e=>{const{geometry:o}=e;if(void 0!==o){const{position:l}=o.attributes;if(void 0!==l)for(let i=0,o=l.count;i<o;i++)e.isMesh?e.getVertexPosition(i,r):r.fromBufferAttribute(l,i),e.isSkinnedMesh||r.applyMatrix4(e.matrixWorld),n=t(n,r)}}),n}const Ip={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Mp{constructor(){this.pluginCallbacks=[],this.register(function(t){return new Wp(t)}),this.register(function(t){return new $p(t)}),this.register(function(t){return new Xp(t)}),this.register(function(t){return new Kp(t)}),this.register(function(t){return new Jp(t)}),this.register(function(t){return new Zp(t)}),this.register(function(t){return new qp(t)}),this.register(function(t){return new Yp(t)}),this.register(function(t){return new tf(t)}),this.register(function(t){return new ef(t)})}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(input,t,e,n){const r=new jp,o=[];for(let i=0,t=this.pluginCallbacks.length;i<t;i++)o.push(this.pluginCallbacks[i](r));r.setPlugins(o),r.write(input,t,n).catch(e)}parseAsync(input,t){const e=this;return new Promise(function(n,r){e.parse(input,n,r,t)})}}const Bp={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Tp="KHR_mesh_quantization",kp={};kp[yt]=Bp.NEAREST,kp[xt]=Bp.NEAREST_MIPMAP_NEAREST,kp[_t]=Bp.NEAREST_MIPMAP_LINEAR,kp[wt]=Bp.LINEAR,kp[Et]=Bp.LINEAR_MIPMAP_NEAREST,kp[St]=Bp.LINEAR_MIPMAP_LINEAR,kp[vt]=Bp.CLAMP_TO_EDGE,kp[At]=Bp.REPEAT,kp[bt]=Bp.MIRRORED_REPEAT;const Rp={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Lp=new rr,Dp=12,Pp=1179937895,Op=2,Fp=8,Np=1313821514,Up=5130562;function Qp(t,e){return t.length===e.length&&t.every(function(element,t){return element===e[t]})}function zp(t){return 4*Math.ceil(t/4)}function Gp(t,e=0){const n=zp(t.byteLength);if(n!==t.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(t)),0!==e)for(let i=t.byteLength;i<n;i++)r[i]=e;return r.buffer}return t}function Hp(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function Vp(canvas,t){if(void 0!==canvas.toBlob)return new Promise(e=>canvas.toBlob(e,t));let e;return"image/jpeg"===t?e=.92:"image/webp"===t&&(e=.8),canvas.convertToBlob({type:t,quality:e})}class jp{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(input,t,e={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},e),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(input),await Promise.all(this.pending);const n=this.buffers,r=this.json;e=this.options;const o=this.extensionsUsed,l=this.extensionsRequired,c=new Blob(n,{type:"application/octet-stream"}),h=Object.keys(o),d=Object.keys(l);if(h.length>0&&(r.extensionsUsed=h),d.length>0&&(r.extensionsRequired=d),r.buffers&&r.buffers.length>0&&(r.buffers[0].byteLength=c.size),!0===e.binary){const e=new FileReader;e.readAsArrayBuffer(c),e.onloadend=function(){const n=Gp(e.result),o=new DataView(new ArrayBuffer(Fp));o.setUint32(0,n.byteLength,!0),o.setUint32(4,Up,!0);const l=Gp((text=JSON.stringify(r),(new TextEncoder).encode(text).buffer),32);var text;const c=new DataView(new ArrayBuffer(Fp));c.setUint32(0,l.byteLength,!0),c.setUint32(4,Np,!0);const header=new ArrayBuffer(Dp),h=new DataView(header);h.setUint32(0,Pp,!0),h.setUint32(4,Op,!0);const d=Dp+c.byteLength+l.byteLength+o.byteLength+n.byteLength;h.setUint32(8,d,!0);const f=new Blob([header,c,l,o,n],{type:"application/octet-stream"}),m=new FileReader;m.readAsArrayBuffer(f),m.onloadend=function(){t(m.result)}}}else if(r.buffers&&r.buffers.length>0){const e=new FileReader;e.readAsDataURL(c),e.onloadend=function(){const n=e.result;r.buffers[0].uri=n,t(r)}}else t(r)}serializeUserData(object,t){if(0===Object.keys(object.userData).length)return;const e=this.options,n=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(object.userData));if(e.includeCustomExtensions&&r.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in r.gltfExtensions)t.extensions[e]=r.gltfExtensions[e],n[e]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+object.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(t,e=!1){if(!1===this.uids.has(t)){const e=new Map;e.set(!0,this.uid++),e.set(!1,this.uid++),this.uids.set(t,e)}return this.uids.get(t).get(e)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;const e=new On;for(let i=0,n=t.count;i<n;i++)if(Math.abs(e.fromBufferAttribute(t,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){const e=this.cache;if(e.attributesNormalized.has(t))return e.attributesNormalized.get(t);const n=t.clone(),r=new On;for(let i=0,t=n.count;i<t;i++)r.fromBufferAttribute(n,i),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(i,r.x,r.y,r.z);return e.attributesNormalized.set(t,n),n}applyTextureTransform(t,e){let n=!1;const r={};0===e.offset.x&&0===e.offset.y||(r.offset=e.offset.toArray(),n=!0),0!==e.rotation&&(r.rotation=e.rotation,n=!0),1===e.repeat.x&&1===e.repeat.y||(r.scale=e.repeat.toArray(),n=!0),n&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(t,e){if(t===e)return t;function n(map){return map.encoding===Ue?function(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}:function(t){return t}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const r=t?t.image:null,o=e?e.image:null,l=Math.max(r?r.width:0,o?o.width:0),c=Math.max(r?r.height:0,o?o.height:0),canvas=Hp();canvas.width=l,canvas.height=c;const h=canvas.getContext("2d");h.fillStyle="#00ffff",h.fillRect(0,0,l,c);const d=h.getImageData(0,0,l,c);if(r){h.drawImage(r,0,0,l,c);const e=n(t),data=h.getImageData(0,0,l,c).data;for(let i=2;i<data.length;i+=4)d.data[i]=256*e(data[i]/256)}if(o){h.drawImage(o,0,0,l,c);const t=n(e),data=h.getImageData(0,0,l,c).data;for(let i=1;i<data.length;i+=4)d.data[i]=256*t(data[i]/256)}h.putImageData(d,0,0);const f=(t||e).clone();return f.source=new In(canvas),f.encoding=Ne,f}processBuffer(t){const e=this.json,n=this.buffers;return e.buffers||(e.buffers=[{byteLength:0}]),n.push(t),0}processBufferView(t,e,n,r,o){const l=this.json;let c;switch(l.bufferViews||(l.bufferViews=[]),e){case Bp.BYTE:case Bp.UNSIGNED_BYTE:c=1;break;case Bp.SHORT:case Bp.UNSIGNED_SHORT:c=2;break;default:c=4}const h=zp(r*t.itemSize*c),d=new DataView(new ArrayBuffer(h));let f=0;for(let i=n;i<n+r;i++)for(let a=0;a<t.itemSize;a++){let n;t.itemSize>4?n=t.array[i*t.itemSize+a]:(0===a?n=t.getX(i):1===a?n=t.getY(i):2===a?n=t.getZ(i):3===a&&(n=t.getW(i)),!0===t.normalized&&(n=dn.normalize(n,t.array))),e===Bp.FLOAT?d.setFloat32(f,n,!0):e===Bp.INT?d.setInt32(f,n,!0):e===Bp.UNSIGNED_INT?d.setUint32(f,n,!0):e===Bp.SHORT?d.setInt16(f,n,!0):e===Bp.UNSIGNED_SHORT?d.setUint16(f,n,!0):e===Bp.BYTE?d.setInt8(f,n):e===Bp.UNSIGNED_BYTE&&d.setUint8(f,n),f+=c}const m={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:h};return void 0!==o&&(m.target=o),o===Bp.ARRAY_BUFFER&&(m.byteStride=t.itemSize*c),this.byteOffset+=h,l.bufferViews.push(m),{id:l.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const e=this,n=e.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(r){const o=new FileReader;o.readAsArrayBuffer(t),o.onloadend=function(){const t=Gp(o.result),l={buffer:e.processBuffer(t),byteOffset:e.byteOffset,byteLength:t.byteLength};e.byteOffset+=t.byteLength,r(n.bufferViews.push(l)-1)}})}processAccessor(t,e,n,r){const o=this.json;let l;if(t.array.constructor===Float32Array)l=Bp.FLOAT;else if(t.array.constructor===Int32Array)l=Bp.INT;else if(t.array.constructor===Uint32Array)l=Bp.UNSIGNED_INT;else if(t.array.constructor===Int16Array)l=Bp.SHORT;else if(t.array.constructor===Uint16Array)l=Bp.UNSIGNED_SHORT;else if(t.array.constructor===Int8Array)l=Bp.BYTE;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");l=Bp.UNSIGNED_BYTE}if(void 0===n&&(n=0),void 0===r&&(r=t.count),0===r)return null;const c=function(t,e,n){const output={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+n;i++)for(let a=0;a<t.itemSize;a++){let e;t.itemSize>4?e=t.array[i*t.itemSize+a]:(0===a?e=t.getX(i):1===a?e=t.getY(i):2===a?e=t.getZ(i):3===a&&(e=t.getW(i)),!0===t.normalized&&(e=dn.normalize(e,t.array))),output.min[a]=Math.min(output.min[a],e),output.max[a]=Math.max(output.max[a],e)}return output}(t,n,r);let h;void 0!==e&&(h=t===e.index?Bp.ELEMENT_ARRAY_BUFFER:Bp.ARRAY_BUFFER);const d=this.processBufferView(t,l,n,r,h),f={bufferView:d.id,byteOffset:d.byteOffset,componentType:l,count:r,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(f.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(f)-1}processImage(image,t,e,n="image/png"){if(null!==image){const r=this,o=r.cache,l=r.json,c=r.options,h=r.pending;o.images.has(image)||o.images.set(image,{});const d=o.images.get(image),f=n+":flipY/"+e.toString();if(void 0!==d[f])return d[f];l.images||(l.images=[]);const m={mimeType:n},canvas=Hp();canvas.width=Math.min(image.width,c.maxTextureSize),canvas.height=Math.min(image.height,c.maxTextureSize);const A=canvas.getContext("2d");if(!0===e&&(A.translate(0,canvas.height),A.scale(1,-1)),void 0!==image.data){t!==Nt&&console.error("GLTFExporter: Only RGBAFormat is supported."),(image.width>c.maxTextureSize||image.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",image);const data=new Uint8ClampedArray(image.height*image.width*4);for(let i=0;i<data.length;i+=4)data[i+0]=image.data[i+0],data[i+1]=image.data[i+1],data[i+2]=image.data[i+2],data[i+3]=image.data[i+3];A.putImageData(new ImageData(data,image.width,image.height),0,0)}else A.drawImage(image,0,0,canvas.width,canvas.height);!0===c.binary?h.push(Vp(canvas,n).then(t=>r.processBufferViewImage(t)).then(t=>{m.bufferView=t})):void 0!==canvas.toDataURL?m.uri=canvas.toDataURL(n):h.push(Vp(canvas,n).then(t=>(new FileReader).readAsDataURL(t)).then(t=>{m.uri=t}));const v=l.images.push(m)-1;return d[f]=v,v}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(map){const t=this.json;t.samplers||(t.samplers=[]);const e={magFilter:kp[map.magFilter],minFilter:kp[map.minFilter],wrapS:kp[map.wrapS],wrapT:kp[map.wrapT]};return t.samplers.push(e)-1}processTexture(map){const t=this.cache,e=this.json;if(t.textures.has(map))return t.textures.get(map);e.textures||(e.textures=[]);let n=map.userData.mimeType;"image/webp"===n&&(n="image/png");const r={sampler:this.processSampler(map),source:this.processImage(map.image,map.format,map.flipY,n)};map.name&&(r.name=map.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(map,r)});const o=e.textures.push(r)-1;return t.textures.set(map,o),o}processMaterial(t){const e=this.cache,n=this.json;if(e.materials.has(t))return e.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const r={pbrMetallicRoughness:{}};!0!==t.isMeshStandardMaterial&&!0!==t.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const o=t.color.toArray().concat([t.opacity]);if(Qp(o,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=o),t.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=t.metalness,r.pbrMetallicRoughness.roughnessFactor=t.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),t.metalnessMap||t.roughnessMap){const e=this.buildMetalRoughTexture(t.metalnessMap,t.roughnessMap),n={index:this.processTexture(e)};this.applyTextureTransform(n,e),r.pbrMetallicRoughness.metallicRoughnessTexture=n}if(t.map){const e={index:this.processTexture(t.map)};this.applyTextureTransform(e,t.map),r.pbrMetallicRoughness.baseColorTexture=e}if(t.emissive){const e=t.emissive;if(Math.max(e.r,e.g,e.b)>0&&(r.emissiveFactor=t.emissive.toArray()),t.emissiveMap){const e={index:this.processTexture(t.emissiveMap)};this.applyTextureTransform(e,t.emissiveMap),r.emissiveTexture=e}}if(t.normalMap){const e={index:this.processTexture(t.normalMap)};t.normalScale&&1!==t.normalScale.x&&(e.scale=t.normalScale.x),this.applyTextureTransform(e,t.normalMap),r.normalTexture=e}if(t.aoMap){const e={index:this.processTexture(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(e.strength=t.aoMapIntensity),this.applyTextureTransform(e,t.aoMap),r.occlusionTexture=e}t.transparent?r.alphaMode="BLEND":t.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=t.alphaTest),t.side===_&&(r.doubleSided=!0),""!==t.name&&(r.name=t.name),this.serializeUserData(t,r),this._invokeAll(function(e){e.writeMaterial&&e.writeMaterial(t,r)});const l=n.materials.push(r)-1;return e.materials.set(t,l),l}processMesh(t){const e=this.cache,n=this.json,r=[t.geometry.uuid];if(Array.isArray(t.material))for(let i=0,e=t.material.length;i<e;i++)r.push(t.material[i].uuid);else r.push(t.material.uuid);const o=r.join(":");if(e.meshes.has(o))return e.meshes.get(o);const l=t.geometry;let c;c=t.isLineSegments?Bp.LINES:t.isLineLoop?Bp.LINE_LOOP:t.isLine?Bp.LINE_STRIP:t.isPoints?Bp.POINTS:t.material.wireframe?Bp.LINES:Bp.TRIANGLES;const h={},d={},f=[],m=[],A={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},v=l.getAttribute("normal");void 0===v||this.isNormalizedNormalAttribute(v)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),l.setAttribute("normal",this.createNormalizedNormalAttribute(v)));let y=null;for(let t in l.attributes){if("morph"===t.slice(0,5))continue;const n=l.attributes[t];if(t=A[t]||t.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(t)||(t="_"+t),e.attributes.has(this.getUID(n))){d[t]=e.attributes.get(this.getUID(n));continue}y=null;const r=n.array;"JOINTS_0"!==t||r instanceof Uint16Array||r instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new mr(new Uint16Array(r),n.itemSize,n.normalized));const o=this.processAccessor(y||n,l);null!==o&&(t.startsWith("_")||this.detectMeshQuantization(t,n),d[t]=o,e.attributes.set(this.getUID(n),o))}if(void 0!==v&&l.setAttribute("normal",v),0===Object.keys(d).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){const n=[],r=[],o={};if(void 0!==t.morphTargetDictionary)for(const e in t.morphTargetDictionary)o[t.morphTargetDictionary[e]]=e;for(let i=0;i<t.morphTargetInfluences.length;++i){const c={};let h=!1;for(const t in l.morphAttributes){if("position"!==t&&"normal"!==t){h||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),h=!0);continue}const n=l.morphAttributes[t][i],r=t.toUpperCase(),o=l.attributes[t];if(e.attributes.has(this.getUID(n,!0))){c[r]=e.attributes.get(this.getUID(n,!0));continue}const d=n.clone();if(!l.morphTargetsRelative)for(let t=0,e=n.count;t<e;t++)for(let a=0;a<n.itemSize;a++)0===a&&d.setX(t,n.getX(t)-o.getX(t)),1===a&&d.setY(t,n.getY(t)-o.getY(t)),2===a&&d.setZ(t,n.getZ(t)-o.getZ(t)),3===a&&d.setW(t,n.getW(t)-o.getW(t));c[r]=this.processAccessor(d,l),e.attributes.set(this.getUID(o,!0),c[r])}m.push(c),n.push(t.morphTargetInfluences[i]),void 0!==t.morphTargetDictionary&&r.push(o[i])}h.weights=n,r.length>0&&(h.extras={},h.extras.targetNames=r)}const x=Array.isArray(t.material);if(x&&0===l.groups.length)return null;const _=x?t.material:[t.material],w=x?l.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let i=0,t=w.length;i<t;i++){const t={mode:c,attributes:d};if(this.serializeUserData(l,t),m.length>0&&(t.targets=m),null!==l.index){let n=this.getUID(l.index);void 0===w[i].start&&void 0===w[i].count||(n+=":"+w[i].start+":"+w[i].count),e.attributes.has(n)?t.indices=e.attributes.get(n):(t.indices=this.processAccessor(l.index,l,w[i].start,w[i].count),e.attributes.set(n,t.indices)),null===t.indices&&delete t.indices}const n=this.processMaterial(_[w[i].materialIndex]);null!==n&&(t.material=n),f.push(t)}h.primitives=f,n.meshes||(n.meshes=[]),this._invokeAll(function(e){e.writeMesh&&e.writeMesh(t,h)});const E=n.meshes.push(h)-1;return e.meshes.set(o,E),E}detectMeshQuantization(t,e){if(this.extensionsUsed[Tp])return;let n=void 0;switch(e.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}e.normalized&&(n+=" normalized");const r=t.split("_",1)[0];Ip[r]&&Ip[r].includes(n)&&(this.extensionsUsed[Tp]=!0,this.extensionsRequired[Tp]=!0)}processCamera(t){const e=this.json;e.cameras||(e.cameras=[]);const n=t.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:r.perspective={aspectRatio:t.aspect,yfov:dn.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(r.name=t.type),e.cameras.push(r)-1}processAnimation(t,e){const n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);const o=(t=Mp.Utils.mergeMorphTargetTracks(t.clone(),e)).tracks,l=[],c=[];for(let i=0;i<o.length;++i){const track=o[i],t=Xc.parseTrackName(track.name);let n=Xc.findNode(e,t.nodeName);const h=Rp[t.propertyName];if("bones"===t.objectName&&(n=!0===n.isSkinnedMesh?n.skeleton.getBoneByName(t.objectIndex):void 0),!n||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',track.name),null;const d=1;let f,m=track.values.length/track.times.length;h===Rp.morphTargetInfluences&&(m/=n.morphTargetInfluences.length),!0===track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(f="CUBICSPLINE",m/=3):f=track.getInterpolation()===Ie?"STEP":"LINEAR",c.push({input:this.processAccessor(new mr(track.times,d)),output:this.processAccessor(new mr(track.values,m)),interpolation:f}),l.push({sampler:c.length-1,target:{node:r.get(n),path:h}})}return n.animations.push({name:t.name||"clip_"+n.animations.length,samplers:c,channels:l}),n.animations.length-1}processSkin(object){const t=this.json,e=this.nodeMap,n=t.nodes[e.get(object)],r=object.skeleton;if(void 0===r)return null;const o=object.skeleton.bones[0];if(void 0===o)return null;const l=[],c=new Float32Array(16*r.bones.length),h=new pi;for(let i=0;i<r.bones.length;++i)l.push(e.get(r.bones[i])),h.copy(r.boneInverses[i]),h.multiply(object.bindMatrix).toArray(c,16*i);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new mr(c,16)),joints:l,skeleton:e.get(o)}),n.skin=t.skins.length-1}processNode(object){const t=this.json,e=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(e.trs){const t=object.quaternion.toArray(),e=object.position.toArray(),n=object.scale.toArray();Qp(t,[0,0,0,1])||(r.rotation=t),Qp(e,[0,0,0])||(r.translation=e),Qp(n,[1,1,1])||(r.scale=n)}else object.matrixAutoUpdate&&object.updateMatrix(),!1===Qp(object.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(r.matrix=object.matrix.elements);if(""!==object.name&&(r.name=String(object.name)),this.serializeUserData(object,r),object.isMesh||object.isLine||object.isPoints){const t=this.processMesh(object);null!==t&&(r.mesh=t)}else object.isCamera&&(r.camera=this.processCamera(object));if(object.isSkinnedMesh&&this.skins.push(object),object.children.length>0){const t=[];for(let i=0,n=object.children.length;i<n;i++){const n=object.children[i];if(n.visible||!1===e.onlyVisible){const e=this.processNode(n);null!==e&&t.push(e)}}t.length>0&&(r.children=t)}this._invokeAll(function(t){t.writeNode&&t.writeNode(object,r)});const o=t.nodes.push(r)-1;return n.set(object,o),o}processScene(t){const e=this.json,n=this.options;e.scenes||(e.scenes=[],e.scene=0);const r={};""!==t.name&&(r.name=t.name),e.scenes.push(r);const o=[];for(let i=0,e=t.children.length;i<e;i++){const e=t.children[i];if(e.visible||!1===n.onlyVisible){const t=this.processNode(e);null!==t&&o.push(t)}}o.length>0&&(r.nodes=o),this.serializeUserData(t,r)}processObjects(t){const e=new Zo;e.name="AuxScene";for(let i=0;i<t.length;i++)e.children.push(t[i]);this.processScene(e)}processInput(input){const t=this.options;input=input instanceof Array?input:[input],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(input)});const e=[];for(let i=0;i<input.length;i++)input[i]instanceof Zo?this.processScene(input[i]):e.push(input[i]);e.length>0&&this.processObjects(e);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],input[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(input)})}_invokeAll(t){for(let i=0,e=this.plugins.length;i<e;i++)t(this.plugins[i])}}class Wp{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,e){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);const n=this.writer,r=n.json,o=n.extensionsUsed,l={};t.name&&(l.name=t.name),l.color=t.color.toArray(),l.intensity=t.intensity,t.isDirectionalLight?l.type="directional":t.isPointLight?(l.type="point",t.distance>0&&(l.range=t.distance)):t.isSpotLight&&(l.type="spot",t.distance>0&&(l.range=t.distance),l.spot={},l.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,l.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&0===t.target.position.x&&0===t.target.position.y&&-1===t.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},o[this.name]=!0);const c=r.extensions[this.name].lights;c.push(l),e.extensions=e.extensions||{},e.extensions[this.name]={light:c.length-1}}}class $p{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(!t.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},n[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}}class qp{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.clearcoat)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.clearcoatFactor=t.clearcoat,t.clearcoatMap){const e={index:n.processTexture(t.clearcoatMap)};n.applyTextureTransform(e,t.clearcoatMap),o.clearcoatTexture=e}if(o.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const e={index:n.processTexture(t.clearcoatRoughnessMap)};n.applyTextureTransform(e,t.clearcoatRoughnessMap),o.clearcoatRoughnessTexture=e}if(t.clearcoatNormalMap){const e={index:n.processTexture(t.clearcoatNormalMap)};n.applyTextureTransform(e,t.clearcoatNormalMap),o.clearcoatNormalTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class Yp{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.iridescence)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.iridescenceFactor=t.iridescence,t.iridescenceMap){const e={index:n.processTexture(t.iridescenceMap)};n.applyTextureTransform(e,t.iridescenceMap),o.iridescenceTexture=e}if(o.iridescenceIor=t.iridescenceIOR,o.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],o.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){const e={index:n.processTexture(t.iridescenceThicknessMap)};n.applyTextureTransform(e,t.iridescenceThicknessMap),o.iridescenceThicknessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class Xp{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.transmissionFactor=t.transmission,t.transmissionMap){const e={index:n.processTexture(t.transmissionMap)};n.applyTextureTransform(e,t.transmissionMap),o.transmissionTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class Kp{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;const n=this.writer,r=n.extensionsUsed,o={};if(o.thicknessFactor=t.thickness,t.thicknessMap){const e={index:n.processTexture(t.thicknessMap)};n.applyTextureTransform(e,t.thicknessMap),o.thicknessTexture=e}o.attenuationDistance=t.attenuationDistance,o.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class Jp{constructor(t){this.writer=t,this.name="KHR_materials_ior"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||1.5===t.ior)return;const n=this.writer.extensionsUsed,r={};r.ior=t.ior,e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}class Zp{constructor(t){this.writer=t,this.name="KHR_materials_specular"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||1===t.specularIntensity&&t.specularColor.equals(Lp)&&!t.specularIntensityMap&&!t.specularColorTexture)return;const n=this.writer,r=n.extensionsUsed,o={};if(t.specularIntensityMap){const e={index:n.processTexture(t.specularIntensityMap)};n.applyTextureTransform(e,t.specularIntensityMap),o.specularTexture=e}if(t.specularColorMap){const e={index:n.processTexture(t.specularColorMap)};n.applyTextureTransform(e,t.specularColorMap),o.specularColorTexture=e}o.specularFactor=t.specularIntensity,o.specularColorFactor=t.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class tf{constructor(t){this.writer=t,this.name="KHR_materials_sheen"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0==t.sheen)return;const n=this.writer,r=n.extensionsUsed,o={};if(t.sheenRoughnessMap){const e={index:n.processTexture(t.sheenRoughnessMap)};n.applyTextureTransform(e,t.sheenRoughnessMap),o.sheenRoughnessTexture=e}if(t.sheenColorMap){const e={index:n.processTexture(t.sheenColorMap)};n.applyTextureTransform(e,t.sheenColorMap),o.sheenColorTexture=e}o.sheenRoughnessFactor=t.sheenRoughness,o.sheenColorFactor=t.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=o,r[this.name]=!0}}class ef{constructor(t){this.writer=t,this.name="KHR_materials_emissive_strength"}writeMaterial(t,e){if(!t.isMeshStandardMaterial||1===t.emissiveIntensity)return;const n=this.writer.extensionsUsed,r={};r.emissiveStrength=t.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}}Mp.Utils={insertKeyframe:function(track,time){const t=track.getValueSize(),e=new track.TimeBufferType(track.times.length+1),n=new track.ValueBufferType(track.values.length+t),r=track.createInterpolant(new track.ValueBufferType(t));let o;if(0===track.times.length){e[0]=time;for(let i=0;i<t;i++)n[i]=0;o=0}else if(time<track.times[0]){if(Math.abs(track.times[0]-time)<.001)return 0;e[0]=time,e.set(track.times,1),n.set(r.evaluate(time),0),n.set(track.values,t),o=0}else if(time>track.times[track.times.length-1]){if(Math.abs(track.times[track.times.length-1]-time)<.001)return track.times.length-1;e[e.length-1]=time,e.set(track.times,0),n.set(track.values,0),n.set(r.evaluate(time),track.values.length),o=e.length-1}else for(let i=0;i<track.times.length;i++){if(Math.abs(track.times[i]-time)<.001)return i;if(track.times[i]<time&&track.times[i+1]>time){e.set(track.times.slice(0,i+1),0),e[i+1]=time,e.set(track.times.slice(i+1),i+2),n.set(track.values.slice(0,(i+1)*t),0),n.set(r.evaluate(time),(i+1)*t),n.set(track.values.slice((i+1)*t),(i+2)*t),o=i+1;break}}return track.times=e,track.values=n,o},mergeMorphTargetTracks:function(t,e){const n=[],r={},o=t.tracks;for(let i=0;i<o.length;++i){let t=o[i];const l=Xc.parseTrackName(t.name),c=Xc.findNode(e,l.nodeName);if("morphTargetInfluences"!==l.propertyName||void 0===l.propertyIndex){n.push(t);continue}if(t.createInterpolant!==t.InterpolantFactoryMethodDiscrete&&t.createInterpolant!==t.InterpolantFactoryMethodLinear){if(t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(t=t.clone()).setInterpolation(Me)}const h=c.morphTargetInfluences.length,d=c.morphTargetDictionary[l.propertyIndex];if(void 0===d)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let f;if(void 0===r[c.uuid]){const e=new((f=t.clone()).ValueBufferType)(h*f.times.length);for(let t=0;t<f.times.length;t++)e[t*h+d]=f.values[t];f.name=(l.nodeName||"")+".morphTargetInfluences",f.values=e,r[c.uuid]=f,n.push(f);continue}const m=t.createInterpolant(new t.ValueBufferType(1));f=r[c.uuid];for(let t=0;t<f.times.length;t++)f.values[t*h+d]=m.evaluate(f.times[t]);for(let e=0;e<t.times.length;e++){const n=this.insertKeyframe(f,t.times[e]);f.values[n*h+d]=t.values[e]}}return t.tracks=n,t}};const nf=object=>void 0!==object.material&&object.userData&&object.userData.variantMaterials&&!!Array.from(object.userData.variantMaterials.values()).filter(t=>rf(t.material)),rf=t=>t&&t.isMaterial&&!Array.isArray(t);class sf{constructor(t){this.writer=t,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(t){const e=new Set;for(const object of t)object.traverse(t=>{if(!nf(t))return;const n=t.userData.variantMaterials,r=t.userData.variantData;for(const[t,o]of r){const r=n.get(o.index);r&&rf(r.material)&&e.add(t)}});e.forEach(t=>this.variantNames.push(t))}writeMesh(t,e){if(!nf(t))return;const n=t.userData,r=n.variantMaterials,o=n.variantData,l=new Map,c=new Map,h=Array.from(o.values()).sort((a,b)=>a.index-b.index);for(const[i,t]of h.entries())c.set(t.index,i);for(const t of o.values()){const e=r.get(t.index);if(!e||!rf(e.material))continue;const n=this.writer.processMaterial(e.material);l.has(n)||l.set(n,{material:n,variants:[]}),l.get(n).variants.push(c.get(t.index))}const d=Array.from(l.values()).map(t=>t.variants.sort((a,b)=>a-b)&&t).sort((a,b)=>a.material-b.material);if(0===d.length)return;const f=rf(n.originalMaterial)?this.writer.processMaterial(n.originalMaterial):-1;for(const t of e.primitives)f>=0&&(t.material=f),t.extensions=t.extensions||{},t.extensions[this.name]={mappings:d}}afterParse(){if(0===this.variantNames.length)return;const t=this.writer.json;t.extensions=t.extensions||{};const e=this.variantNames.map(t=>({name:t}));t.extensions[this.name]={variants:e},this.writer.extensionsUsed[this.name]=!0}}class af{constructor(t,e,n,r,o){this.xrLight=t,this.renderer=e,this.lightProbe=n,this.xrWebGLBinding=null,this.estimationStartCallback=o,this.frameCallback=this.onXRFrame.bind(this);const l=e.xr.getSession();if(r&&"XRWebGLBinding"in window){const n=new os(16);t.environment=n.texture;const r=e.getContext();switch(l.preferredReflectionFormat){case"srgba8":r.getExtension("EXT_sRGB");break;case"rgba16f":r.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(l,r),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}l.requestAnimationFrame(this.frameCallback)}updateReflection(){const t=this.renderer.properties.get(this.xrLight.environment);if(t){const e=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);e&&(t.__webglTexture=e,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(time,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const e=t.getLightEstimate(this.lightProbe);if(e){this.xrLight.lightProbe.sh.fromArray(e.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const t=Math.max(1,Math.max(e.primaryLightIntensity.x,Math.max(e.primaryLightIntensity.y,e.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(e.primaryLightIntensity.x/t,e.primaryLightIntensity.y/t,e.primaryLightIntensity.z/t),this.xrLight.directionalLight.intensity=t,this.xrLight.directionalLight.position.copy(e.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class of extends Vo{constructor(t,e=!0){super(),this.lightProbe=new Gc,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Qc,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let n=null,r=!1;t.xr.addEventListener("sessionstart",()=>{const o=t.xr.getSession();"requestLightProbe"in o&&o.requestLightProbe({reflectionFormat:o.preferredReflectionFormat}).then(o=>{n=new af(this,t,o,e,()=>{r=!0,this.dispatchEvent({type:"estimationstart"})})})}),t.xr.addEventListener("sessionend",()=>{n&&(n.dispose(),n=null),r&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{n&&(n.dispose(),n=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}const lf=1e4,cf=.001,hf=50;class uf{constructor(t=hf){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(t)}setDecayTime(t){this.naturalFrequency=1/Math.max(cf,t)}update(t,e,n,r){const o=2e-4*this.naturalFrequency;if(null==t||0===r)return e;if(t===e&&0===this.velocity)return e;if(n<0)return t;const l=t-e,c=this.velocity+this.naturalFrequency*l,h=l+n*c,d=Math.exp(-this.naturalFrequency*n),f=(c-this.naturalFrequency*h)*d,m=-this.naturalFrequency*(f+c*d);return Math.abs(f)<o*Math.abs(r)&&m*l>=0?(this.velocity=0,e):(this.velocity=f,e+h*d)}}const df=.2,pf=.75,ff=Math.PI/24,mf=new pn,gf=(t,e,n)=>{let r=e>0?n>0?0:-Math.PI/2:n>0?Math.PI/2:Math.PI;for(let i=0;i<=12;++i)t.push(e+(df-.03)*Math.cos(r),n+(df-.03)*Math.sin(r),0,e+df*Math.cos(r),n+df*Math.sin(r),0),r+=ff};class Af extends jr{constructor(t,e){const n=new Ir,r=[],o=[],{size:l,boundingBox:c}=t,h=l.x/2,d=("back"===e?l.y:l.z)/2;gf(o,h,d),gf(o,-h,d),gf(o,-h,-d),gf(o,h,-d);const f=o.length/3;for(let i=0;i<f-2;i+=2)r.push(i,i+1,i+3,i,i+3,i+2);const i=f-2;r.push(i,i+1,1,i,1,0),n.setAttribute("position",new vr(o,3)),n.setIndex(r),super(n),this.side=e;const m=this.material;switch(m.side=_,m.transparent=!0,m.opacity=0,this.goalOpacity=0,this.opacityDamper=new uf,this.hitPlane=new jr(new As(2*(h+df),2*(d+df))),this.hitPlane.visible=!1,this.hitPlane.material.side=_,this.add(this.hitPlane),c.getCenter(this.position),e){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=c.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=c.min.z,this.position.z=this.shadowHeight}t.target.add(this),this.offsetHeight=0}getHit(t,e,n){mf.set(e,-n),this.hitPlane.visible=!0;const r=t.positionAndNormalFromPoint(mf,this.hitPlane);return this.hitPlane.visible=!1,null==r?null:r.position}getExpandedHit(t,e,n){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const r=this.getHit(t,e,n);return this.hitPlane.scale.set(1,1,1),r}set offsetHeight(t){t-=.001,"back"===this.side?this.position.z=this.shadowHeight+t:this.position.y=this.shadowHeight+t}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(t){this.goalOpacity=t?pf:0}updateOpacity(t){const e=this.material;e.opacity=this.opacityDamper.update(e.opacity,this.goalOpacity,t,1),this.visible=e.opacity>0}dispose(){var t;const{geometry:e,material:n}=this.hitPlane;e.dispose(),n.dispose(),this.geometry.dispose(),this.material.dispose(),null===(t=this.parent)||void 0===t||t.remove(this)}}const vf=(t,e)=>({type:"number",number:t,unit:e}),bf=(()=>{const t={};return e=>{const n=e;if(n in t)return t[n];const r=[];let o=0;for(;e;){if(++o>1e3){e="";break}const t=yf(e),n=t.nodes[0];if(null==n||0===n.terms.length)break;r.push(n),e=t.remainingInput}return t[n]=r}})(),yf=(()=>{const t=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,n=/^[\),]/;return r=>{const o=[];for(;r.length&&(r=r.trim(),!n.test(r));)if("("===r[0]){const{nodes:t,remainingInput:e}=Ef(r);r=e,o.push({type:"function",name:{type:"ident",value:"calc"},arguments:t})}else if(t.test(r)){const t=xf(r),e=t.nodes[0];if("("===(r=t.remainingInput)[0]){const{nodes:t,remainingInput:n}=Ef(r);o.push({type:"function",name:e,arguments:t}),r=n}else o.push(e)}else if(e.test(r))o.push({type:"operator",value:r[0]}),r=r.slice(1);else{const{nodes:t,remainingInput:e}="#"===r[0]?wf(r):_f(r);if(0===t.length)break;o.push(t[0]),r=e}return{nodes:[{type:"expression",terms:o}],remainingInput:r}}})(),xf=(()=>{const t=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const n=e.match(t);return{nodes:[{type:"ident",value:null==n?e:e.substr(0,n.index)}],remainingInput:null==n?"":e.substr(n.index)}}})(),_f=(()=>{const t=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,n=/^(m|mm|cm|rad|deg|[%])$/;return r=>{const o=r.match(t),l=null==o?"0":o[0],c=(r=null==l?r:r.slice(l.length)).match(e);let h=null!=c&&""!==c[0]?c[0]:null;const d=null==c?r:r.slice(h.length);return null==h||n.test(h)||(h=null),{nodes:[{type:"number",number:parseFloat(l)||0,unit:h}],remainingInput:d}}})(),wf=(()=>{const t=/^[a-f0-9]*/i;return e=>{const n=(e=e.slice(1).trim()).match(t);return{nodes:null==n?[]:[{type:"hex",value:n[0]}],remainingInput:null==n?e:e.slice(n[0].length)}}})(),Ef=t=>{const e=[];for(t=t.slice(1).trim();t.length;){const n=yf(t);if(e.push(n.nodes[0]),","===(t=n.remainingInput.trim())[0])t=t.slice(1).trim();else if(")"===t[0]){t=t.slice(1);break}}return{nodes:e,remainingInput:t}},Sf=Symbol("visitedTypes");class Cf{constructor(t){this[Sf]=t}walk(t,e){const n=t.slice();for(;n.length;){const t=n.shift();switch(this[Sf].indexOf(t.type)>-1&&e(t),t.type){case"expression":n.unshift(...t.terms);break;case"function":n.unshift(t.name,...t.arguments)}}}}const If=Object.freeze({type:"number",number:0,unit:null}),Mf=(t,e=0)=>{let{number:n,unit:r}=t;if(isFinite(n)){if("rad"===t.unit||null==t.unit)return t}else n=e,r="rad";return{type:"number",number:("deg"===r&&null!=n?n:0)*Math.PI/180,unit:"rad"}},Bf=(t,e=0)=>{let n,{number:r,unit:o}=t;if(isFinite(r)){if("m"===t.unit)return t}else r=e,o="m";switch(o){default:n=1;break;case"cm":n=.01;break;case"mm":n=.001}return{type:"number",number:n*r,unit:"m"}},Tf=(()=>{const t=t=>t,e={rad:t,deg:Mf,m:t,mm:Bf,cm:Bf};return(t,n=If)=>{isFinite(t.number)||(t.number=n.number,t.unit=n.unit);const{unit:r}=t;if(null==r)return t;const o=e[r];return null==o?n:o(t)}})();var kf,Rf,Lf;const Df=Symbol("evaluate"),Pf=Symbol("lastValue");class Of{constructor(){this[kf]=null}static evaluatableFor(t,e=If){if(t instanceof Of)return t;if("number"===t.type)return"%"===t.unit?new Uf(t,e):t;switch(t.name.value){case"calc":return new Vf(t,e);case"env":return new zf(t)}return If}static evaluate(t){return t instanceof Of?t.evaluate():t}static isConstant(t){return!(t instanceof Of)||t.isConstant}static applyIntrinsics(t,e){const{basis:n,keywords:r}=e,{auto:o}=r;return n.map((e,n)=>{const l=null==o[n]?e:o[n];let c=t[n]?t[n]:l;if("ident"===c.type){const t=c.value;t in r&&(c=r[t][n])}return null!=c&&"ident"!==c.type||(c=l),"%"===c.unit?vf(c.number/100*e.number,e.unit):(c=Tf(c,e)).unit!==e.unit?e:c})}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[Pf]||(this[Pf]=this[Df]()),this[Pf]}}kf=Pf;const Ff=Symbol("percentage"),Nf=Symbol("basis");class Uf extends Of{constructor(t,e){super(),this[Ff]=t,this[Nf]=e}get isConstant(){return!0}[Df](){return vf(this[Ff].number/100*this[Nf].number,this[Nf].unit)}}const Qf=Symbol("identNode");class zf extends Of{constructor(t){super(),this[Rf]=null;const e=t.arguments.length?t.arguments[0].terms[0]:null;null!=e&&"ident"===e.type&&(this[Qf]=e)}get isConstant(){return!1}[(Rf=Qf,Df)](){if(null!=this[Qf])switch(this[Qf].value){case"window-scroll-y":return{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}}return If}}const Gf=/[\*\/]/,Hf=Symbol("evaluator");class Vf extends Of{constructor(t,e=If){if(super(),this[Lf]=null,1!==t.arguments.length)return;const n=t.arguments[0].terms.slice(),r=[];for(;n.length;){const t=n.shift();if(r.length>0){const n=r[r.length-1];if("operator"===n.type&&Gf.test(n.value)){const n=r.pop(),o=r.pop();if(null==o)return;r.push(new qf(n,Of.evaluatableFor(o,e),Of.evaluatableFor(t,e)));continue}}r.push("operator"===t.type?t:Of.evaluatableFor(t,e))}for(;r.length>2;){const[t,n,o]=r.splice(0,3);if("operator"!==n.type)return;r.unshift(new qf(n,Of.evaluatableFor(t,e),Of.evaluatableFor(o,e)))}1===r.length&&(this[Hf]=r[0])}get isConstant(){return null==this[Hf]||Of.isConstant(this[Hf])}[(Lf=Hf,Df)](){return null!=this[Hf]?Of.evaluate(this[Hf]):If}}const jf=Symbol("operator"),Wf=Symbol("left"),$f=Symbol("right");class qf extends Of{constructor(t,e,n){super(),this[jf]=t,this[Wf]=e,this[$f]=n}get isConstant(){return Of.isConstant(this[Wf])&&Of.isConstant(this[$f])}[Df](){const t=Tf(Of.evaluate(this[Wf])),e=Tf(Of.evaluate(this[$f])),{number:n,unit:r}=t,{number:o,unit:l}=e;if(null!=l&&null!=r&&l!=r)return If;const c=r||l;let h;switch(this[jf].value){case"+":h=n+o;break;case"-":h=n-o;break;case"/":h=n/o;break;case"*":h=n*o;break;default:return If}return{type:"number",number:h,unit:c}}}const Yf=Symbol("evaluatables"),Xf=Symbol("intrinsics");class Kf extends Of{constructor(t,e){super(),this[Xf]=e;const n=t[0],r=null!=n?n.terms:[];this[Yf]=e.basis.map((t,e)=>{const n=r[e];return null==n?{type:"ident",value:"auto"}:"ident"===n.type?n:Of.evaluatableFor(n,t)})}get isConstant(){for(const t of this[Yf])if(!Of.isConstant(t))return!1;return!0}[Df](){const t=this[Yf].map(t=>Of.evaluate(t));return Of.applyIntrinsics(t,this[Xf]).map(t=>t.number)}}var Jf,Zf,tm,nm;const im=Symbol("instances"),rm=Symbol("activateListener"),sm=Symbol("deactivateListener"),am=Symbol("notifyInstances"),om=Symbol("notify"),lm=Symbol("callback");class cm{constructor(t){this[lm]=t}static[am](){for(const t of cm[im])t[om]()}static[(Jf=im,rm)](){window.addEventListener("scroll",this[am],{passive:!0})}static[sm](){window.removeEventListener("scroll",this[am])}observe(){0===cm[im].size&&cm[rm](),cm[im].add(this)}disconnect(){cm[im].delete(this),0===cm[im].size&&cm[sm]()}[om](){this[lm]()}}cm[Jf]=new Set;const hm=Symbol("computeStyleCallback"),um=Symbol("astWalker"),dm=Symbol("dependencies"),pm=Symbol("onScroll");class fm{constructor(t){this[Zf]={},this[tm]=new Cf(["function"]),this[nm]=()=>{this[hm]({relatedState:"window-scroll"})},this[hm]=t}observeEffectsFor(t){const e={},n=this[dm];this[um].walk(t,t=>{const{name:r}=t,o=t.arguments[0].terms[0];if("env"===r.value&&null!=o&&"ident"===o.type)switch(o.value){case"window-scroll-y":if(null==e["window-scroll"]){const t="window-scroll"in n?n["window-scroll"]:new cm(this[pm]);t.observe(),delete n["window-scroll"],e["window-scroll"]=t}}});for(const t in n){n[t].disconnect()}this[dm]=e}dispose(){for(const t in this[dm]){this[dm][t].disconnect()}}}Zf=dm,tm=um,nm=pm;const mm=t=>{const e=t.observeEffects||!1,n=t.intrinsics instanceof Function?t.intrinsics:()=>t.intrinsics;return(r,o)=>{const l=r.updated,c=r.connectedCallback,h=r.disconnectedCallback,d=Symbol(`${o}StyleEffector`),f=Symbol(`${o}StyleEvaluator`),m=Symbol(`${o}UpdateEvaluator`),A=Symbol(`${o}EvaluateAndSync`);Object.defineProperties(r,{[d]:{value:null,writable:!0},[f]:{value:null,writable:!0},[m]:{value:function(){const t=bf(this[o]);this[f]=new Kf(t,n(this)),null==this[d]&&e&&(this[d]=new fm(()=>this[A]())),null!=this[d]&&this[d].observeEffectsFor(t)}},[A]:{value:function(){if(null==this[f])return;const e=this[f].evaluate();this[t.updateHandler](e)}},updated:{value:function(t){t.has(o)&&(this[m](),this[A]()),l.call(this,t)}},connectedCallback:{value:function(){c.call(this),this.requestUpdate(o,this[o])}},disconnectedCallback:{value:function(){h.call(this),null!=this[d]&&(this[d].dispose(),this[d]=null)}}})}},gm=t=>t<.5?2*t*t:(4-2*t)*t-1,Am=(t,e,n=gm)=>time=>t+(e-t)*n(time),vm=path=>{const t=[],e=[];let n=path.initialValue;for(let i=0;i<path.keyframes.length;++i){const r=path.keyframes[i],{value:o,frames:l}=r,c=r.ease||gm,track=Am(n,o,c);t.push(track),e.push(l),n=o}return((t,e)=>{const n=e.map((t=>e=>t+=e)(0));return time=>{time=Eu(time,0,1),time*=n[n.length-1];const i=n.findIndex(t=>t>=time),e=i<1?0:n[i-1],r=n[i];return t[i]((time-e)/(r-e))}})(t,e)};var bm=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const ym=5e3,xm=vm({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),_m=vm({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),wm="0deg 75deg 105%",Em="auto auto auto",Sm="auto",Cm=["front","right","back","left"],Im=["upper-","","lower-"],Mm=3e3,Bm=". Use mouse, touch or arrow keys to move.",Tm={AUTO:"auto",NONE:"none"},km={BASIC:"basic",WIGGLE:"wiggle"},Rm={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},Lm=()=>({basis:[Mf(vf(30,"deg"))],keywords:{auto:[null]}}),Dm=()=>({basis:[Mf(vf(12,"deg"))],keywords:{auto:[null]}}),Pm=(()=>{const t=bf(wm)[0].terms,e=Tf(t[0]),n=Tf(t[1]);return element=>{const t=element[py].idealCameraDistance();return{basis:[e,n,vf(t,"m")],keywords:{auto:[null,null,vf(105,"%")]}}}})(),Om=element=>{const t=2.2*element[py].boundingSphere.radius;return{basis:[vf(-1/0,"rad"),vf(Math.PI/8,"rad"),vf(t,"m")],keywords:{auto:[null,null,null]}}},Fm=element=>{const t=Pm(element),e=new Kf([],t).evaluate()[2];return{basis:[vf(1/0,"rad"),vf(Math.PI-Math.PI/8,"rad"),vf(e,"m")],keywords:{auto:[null,null,null]}}},Nm=element=>{const t=element[py].boundingBox.getCenter(new On);return{basis:[vf(t.x,"m"),vf(t.y,"m"),vf(t.z,"m")],keywords:{auto:[null,null,null]}}},Um=Math.PI/2,Qm=Math.PI/3,zm=Um/2,Gm=2*Math.PI,Hm=Symbol("controls"),Vm=Symbol("panElement"),jm=Symbol("promptElement"),Wm=Symbol("promptAnimatedContainer"),$m=Symbol("fingerAnimatedContainers"),qm=Symbol("deferInteractionPrompt"),Ym=Symbol("updateAria"),Xm=Symbol("updateCameraForRadius"),Km=Symbol("cancelPrompts"),Jm=Symbol("onChange"),Zm=Symbol("onPointerChange"),tg=Symbol("waitingToPromptUser"),eg=Symbol("userHasInteracted"),ng=Symbol("promptElementVisibleTime"),ig=Symbol("lastPromptOffset"),rg=Symbol("cancellationSource"),sg=Symbol("lastSpherical"),ag=Symbol("jumpCamera"),og=Symbol("initialized"),lg=Symbol("maintainThetaPhi"),cg=Symbol("syncCameraOrbit"),hg=Symbol("syncFieldOfView"),ug=Symbol("syncCameraTarget"),dg=Symbol("syncMinCameraOrbit"),pg=Symbol("syncMaxCameraOrbit"),fg=Symbol("syncMinFieldOfView"),mg=Symbol("syncMaxFieldOfView"),gg=.018,Ag=2,vg=300,bg=new pn,yg=new On,xg=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),_g=Math.PI/8,wg=.04,Eg=10,Sg={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class Cg extends Ke{constructor(t,element,e){super(),this.camera=t,this.element=element,this.scene=e,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=Sg.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new fn,this.panPerPixel=0,this.spherical=new ih,this.goalSpherical=new ih,this.thetaDamper=new uf,this.phiDamper=new uf,this.radiusDamper=new uf,this.logFov=Math.log(xg.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new uf,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=t=>{if(this.enablePan)t.preventDefault();else for(const t of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:t.id})))},this.touchModeZoom=(t,e)=>{if(!this._disableZoom){const t=this.twoTouchDistance(this.pointers[0],this.pointers[1]),e=wg*(this.lastSeparation-t)*50/this.scene.height;this.lastSeparation=t,this.userAdjustOrbit(0,0,e)}this.panPerPixel>0&&this.movePan(t,e)},this.disableScroll=t=>{t.preventDefault()},this.touchModeRotate=(t,e)=>{const{touchAction:n}=this._options;if(!this.touchDecided&&"none"!==n){this.touchDecided=!0;const r=Math.abs(t),o=Math.abs(e);if(this.changeSource===Sg.USER_INTERACTION&&("pan-y"===n&&o>r||"pan-x"===n&&r>o))return void(this.touchMode=null);this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(t,e)},this.onPointerDown=t=>{if(this.pointers.length>2)return;const{element:element}=this;0===this.pointers.length&&(element.addEventListener("pointermove",this.onPointerMove),element.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=t.clientX,this.startPointerPosition.clientY=t.clientY,this.startTime=performance.now());try{element.setPointerCapture(t.pointerId)}catch(t){}this.pointers.push({clientX:t.clientX,clientY:t.clientY,id:t.pointerId}),this.isUserPointing=!1,"touch"===t.pointerType?(this.changeSource=t.altKey?Sg.AUTOMATIC:Sg.USER_INTERACTION,this.onTouchChange(t)):(this.changeSource=Sg.USER_INTERACTION,this.onMouseDown(t)),this.changeSource===Sg.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=t=>{const e=this.pointers.find(e=>e.id===t.pointerId);if(null==e)return;const n=this.pointers.length,r=(t.clientX-e.clientX)/n,o=(t.clientY-e.clientY)/n;0===r&&0===o||(e.clientX=t.clientX,e.clientY=t.clientY,"touch"===t.pointerType?(this.changeSource=t.altKey?Sg.AUTOMATIC:Sg.USER_INTERACTION,null!==this.touchMode&&this.touchMode(r,o)):(this.changeSource=Sg.USER_INTERACTION,this.panPerPixel>0?this.movePan(r,o):this.handleSinglePointerMove(r,o)))},this.onPointerUp=t=>{const{element:element}=this,e=this.pointers.findIndex(e=>e.id===t.pointerId);-1!==e&&this.pointers.splice(e,1),this.panPerPixel>0&&!t.altKey&&this.resetRadius(),0===this.pointers.length?(element.removeEventListener("pointermove",this.onPointerMove),element.removeEventListener("pointerup",this.onPointerUp),element.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(t)):null!==this.touchMode&&this.onTouchChange(t),this.scene.element[Vm].style.opacity=0,element.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=t=>{this.changeSource=Sg.USER_INTERACTION;const e=t.deltaY*(1==t.deltaMode?18:1)*wg/30;this.userAdjustOrbit(0,0,e),t.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=t=>{const{changeSource:e}=this;this.changeSource=Sg.USER_INTERACTION,(t.shiftKey&&this.enablePan?this.panKeyCodeHandler(t):this.orbitZoomKeyCodeHandler(t))?(t.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=e},this._options=Object.assign({},xg),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){const{element:element}=this;element.addEventListener("pointerdown",this.onPointerDown),element.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||element.addEventListener("wheel",this.onWheel),element.addEventListener("keydown",this.onKeyDown),element.addEventListener("touchmove",()=>{},{passive:!1}),element.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){const{element:element}=this;element.removeEventListener("pointerdown",this.onPointerDown),element.removeEventListener("pointermove",this.onPointerMove),element.removeEventListener("pointerup",this.onPointerUp),element.removeEventListener("pointercancel",this.onPointerUp),element.removeEventListener("wheel",this.onWheel),element.removeEventListener("keydown",this.onKeyDown),element.removeEventListener("contextmenu",this.onContext),element.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(t){this._disableZoom!=t&&(this._disableZoom=t,!0===t?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(t=new ih){return t.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(t){Object.assign(this._options,t),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(t,e){this.camera.far=0===e?2:e,this.camera.near=Math.max(t,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(t){this.camera.aspect=t,this.camera.updateProjectionMatrix()}setOrbit(t=this.goalSpherical.theta,e=this.goalSpherical.phi,n=this.goalSpherical.radius){const{minimumAzimuthalAngle:r,maximumAzimuthalAngle:o,minimumPolarAngle:l,maximumPolarAngle:c,minimumRadius:h,maximumRadius:d}=this._options,{theta:f,phi:m,radius:A}=this.goalSpherical,v=Eu(t,r,o);isFinite(r)||isFinite(o)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-v)+v);const y=Eu(e,l,c),x=Eu(n,h,d);return(v!==f||y!==m||x!==A)&&(!!(isFinite(v)&&isFinite(y)&&isFinite(x))&&(this.goalSpherical.theta=v,this.goalSpherical.phi=y,this.goalSpherical.radius=x,this.goalSpherical.makeSafe(),!0))}setRadius(t){this.goalSpherical.radius=t,this.setOrbit()}setFieldOfView(t){const{minimumFieldOfView:e,maximumFieldOfView:n}=this._options;t=Eu(t,e,n),this.goalLogFov=Math.log(t)}setDamperDecayTime(t){this.thetaDamper.setDecayTime(t),this.phiDamper.setDecayTime(t),this.radiusDamper.setDecayTime(t),this.fovDamper.setDecayTime(t)}adjustOrbit(t,e,n){const{theta:r,phi:o,radius:l}=this.goalSpherical,{minimumRadius:c,maximumRadius:h,minimumFieldOfView:d,maximumFieldOfView:f}=this._options,m=this.spherical.theta-r,A=Math.PI-.001,v=r-Eu(t,-A-m,A-m),y=o-e,x=0===n?0:((n>0?h:c)-l)/(Math.log(n>0?f:d)-this.goalLogFov),_=l+n*(isFinite(x)?x:2*(h-c));if(this.setOrbit(v,y,_),0!==n){const t=this.goalLogFov+n;this.setFieldOfView(Math.exp(t))}}jumpToGoal(){this.update(0,lf)}update(t,e){if(this.isStationary())return!1;const{maximumPolarAngle:n,maximumRadius:r}=this._options,o=this.spherical.theta-this.goalSpherical.theta;return Math.abs(o)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=2*Math.sign(o)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,e,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,e,n),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,e,r),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,e,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:style}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&"none"!==t?style.touchAction="manipulation":style.touchAction=t}else style.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new wi(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(t,e,n){this.adjustOrbit(t*this.orbitSensitivity*this.inputSensitivity,e*this.orbitSensitivity*this.inputSensitivity,n*this.inputSensitivity)}wrapAngle(t){const e=(t+Math.PI)/(2*Math.PI);return 2*(e-Math.floor(e))*Math.PI-Math.PI}pixelLengthToSphericalAngle(t){return 2*Math.PI*t/this.scene.height}twoTouchDistance(t,e){const{clientX:n,clientY:r}=t,{clientX:o,clientY:l}=e,c=o-n,h=l-r;return Math.sqrt(c*c+h*h)}handleSinglePointerMove(t,e){const n=this.pixelLengthToSphericalAngle(t),r=this.pixelLengthToSphericalAngle(e);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(n,r,0)}initializePan(){const{theta:t,phi:e}=this.spherical,n=t-this.scene.yaw;this.panPerPixel=gg/this.scene.height,this.panProjection.set(-Math.cos(n),-Math.cos(e)*Math.sin(n),0,0,Math.sin(e),0,Math.sin(n),-Math.cos(e)*Math.cos(n),0)}movePan(t,e){const{scene:n}=this,r=yg.set(t,e,0).multiplyScalar(this.inputSensitivity),o=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;r.multiplyScalar(o);const l=n.getTarget();l.add(r.applyMatrix3(this.panProjection)),n.boundingSphere.clampPoint(l,l),n.setTarget(l.x,l.y,l.z)}recenter(t){if(performance.now()>this.startTime+vg||Math.abs(t.clientX-this.startPointerPosition.clientX)>Ag||Math.abs(t.clientY-this.startPointerPosition.clientY)>Ag)return;const{scene:e}=this,n=e.positionAndNormalFromPoint(e.getNDC(t.clientX,t.clientY));if(null==n){const{cameraTarget:t}=e.element;e.element.cameraTarget="",e.element.cameraTarget=t,this.userAdjustOrbit(0,0,1)}else e.target.worldToLocal(n.position),e.setTarget(n.position.x,n.position.y,n.position.z)}resetRadius(){const{scene:t}=this,e=t.positionAndNormalFromPoint(bg.set(0,0));if(null==e)return;t.target.worldToLocal(e.position);const n=t.getTarget(),{theta:r,phi:o}=this.spherical,l=r-t.yaw,c=yg.set(Math.sin(o)*Math.sin(l),Math.cos(o),Math.sin(o)*Math.cos(l)),h=c.dot(e.position.sub(n));n.add(c.multiplyScalar(h)),t.setTarget(n.x,n.y,n.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-h)}onTouchChange(t){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom)return this.touchMode=null,void this.element.removeEventListener("touchmove",this.disableScroll);this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),t.altKey||(this.scene.element[Vm].style.opacity=1))}}onMouseDown(t){this.panPerPixel=0,this.enablePan&&(2===t.button||t.ctrlKey||t.metaKey||t.shiftKey)&&(this.initializePan(),this.scene.element[Vm].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(t){let e=!0;switch(t.key){case"PageUp":this.userAdjustOrbit(0,0,wg);break;case"PageDown":this.userAdjustOrbit(0,0,-1*wg);break;case"ArrowUp":this.userAdjustOrbit(0,-_g,0);break;case"ArrowDown":this.userAdjustOrbit(0,_g,0);break;case"ArrowLeft":this.userAdjustOrbit(-_g,0,0);break;case"ArrowRight":this.userAdjustOrbit(_g,0,0);break;default:e=!1}return e}panKeyCodeHandler(t){this.initializePan();let e=!0;switch(t.key){case"ArrowUp":this.movePan(0,-1*Eg);break;case"ArrowDown":this.movePan(0,Eg);break;case"ArrowLeft":this.movePan(-1*Eg,0);break;case"ArrowRight":this.movePan(Eg,0);break;default:e=!1}return e}}const Ig=30,Mg=.8,Bg=1.5,Tg=20,kg=1.3,Rg=1/kg,Lg=.25,Dg=10,Pg={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},Og={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},Fg=new On,Ng=new pi,Ug=new On,Qg=new ns(45,1,.1,100);class zg extends Ke{constructor(t){super(),this.renderer=t,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new On,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new On,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new On,this.goalYaw=0,this.goalScale=1,this.xDamper=new uf,this.yDamper=new uf,this.zDamper=new uf,this.yawDamper=new uf,this.scaleDamper=new uf,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new Af(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const e=this.transientHitTestSource;if(null==e)return;const n=this.frame.getHitTestResultsForTransientInput(e),r=this.presentedScene,o=this.placementBox;if(1===n.length){this.inputSource=t.inputSource;const{axes:e}=this.inputSource.gamepad,n=o.getHit(this.presentedScene,e[0],e[1]);o.show=!0,null!=n?(this.isTranslating=!0,this.lastDragPosition.copy(n)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=e[0]*Bg)}else if(2===n.length){o.show=!0,this.isTwoFingering=!0;const{separation:t}=this.fingerPolar(n);this.firstRatio=t/r.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=t.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){yu();const t=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(t),this.threeRenderer.xr.cameraAutoUpdate=!1,t}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return yu(),await navigator.xr.isSessionSupported("immersive-ar")}catch(t){return console.warn("Request to present in WebXR denied:"),console.warn(t),console.warn("Falling back to next ar-mode"),!1}}async present(t,e=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let n=new Promise((t,e)=>{requestAnimationFrame(()=>t())});t.setHotspotsVisibility(!1),t.queueRender(),await n,this._presentedScene=t,this.overlay=t.element.shadowRoot.querySelector("div.default"),!0===e&&(this.xrLight=new of(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||null==this.xrLight)return;const t=this.presentedScene;t.add(this.xrLight),t.environment=this.xrLight.environment}));const r=await this.resolveARSession();r.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const o=t.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");o.classList.add("enabled"),o.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=o;const l=await r.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=t.yaw,this.goalYaw=t.yaw,this.goalScale=1,t.background=null,this.oldShadowIntensity=t.shadowIntensity,t.setShadowIntensity(.01),this.oldTarget.copy(t.getTarget()),t.element.addEventListener("load",this.onUpdateScene);const c=Tg*Math.PI/180,h=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(c),z:-Math.cos(c)});r.requestHitTestSource({space:l,offsetRay:h}).then(t=>{this.initialHitSource=t}),this.currentSession=r,this.placementBox=new Af(t,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:Pg.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const t=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await t}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){const t=this.presentedScene;if(null!=t){const e=t.getTarget();this.oldTarget.copy(e),this.placeOnWall?e.z=t.boundingBox.min.z:e.y=t.boundingBox.min.y,t.setTarget(e.x,e.y,e.z)}}postSessionCleanup(){const t=this.currentSession;null!=t&&(t.removeEventListener("selectstart",this.onSelectStart),t.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const e=this.presentedScene;if(this._presentedScene=null,null!=e){const{element:element}=e;null!=this.xrLight&&(e.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),e.position.set(0,0,0),e.scale.set(1,1,1),e.setShadowOffset(0);const t=this.turntableRotation;null!=t&&(e.yaw=t);const n=this.oldShadowIntensity;null!=n&&e.setShadowIntensity(n),e.setEnvironmentAndSkybox(element[Du],element[Pu]);const r=this.oldTarget;e.setTarget(r.x,r.y,r.z),e.xrCamera=null,e.element.removeEventListener("load",this.onUpdateScene),e.orientHotspots(0),element.requestUpdate("cameraTarget"),element.requestUpdate("maxCameraOrbit"),element[Ay](element.getBoundingClientRect()),requestAnimationFrame(()=>{e.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Sg.NONE}}))})}this.renderer.height=0;const n=this.exitWebXRButtonContainer;null!=n&&(n.classList.remove("enabled"),n.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const r=this.transientHitTestSource;null!=r&&(r.cancel(),this.transientHitTestSource=null);const o=this.initialHitSource;null!=o&&(o.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:Pg.NOT_PRESENTING})}updateView(view){const t=this.presentedScene,e=this.threeRenderer.xr;e.updateCamera(Qg),t.xrCamera=e.getCamera();const{elements:n}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(n[1],n[5])),this.initialized||(this.placeInitially(),this.initialized=!0),view.requestViewportScale&&view.recommendedViewportScale){const t=view.recommendedViewportScale;view.requestViewportScale(Math.max(t,Lg))}const r=e.getBaseLayer();if(null!=r){const t=r instanceof XRWebGLLayer?r.getViewport(view):e.getBinding().getViewSubImage(r,view).viewport;this.threeRenderer.setViewport(t.x,t.y,t.width,t.height)}}placeInitially(){const t=this.presentedScene,{position:e,element:element}=t,n=t.getCamera(),{width:r,height:o}=this.overlay.getBoundingClientRect();t.setSize(r,o),n.projectionMatrixInverse.copy(n.projectionMatrix).invert();const{theta:l,radius:c}=element.getCameraOrbit(),h=n.getWorldDirection(Fg);t.yaw=Math.atan2(-h.x,-h.z)-l,this.goalYaw=t.yaw,e.copy(n.position).add(h.multiplyScalar(c)),this.updateTarget();const d=t.getTarget();e.add(d).sub(this.oldTarget),this.goalPosition.copy(e),t.setHotspotsVisibility(!0);const{session:f}=this.frame;f.addEventListener("selectstart",this.onSelectStart),f.addEventListener("selectend",this.onSelectEnd),f.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(t=>{this.transientHitTestSource=t})}getTouchLocation(){const{axes:t}=this.inputSource.gamepad;let e=this.placementBox.getExpandedHit(this.presentedScene,t[0],t[1]);return null!=e&&(Fg.copy(e).sub(this.presentedScene.getCamera().position),Fg.length()>Dg)?null:e}getHitPoint(t){const e=this.threeRenderer.xr.getReferenceSpace(),n=t.getPose(e);if(null==n)return null;const r=Ng.fromArray(n.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(r.elements[4],r.elements[6])),r.elements[5]>.75!==this.placeOnWall?Ug.setFromMatrixPosition(r):null}moveToFloor(t){const e=this.initialHitSource;if(null==e)return;const n=t.getHitTestResults(e);if(0==n.length)return;const r=n[0],o=this.getHitPoint(r);null!=o&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(o):this.goalPosition.y=o.y),e.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:Pg.OBJECT_PLACED}))}fingerPolar(t){const e=t[0].inputSource.gamepad.axes,n=t[1].inputSource.gamepad.axes,r=n[0]-e[0],o=n[1]-e[1],l=Math.atan2(o,r);let c=this.lastAngle-l;return c>Math.PI?c-=2*Math.PI:c<-Math.PI&&(c+=2*Math.PI),this.lastAngle=l,{separation:Math.sqrt(r*r+o*o),deltaYaw:c}}processInput(t){const e=this.transientHitTestSource;if(null==e)return;if(!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const n=t.getHitTestResultsForTransientInput(e),r=this.presentedScene,o=r.scale.x;if(this.isTwoFingering)if(n.length<2)this.isTwoFingering=!1;else{const{separation:t,deltaYaw:e}=this.fingerPolar(n);if(!1===this.placeOnWall&&(this.goalYaw+=e),r.canScale){const e=t/this.firstRatio;this.goalScale=e<kg&&e>Rg?1:e}}else if(2!==n.length)if(this.isRotating){const t=this.inputSource.gamepad.axes[0]*Bg;this.goalYaw+=t-this.lastAngle,this.lastAngle=t}else this.isTranslating&&n.forEach(t=>{if(t.inputSource!==this.inputSource)return;let e=null;if(t.results.length>0&&(e=this.getHitPoint(t.results[0])),null==e&&(e=this.getTouchLocation()),null!=e){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){const t=e.y-this.lastDragPosition.y;if(t<0){this.placementBox.offsetHeight=t/o,this.presentedScene.setShadowOffset(t);const n=Fg.copy(r.getCamera().position),l=-t/(n.y-e.y);n.multiplyScalar(l),e.multiplyScalar(1-l).add(n)}}this.goalPosition.add(e),this.lastDragPosition.copy(e)}});else{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:t}=this.fingerPolar(n);this.firstRatio=t/o}}moveScene(t){const e=this.presentedScene,{position:n,yaw:r}=e,o=e.boundingSphere.radius,l=this.goalPosition,c=e.scale.x,h=this.placementBox;let source=Sg.NONE;if(!l.equals(n)||this.goalScale!==c){source=Sg.USER_INTERACTION;let{x:r,y:d,z:f}=n;r=this.xDamper.update(r,l.x,t,o),d=this.yDamper.update(d,l.y,t,o),f=this.zDamper.update(f,l.z,t,o),n.set(r,d,f);const m=this.scaleDamper.update(c,this.goalScale,t,1);if(e.scale.set(m,m,m),!this.isTranslating){const t=l.y-d;this.placementComplete&&!1===this.placeOnWall?(h.offsetHeight=t/m,e.setShadowOffset(t)):0===t&&(this.placementComplete=!0,h.show=!1,e.setShadowIntensity(Mg))}}h.updateOpacity(t),e.updateTarget(t),e.yaw=this.yawDamper.update(r,this.goalYaw,t,Math.PI),e.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:source}}))}onWebXRFrame(time,t){this.frame=t,++this.frames;const e=this.threeRenderer.xr.getReferenceSpace(),n=t.getViewerPose(e);null==n&&!0===this.tracking&&this.frames>Ig&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:Og.NOT_TRACKING}));const r=this.presentedScene;if(null==n||null==r||!r.element.loaded)return void this.threeRenderer.clear();!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:Og.TRACKING}));let o=!0;for(const view of n.views){if(this.updateView(view),o){this.moveToFloor(t),this.processInput(t);const e=time-this.lastTick;this.moveScene(e),this.renderer.preRender(r,time,e),this.lastTick=time,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),o=!1}}}class Gg{constructor(t){t.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:t,THREE:{ShaderMaterial:ts,Texture:Tn,Mesh:jr,Scene:Zo,PlaneGeometry:As,OrthographicCamera:Ms,WebGLRenderTarget:Rn}}}))})}addScene(t){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:t}}))}removeScene(t){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:t}}))}}function Hg(source){const t=new Map,e=new Map,n=source.clone();return function t(a,b,e){e(a,b);for(let i=0;i<a.children.length;i++)t(a.children[i],b.children[i],e)}(source,n,function(n,r){t.set(r,n),e.set(n,r)}),n.traverse(function(n){if(!n.isSkinnedMesh)return;const r=n,o=t.get(n),l=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=l.map(function(t){return e.get(t)}),r.bind(r.skeleton,r.bindMatrix)}),n}const Vg=Symbol("prepared"),jg=Symbol("prepare"),Wg=Symbol("preparedGLTF"),$g=Symbol("clone");class qg{constructor(t){this[Wg]=t}static prepare(source){if(null==source.scene)throw new Error("Model does not have a scene");if(source[Vg])return source;const t=this[jg](source);return t[Vg]=!0,t}static[jg](source){const{scene:t}=source,e=[t];return Object.assign(Object.assign({},source),{scene:t,scenes:e})}get parser(){return this[Wg].parser}get animations(){return this[Wg].animations}get scene(){return this[Wg].scene}get scenes(){return this[Wg].scenes}get cameras(){return this[Wg].cameras}get asset(){return this[Wg].asset}get userData(){return this[Wg].userData}clone(){return new(0,this.constructor)(this[$g]())}dispose(){this.scenes.forEach(t=>{t.traverse(object=>{if(!object.isMesh)return;const t=object;(Array.isArray(t.material)?t.material:[t.material]).forEach(t=>{for(const e in t){const n=t[e];if(n instanceof Tn){const image=n.source.data;null!=image.close&&image.close(),n.dispose()}}t.dispose()}),t.geometry.dispose()})})}[$g](){const source=this[Wg],t=Hg(this.scene);Yg(t,this.scene);const e=[t],n=source.userData?Object.assign({},source.userData):{};return Object.assign(Object.assign({},source),{scene:t,scenes:e,userData:n})}}const Yg=(t,e)=>{Xg(t,e,(t,e)=>{void 0!==e.userData.variantMaterials&&(t.userData.variantMaterials=new Map(e.userData.variantMaterials)),void 0!==e.userData.variantData&&(t.userData.variantData=e.userData.variantData),void 0!==e.userData.originalMaterial&&(t.userData.originalMaterial=e.userData.originalMaterial)})},Xg=(t,e,n)=>{n(t,e);for(let i=0;i<t.children.length;i++)Xg(t.children[i],e.children[i],n)},Kg=Symbol("threeGLTF"),Jg=Symbol("gltf"),Zg=Symbol("gltfElementMap"),tA=Symbol("threeObjectMap"),eA=Symbol("parallelTraverseThreeScene"),nA=Symbol("correlateOriginalThreeGLTF"),iA=Symbol("correlateCloneThreeGLTF");class rA{constructor(t,e,n,r){this[Kg]=t,this[Jg]=e,this[Zg]=r,this[tA]=n}static from(t,e){return null!=e?this[iA](t,e):this[nA](t)}static[nA](t){const e=t.parser.json,n=t.parser.associations,r=new Map,o={name:"Default"},l={type:"materials",index:-1};for(const t of n.keys())t instanceof Ji&&null==n.get(t)&&(l.index<0&&(null==e.materials&&(e.materials=[]),l.index=e.materials.length,e.materials.push(o)),t.name=o.name,n.set(t,{materials:l.index}));for(const[t,o]of n){if(o){const e=t;e.userData=e.userData||{},e.userData.associations=o}for(const n in o)if(null!=n&&"primitives"!==n){const l=n,c=(e[l]||[])[o[l]];if(null==c)continue;let h=r.get(c);null==h&&(h=new Set,r.set(c,h)),h.add(t)}}return new rA(t,e,n,r)}static[iA](t,e){const n=e.threeGLTF,r=e.gltf,o=JSON.parse(JSON.stringify(r)),l=new Map,c=new Map;for(let i=0;i<n.scenes.length;i++)this[eA](n.scenes[i],t.scenes[i],(object,t)=>{const n=e.threeObjectMap.get(object);if(null!=n)for(const e in n)if(null!=e&&"primitives"!==e){const r=e,h=n[r],d=o[r][h],f=l.get(t)||{};f[r]=h,l.set(t,f);const m=c.get(d)||new Set;m.add(t),c.set(d,m)}});return new rA(t,o,l,c)}static[eA](t,e,n){const r=(a,b)=>{if(n(a,b),a.isObject3D){if((object=>object.isMesh)(a))if(Array.isArray(a.material))for(let i=0;i<a.material.length;++i)r(a.material[i],b.material[i]);else r(a.material,b.material);for(let i=0;i<a.children.length;++i)r(a.children[i],b.children[i])}};r(t,e)}get threeGLTF(){return this[Kg]}get gltf(){return this[Jg]}get gltfElementMap(){return this[Zg]}get threeObjectMap(){return this[tA]}}const sA=Symbol("correlatedSceneGraph");class aA extends qg{static[jg](source){const t=super[jg](source);null==t[sA]&&(t[sA]=rA.from(t));const{scene:e}=t,n=new ii(void 0,1/0);return e.traverse(e=>{e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid);const r=e;if(r.isMesh){const{geometry:e}=r;r.castShadow=!0,r.isSkinnedMesh&&(e.boundingSphere=n,e.boundingBox=null);const o=r.material;if(!0===o.isMeshBasicMaterial&&(o.toneMapped=!1),o.shadowSide=y,o.aoMap){const{gltf:n,threeObjectMap:r}=t[sA],l=r.get(o);if(null!=n.materials&&null!=l&&null!=l.materials){const t=n.materials[l.materials];t.occlusionTexture&&0===t.occlusionTexture.texCoord&&null!=e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[Wg][sA]}[$g](){const t=super[$g](),e=new Map;return t.scene.traverse(t=>{if(t.isMesh){const n=t,r=n.material;if(null!=r){if(e.has(r.uuid))return void(n.material=e.get(r.uuid));n.material=r.clone(),e.set(r.uuid,n.material)}}}),t[sA]=rA.from(t,this.correlatedSceneGraph),t}}class oA extends Sc{constructor(t){super(t),this.type=Lt}parse(t){const e=function(t,e){switch(t){case 1:console.error("THREE.RGBELoader Read Error: "+(e||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(e||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(e||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(e||""))}return-1},n=function(t,e,n){e=e||1024;let p=t.pos,i=-1,r=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(t.subarray(p,p+128)));for(;0>(i=o.indexOf("\n"))&&r<e&&p<t.byteLength;)s+=o,r+=o.length,p+=128,o+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(p,p+128)));return-1<i&&(!1!==n&&(t.pos+=r+i+1),s+o.slice(0,i))},r=function(t,e,n,r){const o=t[e+3],l=Math.pow(2,o-128)/255;n[r+0]=t[e+0]*l,n[r+1]=t[e+1]*l,n[r+2]=t[e+2]*l,n[r+3]=1},o=function(t,e,n,r){const o=t[e+3],l=Math.pow(2,o-128)/255;n[r+0]=dr.toHalfFloat(Math.min(t[e+0]*l,65504)),n[r+1]=dr.toHalfFloat(Math.min(t[e+1]*l,65504)),n[r+2]=dr.toHalfFloat(Math.min(t[e+2]*l,65504)),n[r+3]=dr.toHalfFloat(1)},l=new Uint8Array(t);l.pos=0;const c=function(t){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,header={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let line,h;if(t.pos>=t.byteLength||!(line=n(t)))return e(1,"no header found");if(!(h=line.match(/^#\?(\S+)/)))return e(3,"bad initial token");for(header.valid|=1,header.programtype=h[1],header.string+=line+"\n";!1!==(line=n(t));)if(header.string+=line+"\n","#"!==line.charAt(0)){if((h=line.match(r))&&(header.gamma=parseFloat(h[1])),(h=line.match(o))&&(header.exposure=parseFloat(h[1])),(h=line.match(l))&&(header.valid|=2,header.format=h[1]),(h=line.match(c))&&(header.valid|=4,header.height=parseInt(h[1],10),header.width=parseInt(h[2],10)),2&header.valid&&4&header.valid)break}else header.comments+=line+"\n";return 2&header.valid?4&header.valid?header:e(3,"missing image size specifier"):e(3,"missing format specifier")}(l);if(-1!==c){const t=c.width,n=c.height,h=function(t,n,r){const o=n;if(o<8||o>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(o!==(t[2]<<8|t[3]))return e(3,"wrong scanline width");const l=new Uint8Array(4*n*r);if(!l.length)return e(4,"unable to allocate buffer space");let c=0,h=0;const d=4*o,f=new Uint8Array(4),m=new Uint8Array(d);let A=r;for(;A>0&&h<t.byteLength;){if(h+4>t.byteLength)return e(1);if(f[0]=t[h++],f[1]=t[h++],f[2]=t[h++],f[3]=t[h++],2!=f[0]||2!=f[1]||(f[2]<<8|f[3])!=o)return e(3,"bad rgbe scanline format");let n,r=0;for(;r<d&&h<t.byteLength;){const o=(n=t[h++])>128;if(o&&(n-=128),0===n||r+n>d)return e(3,"bad scanline data");if(o){const e=t[h++];for(let i=0;i<n;i++)m[r++]=e}else m.set(t.subarray(h,h+n),r),r+=n,h+=n}const v=o;for(let i=0;i<v;i++){let t=0;l[c]=m[i+t],t+=o,l[c+1]=m[i+t],t+=o,l[c+2]=m[i+t],t+=o,l[c+3]=m[i+t],c+=4}A--}return l}(l.subarray(l.pos),t,n);if(-1!==h){let data,e,l;switch(this.type){case Rt:l=h.length/4;const t=new Float32Array(4*l);for(let e=0;e<l;e++)r(h,4*e,t,4*e);data=t,e=Rt;break;case Lt:l=h.length/4;const n=new Uint16Array(4*l);for(let t=0;t<l;t++)o(h,4*t,n,4*t);data=n,e=Lt;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:t,height:n,data:data,header:c.string,gamma:c.gamma,exposure:c.exposure,type:e}}}return null}setDataType(t){return this.type=t,this}load(t,e,n,r){return super.load(t,function(t,n){switch(t.type){case Rt:case Lt:t.encoding=Ne,t.minFilter=wt,t.magFilter=wt,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,n)},n,r)}}class lA extends Zo{constructor(){super(),this.position.y=-3.5;const t=new $r;t.deleteAttribute("uv");const e=new Yl({metalness:0,side:x}),n=new Yl({metalness:0}),r=new Nc(16777215,500,28,2);r.position.set(.418,16.199,.3),this.add(r);const o=new jr(t,e);o.position.set(-.757,13.219,.717),o.scale.set(31.713,28.305,28.591),this.add(o);const l=new jr(t,n);l.position.set(-10.906,2.009,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),this.add(l);const c=new jr(t,n);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),this.add(c);const h=new jr(t,n);h.position.set(6.167,.857,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),this.add(h);const d=new jr(t,n);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),this.add(d);const f=new jr(t,n);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),this.add(f);const m=new jr(t,n);m.position.set(-2.193,-.369,-5.547),m.rotation.set(0,.516,0),m.scale.set(3.875,3.487,2.986),this.add(m);const A=new jr(t,this.createAreaLightMaterial(50));A.position.set(-16.116,14.37,8.208),A.scale.set(.1,2.428,2.739),this.add(A);const v=new jr(t,this.createAreaLightMaterial(50));v.position.set(-16.109,18.021,-8.207),v.scale.set(.1,2.425,2.751),this.add(v);const y=new jr(t,this.createAreaLightMaterial(17));y.position.set(14.904,12.198,-1.832),y.scale.set(.15,4.265,6.331),this.add(y);const _=new jr(t,this.createAreaLightMaterial(43));_.position.set(-.462,8.89,14.52),_.scale.set(4.38,5.441,.088),this.add(_);const w=new jr(t,this.createAreaLightMaterial(20));w.position.set(3.235,11.486,-12.541),w.scale.set(2.5,2,.1),this.add(w);const E=new jr(t,this.createAreaLightMaterial(100));E.position.set(0,20,0),E.scale.set(1,.1,1),this.add(E)}createAreaLightMaterial(t){const e=new ar;return e.color.setScalar(t),e}}class cA extends Zo{constructor(){super(),this.position.y=-3.5;const t=new $r;t.deleteAttribute("uv");const e=new Yl({metalness:0,side:x}),n=new Yl({metalness:0}),r=new Nc(16777215,400,28,2);r.position.set(.5,14,.5),this.add(r);const o=new jr(t,e);o.position.set(0,13.2,0),o.scale.set(31.5,28.5,31.5),this.add(o);const l=new jr(t,n);l.position.set(-10.906,-1,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),this.add(l);const c=new jr(t,n);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),this.add(c);const h=new jr(t,n);h.position.set(6.167,-.16,7.803),h.rotation.set(0,.561,0),h.scale.set(3.927,6.285,3.687),this.add(h);const d=new jr(t,n);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),this.add(d);const f=new jr(t,n);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),this.add(f);const m=new jr(t,n);m.position.set(-2.193,-.369,-5.547),m.rotation.set(0,.516,0),m.scale.set(3.875,3.487,2.986),this.add(m);const A=new jr(t,this.createAreaLightMaterial(80));A.position.set(-14,10,8),A.scale.set(.1,2.5,2.5),this.add(A);const v=new jr(t,this.createAreaLightMaterial(80));v.position.set(-14,14,-4),v.scale.set(.1,2.5,2.5),this.add(v);const y=new jr(t,this.createAreaLightMaterial(23));y.position.set(14,12,0),y.scale.set(.1,5,5),this.add(y);const _=new jr(t,this.createAreaLightMaterial(16));_.position.set(0,9,14),_.scale.set(5,5,.1),this.add(_);const w=new jr(t,this.createAreaLightMaterial(80));w.position.set(7,8,-14),w.scale.set(2.5,2.5,.1),this.add(w);const E=new jr(t,this.createAreaLightMaterial(80));E.position.set(-7,16,-14),E.scale.set(2.5,2.5,.1),this.add(E);const S=new jr(t,this.createAreaLightMaterial(1));S.position.set(0,20,0),S.scale.set(.1,.1,.1),this.add(S)}createAreaLightMaterial(t){const e=new ar;return e.color.setScalar(t),e}}const hA=.04,uA=20,dA=/\.hdr(\.js)?$/;class pA extends Ke{constructor(t){super(),this.threeRenderer=t,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return null==this._ldrLoader&&(this._ldrLoader=new Cc),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return null==this._hdrLoader&&(this._hdrLoader=new oA,this._hdrLoader.setDataType(Lt)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(null==this._lottieLoader){const{LottieLoader:t}=await n(216)(this.lottieLoaderUrl);this._lottieLoader=new t}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(t){const e=await new Promise((e,n)=>this.ldrLoader.load(t,e,()=>{},n));return e.name=t,e.flipY=!1,e}async loadLottie(t,e){const n=await this.getLottieLoader();n.setQuality(e);const r=await new Promise((e,r)=>n.load(t,e,()=>{},r));return r.name=t,r}async loadEquirect(t,e=(()=>{})){try{const n=dA.test(t),r=n?this.hdrLoader:this.ldrLoader,o=await new Promise((n,o)=>r.load(t,n,t=>{e(t.loaded/t.total*.9)},o));return e(1),o.name=t,o.mapping=ft,n||(o.encoding=Ue),o}finally{e&&e(1)}}async generateEnvironmentMapAndSkybox(t=null,e=null,n=(()=>{})){const r="legacy"!==e;"legacy"!==e&&"neutral"!==e||(e=null),e=bu(e);let o,l=Promise.resolve(null);t&&(l=this.loadEquirectFromUrl(t,n)),o=e?this.loadEquirectFromUrl(e,n):t?this.loadEquirectFromUrl(t,n):r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[c,h]=await Promise.all([o,l]);if(null==c)throw new Error("Failed to load environment map.");return{environmentMap:c,skybox:h}}async loadEquirectFromUrl(t,e){if(!this.skyboxCache.has(t)){const n=this.loadEquirect(t,e);this.skyboxCache.set(t,n)}return this.skyboxCache.get(t)}async GenerateEnvironmentMap(t,e){await Iu();const n=this.threeRenderer,r=new os(256,{generateMipmaps:!1,type:Lt,format:Nt,encoding:Ne,depthBuffer:!0}),o=new ss(.1,100,r),l=o.renderTarget.texture;l.name=e;const c=n.outputEncoding,h=n.toneMapping;return n.toneMapping=it,n.outputEncoding=Ne,o.update(n,t),this.blurCubemap(r,hA),n.toneMapping=h,n.outputEncoding=c,l}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new lA,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new cA,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(t,e){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(uA);const t=new $r,e=new jr(t,this.blurMaterial);this.blurScene=new Zo,this.blurScene.add(e)}const n=t.clone();this.halfblur(t,n,e,"latitudinal"),this.halfblur(n,t,e,"longitudinal")}halfblur(t,e,n,r){const o=t.width,l=isFinite(n)?Math.PI/(2*o):2*Math.PI/(2*uA-1),c=n/l,h=isFinite(n)?1+Math.floor(3*c):uA;h>uA&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${h} samples when the maximum is set to ${uA}`);const d=[];let f=0;for(let i=0;i<uA;++i){const t=i/c,e=Math.exp(-t*t/2);d.push(e),0==i?f+=e:i<h&&(f+=2*e)}for(let i=0;i<d.length;i++)d[i]=d[i]/f;const m=this.blurMaterial.uniforms;m.envMap.value=t.texture,m.samples.value=h,m.weights.value=d,m.latitudinal.value="latitudinal"===r,m.dTheta.value=l,new ss(.1,100,e).update(this.threeRenderer,this.blurScene)}getBlurShader(t){const e=new Float32Array(t),n=new On(0,1,0);return new ts({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:n}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:w,depthTest:!1,depthWrite:!1,side:x})}async dispose(){for(const[,t]of this.skyboxCache){(await t).dispose()}null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}}const fA=.2,mA=40,gA=60,AA=5,vA=[1,.79,.62,.5,.4,.31,.25],bA=3,yA="high-performance";class xA extends Ke{constructor(t){super(),this.loader=new vp(aA),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=bA,this.avgFrameDuration=(gA+mA)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;null===(t=this.textureUtils)||void 0===t||t.dispose(),this.textureUtils=new pA(this.threeRenderer);for(const t of this.scenes)t.element[Ou]()},this.dpr=Su(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Jo({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:t.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=Ue,this.threeRenderer.useLegacyLights=!1,this.threeRenderer.setPixelRatio(1),this.debugger=t.debug?new Gg(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=lt}catch(t){console.warn(t)}this.arRenderer=new zg(this),this.textureUtils=this.canRender?new pA(this.threeRenderer):null,vp.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const t=this._singleton.dispose();for(const element of t)element.disconnectedCallback();this._singleton=new xA({powerPreference:(self.ModelViewerElement||{}).powerPreference||yA,debug:Cu()});for(const element of t)element.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return vA[this.scaleStep]}set minScale(t){let i=1;for(;i<vA.length&&!(vA[i]<t);)++i;this.lastStep=i-1}registerScene(t){this.scenes.add(t),t.forceRescale();const e=new pn;this.threeRenderer.getSize(e),t.canvas.width=e.x,t.canvas.height=e.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((time,t)=>this.render(time,t)),null!=this.debugger&&this.debugger.addScene(t)}unregisterScene(t){this.scenes.delete(t),this.canvas3D.parentElement===t.canvas.parentElement&&t.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(t)}displayCanvas(t){return this.multipleScenesVisible?t.element[dy]:this.canvas3D}countVisibleScenes(){const{canvas3D:t}=this;let e=0,n=null;for(const r of this.scenes){const{element:element}=r;element.modelIsVisible&&null==r.externalRenderer&&++e,t.parentElement===r.canvas.parentElement&&(n=r)}const r=e>1;if(null!=n){const e=r&&!this.multipleScenesVisible,o=!n.element.modelIsVisible;if(e||o){const{width:e,height:r}=this.sceneSize(n);this.copyPixels(n,e,r),t.parentElement.removeChild(t)}}this.multipleScenesVisible=r}updateRendererSize(){const t=Su();if(t!==this.dpr)for(const t of this.scenes){const{element:element}=t;element[Zb](element.getBoundingClientRect())}let e=0,n=0;for(const t of this.scenes)e=Math.max(e,t.width),n=Math.max(n,t.height);if(e!==this.width||n!==this.height||t!==this.dpr){this.width=e,this.height=n,this.dpr=t,e=Math.ceil(e*t),n=Math.ceil(n*t),this.canRender&&this.threeRenderer.setSize(e,n,!1);for(const t of this.scenes){const{canvas:canvas}=t;canvas.width=e,canvas.height=n,t.forceRescale()}}}updateRendererScale(t){const e=this.scaleStep;this.avgFrameDuration+=Eu(fA*(t-this.avgFrameDuration),-AA,AA),this.avgFrameDuration>gA?++this.scaleStep:this.avgFrameDuration<mA&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),e!==this.scaleStep&&(this.avgFrameDuration=(gA+mA)/2)}shouldRender(t){if(t.shouldRender())t.scaleStep!=this.scaleStep&&(t.scaleStep=this.scaleStep,this.rescaleCanvas(t));else{if(0==t.scaleStep)return!1;t.scaleStep=0,this.rescaleCanvas(t)}return!0}rescaleCanvas(t){const e=vA[t.scaleStep],n=Math.ceil(this.width/e),r=Math.ceil(this.height/e),{style:style}=t.canvas;style.width=`${n}px`,style.height=`${r}px`,this.canvas3D.style.width=`${n}px`,this.canvas3D.style.height=`${r}px`;const o=this.dpr*e,l=e<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";t.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:o,minimumDpr:this.dpr*vA[this.lastStep],pixelWidth:Math.ceil(t.width*o),pixelHeight:Math.ceil(t.height*o),reason:l}}))}sceneSize(t){const{dpr:e}=this,n=vA[t.scaleStep];return{width:Math.min(Math.ceil(t.width*n*e),this.canvas3D.width),height:Math.min(Math.ceil(t.height*n*e),this.canvas3D.height)}}copyPixels(t,e,n){const r=t.context;null!=r?(r.clearRect(0,0,e,n),r.drawImage(this.canvas3D,0,0,e,n,0,0,e,n),t.canvas.classList.add("show")):console.log("could not acquire 2d context")}orderedScenes(){const t=[];for(const e of[!1,!0])for(const n of this.scenes)n.element.modelIsVisible===e&&t.push(n);return t}get isPresenting(){return this.arRenderer.isPresenting}preRender(t,e,n){const{element:element,exposure:r}=t;element[my](e,n);const o="number"==typeof r&&!Number.isNaN(r);this.threeRenderer.toneMappingExposure=o?r:1}render(t,e){if(null!=e)return void this.arRenderer.onWebXRFrame(t,e);const n=t-this.lastTick;if(this.lastTick=t,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(n),this.renderedLastFrame=!1);const{canvas3D:r}=this;for(const e of this.orderedScenes()){const{element:element}=e;if(!element.loaded||!element.modelIsVisible&&e.renderCount>0)continue;if(this.preRender(e,t,n),!this.shouldRender(e))continue;if(null!=e.externalRenderer){const t=e.getCamera();t.updateMatrix();const{matrix:n,projectionMatrix:r}=t,o=n.elements.slice(),l=e.getTarget();o[12]+=l.x,o[13]+=l.y,o[14]+=l.z,e.externalRenderer.render({viewMatrix:o,projectionMatrix:r.elements});continue}if(!element.modelIsVisible&&!this.multipleScenesVisible)for(const t of this.scenes)t.element.modelIsVisible&&t.queueRender();const{width:o,height:l}=this.sceneSize(e);e.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-l,o,l),this.threeRenderer.render(e,e.camera),this.multipleScenesVisible||!e.element.modelIsVisible&&0===e.renderCount?this.copyPixels(e,o,l):r.parentElement!==e.canvas.parentElement&&(e.canvas.parentElement.appendChild(r),e.canvas.classList.remove("show")),e.hasRendered(),++e.renderCount,this.renderedLastFrame=!0}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const t=[];for(const e of this.scenes)t.push(e.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),t}}xA._singleton=new xA({powerPreference:(self.ModelViewerElement||{}).powerPreference||yA,debug:Cu()});const _A=Symbol("correlatedObjects"),wA=Symbol("sourceObject"),EA=Symbol("onUpdate");class SA{constructor(t,element,e=null){this[EA]=t,this[wA]=element,this[_A]=e}}const CA=new ar,IA=new As(2,2);let MA=0;const BA=Symbol("threeTexture");Symbol("applyTexture");class TA extends SA{get[BA](){var t;return console.assert(null!=this[_A]&&this[_A].size>0,"Image correlated object is undefined"),null===(t=this[_A])||void 0===t?void 0:t.values().next().value}constructor(t,e,n){super(t,n=null!=n?n:{name:e&&e.image&&e.image.src?e.image.src.split("/").pop():"adhoc_image",uri:e&&e.image&&e.image.src?e.image.src:"adhoc_image"+MA++},new Set(e?[e]:[]))}get name(){return this[wA].name||""}get uri(){return this[wA].uri}get bufferView(){return this[wA].bufferView}get element(){const t=this[BA];if(t&&(t.isCanvasTexture||t.isVideoTexture))return t.image}get animation(){const t=this[BA];if(t&&t.isCanvasTexture&&t.animation)return t.animation}get type(){return null!=this.uri?"external":"embedded"}set name(t){this[wA].name=t}update(){const t=this[BA];t&&t.isCanvasTexture&&!t.animation&&(this[BA].needsUpdate=!0,this[EA]())}async createThumbnail(t,e){const n=new Zo;CA.map=this[BA];const r=new jr(IA,CA);n.add(r);const o=new Ms(-1,1,1,-1,0,1),{threeRenderer:l}=xA.singleton,c=new Rn(t,e);l.setRenderTarget(c),l.render(n,o),l.setRenderTarget(null);const h=new Uint8Array(t*e*4);l.readRenderTargetPixels(c,0,0,t,e,h),Hb.width=t,Hb.height=e;const d=Hb.getContext("2d"),f=d.createImageData(t,e);return f.data.set(h),d.putImageData(f,0,0),new Promise(async(t,e)=>{Hb.toBlob(n=>{if(!n)return e("Failed to capture thumbnail.");t(URL.createObjectURL(n))},"image/png")})}}var kA,RA;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.NearestMipmapNearest=9984]="NearestMipmapNearest",t[t.LinearMipmapNearest=9985]="LinearMipmapNearest",t[t.NearestMipmapLinear=9986]="NearestMipmapLinear",t[t.LinearMipmapLinear=9987]="LinearMipmapLinear"}(kA||(kA={})),function(t){t[t.ClampToEdge=33071]="ClampToEdge",t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.Repeat=10497]="Repeat"}(RA||(RA={}));const LA=(()=>{const t=[kA.Nearest,kA.Linear,kA.NearestMipmapNearest,kA.LinearMipmapLinear,kA.NearestMipmapLinear,kA.LinearMipmapLinear];return e=>t.indexOf(e)>-1})(),DA=(()=>{const t=[kA.Nearest,kA.Linear];return e=>t.indexOf(e)>-1})(),PA=(()=>{const t=[RA.ClampToEdge,RA.MirroredRepeat,RA.Repeat];return e=>t.indexOf(e)>-1})(),OA=(t,e)=>{switch(t){case"minFilter":return LA(e);case"magFilter":return DA(e);case"wrapS":case"wrapT":return PA(e);default:throw new Error(`Cannot configure property "${t}" on Sampler`)}},FA=Symbol("threeTextures"),NA=Symbol("setProperty"),UA=Symbol("sourceSampler");class QA extends SA{get[FA](){return console.assert(null!=this[_A]&&this[_A].size>0,"Sampler correlated object is undefined"),this[_A]}get[UA](){return console.assert(null!=this[wA],"Sampler source is undefined"),this[wA]}constructor(t,e,n){null==(n=null!=n?n:{}).minFilter&&(n.minFilter=e?e.minFilter:kA.LinearMipmapLinear),null==n.magFilter&&(n.magFilter=e?e.magFilter:kA.Linear),null==n.wrapS&&(n.wrapS=e?e.wrapS:RA.Repeat),null==n.wrapT&&(n.wrapT=e?e.wrapT:RA.Repeat),super(t,n,new Set(e?[e]:[]))}get name(){return this[wA].name||""}get minFilter(){return this[UA].minFilter}get magFilter(){return this[UA].magFilter}get wrapS(){return this[UA].wrapS}get wrapT(){return this[UA].wrapT}setMinFilter(filter){this[NA]("minFilter",filter)}setMagFilter(filter){this[NA]("magFilter",filter)}setWrapS(t){this[NA]("wrapS",t)}setWrapT(t){this[NA]("wrapT",t)}[NA](t,e){const n=this[UA];if(null!=n){if(OA(t,e)){n[t]=e;for(const n of this[FA])n[t]=e,n.needsUpdate=!0}this[EA]()}}}const zA=Symbol("image"),GA=Symbol("sampler");class HA extends SA{constructor(t,e,n=null,r=null,o=null){super(t,n||{},new Set(e?[e]:[])),this[GA]=new QA(t,e,r),this[zA]=new TA(t,e,o)}get name(){return this[wA].name||""}set name(t){this[wA].name=t}get sampler(){return this[GA]}get source(){return this[zA]}}var VA,jA,WA;const $A=Symbol("texture"),qA=Symbol("transform"),YA=Symbol("materials"),XA=Symbol("usage"),KA=Symbol("onUpdate"),JA=Symbol("activeVideo");var ZA;!function(t){t[t.Base=0]="Base",t[t.MetallicRoughness=1]="MetallicRoughness",t[t.Normal=2]="Normal",t[t.Occlusion=3]="Occlusion",t[t.Emissive=4]="Emissive"}(ZA||(ZA={}));class tv{constructor(t,e,n,r,o,l){if(this[VA]=null,this[jA]={rotation:0,scale:new pn(1,1),offset:new pn(0,0)},this[WA]=!1,l&&n){const e=o.textures?o.textures[l.index]:null,r=e&&o.samplers?o.samplers[e.sampler]:null,image=e&&o.images?o.images[e.source]:null;this[qA].rotation=n.rotation,this[qA].scale.copy(n.repeat),this[qA].offset.copy(n.offset),this[$A]=new HA(t,n,e,r,image)}this[KA]=t,this[YA]=r,this[XA]=e}get texture(){return this[$A]}setTexture(t){var e,n;const r=null!=t?t.source[BA]:null,o=null===(e=this[$A])||void 0===e?void 0:e.source[BA];if(null!=o&&o.isVideoTexture?this[JA]=!1:(null===(n=this[$A])||void 0===n?void 0:n.source.animation)&&this[$A].source.animation.removeEventListener("enterFrame",this[KA]),this[$A]=t,null!=r&&r.isVideoTexture){const element=r.image;if(this[JA]=!0,null!=element.requestVideoFrameCallback){const t=()=>{this[JA]&&(this[KA](),element.requestVideoFrameCallback(t))};element.requestVideoFrameCallback(t)}else{const t=()=>{this[JA]&&(this[KA](),requestAnimationFrame(t))};requestAnimationFrame(t)}}else null!=(null==t?void 0:t.source.animation)&&t.source.animation.addEventListener("enterFrame",this[KA]);let l=Ue;if(this[YA])for(const t of this[YA]){switch(this[XA]){case ZA.Base:t.map=r;break;case ZA.MetallicRoughness:l=Ne,t.metalnessMap=r,t.roughnessMap=r;break;case ZA.Normal:l=Ne,t.normalMap=r;break;case ZA.Occlusion:l=Ne,t.aoMap=r;break;case ZA.Emissive:t.emissiveMap=r}t.needsUpdate=!0}r&&(r.encoding=l,r.rotation=this[qA].rotation,r.repeat=this[qA].scale,r.offset=this[qA].offset),this[KA]()}}VA=$A,jA=qA,WA=JA;const ev=Symbol("threeMaterials"),nv=Symbol("baseColorTexture"),iv=Symbol("metallicRoughnessTexture");class rv extends SA{constructor(t,e,n,r){super(t,n,r),null==n.baseColorFactor&&(n.baseColorFactor=[1,1,1,1]),null==n.roughnessFactor&&(n.roughnessFactor=1),null==n.metallicFactor&&(n.metallicFactor=1);const{baseColorTexture:o,metallicRoughnessTexture:l}=n,{map:map,metalnessMap:c}=r.values().next().value;this[nv]=new tv(t,ZA.Base,map,r,e,o||null),this[iv]=new tv(t,ZA.MetallicRoughness,c,r,e,l||null)}get[ev](){return this[_A]}get baseColorFactor(){return this[wA].baseColorFactor}get metallicFactor(){return this[wA].metallicFactor}get roughnessFactor(){return this[wA].roughnessFactor}get baseColorTexture(){return this[nv]}get metallicRoughnessTexture(){return this[iv]}setBaseColorFactor(t){const e=new rr;t instanceof Array?e.fromArray(t):e.set(t).convertSRGBToLinear();for(const n of this[ev])n.color.set(e),t instanceof Array?n.opacity=t[3]:(t=[0,0,0,n.opacity],e.toArray(t));this[wA].baseColorFactor=t,this[EA]()}setMetallicFactor(t){for(const e of this[ev])e.metalness=t;this[wA].metallicFactor=t,this[EA]()}setRoughnessFactor(t){for(const e of this[ev])e.roughness=t;this[wA].roughnessFactor=t,this[EA]()}}var sv;const av=Symbol("pbrMetallicRoughness"),ov=Symbol("normalTexture"),lv=Symbol("occlusionTexture"),cv=Symbol("emissiveTexture"),hv=Symbol("backingThreeMaterial"),uv=Symbol("applyAlphaCutoff"),dv=Symbol("lazyLoadGLTFInfo"),pv=Symbol("initialize"),fv=Symbol("getLoadedMaterial"),mv=Symbol("ensureMaterialIsLoaded"),gv=Symbol("gltfIndex"),Av=Symbol("setActive"),vv=Symbol("variantIndices"),bv=Symbol("isActive"),yv=Symbol("variantSet"),xv=Symbol("modelVariants");class _v extends SA{constructor(t,e,n,r,o,l,c,h){super(t,n,c),this[sv]=new Set,this[gv]=r,this[bv]=o,this[xv]=l,null==h?this[pv](e):this[dv]=h}get[(sv=yv,hv)](){return this[_A].values().next().value}[pv](t){const e=this[EA],n=this[wA],r=this[_A];n.extensions&&n.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${n.name} uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          no longer supported; to convert to metal-rough, see \n          https://www.donmccurdy.com/2022/11/28/converting-gltf-pbr-materials-from-specgloss-to-metalrough/.`),null==n.pbrMetallicRoughness&&(n.pbrMetallicRoughness={}),this[av]=new rv(e,t,n.pbrMetallicRoughness,r),null==n.emissiveFactor&&(n.emissiveFactor=[0,0,0]),null==n.doubleSided&&(n.doubleSided=!1),null==n.alphaMode&&(n.alphaMode="OPAQUE"),null==n.alphaCutoff&&(n.alphaCutoff=.5);const{normalTexture:o,occlusionTexture:l,emissiveTexture:c}=n,{normalMap:h,aoMap:d,emissiveMap:f}=r.values().next().value;this[ov]=new tv(e,ZA.Normal,h,r,t,o||null),this[lv]=new tv(e,ZA.Occlusion,d,r,t,l||null),this[cv]=new tv(e,ZA.Emissive,f,r,t,c||null)}async[fv](){if(null!=this[dv]){const{set:t,material:e}=await this[dv].doLazyLoad();return this[_A]=t,this[pv](this[dv].gltf),this[dv]=void 0,this.ensureLoaded=async()=>{},e}return this[_A].values().next().value}[mv](){if(null!=this[dv])throw new Error(`Material "${this.name}" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[fv]()}get isLoaded(){return null==this[dv]}get isActive(){return this[bv]}[Av](t){this[bv]=t}get name(){return this[wA].name}set name(t){const e=this[wA];if(null!=e&&(e.name=t),null!=this[_A])for(const e of this[_A])e.name=t}get pbrMetallicRoughness(){return this[mv](),this[av]}get normalTexture(){return this[mv](),this[ov]}get occlusionTexture(){return this[mv](),this[lv]}get emissiveTexture(){return this[mv](),this[cv]}get emissiveFactor(){return this[mv](),this[wA].emissiveFactor}get index(){return this[gv]}[vv](){return this[yv]}hasVariant(t){const e=this[xv].get(t);return null!=e&&this[yv].has(e.index)}setEmissiveFactor(t){this[mv]();const e=new rr;t instanceof Array?e.fromArray(t):e.set(t).convertSRGBToLinear();for(const t of this[_A])t.emissive.set(e);this[wA].emissiveFactor=e.toArray(),this[EA]()}[uv](){this[mv]();const t=this[wA];for(const e of this[_A])"MASK"===this[wA].alphaMode?e.alphaTest=t.alphaCutoff:e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(t){this[mv](),this[wA].alphaCutoff=t,this[uv](),this[EA]()}getAlphaCutoff(){return this[mv](),this[wA].alphaCutoff}setDoubleSided(t){this[mv]();for(const e of this[_A])e.side=t?_:y,e.needsUpdate=!0;this[wA].doubleSided=t,this[EA]()}getDoubleSided(){return this[mv](),this[wA].doubleSided}setAlphaMode(t){this[mv]();const e=(t,e)=>{t.transparent=e,t.depthWrite=!e};this[wA].alphaMode=t;for(const n of this[_A])e(n,"BLEND"===t),this[uv](),n.needsUpdate=!0;this[EA]()}getAlphaMode(){return this[mv](),this[wA].alphaMode}}class wv{constructor(t){this.name="",this.children=new Array,this.name=t}}class Ev extends wv{constructor(t,e,n,r){super(t.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=t;const{gltf:o,threeGLTF:l,threeObjectMap:c}=r;this.modelVariants=n,this.mesh.userData.variantData=n;const h=c.get(t.material);null!=h.materials?this.initialMaterialIdx=this.activeMaterialIdx=h.materials:console.error(`Primitive (${t.name}) missing initial material reference.`);const d=t.userData.associations||{};if(null==d.meshes)return void console.error("Mesh is missing primitive index association");const f=((o.meshes||[])[d.meshes].primitives||[])[d.primitives];if(null!=f){if(null!=f.material)this.materials.set(f.material,e[f.material]);else{const t=e.findIndex(t=>"Default"===t.name);t>=0?this.materials.set(t,e[t]):console.warn("gltfPrimitive has no material!")}if(f.extensions&&f.extensions.KHR_materials_variants){const t=f.extensions.KHR_materials_variants,r=l.parser.json.extensions.KHR_materials_variants.variants;for(const o of t.mappings){const t=e[o.material];this.materials.set(o.material,t);for(const e of o.variants){const{name:o}=r[e];this.variantToMaterialMap.set(e,t),t[vv]().add(e),n.has(o)||n.set(o,{name:o,index:e})}}}}else console.error("Mesh primitive definition is missing.")}async setActiveMaterial(t){const e=this.materials.get(t);return null!=e&&(this.mesh.material=await e[fv](),this.activeMaterialIdx=t),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(t){return this.materials.get(t)}async enableVariant(t){if(null==t)return this.setActiveMaterial(this.initialMaterialIdx);if(null!=this.variantToMaterialMap&&this.modelVariants.has(t)){const e=this.modelVariants.get(t);return this.enableVariantHelper(e.index)}return null}async enableVariantHelper(t){if(null!=this.variantToMaterialMap&&null!=t){const e=this.variantToMaterialMap.get(t);if(null!=e)return this.setActiveMaterial(e.index)}return null}async instantiateVariants(){if(null!=this.variantToMaterialMap)for(const t of this.variantToMaterialMap.keys()){const e=this.mesh.userData.variantMaterials.get(t);if(null!=e.material)continue;const n=await this.enableVariantHelper(t);null!=n&&(e.material=n)}}get variantInfo(){return this.variantToMaterialMap}addVariant(t,e){if(!this.ensureVariantIsUnused(e))return!1;this.modelVariants.has(e)||this.modelVariants.set(e,{name:e,index:this.modelVariants.size});const n=this.modelVariants.get(e).index;return t[vv]().add(n),this.variantToMaterialMap.set(n,t),this.materials.set(t.index,t),this.updateVariantUserData(n,t),!0}deleteVariant(t){if(this.variantInfo.has(t)){this.variantInfo.delete(t);const e=this.mesh.userData.variantMaterials;null!=e&&e.delete(t)}}updateVariantUserData(t,e){e[vv]().add(t),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(t,{material:e[_A].values().next().value,gltfMaterialIndex:e.index})}ensureVariantIsUnused(t){const e=this.modelVariants.get(t);return null==e||!this.variantInfo.has(e.index)||(console.warn(`Primitive cannot add variant '${t}' for this material, it already exists.`),!1)}}var Sv,Cv,Iv,Mv,Bv,Tv;const kv=Symbol("materials"),Rv=Symbol("hierarchy"),Lv=Symbol("roots"),Dv=Symbol("primitives"),Pv=(Symbol("loadVariant"),Symbol("correlatedSceneGraph")),Ov=Symbol("prepareVariantsForExport"),Fv=Symbol("switchVariant"),Nv=Symbol("materialFromPoint"),Uv=Symbol("nodeFromPoint"),Qv=Symbol("nodeFromIndex"),zv=Symbol("variantData"),Gv=Symbol("availableVariants"),Hv=Symbol("modelOnUpdate"),Vv=Symbol("cloneMaterial");class jv{constructor(t,e,n,r){this.gltf=t,this.gltfElementMap=e,this.mapKey=n,this.doLazyLoad=r}}class Wv{constructor(t,e=(()=>{})){this[Sv]=new Array,this[Cv]=new Array,this[Iv]=new Array,this[Mv]=new Array,this[Bv]=()=>{},this[Tv]=new Map,this[Hv]=e,this[Pv]=t;const{gltf:n,threeGLTF:r,gltfElementMap:o}=t;for(const[i,t]of n.materials.entries()){const l=o.get(t);if(null!=l)this[kv].push(new _v(e,n,t,i,!0,this[zv],l));else{const t=(n.materials||[])[i],c=i,h=async()=>{const e=await r.parser.getDependency("material",c),n=new Set;return o.set(t,n),n.add(e),{set:n,material:e}};this[kv].push(new _v(e,n,t,i,!1,this[zv],l,new jv(n,o,t,h)))}}const l=new Map,c=new Array;for(const object of r.scene.children)c.push(object);for(;c.length>0;){const object=c.pop();let e=null;object instanceof jr?(e=new Ev(object,this.materials,this[zv],t),this[Dv].push(e)):e=new wv(object.name);const n=l.get(object);null!=n?n.children.push(e):this[Lv].push(e),this[Rv].push(e);for(const t of object.children)c.push(t),l.set(object,e)}}get materials(){return this[kv]}[(Sv=kv,Cv=Rv,Iv=Lv,Mv=Dv,Bv=Hv,Tv=zv,Gv)](){const t=Array.from(this[zv].values());return t.sort((a,b)=>a.index-b.index),t.map(data=>data.name)}getMaterialByName(t){const e=this[kv].filter(e=>e.name===t);return e.length>0?e[0]:null}[Qv](t,e){const n=this[Rv].find(n=>{if(n instanceof Ev){const{meshes:r,primitives:o}=n.mesh.userData.associations;if(r==t&&o==e)return!0}return!1});return null==n?null:n}[Uv](t){return this[Rv].find(e=>{if(e instanceof Ev){if(e.mesh===t.object)return!0}return!1})}[Nv](t){return this[Uv](t).getActiveMaterial()}async[Fv](t){for(const e of this[Dv])await e.enableVariant(t);for(const t of this.materials)t[Av](!1);for(const t of this[Dv])this.materials[t.getActiveMaterial().index][Av](!0)}async[Ov](){const t=new Array;for(const e of this[Dv])t.push(e.instantiateVariants());await Promise.all(t)}[Vv](t,e){const n=this.materials[t];n.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");const r=n[_A],o=JSON.parse(JSON.stringify(n[wA]));o.name=e,this[Pv].gltf.materials.push(o);const l=new Set;for(const[i,t]of r.entries()){const n=t.clone();n.name=e+(r.size>1?"_inst"+i:""),l.add(n)}const c=new _v(this[Hv],this[Pv].gltf,o,this[kv].length,!1,this[zv],l);return this[kv].push(c),c}createMaterialInstanceForVariant(t,e,n,r=!0){let o=null;for(const r of this[Dv]){const l=this[zv].get(n);null!=l&&r.variantInfo.has(l.index)||null!=r.getMaterial(t)&&(this.hasVariant(n)||this.createVariant(n),null==o&&(o=this[Vv](t,e)),r.addVariant(o,n))}if(r&&null!=o){o[Av](!0),this.materials[t][Av](!1);for(const t of this[Dv])t.enableVariant(n)}return o}createVariant(t){this[zv].has(t)?console.warn(`Variant '${t}'' already exists`):this[zv].set(t,{name:t,index:this[zv].size})}hasVariant(t){return this[zv].has(t)}setMaterialToVariant(t,e){if(null!=this[Gv]().find(t=>t===e))if(t<0||t>=this.materials.length)console.error("setMaterialToVariant(): materialIndex is out of bounds.");else for(const n of this[Dv]){const r=n.getMaterial(t);null!=r&&n.addVariant(r,e)}else console.warn(`Can't add material to '${e}', the variant does not exist.'`)}updateVariantName(t,e){const n=this[zv].get(t);null!=n&&(n.name=e,this[zv].set(e,n),this[zv].delete(t))}deleteVariant(t){const e=this[zv].get(t);if(null!=e){for(const n of this.materials)n.hasVariant(t)&&n[yv].delete(e.index);for(const t of this[Dv])t.deleteVariant(e.index);this[zv].delete(t)}}}var $v=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const qv=Symbol("currentGLTF"),Yv=Symbol("originalGltfJson"),Xv=Symbol("model"),Kv=Symbol("getOnUpdateMethod"),Jv=Symbol("buildTexture"),Zv=new On,tb=new On,eb=new On,nb=new fn,ib=new Xi,rb=new Pn;class sb extends bp{constructor(t){super(document.createElement("div")),this.normal=new On(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=t.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(t.position),this.updateNormal(t.normal),this.surface=t.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){!this.facingCamera&&this.initialized||this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(t){if(null==t)return;const e=bf(t)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,Tf(e[i]).number);this.updateMatrixWorld()}updateNormal(t){if(null==t)return;const e=bf(t)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,e[i].number)}updateSurface(t){if(!t&&this.initialized)return;const{mesh:e,tri:n,bary:r}=this;if(null==e||null==n||null==r)return;e.getVertexPosition(n.x,Zv),e.getVertexPosition(n.y,tb),e.getVertexPosition(n.z,eb),Zv.toArray(nb.elements,0),tb.toArray(nb.elements,3),eb.toArray(nb.elements,6),this.position.copy(r).applyMatrix3(nb);const o=this.parent;o.worldToLocal(e.localToWorld(this.position)),ib.set(Zv,tb,eb),ib.getNormal(this.normal).transformDirection(e.matrixWorld);const l=o.parent;rb.setFromAxisAngle(Zv.set(0,1,0),-l.yaw),this.normal.applyQuaternion(rb)}orient(t){this.pivot.style.transform=`rotate(${t}rad)`}updateVisibility(t){t?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(e=>{if(e.nodeType!==Node.ELEMENT_NODE)return;const element=e,n=element.dataset.visibilityAttribute;if(null!=n){const e=`data-${n}`;t?element.setAttribute(e,""):element.removeAttribute(e)}element.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:t}}))}),this.initialized=!0}}const ab={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"},ob={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"};Math.PI,Math.PI;function lb(t,e,n){return(1-n)*t+n*e}const cb=9,hb=6,ub=2,db=.3;class pb extends Ni{constructor(t,e,n){super(),this.camera=new Ms,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Po,this.horizontalBlurMaterial=new ts(ab),this.verticalBlurMaterial=new ts(ob),this.intensity=0,this.softness=1,this.boundingBox=new Un,this.size=new On,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:r}=this;r.rotation.x=Math.PI/2,r.left=-.5,r.right=.5,r.bottom=-.5,r.top=.5,this.add(r);const o=new As,l=new ar({opacity:1,transparent:!0,side:x});this.floor=new jr(o,l),this.floor.userData.shadow=!0,r.add(this.floor),this.blurPlane=new jr(o),this.blurPlane.visible=!1,r.add(this.blurPlane),t.target.add(this),this.depthMaterial.onBeforeCompile=function(t){t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(t,e,n)}setScene(t,e,n){const{boundingBox:r,size:o,rotation:l,position:c}=this;if(this.isAnimated=t.animationNames.length>0,this.boundingBox.copy(t.boundingBox),this.size.copy(t.size),this.maxDimension=Math.max(o.x,o.y,o.z)*(this.isAnimated?ub:1),this.boundingBox.getCenter(c),"back"===n){const{min:t,max:e}=r;[t.y,t.z]=[t.z,t.y],[e.y,e.z]=[e.z,e.y],[o.y,o.z]=[o.z,o.y],l.x=Math.PI/2,l.y=Math.PI}else l.x=0,l.y=0;if(this.isAnimated){const t=r.min.y,e=r.max.y;o.y=this.maxDimension,r.expandByVector(o.subScalar(this.maxDimension).multiplyScalar(-.5)),r.min.y=t,r.max.y=e,o.set(this.maxDimension,e-t,this.maxDimension)}"bottom"===n?c.y=r.min.y:c.z=r.min.y,this.setSoftness(e)}setSoftness(t){this.softness=t;const{size:e,camera:n}=this,r=this.isAnimated?ub:1,o=r*Math.pow(2,cb-t*(cb-hb));this.setMapSize(o);const l=e.y/2,c=e.y*r;n.near=0,n.far=lb(c,l,t),this.depthMaterial.opacity=1/t,n.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(t){const{size:e}=this;this.isAnimated&&(t*=ub);const n=Math.floor(e.x>e.z?t:t*e.x/e.z),r=Math.floor(e.x>e.z?t*e.z/e.x:t),o=10+n,l=10+r;if(null==this.renderTarget||this.renderTarget.width===o&&this.renderTarget.height===l||(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){const t={format:Nt};this.renderTarget=new Rn(o,l,t),this.renderTargetBlur=new Rn(o,l,t),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(e.x*(1+10/n),e.z*(1+10/r),1),this.needsUpdate=!0}setIntensity(t){this.intensity=t,t>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=t*lb(db,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(t){this.floor.position.z=-t+.001*this.maxDimension}render(t,e){e.overrideMaterial=this.depthMaterial;const n=t.getClearAlpha();t.setClearAlpha(0),this.floor.visible=!1;const r=t.xr.enabled;t.xr.enabled=!1;const o=t.getRenderTarget();t.setRenderTarget(this.renderTarget),t.render(e,this.camera),e.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(t),t.xr.enabled=r,t.setRenderTarget(o),t.setClearAlpha(n)}blurShadow(t){const{camera:e,horizontalBlurMaterial:n,verticalBlurMaterial:r,renderTarget:o,renderTargetBlur:l,blurPlane:c}=this;c.visible=!0,c.material=n,n.uniforms.h.value=1/this.renderTarget.width,n.uniforms.tDiffuse.value=this.renderTarget.texture,t.setRenderTarget(l),t.render(c,e),c.material=r,r.uniforms.v.value=1/this.renderTarget.height,r.uniforms.tDiffuse.value=this.renderTargetBlur.texture,t.setRenderTarget(o),t.render(c,e),c.visible=!1}dispose(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}const fb=100,mb=new On,gb=new On,Ab=new On,vb=new class{constructor(t,e,n=0,r=1/0){this.ray=new di(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Ei,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(object,t=!0,e=[]){return nh(object,this,e,t),e.sort(eh),e}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)nh(t[i],this,n,e);return n.sort(eh),n}},bb=new On,yb=new pn;class xb extends Zo{constructor({canvas:canvas,element:element,width:t,height:e}){super(),this.annotationRenderer=new Sp,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new ns(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Ni,this.animationNames=[],this.boundingBox=new Un,this.boundingSphere=new ii,this.size=new On,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new On,this.targetDamperX=new uf,this.targetDamperY=new uf,this.targetDamperZ=new uf,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=element,this.canvas=canvas,this.camera=new ns(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(t,e),this.target.name="Target",this.mixer=new Zc(this.target);const{domElement:n}=this.annotationRenderer,{style:style}=n;style.display="none",style.pointerEvents="none",style.position="absolute",style.top="0",this.element.shadowRoot.querySelector(".default").appendChild(n),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(t){this.reset(),this._model=t,this.target.add(t),await this.setupScene()}async setSource(t,e=(()=>{})){if(!t||t===this.url)return void e(1);if(this.reset(),this.url=t,null!=this.externalRenderer){const t=await this.externalRenderer.load(e);return this.boundingSphere.radius=t.framedRadius,void(this.idealAspect=t.fieldOfViewAspect)}let n;null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{n=await new Promise(async(n,r)=>{this.cancelPendingSourceChange=()=>r();try{n(await this.element[vy].loader.load(t,this.element,e))}catch(t){r(t)}})}catch(t){if(null==t)return;throw t}this.cancelPendingSourceChange=null,this.reset(),this.url=t,this._currentGLTF=n,null!=n&&(this._model=n.scene,this.target.add(n.scene));const{animations:r}=n,o=new Map,l=[];for(const t of r)o.set(t.name,t),l.push(t.name);this.animations=r,this.animationsByName=o,this.animationNames=l,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:t}=this;null!=t&&(t.removeFromParent(),this._model=null);const e=this._currentGLTF;null!=e&&(e.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[qv]=null,this.element[Yv]=null,this.element[Xv]=null}get currentGLTF(){return this._currentGLTF}setSize(t,e){if(this.width!==t||this.height!==e){if(this.width=Math.max(t,1),this.height=Math.max(e,1),this.annotationRenderer.setSize(t,e),this.aspect=this.width/this.height,null!=this.externalRenderer){const n=Su();this.externalRenderer.resize(t*n,e*n)}this.queueRender()}}markBakedShadow(t){t.userData.shadow=!0,this.bakedShadows.add(t)}unmarkBakedShadow(t){t.userData.shadow=!1,t.visible=!0,this.bakedShadows.delete(t),this.boundingBox.expandByObject(t)}findBakedShadows(t){const e=new Un;t.traverse(object=>{const t=object;if(!t.isMesh)return;if(!t.material.transparent)return;e.setFromObject(t);const n=e.getSize(bb),r=Math.min(n.x,n.y,n.z);Math.max(n.x,n.y,n.z)<fb*r||this.markBakedShadow(t)})}checkBakedShadows(){const{min:t,max:e}=this.boundingBox,n=new Un;this.boundingBox.getSize(this.size);for(const r of this.bakedShadows)n.setFromObject(r),n.min.y<t.y+this.size.y/fb&&n.min.x<=t.x&&n.max.x>=e.x&&n.min.z<=t.z&&n.max.z>=e.z||n.min.z<t.z+this.size.z/fb&&n.min.x<=t.x&&n.max.x>=e.x&&n.min.y<=t.y&&n.max.y>=e.y||this.unmarkBakedShadow(r)}applyTransform(){const{model:t}=this;if(null==t)return;const e=bf(this.element.orientation)[0].terms,n=Tf(e[0]).number,r=Tf(e[1]).number,o=Tf(e[2]).number;t.quaternion.setFromEuler(new wi(r,o,n,"YXZ"));const l=bf(this.element.scale)[0].terms;t.scale.set(l[0].number,l[1].number,l[2].number)}updateBoundingBox(){const{model:t}=this;if(null==t)return;this.target.remove(t),this.findBakedShadows(t);const e=(t,e)=>t.expandByPoint(e);this.setBakedShadowVisibility(!1),this.boundingBox=Cp(t,e,new Un),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(t=>this.unmarkBakedShadow(t)),this.boundingBox=Cp(t,e,new Un)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(t)}async updateFraming(){const{model:t}=this;if(null==t)return;this.target.remove(t),this.setBakedShadowVisibility(!1);const{center:e}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,e.copy(this.getTarget());this.boundingSphere.radius=Math.sqrt(Cp(t,(t,n)=>Math.max(t,e.distanceToSquared(n)),0));this.idealAspect=Cp(t,(t,n)=>{n.sub(e);const r=Math.sqrt(n.x*n.x+n.z*n.z);return Math.max(t,r/(this.idealCameraDistance()-Math.abs(n.y)))},0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(t)}setBakedShadowVisibility(t=this.shadowIntensity<=0){for(const shadow of this.bakedShadows)shadow.visible=t}idealCameraDistance(){const t=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(t)}adjustedFoV(t){const e=Math.tan(t/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(e)*180/Math.PI}getNDC(t,e){if(null!=this.xrCamera)yb.set(t/window.screen.width,e/window.screen.height);else{const rect=this.element.getBoundingClientRect();yb.set((t-rect.x)/this.width,(e-rect.y)/this.height)}return yb.multiplyScalar(2).subScalar(1),yb.y*=-1,yb}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(t,e){this.element[vy].arRenderer.presentedScene!==this&&(this.environment=t,this.background=e,this.queueRender())}setTarget(t,e,n){this.goalTarget.set(-t,-e,-n)}setTargetDamperDecayTime(t){this.targetDamperX.setDecayTime(t),this.targetDamperY.setDecayTime(t),this.targetDamperZ.setDecayTime(t)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(lf)}updateTarget(t){const e=this.goalTarget,n=this.target.position;if(e.equals(n))return!1;{const r=this.boundingSphere.radius/10;let{x:o,y:l,z:c}=n;return o=this.targetDamperX.update(o,e.x,t,r),l=this.targetDamperY.update(l,e.y,t,r),c=this.targetDamperZ.update(c,e.z,t,r),this.target.position.set(o,l,c),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(t,e){const{x:n,z:r}=this.position;this.yaw=Math.atan2(t-n,e-r)}get model(){return this._model}set yaw(t){this.rotation.y=t,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(t){this.mixer.setTime(t),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){const t=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===Ce&&1==(1&t)?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(t){this.mixer.timeScale=t}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(t=null,e=0,n=Se,r=1/0){if(null==this._currentGLTF)return;const{animations:o}=this;if(null==o||0===o.length)return void console.warn("Cannot play animation (model does not have any animations)");let l=null;if(null!=t&&null==(l=this.animationsByName.get(t))){const e=parseInt(t);!isNaN(e)&&e>=0&&e<o.length&&(l=o[e])}null==l&&(l=o[0]);try{const{currentAnimationAction:t}=this,o=this.mixer.clipAction(l,this);this.currentAnimationAction=o,this.element.paused?this.mixer.stopAllAction():(o.paused=!1,null!=t&&o!==t?o.crossFadeFrom(t,e,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),o.setLoop(n,r),o.enabled=!0,o.clampWhenFinished=!0,o.play()}catch(t){console.error(t)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(t){this.mixer.update(t),this.queueShadowRender()}subscribeMixerEvent(t,e){this.mixer.addEventListener(t,e)}updateShadow(){const shadow=this.shadow;if(null!=shadow){const t="wall"===this.element.arPlacement?"back":"bottom";shadow.setScene(this,this.shadowSoftness,t),shadow.needsUpdate=!0}}renderShadow(t){const shadow=this.shadow;null!=shadow&&1==shadow.needsUpdate&&(shadow.render(t,this),shadow.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(t){if(this.shadowIntensity=t,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(t<=0&&null==this.shadow))){if(null==this.shadow){const t="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new pb(this,this.shadowSoftness,t)}this.shadow.setIntensity(t)}}setShadowSoftness(t){this.shadowSoftness=t;const shadow=this.shadow;null!=shadow&&shadow.setSoftness(t)}setShadowOffset(t){const shadow=this.shadow;null!=shadow&&shadow.setOffset(t)}get raycaster(){return vb}hitFromPoint(t,object=this){return this.raycaster.setFromCamera(t,this.getCamera()),this.raycaster.intersectObject(object,!0).find(t=>t.object.visible&&!t.object.userData.shadow)}positionAndNormalFromPoint(t,object=this){const e=this.hitFromPoint(t,object);return null==e||null==e.face?null:null==e.uv?{position:e.point,normal:e.face.normal,uv:null}:(e.face.normal.applyNormalMatrix((new fn).getNormalMatrix(e.object.matrixWorld)),{position:e.point,normal:e.face.normal,uv:e.uv})}surfaceFromPoint(t,object=this){const e=this.element.model;if(null==e)return null;const n=this.hitFromPoint(t,object);if(null==n||null==n.face)return null;const r=e[Uv](n),{meshes:o,primitives:l}=r.mesh.userData.associations,c=new On,h=new On,d=new On,{a:a,b:b,c:f}=n.face,m=n.object;m.getVertexPosition(a,c),m.getVertexPosition(b,h),m.getVertexPosition(f,d);const A=new Xi(c,h,d),v=new On;return A.getBarycoord(m.worldToLocal(n.point),v),`${o} ${l} ${a} ${b} ${f} ${v.x.toFixed(3)} ${v.y.toFixed(3)} ${v.z.toFixed(3)}`}addHotspot(t){this.target.add(t),this.annotationRenderer.domElement.appendChild(t.element)}removeHotspot(t){this.target.remove(t)}forHotspots(t){const{children:e}=this.target;for(let i=0,n=e.length;i<n;i++){const n=e[i];n instanceof sb&&t(n)}}initializeSurface(t){if(null!=t.surface&&null==t.mesh){const e=bf(t.surface)[0].terms;if(8!=e.length)return void console.warn(t.surface+" does not have exactly 8 numbers.");const n=this.element.model[Qv](e[0].number,e[1].number),r=new On(e[2].number,e[3].number,e[4].number);if(null==n)return void console.warn(t.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");const o=n.mesh.geometry.attributes.position.count;if(r.x>=o||r.y>=o||r.z>=o)return void console.warn(t.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");const l=new On(e[5].number,e[6].number,e[7].number);t.mesh=n.mesh,t.tri=r,t.bary=l}}updateSurfaceHotspots(){const t=!this.element.paused;this.forHotspots(e=>{this.initializeSurface(e),e.updateSurface(t)})}updateHotspotsVisibility(t){this.forHotspots(e=>{mb.copy(t),gb.setFromMatrixPosition(e.matrixWorld),mb.sub(gb),Ab.copy(e.normal).transformDirection(this.target.matrixWorld),mb.dot(Ab)<0?e.hide():e.show()})}orientHotspots(t){this.forHotspots(e=>{e.orient(t)})}setHotspotsVisibility(t){this.forHotspots(e=>{e.visible=t})}updateSchema(t){var e;const{schemaElement:n,element:element}=this,{alt:r,poster:o,iosSrc:l}=element;if(null!=t){const c=[{"@type":"MediaObject",contentUrl:t,encodingFormat:"gltf"===(null===(e=t.split(".").pop())||void 0===e?void 0:e.toLowerCase())?"model/gltf+json":"model/gltf-binary"}];l&&c.push({"@type":"MediaObject",contentUrl:l,encodingFormat:"model/vnd.usdz+zip"});const h={"@context":"http://schema.org/","@type":"3DModel",image:null!=o?o:void 0,name:null!=r?r:void 0,encoding:c};n.textContent=JSON.stringify(h),document.head.appendChild(n)}else null!=n.parentElement&&n.parentElement.removeChild(n)}}const _b=async t=>new Promise((e,n)=>{const r=t.match(/data:(.*);/);if(!r)return n(new Error(`${t} is not a valid data Url`));const o=r[1],l=t.replace(/data:image\/\w+;base64,/,""),c=atob(l),h=[];for(let t=0;t<c.length;t+=512){const e=c.slice(t,t+512),n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);const r=new Uint8Array(n);h.push(r)}e(new Blob(h,{type:o}))});class wb extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),1===this.ongoingActivityCount&&this.announceTotalProgress(t,0),progress=>{let e;return(e=Math.max(Eu(progress,0,1),t.progress))!==t.progress&&this.announceTotalProgress(t,e),t.progress}}announceTotalProgress(t,e){let n=0,r=0;1==e&&(t.completed=!0);for(const t of this.ongoingActivities){const{progress:progress}=t;n+=1-progress,!0===t.completed&&r++}const o=t.progress;t.progress=e,this.totalProgress+=(e-o)*(1-this.totalProgress)/n;const l=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:l}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}var Eb,Sb,Cb,Ib,Mb,Bb,Tb,kb,Rb,Lb,Db,Pb,Ob,Fb=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const Nb=10,Ub=50,Qb=0,zb=300,Gb=150,Hb=document.createElement("canvas"),Vb=Symbol("fallbackResizeHandler"),jb=Symbol("defaultAriaLabel"),Wb=Symbol("resizeObserver"),$b=Symbol("clearModelTimeout"),qb=Symbol("onContextLost"),Yb=Symbol("loaded"),Xb=Symbol("status"),Kb=Symbol("onFocus"),Jb=Symbol("onBlur"),Zb=Symbol("updateSize"),ty=Symbol("intersectionObserver"),ey=Symbol("isElementInViewport"),ny=Symbol("announceModelVisibility"),iy=Symbol("ariaLabel"),ry=Symbol("altDefaulted"),sy=Symbol("statusElement"),ay=Symbol("updateStatus"),oy=Symbol("loadedTime"),ly=Symbol("updateSource"),cy=Symbol("markLoaded"),hy=Symbol("container"),uy=Symbol("input"),dy=Symbol("canvas"),py=Symbol("scene"),fy=Symbol("needsRender"),my=Symbol("tick"),gy=Symbol("onModelLoad"),Ay=Symbol("onResize"),vy=Symbol("renderer"),by=Symbol("progressTracker"),yy=Symbol("getLoaded"),xy=Symbol("getModelIsVisible"),_y=Symbol("shouldAttemptPreload"),wy=t=>({x:t.x,y:t.y,z:t.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),Ey=t=>({u:t.x,v:t.y,toString(){return`${this.u} ${this.v}`}});class Sy extends bh{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[Eb]=!1,this[Sb]=!1,this[Cb]=0,this[Ib]="",this[Mb]=null,this[Bb]=wu(()=>{const t=this.getBoundingClientRect();this[Zb](t)},Ub),this[Tb]=wu(t=>{const e=this.modelIsVisible;e!==t&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:e}}))},Qb),this[kb]=null,this[Rb]=null,this[Lb]=new wb,this[Db]=()=>{this[sy].textContent=this[Xb]},this[Pb]=()=>{this[sy].textContent=""},this[Ob]=t=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:t.sourceEvent}}))},this.attachShadow({mode:"open"});const t=this.shadowRoot;let e,n;if(Uu(t),this[hy]=t.querySelector(".container"),this[uy]=t.querySelector(".userInput"),this[dy]=t.querySelector("canvas"),this[sy]=t.querySelector("#status"),this[jb]=this[uy].getAttribute("aria-label"),this.isConnected){const rect=this.getBoundingClientRect();e=rect.width,n=rect.height}else e=zb,n=Gb;this[py]=new xb({canvas:this[dy],element:this,width:e,height:n}),Promise.resolve().then(()=>{this[Zb](this.getBoundingClientRect())}),cu&&(this[Wb]=new ResizeObserver(t=>{if(!this[vy].isPresenting)for(let e of t)e.target===this&&this[Zb](e.contentRect)})),hu?this[ty]=new IntersectionObserver(t=>{for(let e of t)if(e.target===this){const t=this.modelIsVisible;this[ey]=e.isIntersecting,this[ny](t),this[ey]&&!this.loaded&&this[ly]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[ey]=!0}static get is(){return"model-viewer"}static set modelCacheSize(t){vp[gp].evictionThreshold=t}static get modelCacheSize(){return vp[gp].evictionThreshold}static set minimumRenderScale(t){t>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),t<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),xA.singleton.minScale=t}static get minimumRenderScale(){return xA.singleton.minScale}get loaded(){return this[yy]()}get[(Eb=ey,Sb=Yb,Cb=oy,Ib=Xb,Mb=$b,Bb=Vb,Tb=ny,kb=Wb,Rb=ty,Lb=by,vy)](){return xA.singleton}get modelIsVisible(){return this[xy]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),cu?this[Wb].observe(this):self.addEventListener("resize",this[Vb]),hu&&this[ty].observe(this),this.addEventListener("focus",this[Kb]),this.addEventListener("blur",this[Jb]);const t=this[vy];t.addEventListener("contextlost",this[qb]),t.registerScene(this[py]),null!=this[$b]&&(self.clearTimeout(this[$b]),this[$b]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),cu?this[Wb].unobserve(this):self.removeEventListener("resize",this[Vb]),hu&&this[ty].unobserve(this),this.removeEventListener("focus",this[Kb]),this.removeEventListener("blur",this[Jb]);const t=this[vy];t.removeEventListener("contextlost",this[qb]),t.unregisterScene(this[py]),this[$b]=self.setTimeout(()=>{this[py].dispose(),this[$b]=null},Nb)}updated(t){super.updated(t),t.has("src")&&(null==this.src?(this[Yb]=!1,this[oy]=0,this[py].reset()):this.src!==this[py].url&&(this[Yb]=!1,this[oy]=0,this[ly]())),t.has("alt")&&this[uy].setAttribute("aria-label",this[iy]),t.has("withCredentials")&&(vp.withCredentials=this.withCredentials,this[vy].textureUtils.withCredentials=this.withCredentials),t.has("generateSchema")&&(this.generateSchema?this[py].updateSchema(this.src):this[py].updateSchema(null))}toDataURL(t,e){return this[vy].displayCanvas(this[py]).toDataURL(t,e)}async toBlob(t){const e=t?t.mimeType:void 0,n=t?t.qualityArgument:void 0,r=t?t.idealAspect:void 0,{width:o,height:l,idealAspect:c,aspect:h}=this[py],{dpr:d,scaleFactor:f}=this[vy];let m=o*f*d,A=l*f*d,v=0,y=0;if(!0===r)if(c>h){const t=A;A=Math.round(m/c),y=(t-A)/2}else{const t=m;m=Math.round(A*c),v=(t-m)/2}Hb.width=m,Hb.height=A;try{return new Promise(async(t,r)=>(Hb.getContext("2d").drawImage(this[vy].displayCanvas(this[py]),v,y,m,A,0,0,m,A),!Hb.msToBlob||e&&"image/png"!==e?Hb.toBlob?void Hb.toBlob(e=>{if(!e)return r(new Error("Unable to retrieve canvas blob"));t(e)},e,n):t(await _b(Hb.toDataURL(e,n))):t(Hb.msToBlob())))}finally{this[Zb]({width:o,height:l})}}registerRenderer(t){this[py].externalRenderer=t}unregisterRenderer(){this[py].externalRenderer=null}get[iy](){return this[ry]}get[ry](){return null==this.alt||"null"===this.alt?this[jb]:this.alt}[yy](){return this[Yb]}[xy](){return this.loaded&&this[ey]}[_y](){return!!this.src&&this[ey]}[Zb]({width:t,height:e}){0!==t&&0!==e&&(this[hy].style.width=`${t}px`,this[hy].style.height=`${e}px`,this[Ay]({width:t,height:e}))}[my](t,e){}[cy](){this[Yb]||(this[Yb]=!0,this[oy]=performance.now())}[fy](){this[py].queueRender()}[gy](){}[ay](t){this[Xb]=t;const e=this.getRootNode();null!=e&&e.activeElement===this&&this[sy].textContent!=t&&(this[sy].textContent=t)}[(Db=Kb,Pb=Jb,Ay)](t){this[py].setSize(t.width,t.height)}async[(Ob=qb,ly)](){const t=this[py];if(this.loaded||!this[_y]()||this.src===t.url)return;this.generateSchema&&t.updateSchema(this.src),this[ay]("Loading"),t.stopAnimation();const e=this[by].beginActivity(),source=this.src;try{const n=t.setSource(source,progress=>e(.95*Eu(progress,0,1))),r=this[Ou]();await Promise.all([n,r]),this[cy](),this[gy](),await new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:source}})),t()})})})}catch(t){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:t}}))}finally{e(1)}}}Fb([o({type:String})],Sy.prototype,"alt",void 0),Fb([o({type:String})],Sy.prototype,"src",void 0),Fb([o({type:Boolean,attribute:"with-credentials"})],Sy.prototype,"withCredentials",void 0),Fb([o({type:Boolean,attribute:"generate-schema"})],Sy.prototype,"generateSchema",void 0);var Cy=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const Iy=1e3,My=Symbol("changeAnimation"),By=Symbol("paused"),Ty={repetitions:1/0,pingpong:!1},ky=Symbol("hotspotMap"),Ry=Symbol("mutationCallback"),Ly=Symbol("observer"),Dy=Symbol("addHotspot"),Py=Symbol("removeHotspot"),Oy=new pi;var Fy=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(Fy(""))}catch(t){Fy=function(t){return"data:application/javascript;charset=UTF-8,"+encodeURI(t)},function(u){return new Worker(u,{type:"module"})}}var Ny=Uint8Array,Uy=Uint16Array,Qy=Uint32Array,zy=new Ny([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gy=new Ny([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hy=new Ny([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vy=function(t,e){for(var b=new Uy(31),i=0;i<31;++i)b[i]=e+=1<<t[i-1];var n=new Qy(b[30]);for(i=1;i<30;++i)for(var r=b[i];r<b[i+1];++r)n[r]=r-b[i]<<5|i;return[b,n]},jy=Vy(zy,2),Wy=jy[0],$y=jy[1];Wy[28]=258,$y[258]=28;for(var qy=Vy(Gy,0),Yy=(qy[0],qy[1]),Xy=new Uy(32768),Ky=0;Ky<32768;++Ky){var Jy=(43690&Ky)>>>1|(21845&Ky)<<1;Jy=(61680&(Jy=(52428&Jy)>>>2|(13107&Jy)<<2))>>>4|(3855&Jy)<<4,Xy[Ky]=((65280&Jy)>>>8|(255&Jy)<<8)>>>1}var Zy=function(t,e,n){for(var s=t.length,i=0,r=new Uy(e);i<s;++i)++r[t[i]-1];var o,l=new Uy(e);for(i=0;i<e;++i)l[i]=l[i-1]+r[i-1]<<1;if(n){o=new Uy(1<<e);var c=15-e;for(i=0;i<s;++i)if(t[i])for(var h=i<<4|t[i],d=e-t[i],f=l[t[i]-1]++<<d,m=f|(1<<d)-1;f<=m;++f)o[Xy[f]>>>c]=h}else for(o=new Uy(s),i=0;i<s;++i)t[i]&&(o[i]=Xy[l[t[i]-1]++]>>>15-t[i]);return o},tx=new Ny(288);for(Ky=0;Ky<144;++Ky)tx[Ky]=8;for(Ky=144;Ky<256;++Ky)tx[Ky]=9;for(Ky=256;Ky<280;++Ky)tx[Ky]=7;for(Ky=280;Ky<288;++Ky)tx[Ky]=8;var ex=new Ny(32);for(Ky=0;Ky<32;++Ky)ex[Ky]=5;var nx=Zy(tx,9,0),ix=Zy(ex,5,0),rx=function(p){return(p/8|0)+(7&p&&1)},sx=function(t,s,e){(null==s||s<0)&&(s=0),(null==e||e>t.length)&&(e=t.length);var n=new(t instanceof Uy?Uy:t instanceof Qy?Qy:Ny)(e-s);return n.set(t.subarray(s,e)),n},ax=function(t,p,e){e<<=7&p;var n=p/8|0;t[n]|=e,t[n+1]|=e>>>8},ox=function(t,p,e){e<<=7&p;var n=p/8|0;t[n]|=e,t[n+1]|=e>>>8,t[n+2]|=e>>>16},lx=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var s=n.length,r=n.slice();if(!s)return[mx,0];if(1==s){var o=new Ny(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(a,b){return a.f-b.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],h=0,d=1,f=2;for(n[0]={s:-1,f:l.f+c.f,l:l,r:c};d!=s-1;)l=n[n[h].f<n[f].f?h++:f++],c=n[h!=d&&n[h].f<n[f].f?h++:f++],n[d++]={s:-1,f:l.f+c.f,l:l,r:c};var m=r[0].s;for(i=1;i<s;++i)r[i].s>m&&(m=r[i].s);var tr=new Uy(m+1),A=cx(n[d-1],tr,0);if(A>e){i=0;var dt=0,v=A-e,y=1<<v;for(r.sort(function(a,b){return tr[b.s]-tr[a.s]||a.f-b.f});i<s;++i){var x=r[i].s;if(!(tr[x]>e))break;dt+=y-(1<<A-tr[x]),tr[x]=e}for(dt>>>=v;dt>0;){var _=r[i].s;tr[_]<e?dt-=1<<e-tr[_]++-1:++i}for(;i>=0&&dt;--i){var w=r[i].s;tr[w]==e&&(--tr[w],++dt)}A=e}return[new Ny(tr),A]},cx=function(t,e,n){return-1==t.s?Math.max(cx(t.l,e,n+1),cx(t.r,e,n+1)):e[t.s]=n},hx=function(t){for(var s=t.length;s&&!t[--s];);for(var e=new Uy(++s),n=0,r=t[0],o=1,l=function(t){e[n++]=t},i=1;i<=s;++i)if(t[i]==r&&i!=s)++o;else{if(!r&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(r),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(r);o=1,r=t[i]}return[e.subarray(0,n),s]},ux=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},dx=function(t,e,n){var s=n.length,r=rx(e+2);t[r]=255&s,t[r+1]=s>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var i=0;i<s;++i)t[r+i+4]=n[i];return 8*(r+4+s)},px=function(t,e,n,r,o,l,c,li,h,d,p){ax(e,p++,n),++o[256];for(var f=lx(o,15),m=f[0],A=f[1],v=lx(l,15),y=v[0],x=v[1],_=hx(m),w=_[0],E=_[1],S=hx(y),C=S[0],I=S[1],M=new Uy(19),i=0;i<w.length;++i)M[31&w[i]]++;for(i=0;i<C.length;++i)M[31&C[i]]++;for(var B=lx(M,7),T=B[0],k=B[1],R=19;R>4&&!T[Hy[R-1]];--R);var L,D,P,dl,O=d+5<<3,F=ux(o,tx)+ux(l,ex)+c,N=ux(o,m)+ux(l,y)+c+14+3*R+ux(M,T)+(2*M[16]+3*M[17]+7*M[18]);if(O<=F&&O<=N)return dx(e,p,t.subarray(h,h+d));if(ax(e,p,1+(N<F)),p+=2,N<F){L=Zy(m,A,0),D=m,P=Zy(y,x,0),dl=y;var U=Zy(T,k,0);ax(e,p,E-257),ax(e,p+5,I-1),ax(e,p+10,R-4),p+=14;for(i=0;i<R;++i)ax(e,p+3*i,T[Hy[i]]);p+=3*R;for(var Q=[w,C],z=0;z<2;++z){var G=Q[z];for(i=0;i<G.length;++i){var H=31&G[i];ax(e,p,U[H]),p+=T[H],H>15&&(ax(e,p,G[i]>>>5&127),p+=G[i]>>>12)}}}else L=nx,D=tx,P=ix,dl=ex;for(i=0;i<li;++i)if(r[i]>255){H=r[i]>>>18&31;ox(e,p,L[H+257]),p+=D[H+257],H>7&&(ax(e,p,r[i]>>>23&31),p+=zy[H]);var V=31&r[i];ox(e,p,P[V]),p+=dl[V],V>3&&(ox(e,p,r[i]>>>5&8191),p+=Gy[V])}else ox(e,p,L[r[i]]),p+=D[r[i]];return ox(e,p,L[256]),p+D[256]},fx=new Qy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mx=new Ny(0),gx=function(t,e,n,pre,r,o){var s=t.length,l=new Ny(pre+s+5*(1+Math.ceil(s/7e3))+r),c=l.subarray(pre,l.length-r),h=0;if(!e||s<8)for(var i=0;i<=s;i+=65535){var d=i+65535;d<s?h=dx(c,h,t.subarray(i,d)):(c[i]=o,h=dx(c,h,t.subarray(i,s)))}else{for(var f=fx[e-1],m=f>>>13,A=8191&f,v=(1<<n)-1,y=new Uy(32768),head=new Uy(v+1),x=Math.ceil(n/3),_=2*x,w=function(i){return(t[i]^t[i+1]<<x^t[i+2]<<_)&v},E=new Qy(25e3),S=new Uy(288),C=new Uy(32),I=0,M=0,li=(i=0,0),B=0,T=0;i<s;++i){var k=w(i),R=32767&i,L=head[k];if(y[R]=L,head[k]=R,B<=i){var D=s-i;if((I>7e3||li>24576)&&D>423){h=px(t,c,0,E,S,C,M,li,T,i-T,h),li=I=M=0,T=i;for(var P=0;P<286;++P)S[P]=0;for(P=0;P<30;++P)C[P]=0}var O=2,F=0,N=A,U=R-L&32767;if(D>2&&k==w(i-U))for(var Q=Math.min(m,D)-1,z=Math.min(32767,i),G=Math.min(258,D);U<=z&&--N&&R!=L;){if(t[i+O]==t[i+O-U]){for(var H=0;H<G&&t[i+H]==t[i+H-U];++H);if(H>O){if(O=H,F=U,H>Q)break;var V=Math.min(U,H-2),j=0;for(P=0;P<V;++P){var W=i-U+P+32768&32767,$=W-y[W]+32768&32767;$>j&&(j=$,L=W)}}}U+=(R=L)-(L=y[R])+32768&32767}if(F){E[li++]=268435456|$y[O]<<18|Yy[F];var Y=31&$y[O],X=31&Yy[F];M+=zy[Y]+Gy[X],++S[257+Y],++C[X],B=i+O,++I}else E[li++]=t[i],++S[t[i]]}}h=px(t,c,o,E,S,C,M,li,T,i-T,h),!o&&7&h&&(h=dx(c,h+1,mx))}return sx(l,0,pre+rx(h)+r)},Ax=function(){for(var t=new Qy(256),i=0;i<256;++i){for(var e=i,n=9;--n;)e=(1&e&&3988292384)^e>>>1;t[i]=e}return t}(),vx=function(){var t=-1;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=Ax[255&n^e[i]]^n>>>8;t=n},d:function(){return~t}}},bx=function(t,e,pre,n,r){return gx(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,pre,n,!r)},yx=function(a,b){var t={};for(var e in a)t[e]=a[e];for(var e in b)t[e]=b[e];return t},xx=function(t,b,e){for(;e;++b)t[b]=e,e>>>=8};function _x(data,t){return bx(data,t||{},0,0)}var wx=function(t,p,e,n){for(var r in t){var o=t[r],l=p+r;o instanceof Ny?e[l]=[o,n]:Array.isArray(o)?e[l]=[o[0],yx(n,o[1])]:wx(o,l+"/",e,n)}},Ex="undefined"!=typeof TextEncoder&&new TextEncoder,td="undefined"!=typeof TextDecoder&&new TextDecoder;try{td.decode(mx,{stream:!0}),1}catch(t){}function Sx(t,e){if(e){for(var n=new Ny(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}if(Ex)return Ex.encode(t);var r=t.length,o=new Ny(t.length+(t.length>>1)),l=0,c=function(t){o[l++]=t};for(i=0;i<r;++i){if(l+5>o.length){var h=new Ny(l+8+(r-i<<1));h.set(o),o=h}var d=t.charCodeAt(i);d<128||e?c(d):d<2048?(c(192|d>>6),c(128|63&d)):d>55295&&d<57344?(c(240|(d=65536+(1047552&d)|1023&t.charCodeAt(++i))>>18),c(128|d>>12&63),c(128|d>>6&63),c(128|63&d)):(c(224|d>>12),c(128|d>>6&63),c(128|63&d))}return sx(o,0,l)}var Cx=function(t){var e=0;if(t)for(var n in t){var r=t[n].length;if(r>65535)throw"extra field too long";e+=r+4}return e},Ix=function(t,b,e,n,u,r,o,l){var c=n.length,h=e.extra,col=l&&l.length,d=Cx(h);xx(t,b,null!=o?33639248:67324752),b+=4,null!=o&&(t[b++]=20,t[b++]=e.os),t[b]=20,b+=2,t[b++]=e.flag<<1|(null==r&&8),t[b++]=u&&8,t[b++]=255&e.compression,t[b++]=e.compression>>8;var dt=new Date(null==e.mtime?Date.now():e.mtime),f=dt.getFullYear()-1980;if(f<0||f>119)throw"date not in range 1980-2099";if(xx(t,b,f<<25|dt.getMonth()+1<<21|dt.getDate()<<16|dt.getHours()<<11|dt.getMinutes()<<5|dt.getSeconds()>>>1),b+=4,null!=r&&(xx(t,b,e.crc),xx(t,b+4,r),xx(t,b+8,e.size)),xx(t,b+12,c),xx(t,b+14,d),b+=16,null!=o&&(xx(t,b,col),xx(t,b+6,e.attrs),xx(t,b+10,o),b+=14),t.set(n,b),b+=c,d)for(var m in h){var A=h[m],v=A.length;xx(t,b,+m),xx(t,b+2,v),t.set(A,b+4),b+=4+v}return col&&(t.set(l,b),b+=col),b},Mx=function(t,b,e,n,r){xx(t,b,101010256),xx(t,b+8,e),xx(t,b+10,e),xx(t,b+12,n),xx(t,b+16,r)};class Bx{async parse(t,e={}){e=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}},e);const n={};n["model.usda"]=null;let output=Rx();output+=function(t){return`def Xform "Root"\n{\n    def Scope "Scenes" (\n        kind = "sceneLibrary"\n    )\n    {\n        def Xform "Scene" (\n            customData = {\n                bool preliminary_collidesWithEnvironment = 0\n                string sceneName = "Scene"\n            }\n            sceneName = "Scene"\n        )\n        {\n        token preliminary:anchoring:type = "${t.ar.anchoring.type}"\n        token preliminary:planeAnchoring:alignment = "${t.ar.planeAnchoring.alignment}"\n\n`}(e);const r={},o={};t.traverseVisible(object=>{if(object.isMesh){const t=object.geometry,e=object.material;if(e.isMeshStandardMaterial){const o="geometries/Geometry_"+t.id+".usd";if(!(o in n)){const e=function(t){return`\ndef "Geometry"\n{\n  ${function(t){const e=t.attributes,n=e.position.count;return`\n    def Mesh "Geometry"\n    {\n        int[] faceVertexCounts = [${function(t){const e=null!==t.index?t.index.count:t.attributes.position.count;return Array(e/3).fill(3).join(", ")}(t)}]\n        int[] faceVertexIndices = [${function(t){const e=t.index,n=[];if(null!==e)for(let i=0;i<e.count;i++)n.push(e.getX(i));else{const e=t.attributes.position.count;for(let i=0;i<e;i++)n.push(i)}return n.join(", ")}(t)}]\n        normal3f[] normals = [${Px(e.normal,n)}] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [${Px(e.position,n)}]\n        float2[] primvars:st = [${function(t,e){if(void 0===t)return console.warn("USDZExporter: UVs missing."),Array(e).fill("(0, 0)").join(", ");const n=[];for(let i=0;i<t.count;i++){const e=t.getX(i),r=t.getY(i);n.push(`(${e.toPrecision(kx)}, ${1-r.toPrecision(kx)})`)}return n.join(", ")}(e.uv,n)}] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n`}(t)}\n}\n`}(t);n[o]=function(t){let output=Rx();return Sx(output+=t)}(e)}e.uuid in r||(r[e.uuid]=e),output+=function(object,t,e){const n="Object_"+object.id,r=Lx(object.matrixWorld);object.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",object);return`def Xform "${n}" (\n    prepend references = @./geometries/Geometry_${t.id}.usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ${r}\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_${e.id}>\n}\n\n`}(object,t,e)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",object)}else object.isCamera&&(output+=function(t){const e=t.name?t.name:"Camera_"+t.id,n=Lx(t.matrixWorld);t.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",t);return t.isOrthographicCamera?`def Camera "${e}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${n}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\t\n\t\t\tfloat2 clippingRange = (${t.near.toPrecision(kx)}, ${t.far.toPrecision(kx)})\n\t\t\tfloat horizontalAperture = ${(10*(Math.abs(t.left)+Math.abs(t.right))).toPrecision(kx)}\n\t\t\tfloat verticalAperture = ${(10*(Math.abs(t.top)+Math.abs(t.bottom))).toPrecision(kx)}\n\t\t\ttoken projection = "orthographic"\n\t\t}\n\t\n\t`:`def Camera "${e}"\n\t\t{\n\t\t\tmatrix4d xformOp:transform = ${n}\n\t\t\tuniform token[] xformOpOrder = ["xformOp:transform"]\n\t\n\t\t\tfloat2 clippingRange = (${t.near.toPrecision(kx)}, ${t.far.toPrecision(kx)})\n\t\t\tfloat focalLength = ${t.getFocalLength().toPrecision(kx)}\n\t\t\tfloat focusDistance = ${t.focus.toPrecision(kx)}\n\t\t\tfloat horizontalAperture = ${t.getFilmWidth().toPrecision(kx)}\n\t\t\ttoken projection = "perspective"\n\t\t\tfloat verticalAperture = ${t.getFilmHeight().toPrecision(kx)}\n\t\t}\n\t\n\t`}(object))}),output+="\n        }\n    }\n}\n\n",output+=function(t,e){const n=[];for(const r in t){const o=t[r];n.push(Ox(o,e))}return`def "Materials"\n{\n${n.join("")}\n}\n\n`}(r,o),n["model.usda"]=Sx(output),output=null;for(const t in o){const e=o[t],r=t.split("_")[1],l=1023===e.format,canvas=Tx(e.image,r,e.flipY),c=await new Promise(t=>canvas.toBlob(t,l?"image/png":"image/jpeg",1));n[`textures/Texture_${t}.${l?"png":"jpg"}`]=new Uint8Array(await c.arrayBuffer())}let l=0;for(const t in n){const e=n[t],r=63&(l+=34+t.length);if(4!==r){const o=new Uint8Array(64-r);n[t]=[e,{extra:{12345:o}}]}l=e.length}return function(data,t){t||(t={});var e={},n=[];wx(data,"",e,t);var r=0,o=0;for(var l in e){var c=e[l],h=c[0],p=c[1],d=0==p.level?0:8,s=(C=Sx(l)).length,f=p.comment,m=f&&Sx(f),A=m&&m.length,v=Cx(p.extra);if(s>65535)throw"filename too long";var y=d?_x(h,p):h,x=y.length,_=vx();_.p(h),n.push(yx(p,{size:h.length,crc:_.d(),c:y,f:C,m:m,u:s!=l.length||m&&f.length!=A,o:r,compression:d})),r+=30+s+v+x,o+=76+2*(s+v)+(A||0)+x}for(var w=new Ny(o+22),E=r,S=o-r,i=0;i<n.length;++i){var C=n[i];Ix(w,C.o,C,C.f,C.u,C.c.length);var I=30+C.f.length+Cx(C.extra);w.set(C.c,C.o+I),Ix(w,r,C,C.f,C.u,C.c.length,C.o,C.m),r+=16+I+(C.m?C.m.length:0)}return Mx(w,r,n.length,S,E),w}(n,{level:0})}}function Tx(image,t,e){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&image instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){const n=1024/Math.max(image.width,image.height),canvas=document.createElement("canvas");canvas.width=image.width*Math.min(1,n),canvas.height=image.height*Math.min(1,n);const r=canvas.getContext("2d");if(!0===e&&(r.translate(0,canvas.height),r.scale(1,-1)),r.drawImage(image,0,0,canvas.width,canvas.height),void 0!==t){const e=parseInt(t,16),n=(e>>16&255)/255,g=(e>>8&255)/255,b=(255&e)/255,o=r.getImageData(0,0,canvas.width,canvas.height),data=o.data;for(let i=0;i<data.length;i+=4)data[i+0]=data[i+0]*n,data[i+1]=data[i+1]*g,data[i+2]=data[i+2]*b;r.putImageData(o,0,0)}return canvas}throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const kx=7;function Rx(){return'#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n'}function Lx(t){const e=t.elements;return`( ${Dx(e,0)}, ${Dx(e,4)}, ${Dx(e,8)}, ${Dx(e,12)} )`}function Dx(t,e){return`(${t[e+0]}, ${t[e+1]}, ${t[e+2]}, ${t[e+3]})`}function Px(t,e){if(void 0===t)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const n=[];for(let i=0;i<t.count;i++){const e=t.getX(i),r=t.getY(i),o=t.getZ(i);n.push(`(${e.toPrecision(kx)}, ${r.toPrecision(kx)}, ${o.toPrecision(kx)})`)}return n.join(", ")}function Ox(t,e){const n="            ",r=[],o=[];function l(n,r,o){const l=n.id+(o?"_"+o.getHexString():""),c=1023===n.format;return e[l]=n,`\n        def Shader "Transform2d_${r}" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_${t.id}/uvReader_st.outputs:result>\n            float2 inputs:scale = ${Nx(n.repeat)}\n            float2 inputs:translation = ${Nx(n.offset)}\n            float2 outputs:result\n        }\n\n        def Shader "Texture_${n.id}_${r}"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_${l}.${c?"png":"jpg"}@\n            float2 inputs:st.connect = </Materials/Material_${t.id}/Transform2d_${r}.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n            ${t.transparent||t.alphaTest>0?"float outputs:a":""}\n        }`}return t.side===_&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",t),null!==t.map?(r.push(`${n}color3f inputs:diffuseColor.connect = </Materials/Material_${t.id}/Texture_${t.map.id}_diffuse.outputs:rgb>`),t.transparent?r.push(`${n}float inputs:opacity.connect = </Materials/Material_${t.id}/Texture_${t.map.id}_diffuse.outputs:a>`):t.alphaTest>0&&(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${t.id}/Texture_${t.map.id}_diffuse.outputs:a>`),r.push(`${n}float inputs:opacityThreshold = ${t.alphaTest}`)),o.push(l(t.map,"diffuse",t.color))):r.push(`${n}color3f inputs:diffuseColor = ${Fx(t.color)}`),null!==t.emissiveMap?(r.push(`${n}color3f inputs:emissiveColor.connect = </Materials/Material_${t.id}/Texture_${t.emissiveMap.id}_emissive.outputs:rgb>`),o.push(l(t.emissiveMap,"emissive"))):t.emissive.getHex()>0&&r.push(`${n}color3f inputs:emissiveColor = ${Fx(t.emissive)}`),null!==t.normalMap&&(r.push(`${n}normal3f inputs:normal.connect = </Materials/Material_${t.id}/Texture_${t.normalMap.id}_normal.outputs:rgb>`),o.push(l(t.normalMap,"normal"))),null!==t.aoMap&&(r.push(`${n}float inputs:occlusion.connect = </Materials/Material_${t.id}/Texture_${t.aoMap.id}_occlusion.outputs:r>`),o.push(l(t.aoMap,"occlusion"))),null!==t.roughnessMap&&1===t.roughness?(r.push(`${n}float inputs:roughness.connect = </Materials/Material_${t.id}/Texture_${t.roughnessMap.id}_roughness.outputs:g>`),o.push(l(t.roughnessMap,"roughness"))):r.push(`${n}float inputs:roughness = ${t.roughness}`),null!==t.metalnessMap&&1===t.metalness?(r.push(`${n}float inputs:metallic.connect = </Materials/Material_${t.id}/Texture_${t.metalnessMap.id}_metallic.outputs:b>`),o.push(l(t.metalnessMap,"metallic"))):r.push(`${n}float inputs:metallic = ${t.metalness}`),null!==t.alphaMap?(r.push(`${n}float inputs:opacity.connect = </Materials/Material_${t.id}/Texture_${t.alphaMap.id}_opacity.outputs:r>`),r.push(`${n}float inputs:opacityThreshold = 0.0001`),o.push(l(t.alphaMap,"opacity"))):r.push(`${n}float inputs:opacity = ${t.opacity}`),t.isMeshPhysicalMaterial&&(r.push(`${n}float inputs:clearcoat = ${t.clearcoat}`),r.push(`${n}float inputs:clearcoatRoughness = ${t.clearcoatRoughness}`),r.push(`${n}float inputs:ior = ${t.ior}`)),`\n    def Material "Material_${t.id}"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n${r.join("\n")}\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_${t.id}/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_${t.id}.inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n${o.join("\n")}\n\n    }\n`}function Fx(t){return`(${t.r}, ${t.g}, ${t.b})`}function Nx(t){return`(${t.x}, ${t.y})`}var Ux=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};let Qx=!1,zx=!1;const Gx="#model-viewer-no-ar-fallback",Hx=(t=>e=>{try{const n=bf(e),r=(n.length?n[0].terms:[]).filter(t=>t&&"ident"===t.type).map(t=>t.value).filter(e=>t.indexOf(e)>-1),o=new Set;for(const t of r)o.add(t);return o}catch(t){}return new Set})(["quick-look","scene-viewer","webxr","none"]),Vx="webxr scene-viewer quick-look",jx={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},Wx=Symbol("arButtonContainer"),$x=Symbol("enterARWithWebXR"),qx=Symbol("openSceneViewer"),Yx=Symbol("openIOSARQuickLook"),Xx=Symbol("canActivateAR"),Kx=Symbol("arMode"),Jx=Symbol("arModes"),Zx=Symbol("arAnchor"),t_=Symbol("preload"),e_=Symbol("onARButtonContainerClick"),n_=Symbol("onARStatus"),i_=Symbol("onARTracking"),r_=Symbol("onARTap"),s_=Symbol("selectARMode"),a_=Symbol("triggerLoad");var o_=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const l_=100,c_="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",h_="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",u_="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",d_={AUTO:"auto",MANUAL:"manual"},p_={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},f_=Symbol("defaultProgressBarElement"),m_=Symbol("posterContainerElement"),g_=Symbol("defaultPosterElement"),A_=Symbol("shouldDismissPoster"),v_=Symbol("hidePoster"),b_=Symbol("modelIsRevealed"),y_=Symbol("updateProgressBar"),x_=Symbol("ariaLabelCallToAction"),__=Symbol("onProgress");var w_=function(t,e,n,desc){var r,o=arguments.length,l=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(l=(o<3?r(l):o>3?r(e,n,l):r(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l};const E_=Math.PI/32,S_=3e3,C_={basis:[Mf(vf(E_,"rad"))],keywords:{auto:[null]}},I_=Symbol("autoRotateStartTime"),M_=Symbol("radiansPerSecond"),B_=Symbol("syncRotationRate"),T_=Symbol("onCameraChange"),k_=(t=>{var e,n,r;return class extends t{constructor(){super(...arguments),this[e]=new Map,this[n]=t=>{t.forEach(t=>{t instanceof MutationRecord&&"childList"!==t.type||(t.addedNodes.forEach(t=>{this[Dy](t)}),t.removedNodes.forEach(t=>{this[Py](t)}),this[fy]())})},this[r]=new MutationObserver(this[Ry])}connectedCallback(){super.connectedCallback();for(let i=0;i<this.children.length;++i)this[Dy](this.children[i]);const{ShadyDOM:t}=self;null==t?this[Ly].observe(this,{childList:!0}):this[Ly]=t.observeChildren(this,this[Ry])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:t}=self;null==t?this[Ly].disconnect():t.unobserveChildren(this[Ly])}[(e=ky,n=Ry,r=Ly,my)](time,t){super[my](time,t);const e=this[py],{annotationRenderer:n}=e,r=e.getCamera();e.shouldRender()&&(e.updateSurfaceHotspots(),e.updateHotspotsVisibility(r.position),n.domElement.style.display="",n.render(e,r))}updateHotspot(t){const e=this[ky].get(t.name);null!=e&&(e.updatePosition(t.position),e.updateNormal(t.normal),e.surface=t.surface,this[fy]())}queryHotspot(t){const e=this[ky].get(t);if(null==e)return null;const n=wy(e.position),r=wy(e.normal),o=e.facingCamera,l=this[py],c=l.getCamera(),h=new On;h.setFromMatrixPosition(e.matrixWorld),h.project(c);const d=l.width/2,f=l.height/2;h.x=h.x*d+d,h.y=-h.y*f+f;const m=wy(new On(h.x,h.y,h.z));return Number.isFinite(m.x)&&Number.isFinite(m.y)?{position:n,normal:r,canvasPosition:m,facingCamera:o}:null}positionAndNormalFromPoint(t,e){const n=this[py],r=n.getNDC(t,e),o=n.positionAndNormalFromPoint(r);if(null==o)return null;Oy.copy(n.target.matrixWorld).invert();const l=wy(o.position.applyMatrix4(Oy)),c=wy(o.normal.transformDirection(Oy));let h=null;return null!=o.uv&&(h=Ey(o.uv)),{position:l,normal:c,uv:h}}surfaceFromPoint(t,e){const n=this[py],r=n.getNDC(t,e);return n.surfaceFromPoint(r)}[Dy](t){if(!(t instanceof HTMLElement&&0===t.slot.indexOf("hotspot")))return;let e=this[ky].get(t.slot);null!=e?e.increment():(e=new sb({name:t.slot,position:t.dataset.position,normal:t.dataset.normal,surface:t.dataset.surface}),this[ky].set(t.slot,e),this[py].addHotspot(e)),this[py].queueRender()}[Py](t){if(!(t instanceof HTMLElement))return;const e=this[ky].get(t.slot);e&&(e.decrement()&&(this[py].removeHotspot(e),this[ky].delete(t.slot)),this[py].queueRender())}}})((t=>{var e,n,r;class l extends t{constructor(){super(...arguments),this[e]=void 0,this[n]=null,this[r]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[Xv]}get availableVariants(){return this.model?this.model[Gv]():[]}get originalGltfJson(){return this[Yv]}[(e=Xv,n=qv,r=Yv,Kv)](){return()=>{this[fy]()}}[Jv](t){return t.encoding=Ue,t.wrapS=At,t.wrapT=At,new HA(this[Kv](),t)}async createTexture(t,e="image/png"){const{textureUtils:n}=this[vy],r=await n.loadImage(t);return r.userData.mimeType=e,this[Jv](r)}async createLottieTexture(t,e=1){const{textureUtils:n}=this[vy],r=await n.loadLottie(t,e);return this[Jv](r)}createVideoTexture(t){const video=document.createElement("video");video.src=t,video.muted=!0,video.playsInline=!0,video.loop=!0,video.play();const e=new jl(video);return this[Jv](e)}createCanvasTexture(){const canvas=document.createElement("canvas"),t=new ql(canvas);return this[Jv](t)}async updated(t){if(super.updated(t),t.has("variantName")){const t=this[by].beginActivity();t(.1);const e=this[Xv],{variantName:n}=this;null!=e&&(await e[Fv](n),this[fy](),this.dispatchEvent(new CustomEvent("variant-applied"))),t(1)}if(t.has("orientation")||t.has("scale")){if(!this.loaded)return;const t=this[py];t.applyTransform(),t.updateBoundingBox(),t.updateShadow(),this[vy].arRenderer.onUpdateScene(),this[fy]()}}[gy](){super[gy]();const{currentGLTF:t}=this[py];if(null!=t){const{correlatedSceneGraph:e}=t;null!=e&&t!==this[qv]&&(this[Xv]=new Wv(e,this[Kv]()),this[Yv]=JSON.parse(JSON.stringify(e.gltf))),"variants"in t.userData&&this.requestUpdate("variantName")}this[qv]=t}async exportScene(t){const e=this[py];return new Promise(async(n,r)=>{const o={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(o,t),o.animations=e.animations,o.truncateDrawRange=!0;const shadow=e.shadow;let l=!1;null!=shadow&&(l=shadow.visible,shadow.visible=!1),await this[Xv][Ov](),(new Mp).register(t=>new sf(t)).parse(e.model,t=>n(new Blob([o.binary?t:JSON.stringify(t)],{type:o.binary?"application/octet-stream":"application/json"})),()=>r("glTF export failed"),o),null!=shadow&&(shadow.visible=l)})}materialFromPoint(t,e){const n=this[Xv];if(null==n)return null;const r=this[py],o=r.getNDC(t,e),l=r.hitFromPoint(o);return null==l||null==l.face?null:n[Nv](l)}}return $v([o({type:String,attribute:"variant-name"})],l.prototype,"variantName",void 0),$v([o({type:String,attribute:"orientation"})],l.prototype,"orientation",void 0),$v([o({type:String,attribute:"scale"})],l.prototype,"scale",void 0),l})((t=>{var e,n,r;class l extends t{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=S_,this.rotationPerSecond="auto",this[e]=performance.now(),this[n]=0,this[r]=t=>{this.autoRotate&&"user-interaction"===t.detail.source&&(this[I_]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[T_]),this[I_]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[T_]),this[I_]=performance.now()}updated(t){super.updated(t),t.has("autoRotate")&&(this[I_]=performance.now())}[(e=I_,n=M_,B_)](style){this[M_]=style[0]}[my](time,t){if(super[my](time,t),!this.autoRotate||!this[xy]()||this[vy].isPresenting)return;const e=Math.min(t,time-this[I_]-this.autoRotateDelay);e>0&&(this[py].yaw=this.turntableRotation+this[M_]*e*.001)}get turntableRotation(){return this[py].yaw}resetTurntableRotation(t=0){this[py].yaw=t}}return r=T_,w_([o({type:Boolean,attribute:"auto-rotate"})],l.prototype,"autoRotate",void 0),w_([o({type:Number,attribute:"auto-rotate-delay"})],l.prototype,"autoRotateDelay",void 0),w_([mm({intrinsics:C_,updateHandler:B_}),o({type:String,attribute:"rotation-per-second"})],l.prototype,"rotationPerSecond",void 0),l})((t=>{var e,n,r;class l extends t{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=ku,this.shadowSoftness=Ru,this.exposure=Lu,this[e]=null,this[n]=null,this[r]=null}updated(t){super.updated(t),t.has("shadowIntensity")&&(this[py].setShadowIntensity(this.shadowIntensity*Tu),this[fy]()),t.has("shadowSoftness")&&(this[py].setShadowSoftness(this.shadowSoftness),this[fy]()),t.has("exposure")&&(this[py].exposure=this.exposure,this[fy]()),(t.has("environmentImage")||t.has("skyboxImage"))&&this[_y]()&&this[Ou]()}hasBakedShadow(){return this[py].bakedShadows.size>0}async[(e=Du,n=Pu,r=Fu,Ou)](){const{skyboxImage:t,environmentImage:e}=this;null!=this[Fu]&&(this[Fu](),this[Fu]=null);const{textureUtils:n}=this[vy];if(null==n)return;const r=this[by].beginActivity();try{const{environmentMap:o,skybox:l}=await n.generateEnvironmentMapAndSkybox(bu(t),e,progress=>r(Eu(progress,0,1)));this[Du]!==o&&(this[Du]=o,this.dispatchEvent(new CustomEvent("environment-change"))),this[Pu]=null!=l?l.name===o.name?o:l:null,this[py].setEnvironmentAndSkybox(this[Du],this[Pu]),this[py].dispatchEvent({type:"envmap-update"})}catch(t){if(t instanceof Error)throw this[py].setEnvironmentAndSkybox(null,null),t}finally{r(1)}}}return Bu([o({type:String,attribute:"environment-image"})],l.prototype,"environmentImage",void 0),Bu([o({type:String,attribute:"skybox-image"})],l.prototype,"skyboxImage",void 0),Bu([o({type:Number,attribute:"shadow-intensity"})],l.prototype,"shadowIntensity",void 0),Bu([o({type:Number,attribute:"shadow-softness"})],l.prototype,"shadowSoftness",void 0),Bu([o({type:Number})],l.prototype,"exposure",void 0),l})((t=>{var e,n,r,l,c,h,d,f,m,A,v,y,x,_,w,E,S;class C extends t{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=wm,this.cameraTarget=Em,this.fieldOfView=Sm,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=Mm,this.interactionPrompt=Tm.AUTO,this.interactionPromptStyle=km.WIGGLE,this.orbitSensitivity=1,this.touchAction=Rm.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=hf,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[n]=this.shadowRoot.querySelector("#prompt"),this[r]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[l]=this.shadowRoot.querySelector(".pan-target"),this[c]=0,this[h]=1/0,this[d]=!1,this[f]=!1,this[m]=Sg.AUTOMATIC,this[A]=new Cg(this[py].camera,this[uy],this[py]),this[v]=new ih,this[y]=!1,this[x]=!1,this[_]=!1,this[w]=()=>{const source=this[Hm].changeSource;this[rg]=source,source===Sg.USER_INTERACTION&&(this[eg]=!0,this[qm]())},this[E]=()=>{this[Ym](),this[fy]();const source=this[Hm].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:source}}))},this[S]=t=>{"pointer-change-start"===t.type?this[hy].classList.add("pointer-tumbling"):this[hy].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[Hm].inputSensitivity}set inputSensitivity(t){this[Hm].inputSensitivity=t}getCameraOrbit(){const{theta:t,phi:e,radius:n}=this[sg];return{theta:t,phi:e,radius:n,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return wy(this[vy].isPresenting?this[vy].arRenderer.target:this[py].getTarget())}getFieldOfView(){return this[Hm].getFieldOfView()}getMinimumFieldOfView(){return this[Hm].options.minimumFieldOfView}getMaximumFieldOfView(){return this[Hm].options.maximumFieldOfView}getIdealAspect(){return this[py].idealAspect}jumpCameraToGoal(){this[ag]=!0,this.requestUpdate(ag,!1)}resetInteractionPrompt(){this[ig]=0,this[ng]=1/0,this[eg]=!1,this[tg]=this.interactionPrompt===Tm.AUTO&&this.cameraControls}zoom(t){const e=new WheelEvent("wheel",{deltaY:-30*t});this[uy].dispatchEvent(e)}connectedCallback(){super.connectedCallback(),this[Hm].addEventListener("user-interaction",this[Km]),this[Hm].addEventListener("pointer-change-start",this[Zm]),this[Hm].addEventListener("pointer-change-end",this[Zm])}disconnectedCallback(){super.disconnectedCallback(),this[Hm].removeEventListener("user-interaction",this[Km]),this[Hm].removeEventListener("pointer-change-start",this[Zm]),this[Hm].removeEventListener("pointer-change-end",this[Zm])}updated(t){super.updated(t);const e=this[Hm],n=this[py];if(t.has("cameraControls")&&(this.cameraControls?(e.enableInteraction(),this.interactionPrompt===Tm.AUTO&&(this[tg]=!0)):(e.disableInteraction(),this[qm]()),this[uy].setAttribute("aria-label",this[iy])),t.has("disableZoom")&&(e.disableZoom=this.disableZoom),t.has("disablePan")&&(e.enablePan=!this.disablePan),t.has("disableTap")&&(e.enableTap=!this.disableTap),(t.has("interactionPrompt")||t.has("cameraControls")||t.has("src"))&&(this.interactionPrompt===Tm.AUTO&&this.cameraControls&&!this[eg]?this[tg]=!0:this[qm]()),t.has("interactionPromptStyle")&&(this[Wm].style.opacity=this.interactionPromptStyle==km.BASIC?"1":"0"),t.has("touchAction")){const t=this.touchAction;e.applyOptions({touchAction:t}),e.updateTouchActionStyle()}t.has("orbitSensitivity")&&(e.orbitSensitivity=this.orbitSensitivity),t.has("interpolationDecay")&&(e.setDamperDecayTime(this.interpolationDecay),n.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[ag]&&Promise.resolve().then(()=>{e.jumpToGoal(),n.jumpToGoal(),this[Jm](),this[ag]=!1})}async updateFraming(){const t=this[py],e=t.adjustedFoV(t.framedFoVDeg);await t.updateFraming();const n=t.adjustedFoV(t.framedFoVDeg),r=this[Hm].getFieldOfView()/e;this[Hm].setFieldOfView(n*r),this[lg]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(t,e,n){const r=this[uy],o=this[$m];if("1"===o[0].style.opacity)return void console.warn("interact() failed because an existing interaction is running.");const l=new Array;l.push({x:vm(e.x),y:vm(e.y)});const c=[{x:l[0].x(0),y:l[0].y(0)}];null!=n&&(l.push({x:vm(n.x),y:vm(n.y)}),c.push({x:l[1].x(0),y:l[1].y(0)}));let h=performance.now();const{width:d,height:f}=this[py],m=t=>{for(const[i,e]of c.entries()){const{style:style}=o[i];style.transform=`translateX(${d*e.x}px) translateY(${f*e.y}px)`,"pointerdown"===t?style.opacity="1":"pointerup"===t&&(style.opacity="0");const n={pointerId:i-5678,pointerType:"touch",target:r,clientX:d*e.x,clientY:f*e.y,altKey:!0};r.dispatchEvent(new PointerEvent(t,n))}},A=()=>{const e=this[rg];if(e!==Sg.AUTOMATIC||!r.isConnected){for(const t of this[$m])t.style.opacity="0";return m("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:e}})),void document.removeEventListener("visibilitychange",v)}const time=Math.min(1,(performance.now()-h)/t);for(const[i,t]of c.entries())t.x=l[i].x(time),t.y=l[i].y(time);m("pointermove"),time<1?requestAnimationFrame(A):(m("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Sg.AUTOMATIC}})),document.removeEventListener("visibilitychange",v))},v=()=>{let t=0;"hidden"===document.visibilityState?t=performance.now()-h:h=performance.now()-t};document.addEventListener("visibilitychange",v),m("pointerdown"),this[rg]=Sg.AUTOMATIC,requestAnimationFrame(A)}[(e=jm,n=Wm,r=$m,l=Vm,c=ig,h=ng,d=eg,f=tg,m=rg,A=Hm,v=sg,y=ag,x=og,_=lg,hg)](style){const t=this[Hm],e=this[py];e.framedFoVDeg=180*style[0]/Math.PI,t.changeSource=Sg.NONE,t.setFieldOfView(e.adjustedFoV(e.framedFoVDeg)),this[Km]()}[cg](style){const t=this[Hm];if(this[lg]){const{theta:t,phi:e}=this.getCameraOrbit();style[0]=t,style[1]=e,this[lg]=!1}t.changeSource=Sg.NONE,t.setOrbit(style[0],style[1],style[2]),this[Km]()}[dg](style){this[Hm].applyOptions({minimumAzimuthalAngle:style[0],minimumPolarAngle:style[1],minimumRadius:style[2]}),this.jumpCameraToGoal()}[pg](style){this[Hm].applyOptions({maximumAzimuthalAngle:style[0],maximumPolarAngle:style[1],maximumRadius:style[2]}),this[Xm](style[2]),this.jumpCameraToGoal()}[fg](style){this[Hm].applyOptions({minimumFieldOfView:180*style[0]/Math.PI}),this.jumpCameraToGoal()}[mg](style){const t=this[py].adjustedFoV(180*style[0]/Math.PI);this[Hm].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[ug](style){const[t,e,n]=style;this[vy].arRenderer.isPresenting||this[py].setTarget(t,e,n),this[Hm].changeSource=Sg.NONE,this[vy].arRenderer.updateTarget(),this[Km]()}[my](time,t){if(super[my](time,t),this[vy].isPresenting||!this[xy]())return;const e=this[Hm],n=this[py],r=performance.now();if(this[tg]&&this.loaded&&r>this[oy]+this.interactionPromptThreshold&&(this[tg]=!1,this[ng]=r,this[jm].classList.add("visible")),isFinite(this[ng])&&this.interactionPromptStyle===km.WIGGLE){const t=(r-this[ng])/ym%1,o=xm(t),l=_m(t);if(this[Wm].style.opacity=`${l}`,o!==this[ig]){const t=o*n.width*.05,r=(o-this[ig])*Math.PI/16;this[Wm].style.transform=`translateX(${t}px)`,e.changeSource=Sg.AUTOMATIC,e.adjustOrbit(r,0,0),this[ig]=o}}const o=e.update(time,t),l=n.updateTarget(t);(o||l)&&this[Jm]()}[qm](){this[tg]=!1,this[jm].classList.remove("visible"),this[ng]=1/0}[Xm](t){const e=2*Math.max(this[py].boundingSphere.radius,t);this[Hm].updateNearFar(0,e)}[Ym](){const{theta:t,phi:e}=this[Hm].getCameraSpherical(this[sg]),n=(4+Math.floor((t%Gm+zm)/Um))%4,r=Math.floor(e/Qm),o=Cm[n],l=Im[r];this[ay](`View from stage ${l}${o}`)}get[iy](){return super[iy]+(this.cameraControls?Bm:"")}async[Ay](t){const e=this[Hm],n=this[py],r=n.adjustedFoV(n.framedFoVDeg);super[Ay](t);const o=n.adjustedFoV(n.framedFoVDeg)/r,l=e.getFieldOfView()*(isFinite(o)?o:1);e.updateAspect(this[py].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[Hm].setFieldOfView(l),this.jumpCameraToGoal()}[gy](){super[gy](),this[og]?this[lg]=!0:this[og]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return w=Km,E=Jm,S=Zm,bm([o({type:Boolean,attribute:"camera-controls"})],C.prototype,"cameraControls",void 0),bm([mm({intrinsics:Pm,observeEffects:!0,updateHandler:cg}),o({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],C.prototype,"cameraOrbit",void 0),bm([mm({intrinsics:Nm,observeEffects:!0,updateHandler:ug}),o({type:String,attribute:"camera-target",hasChanged:()=>!0})],C.prototype,"cameraTarget",void 0),bm([mm({intrinsics:Lm,observeEffects:!0,updateHandler:hg}),o({type:String,attribute:"field-of-view",hasChanged:()=>!0})],C.prototype,"fieldOfView",void 0),bm([mm({intrinsics:Om,updateHandler:dg}),o({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],C.prototype,"minCameraOrbit",void 0),bm([mm({intrinsics:Fm,updateHandler:pg}),o({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],C.prototype,"maxCameraOrbit",void 0),bm([mm({intrinsics:Dm,updateHandler:fg}),o({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],C.prototype,"minFieldOfView",void 0),bm([mm({intrinsics:Lm,updateHandler:mg}),o({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],C.prototype,"maxFieldOfView",void 0),bm([o({type:Number,attribute:"interaction-prompt-threshold"})],C.prototype,"interactionPromptThreshold",void 0),bm([o({type:String,attribute:"interaction-prompt"})],C.prototype,"interactionPrompt",void 0),bm([o({type:String,attribute:"interaction-prompt-style"})],C.prototype,"interactionPromptStyle",void 0),bm([o({type:Number,attribute:"orbit-sensitivity"})],C.prototype,"orbitSensitivity",void 0),bm([o({type:String,attribute:"touch-action"})],C.prototype,"touchAction",void 0),bm([o({type:Boolean,attribute:"disable-zoom"})],C.prototype,"disableZoom",void 0),bm([o({type:Boolean,attribute:"disable-pan"})],C.prototype,"disablePan",void 0),bm([o({type:Boolean,attribute:"disable-tap"})],C.prototype,"disableTap",void 0),bm([o({type:Number,attribute:"interpolation-decay"})],C.prototype,"interpolationDecay",void 0),C})((t=>{var e,n,r,l,c,h,d,f,m,A;class v extends t{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=Vx,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[n]=this.shadowRoot.querySelector(".ar-button"),this[r]=document.createElement("a"),this[l]=new Set,this[c]=jx.NONE,this[h]=!1,this[d]=t=>{t.preventDefault(),this.activateAR()},this[f]=({status:t})=>{t!==Pg.NOT_PRESENTING&&this[vy].arRenderer.presentedScene!==this[py]||(this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}})),t===Pg.NOT_PRESENTING?this.removeAttribute("ar-tracking"):t===Pg.SESSION_STARTED&&this.setAttribute("ar-tracking",Og.TRACKING))},this[m]=({status:t})=>{this.setAttribute("ar-tracking",t),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:t}}))},this[A]=t=>{"_apple_ar_quicklook_button_tapped"==t.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Kx]!==jx.NONE}connectedCallback(){super.connectedCallback(),this[vy].arRenderer.addEventListener("status",this[n_]),this.setAttribute("ar-status",Pg.NOT_PRESENTING),this[vy].arRenderer.addEventListener("tracking",this[i_]),this[Zx].addEventListener("message",this[r_])}disconnectedCallback(){super.disconnectedCallback(),this[vy].arRenderer.removeEventListener("status",this[n_]),this[vy].arRenderer.removeEventListener("tracking",this[i_]),this[Zx].removeEventListener("message",this[r_])}update(t){super.update(t),t.has("arScale")&&(this[py].canScale="fixed"!==this.arScale),t.has("arPlacement")&&(this[py].updateShadow(),this[fy]()),t.has("arModes")&&(this[Jx]=Hx(this.arModes)),(t.has("ar")||t.has("arModes")||t.has("src")||t.has("iosSrc"))&&this[s_]()}async activateAR(){switch(this[Kx]){case jx.QUICK_LOOK:this[Yx]();break;case jx.WEBXR:await this[$x]();break;case jx.SCENE_VIEWER:this[qx]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async[(e=Xx,n=Wx,r=Zx,l=Jx,c=Kx,h=t_,d=e_,f=n_,m=i_,A=r_,s_)](){let t=jx.NONE;if(this.ar){if(null!=this.src)for(const e of this[Jx]){if("webxr"===e&&uu&&!Qx&&await this[vy].arRenderer.supportsPresentation()){t=jx.WEBXR;break}if("scene-viewer"===e&&gu&&!zx){t=jx.SCENE_VIEWER;break}if("quick-look"===e&&vu){t=jx.QUICK_LOOK;break}}t===jx.NONE&&null!=this.iosSrc&&vu&&(t=jx.QUICK_LOOK)}if(t!==jx.NONE)this[Wx].classList.add("enabled"),this[Wx].addEventListener("click",this[e_]);else if(this[Wx].classList.contains("enabled")){this[Wx].removeEventListener("click",this[e_]),this[Wx].classList.remove("enabled");const t=Pg.FAILED;this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}}))}this[Kx]=t}async[$x](){console.log("Attempting to present in AR with WebXR..."),await this[a_]();try{this[Wx].removeEventListener("click",this[e_]);const{arRenderer:t}=this[vy];t.placeOnWall="wall"===this.arPlacement,await t.present(this[py],this.xrEnvironment)}catch(t){console.warn("Error while trying to present in AR with WebXR"),console.error(t),await this[vy].arRenderer.stopPresenting(),Qx=!0,console.warn("Falling back to next ar-mode"),await this[s_](),this.activateAR()}finally{this[s_]()}}async[a_](){this.loaded||(this[t_]=!0,this[ly](),await Mu(this,"load"),this[t_]=!1)}[_y](){return super[_y]()||this[t_]}[qx](){const t=self.location.toString(),e=new URL(t),n=new URL(this.src,t);n.hash&&(n.hash="");const r=new URLSearchParams(n.search);if(e.hash=Gx,r.set("mode","ar_preferred"),r.has("disable_occlusion")||r.set("disable_occlusion","true"),"fixed"===this.arScale&&r.set("resizable","false"),"wall"===this.arPlacement&&r.set("enable_vertical_placement","true"),r.has("sound")){const e=new URL(r.get("sound"),t);r.set("sound",e.toString())}if(r.has("link")){const e=new URL(r.get("link"),t);r.set("link",e.toString())}const o=`intent://arvr.google.com/scene-viewer/1.0?${r.toString()+"&file="+encodeURIComponent(n.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(e.toString())};end;`;self.addEventListener("hashchange",()=>{self.location.hash===Gx&&(zx=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[s_]())},{once:!0}),this[Zx].setAttribute("href",o),console.log("Attempting to present in AR with Scene Viewer..."),this[Zx].click()}async[Yx](){const t=!this.iosSrc;this[Wx].classList.remove("enabled");const e=t?await this.prepareUSDZ():this.iosSrc,n=new URL(e,self.location.toString());if(t){const t=self.location.toString(),e=new URL(t),r=new URL(this.src,e);r.hash&&(n.hash=r.hash)}"fixed"===this.arScale&&(n.hash&&(n.hash+="&"),n.hash+="allowsContentScaling=0");const r=this[Zx];r.setAttribute("rel","ar");const img=document.createElement("img");r.appendChild(img),r.setAttribute("href",n.toString()),t&&r.setAttribute("download","model.usdz"),r.style.display="none",r.isConnected||this.shadowRoot.appendChild(r),console.log("Attempting to present in AR with Quick Look..."),r.click(),r.removeChild(img),t&&URL.revokeObjectURL(e),this[Wx].classList.add("enabled")}async prepareUSDZ(){const t=this[by].beginActivity();await this[a_]();const{model:e,shadow:shadow}=this[py];if(null==e)return"";let n=!1;null!=shadow&&(n=shadow.visible,shadow.visible=!1),t(.2);const r=new Bx,o=await r.parse(e),l=new Blob([o],{type:"model/vnd.usdz+zip"}),c=URL.createObjectURL(l);return t(1),null!=shadow&&(shadow.visible=n),c}}return Ux([o({type:Boolean,attribute:"ar"})],v.prototype,"ar",void 0),Ux([o({type:String,attribute:"ar-scale"})],v.prototype,"arScale",void 0),Ux([o({type:String,attribute:"ar-placement"})],v.prototype,"arPlacement",void 0),Ux([o({type:String,attribute:"ar-modes"})],v.prototype,"arModes",void 0),Ux([o({type:String,attribute:"ios-src"})],v.prototype,"iosSrc",void 0),Ux([o({type:Boolean,attribute:"xr-environment"})],v.prototype,"xrEnvironment",void 0),v})((t=>{var e,n,r,l,c,h,d,f;class m extends t{constructor(...t){super(...t),this.poster=null,this.reveal=d_.AUTO,this.loading=p_.AUTO,this[e]=!1,this[n]=!1,this[r]=this.shadowRoot.querySelector(".slot.poster"),this[l]=this.shadowRoot.querySelector("#default-poster"),this[c]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[h]=this[g_].getAttribute("aria-label"),this[d]=_u(progress=>{const t=this[f_].parentNode;requestAnimationFrame(()=>{this[f_].style.transform=`scaleX(${progress})`,0===progress&&(t.removeChild(this[f_]),t.appendChild(this[f_])),1===progress?this[f_].classList.add("hide"):this[f_].classList.remove("hide")})},l_),this[f]=t=>{const progress=t.detail.totalProgress;1===progress&&(this[y_].flush(),this.loaded&&(this[A_]||this.reveal===d_.AUTO)&&this[v_]()),this[y_](progress),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:progress}}))};const o=self.ModelViewerElement||{},m=o.dracoDecoderLocation||c_;vp.setDRACODecoderLocation(m);const A=o.ktx2TranscoderLocation||h_;vp.setKTX2TranscoderLocation(A),o.meshoptDecoderLocation&&vp.setMeshoptDecoderLocation(o.meshoptDecoderLocation);const v=o.lottieLoaderLocation||u_;xA.singleton.textureUtils.lottieLoaderUrl=v}static set dracoDecoderLocation(t){vp.setDRACODecoderLocation(t)}static get dracoDecoderLocation(){return vp.getDRACODecoderLocation()}static set ktx2TranscoderLocation(t){vp.setKTX2TranscoderLocation(t)}static get ktx2TranscoderLocation(){return vp.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(t){vp.setMeshoptDecoderLocation(t)}static get meshoptDecoderLocation(){return vp.getMeshoptDecoderLocation()}static set lottieLoaderLocation(t){xA.singleton.textureUtils.lottieLoaderUrl=t}static get lottieLoaderLocation(){return xA.singleton.textureUtils.lottieLoaderUrl}static mapURLs(t){xA.singleton.loader[mp].manager.setURLModifier(t)}dismissPoster(){this.loaded?this[v_]():(this[A_]=!0,this[ly]())}showPoster(){const t=this[m_];if(t.classList.contains("show"))return;t.classList.add("show"),this[uy].classList.remove("show");const e=this[g_];e.removeAttribute("tabindex"),e.removeAttribute("aria-hidden");const n=this.modelIsVisible;this[b_]=!1,this[ny](n)}getDimensions(){return wy(this[py].size)}getBoundingBoxCenter(){return wy(this[py].boundingBox.getCenter(new On))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[by].addEventListener("progress",this[__])}disconnectedCallback(){super.disconnectedCallback(),this[by].removeEventListener("progress",this[__])}async updated(t){super.updated(t),t.has("poster")&&null!=this.poster&&(this[g_].style.backgroundImage=`url(${this.poster})`),t.has("alt")&&this[g_].setAttribute("aria-label",this[ry]),(t.has("reveal")||t.has("loading"))&&this[ly]()}[(e=b_,n=A_,r=m_,l=g_,c=f_,h=x_,d=y_,f=__,_y)](){return!!this.src&&(this[A_]||this.loading===p_.EAGER||this.reveal===d_.AUTO&&this[ey])}[v_](){this[A_]=!1;const t=this[m_];if(!t.classList.contains("show"))return;t.classList.remove("show"),this[uy].classList.add("show");const e=this.modelIsVisible;this[b_]=!0,this[ny](e);const n=this.getRootNode();n&&n.activeElement===this&&this[uy].focus();const r=this[g_];r.setAttribute("aria-hidden","true"),r.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[xy](){return super[xy]()&&this[b_]}}return o_([o({type:String})],m.prototype,"poster",void 0),o_([o({type:String})],m.prototype,"reveal",void 0),o_([o({type:String})],m.prototype,"loading",void 0),m})((t=>{var e;class n extends t{constructor(...t){super(t),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[py].subscribeMixerEvent("loop",t=>{const e=t.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:e}}))}),this[py].subscribeMixerEvent("finished",()=>{this[By]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[py].animationNames:[]}get duration(){return this[py].duration}get paused(){return this[By]}get currentTime(){return this[py].animationTime}set currentTime(t){this[py].animationTime=t,this[fy]()}get timeScale(){return this[py].animationTimeScale}set timeScale(t){this[py].animationTimeScale=t}pause(){this[By]||(this[By]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(t){this.availableAnimations.length>0&&(this[By]=!1,this[My](t),this.dispatchEvent(new CustomEvent("play")))}[(e=By,gy)](){super[gy](),this[By]=!0,this.autoplay&&this.play()}[my](t,e){super[my](t,e),this[By]||!this[xy]()&&!this[vy].isPresenting||(this[py].updateAnimation(e/Iy),this[fy]())}updated(t){super.updated(t),t.has("autoplay")&&this.autoplay&&this.play(),t.has("animationName")&&this[My]()}[My](t=Ty){var e;const n=null!==(e=t.repetitions)&&void 0!==e?e:1/0,r=t.pingpong?Ce:1===n?Ee:Se;this[py].playAnimation(this.animationName,this.animationCrossfadeDuration/Iy,r,n),this[By]&&(this[py].updateAnimation(0),this[fy]())}}return Cy([o({type:Boolean})],n.prototype,"autoplay",void 0),Cy([o({type:String,attribute:"animation-name"})],n.prototype,"animationName",void 0),Cy([o({type:Number,attribute:"animation-crossfade-duration"})],n.prototype,"animationCrossfadeDuration",void 0),n})((t=>{var e;const n=t=>{if(null==t.shadowRoot||t.hasAttribute("data-js-focus-visible"))return()=>{};if(!self.applyFocusVisiblePolyfill){const e=()=>{self.applyFocusVisiblePolyfill(t.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",e,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",e)}}return self.applyFocusVisiblePolyfill(t.shadowRoot),()=>{}},r=Symbol("endPolyfillCoordination");return e=r,class extends t{constructor(){super(...arguments),this[e]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),null==this[r]&&(this[r]=n(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),null!=this[r]&&(this[r](),this[r]=null)}}})(Sy)))))))));customElements.define("model-viewer",k_)},29:function(t,e,n){"use strict";var r=n(3),o=n.n(r),l=n(38),c=n(0),h=n(37),d=n(5),f=Object(l.a)("image"),m=f[0],A=f[1];e.a=m({props:{src:String,fit:String,alt:String,lazyLoad:Boolean,width:[String,Number],height:[String,Number]},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var style={};return Object(c.b)(this.width)&&(style.width=Object(h.a)(this.width)),Object(c.b)(this.height)&&(style.height=Object(h.a)(this.height)),style}},created:function(){var t=this.$Lazyload;t&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){t.el===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){t.el!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},renderPlaceholder:function(){var t=this.$createElement;return this.loading?t("div",{class:A("loading")},[this.slots("loading")||t(d.a,{attrs:{name:"photo-o",size:"22"}})]):this.error?t("div",{class:A("error")},[this.slots("error")||t(d.a,{attrs:{name:"warning-o",size:"22"}})]):void 0},renderImage:function(){var t=this.$createElement,e={class:A("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",o()([{ref:"image",directives:[{name:"lazy",value:this.src}]},e])):t("img",o()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},e]))}},render:function(t){return t("div",{class:A(),style:this.style,on:{click:this.onClick}},[this.renderImage(),this.renderPlaceholder()])}})},3:function(t,e,n){"use strict";function r(){return(r=Object.assign||function(a){for(var b,t=1;t<arguments.length;t++)for(var e in b=arguments[t])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)}var o=["attrs","props","domProps"],l=["class","style","directives"],c=["on","nativeOn"],h=function(a,b){return function(){a&&a.apply(this,arguments),b&&b.apply(this,arguments)}};t.exports=function(a){return a.reduce(function(t,a){for(var b in a)if(t[b])if(-1!==o.indexOf(b))t[b]=r({},t[b],a[b]);else if(-1!==l.indexOf(b)){var e=t[b]instanceof Array?t[b]:[t[b]],n=a[b]instanceof Array?a[b]:[a[b]];t[b]=e.concat(n)}else if(-1!==c.indexOf(b))for(var d in a[b])if(t[b][d]){var g=t[b][d]instanceof Array?t[b][d]:[t[b][d]],f=a[b][d]instanceof Array?a[b][d]:[a[b][d]];t[b][d]=g.concat(f)}else t[b][d]=a[b][d];else if("hook"==b)for(var i in a[b])t[b][i]=t[b][i]?h(t[b][i],a[b][i]):a[b][i];else t[b]=a[b];else t[b]=a[b];return t},{})}},30:function(t,e,n){"use strict";var r=n(3),o=n.n(r),l=n(38),c=n(0),h=n(1),d=Object(l.a)("info"),f=d[0],m=d[1];function A(t,e,n,r){if(Object(c.b)(e.info)&&""!==e.info)return t("div",o()([{class:m()},Object(h.b)(r,!0)]),[e.info])}A.props={info:[String,Number]},e.a=f(A)},31:function(t,e,n){"use strict";(function(t){n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f});var r=n(0),o=Date.now();var l=r.d?t:window,c=l.requestAnimationFrame||function(t){var e=Date.now(),n=Math.max(0,16-(e-o)),r=setTimeout(t,n);return o=e+n,r},h=l.cancelAnimationFrame||l.clearTimeout;function d(t){return c.call(l,t)}function f(t){h.call(l,t)}}).call(this,n(32))},37:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),o=n(76);function l(t){if(Object(r.b)(t))return t=String(t),Object(o.a)(t)?t+"px":t}},38:function(t,e,n){"use strict";var r="__",o="--";function l(t,e,symbol){return e?t+symbol+e:t}function c(t,e){if("string"==typeof e)return l(t,e,o);if(Array.isArray(e))return e.map(function(e){return c(t,e)});var n={};return e&&Object.keys(e).forEach(function(r){n[t+o+r]=e[r]}),n}function h(t){return function(e,n){return e&&"string"!=typeof e&&(n=e,e=""),e=l(t,e,r),n?[e,c(e,n)]:e}}var d=n(15),f=n(4).default.extend({methods:{slots:function(t,e){void 0===t&&(t="default");var n=this.$slots,r=this.$scopedSlots[t];return r?r(e):n[t]}}}),m={type:Array,default:function(){return[]}},A={type:Number,default:0};function v(t){var e=this.name;t.component(e,this),t.component(Object(d.a)("-"+e),this)}function y(t){return{functional:!0,props:t.props,model:t.model,render:function(e,n){return t(e,n.props,function(t){var e=t.scopedSlots||t.data.scopedSlots||{},n=t.slots();return Object.keys(n).forEach(function(t){e[t]||(e[t]=function(){return n[t]})}),e}(n),n)}}}function x(t){return function(e){var n;return"function"==typeof e&&(e=y(e)),e.functional||(e.mixins=e.mixins||[],e.mixins.push(f)),e.props&&(n=e.props,Object.keys(n).forEach(function(t){n[t]===Array?n[t]=m:n[t]===Number&&(n[t]=A)})),e.name=t,e.install=v,e}}var _=n(0),w=n(48);function E(t){var e=Object(d.a)(t)+".";return function(path){for(var t=Object(_.a)(w.a.messages(),e+path)||Object(_.a)(w.a.messages(),path),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,r):t}}function S(t){return[x(t="van-"+t),h(t),E(t)]}n.d(e,"a",function(){return S})},40:function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var content=function(t,e){var content=t[1]||"",n=t[3];if(!n)return content;if(e&&"function"==typeof btoa){var r=(l=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+" */"),o=n.sources.map(function(source){return"/*# sourceURL="+n.sourceRoot+source+" */"});return[content].concat(o).concat([r]).join("\n")}var l;return[content].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+content+"}":content}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<t.length;i++){var l=t[i];null!=l[0]&&r[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="("+l[2]+") and ("+n+")"),e.push(l))}},e}},41:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],l=o[0],c={id:t+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[l]?r[l].parts.push(c):n.push(r[l]={id:l,parts:[c]})}return n}n.r(e),n.d(e,"default",function(){return y});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l={},head=o&&(document.head||document.getElementsByTagName("head")[0]),c=null,h=0,d=!1,f=function(){},m=null,A="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function y(t,e,n,o){d=n,m=o||{};var c=r(t,e);return x(c),function(e){for(var n=[],i=0;i<c.length;i++){var o=c[i];(h=l[o.id]).refs--,n.push(h)}e?x(c=r(t,e)):c=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete l[h.id]}}}}function x(t){for(var i=0;i<t.length;i++){var e=t[i],n=l[e.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](e.parts[r]);for(;r<e.parts.length;r++)n.parts.push(w(e.parts[r]));n.parts.length>e.parts.length&&(n.parts.length=e.parts.length)}else{var o=[];for(r=0;r<e.parts.length;r++)o.push(w(e.parts[r]));l[e.id]={id:e.id,refs:1,parts:o}}}}function _(){var t=document.createElement("style");return t.type="text/css",head.appendChild(t),t}function w(t){var e,n,r=document.querySelector("style["+A+'~="'+t.id+'"]');if(r){if(d)return f;r.parentNode.removeChild(r)}if(v){var o=h++;r=c||(c=_()),e=C.bind(null,r,o,!1),n=C.bind(null,r,o,!0)}else r=_(),e=function(t,e){var n=e.css,r=e.media,o=e.sourceMap;r&&t.setAttribute("media",r);m.ssrId&&t.setAttribute(A,e.id);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var E,S=(E=[],function(t,e){return E[t]=e,E.filter(Boolean).join("\n")});function C(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=S(e,o);else{var l=document.createTextNode(o),c=t.childNodes;c[e]&&t.removeChild(c[e]),c.length?t.insertBefore(l,c[e]):t.appendChild(l)}}},48:function(t,e,n){"use strict";var r=n(4),o=n(75),l=r.default.prototype,c=r.default.util.defineReactive;c(l,"$vantLang","zh-CN"),c(l,"$vantMessages",{"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",complete:"完成",loading:"加载中...",telEmpty:"请填写电话",nameEmpty:"请填写姓名",confirmDelete:"确定要删除么",telInvalid:"请填写正确的电话",vanContactCard:{addText:"添加联系人"},vanContactList:{addText:"新建联系人"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计："},vanCoupon:{valid:"有效期",unlimited:"无使用门槛",discount:function(t){return t+"折"},condition:function(t){return"满"+t+"元可用"}},vanCouponCell:{title:"优惠券",tips:"使用优惠",count:function(t){return t+"张可用"}},vanCouponList:{empty:"暂无优惠券",exchange:"兑换",close:"不使用优惠",enable:"可使用优惠券",disabled:"不可使用优惠券",placeholder:"请输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码格式不正确",defaultAddress:"设为默认收货地址",telPlaceholder:"收货人手机号",namePlaceholder:"收货人姓名",areaPlaceholder:"选择省 / 市 / 区"},vanAddressEditDetail:{label:"详细地址",placeholder:"街道门牌、楼层房间号等信息"},vanAddressList:{add:"新增地址"}}});e.a={messages:function(){return l.$vantMessages[l.$vantLang]},use:function(t,e){var n;l.$vantLang=t,this.add(((n={})[t]=e,n))},add:function(t){void 0===t&&(t={}),Object(o.a)(l.$vantMessages,t)}}},5:function(t,e,n){"use strict";var r=n(3),o=n.n(r),l=n(38),c=n(37),h=n(1),d=n(30),f=n(29),m=Object(l.a)("icon"),A=m[0],v=m[1];function y(t,e,n,r){var l,m=!!(l=e.name)&&-1!==l.indexOf("/");return t(e.tag,o()([{class:[e.classPrefix,m?"":e.classPrefix+"-"+e.name],style:{color:e.color,fontSize:Object(c.a)(e.size)}},Object(h.b)(r,!0)]),[n.default&&n.default(),m&&t(f.a,{class:v("image"),attrs:{fit:"contain",src:e.name}}),t(d.a,{attrs:{info:e.info}})])}y.props={name:String,size:[String,Number],color:String,info:[String,Number],tag:{type:String,default:"i"},classPrefix:{type:String,default:v()}},e.a=A(y)},56:function(t,e,n){"use strict";var r=n(3),o=n.n(r),l=n(2),c=n(38),h=n(0),d=n(1),f=n(7),m=Object(c.a)("overlay"),A=m[0],v=m[1];function y(t){Object(f.c)(t,!0)}function x(t,e,n,r){var style=Object(l.a)({zIndex:e.zIndex},e.customStyle);return Object(h.b)(e.duration)&&(style.animationDuration=e.duration+"s"),t("transition",{attrs:{name:"van-fade"}},[t("div",o()([{directives:[{name:"show",value:e.visible}],style:style,class:[v(),e.className],on:{touchmove:y}},Object(d.b)(r,!0)]))])}x.props={zIndex:Number,className:null,visible:Boolean,customStyle:Object,duration:{type:Number,default:null}},e.a=A(x)},7:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h}),n.d(e,"d",function(){return d}),n.d(e,"c",function(){return f});var r=n(0),o=!1;if(!r.d)try{var l={};Object.defineProperty(l,"passive",{get:function(){o=!0}}),window.addEventListener("test-passive",null,l)}catch(t){}function c(t,e,n,l){void 0===l&&(l=!1),r.d||t.addEventListener(e,n,!!o&&{capture:!1,passive:l})}function h(t,e,n){r.d||t.removeEventListener(e,n)}function d(t){t.stopPropagation()}function f(t,e){("boolean"!=typeof t.cancelable||t.cancelable)&&t.preventDefault(),e&&d(t)}},75:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),o=Object.prototype.hasOwnProperty;function l(t,e){return Object.keys(e).forEach(function(n){!function(t,e,n){var c=e[n];Object(r.b)(c)&&(o.call(t,n)&&Object(r.c)(c)&&"function"!=typeof c?t[n]=l(Object(t[n]),e[n]):t[n]=c)}(t,e,n)}),t}},76:function(t,e,n){"use strict";function r(t){return/^\d+(\.\d+)?$/.test(t)}n.d(e,"a",function(){return r})},8:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"d",function(){return l}),n.d(e,"f",function(){return c}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d});var r="#f44",o="#1989fa",l="#07c160",c="#fff",h="#c9c9c9",d="#969799"},9:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return p}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return x}),n.d(e,"f",function(){return y}),n.d(e,"g",function(){return v}),n.d(e,"h",function(){return E}),n.d(e,"i",function(){return w}),n.d(e,"j",function(){return _}),n.d(e,"k",function(){return A}),n.d(e,"l",function(){return m}),n.d(e,"m",function(){return dt}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return d}),n.d(e,"p",function(){return h}),n.d(e,"q",function(){return c}),n.d(e,"r",function(){return B});const r=0,o=2,p=1,l=2,c=0,h=9,d=15,f=16,dt=22,m=37,A=43,v=76,y=83,x=97,_=100,w=103,E=109;class S{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class C{constructor(t,e,n,i){this._dataView=new DataView(t.buffer,t.byteOffset+e,n),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,e=0){const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==e&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}new Uint8Array([0]);const I=[171,75,84,88,32,50,48,187,13,10,26,10];function M(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):t.from(e).toString("utf8")}function B(t){const e=new Uint8Array(t.buffer,t.byteOffset,I.length);if(e[0]!==I[0]||e[1]!==I[1]||e[2]!==I[2]||e[3]!==I[3]||e[4]!==I[4]||e[5]!==I[5]||e[6]!==I[6]||e[7]!==I[7]||e[8]!==I[8]||e[9]!==I[9]||e[10]!==I[10]||e[11]!==I[11])throw new Error("Missing KTX 2.0 identifier.");const n=new S,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new C(t,I.length,i,!0);n.vkFormat=s._nextUint32(),n.typeSize=s._nextUint32(),n.pixelWidth=s._nextUint32(),n.pixelHeight=s._nextUint32(),n.pixelDepth=s._nextUint32(),n.layerCount=s._nextUint32(),n.faceCount=s._nextUint32();const a=s._nextUint32();n.supercompressionScheme=s._nextUint32();const r=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),c=s._nextUint32(),h=s._nextUint64(),d=s._nextUint64(),f=new C(t,I.length+i,3*a*8,!0);for(let e=0;e<a;e++)n.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});const m=new C(t,r,o,!0),p={vendorId:m._skip(4)._nextUint16(),descriptorType:m._nextUint16(),versionNumber:m._nextUint16(),descriptorBlockSize:m._nextUint16(),colorModel:m._nextUint8(),colorPrimaries:m._nextUint8(),transferFunction:m._nextUint8(),flags:m._nextUint8(),texelBlockDimension:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],bytesPlane:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],samples:[]},g=(p.descriptorBlockSize/4-6)/4;for(let t=0;t<g;t++){const e={bitOffset:m._nextUint16(),bitLength:m._nextUint8(),channelType:m._nextUint8(),samplePosition:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=m._nextInt32(),e.sampleUpper=m._nextInt32()):(e.sampleLower=m._nextUint32(),e.sampleUpper=m._nextUint32()),p.samples[t]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const A=new C(t,l,c,!0);for(;A._offset<c;){const t=A._nextUint32(),e=A._scan(t),i=M(e),s=A._scan(t-e.byteLength);n.keyValue[i]=i.match(/^ktx/i)?M(s):s,A._offset%4&&A._skip(4-A._offset%4)}if(d<=0)return n;const v=new C(t,h,d,!0),u=v._nextUint16(),b=v._nextUint16(),y=v._nextUint32(),x=v._nextUint32(),_=v._nextUint32(),w=v._nextUint32(),E=[];for(let t=0;t<a;t++)E.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const B=h+v._offset,T=B+y,k=T+x,R=k+_,L=new Uint8Array(t.buffer,t.byteOffset+B,y),D=new Uint8Array(t.buffer,t.byteOffset+T,x),P=new Uint8Array(t.buffer,t.byteOffset+k,_),O=new Uint8Array(t.buffer,t.byteOffset+R,w);return n.globalData={endpointCount:u,selectorCount:b,imageDescs:E,endpointsData:L,selectorsData:D,tablesData:P,extendedData:O},n}}).call(this,n(131).Buffer)},92:function(t,e,n){var r;"undefined"!=typeof self&&self,t.exports=(r=n(4),function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=64)}([function(t,e,n){"use strict";var r=n(45),o=n.n(r),i=n(6),a=n(50),s=n(13),u=n(49),l=n(27);e.a={data:function(){return{unwatchFns:[]}},mounted:function(){var t=this;s.b&&s.b.load().then(function(){t.__contextReady&&t.__contextReady.call(t,t.convertProps())}),this.$amap=this.$amap||this.$parent.$amap,this.$amap?this.register():this.$on(u.a.AMAP_READY_EVENT,function(e){t.$amap=e,t.register()})},destroyed:function(){this.unregisterEvents(),this.$amapComponent&&(this.$amapComponent.setMap&&this.$amapComponent.setMap(null),this.$amapComponent.close&&this.$amapComponent.close(),this.$amapComponent.editor&&this.$amapComponent.editor.close(),this.unwatchFns.forEach(function(t){return t()}),this.unwatchFns=[])},methods:{getHandlerFun:function(t){return this.handlers&&this.handlers[t]?this.handlers[t]:this.$amapComponent["set"+o()(t)]||this.$amapComponent.setOptions},convertProps:function(){var t=this,e={};this.$amap&&(e.map=this.$amap);var n=this.$options.propsData,r=void 0===n?{}:n,o=this.propsRedirect;return Object.keys(r).reduce(function(n,i){var a=i,s=t.convertSignalProp(a,r[a]);return void 0===s?n:(o&&o[i]&&(a=o[a]),e[a]=s,n)},e)},convertSignalProp:function(t,e){var n="",r="";if(this.amapTagName)try{var a=o()(this.amapTagName).replace(/^El/,"");r=(l.default[a]||"").props[t].$type,n=i.a[r]}catch(t){}if(r&&n)return n(e);if(this.converters&&this.converters[t])return this.converters[t].call(this,e);var s=i.a[t];return s?s(e):e},registerEvents:function(){if(this.setEditorEvents&&this.setEditorEvents(),this.$options.propsData){if(this.$options.propsData.events)for(var t in this.events)a.a.addListener(this.$amapComponent,t,this.events[t]);if(this.$options.propsData.onceEvents)for(var e in this.onceEvents)a.a.addListenerOnce(this.$amapComponent,e,this.onceEvents[e])}},unregisterEvents:function(){a.a.clearListeners(this.$amapComponent)},setPropWatchers:function(){var t=this,e=this.propsRedirect,n=this.$options.propsData,r=void 0===n?{}:n;Object.keys(r).forEach(function(n){var r=n;e&&e[n]&&(r=e[n]);var o=t.getHandlerFun(r);if(o||"events"===n){var i=t.$watch(n,function(e){return"events"===n?(t.unregisterEvents(),void t.registerEvents()):o&&o===t.$amapComponent.setOptions?o.call(t.$amapComponent,((i={})[r]=t.convertSignalProp(n,e),i)):void o.call(t.$amapComponent,t.convertSignalProp(n,e));var i});t.unwatchFns.push(i)}})},registerToManager:function(){var t=this.amapManager||this.$parent.amapManager;t&&void 0!==this.vid&&t.setComponent(this.vid,this.$amapComponent)},initProps:function(){var t=this;["editable","visible"].forEach(function(e){if(void 0!==t[e]){var n=t.getHandlerFun(e);n&&n.call(t.$amapComponent,t.convertSignalProp(e,t[e]))}})},printReactiveProp:function(){var t=this;Object.keys(this._props).forEach(function(e){t.$amapComponent["set"+o()(e)]&&console.log(e)})},register:function(){var t=this,e=this.__initComponent&&this.__initComponent(this.convertProps());e&&e.then?e.then(function(e){return t.registerRest(e)}):this.registerRest(e)},registerRest:function(t){!this.$amapComponent&&t&&(this.$amapComponent=t),this.registerEvents(),this.initProps(),this.setPropWatchers(),this.registerToManager(),this.events&&this.events.init&&this.events.init(this.$amapComponent,this.$amap,this.amapManager||this.$parent.amapManager)},$$getInstance:function(){return this.$amapComponent}}}},function(t,e,n){"use strict";e.a=function(t,e,n,r,o,i,a,s){var u=typeof(t=t||{}).default;"object"!==u&&"function"!==u||(t=t.default);var p,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId=i),a?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=p):o&&(p=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),p)if(l.functional){l._injectStyles=p;var c=l.render;l.render=function(t,e){return p.call(e),c(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,p):[p]}return{exports:t,options:l}}},function(t,e,n){var r=n(30)("wks"),o=n(14),i=n(3).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function r(t){return new AMap.Pixel(t[0],t[1])}function a(t){return new AMap.LngLat(t[0],t[1])}function u(t){return new AMap.Bounds(a(t[0]),a(t[1]))}e.e=r,e.c=function(t){return Array.isArray(t)?t:[t.getX(),t.getY()]},e.d=a,e.b=function(t){if(t)return Array.isArray(t)?t.slice():[t.getLng(),t.getLat()]},n.d(e,"a",function(){return o});var o={position:a,offset:r,bounds:u,LngLat:a,Pixel:r,Size:function(t){return new AMap.Size(t[0],t[1])},Bounds:u}},function(t,e,n){var r=n(3),o=n(8),i=n(11),a=n(14)("src"),s=Function.toString,u=(""+s).split("toString");n(16).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(l&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var r=n(9),o=n(20);t.exports=n(5)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(10),o=n(31),i=n(33),a=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n(97),o=n(19),i=n.n(o),a=null,s=function(t){i.a.prototype.$isServer||a||(a||(a=new r.a(t)),a.load())}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(71);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(75),o=n(22);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=r},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(70),o=n(34),i=n(7),a=n(8),s=n(12),u=n(72),l=n(25),p=n(79),c=n(2)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,f,m,A,v){u(n,e,f);var g,b,y,x=function(t){if(!h&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",w="values"==m,E=!1,S=t.prototype,C=S[c]||S["@@iterator"]||m&&S[m],I=C||x(m),M=m?w?x("entries"):I:void 0,B="Array"==e&&S.entries||C;if(B&&(y=p(B.call(new t)))!==Object.prototype&&y.next&&(l(y,_,!0),r||"function"==typeof y[c]||a(y,c,d)),w&&C&&"values"!==C.name&&(E=!0,I=function(){return C.call(this)}),r&&!v||!h&&!E&&S[c]||a(S,c,I),s[e]=I,s[_]=d,m)if(g={values:w?I:x("values"),keys:A?I:x("keys"),entries:M},v)for(b in g)b in S||i(S,b,g[b]);else o(o.P+o.F*(h||E),e,g);return g}},function(t,e,n){var r=n(30)("keys"),o=n(14);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(9).f,o=n(11),i=n(2)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(50);e.a={methods:{setEditorEvents:function(){var t=this;if(this.$amapComponent.editor&&this.events){var e=["addnode","adjust","removenode","end","move"],n={};Object.keys(this.events).forEach(function(r){-1!==e.indexOf(r)&&(n[r]=t.events[r])}),Object.keys(n).forEach(function(e){r.a.addListener(t.$amapComponent.editor,e,n[e])})}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n(65),n(45)),o=n.n(r),i=n(13),a=n(100),s=n(106),u=n(107),l=n(111),p=n(113),c=n(115),h=n(116),d=n(118),f=n(120),m=n(122),A=n(124),v=n(126),g=n(128),b=n(130),y=n(131);n.d(e,"AMapManager",function(){return b.a}),n.d(e,"initAMapApiLoader",function(){return i.a}),n.d(e,"createCustomComponent",function(){return y.a}),n.d(e,"lazyAMapApiLoaderInstance",function(){return i.b});var x=[a.a,s.a,u.a,l.a,p.a,c.a,d.a,h.a,f.a,m.a,A.a,v.a,g.a],_={initAMapApiLoader:i.a,AMapManager:b.a,install:function(t){_.installed||(t.config.optionMergeStrategies.deferredReady=t.config.optionMergeStrategies.created,x.map(function(e){t.component(e.name,e),_[o()(e.name).replace(/^El/,"")]=e}))}};"undefined"!=typeof window&&window.Vue&&function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],t.installed||_.install(e)}(window.Vue),e.default=_},function(t,e,n){var r=n(29),o=n(2)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(3),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){t.exports=!n(5)&&!n(15)(function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(4),o=n(3).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(3),o=n(16),i=n(8),a=n(7),s=n(17),u=function(t,e,n){var l,p,c,h,d=t&u.F,f=t&u.G,m=t&u.S,A=t&u.P,v=t&u.B,g=f?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,b=f?o:o[e]||(o[e]={}),y=b.prototype||(b.prototype={});for(l in f&&(n=e),n)p=!d&&g&&void 0!==g[l],c=(p?g:n)[l],h=v&&p?s(c,r):A&&"function"==typeof c?s(Function.call,c):c,g&&a(g,l,c,t&u.U),b[l]!=c&&i(b,l,h),A&&y[l]!=c&&(y[l]=c)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(10),o=n(73),i=n(38),a=n(24)("IE_PROTO"),s=function(){},u=function(){var t,e=n(32)("iframe"),r=i.length;for(e.style.display="none",n(78).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(74),o=n(38);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(21),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(7);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(17),o=n(86),i=n(87),a=n(10),s=n(37),u=n(88),l={},p={},e=t.exports=function(t,e,n,c,h){var d,f,m,A,v=h?function(){return t}:u(t),g=r(n,c,e?2:1),b=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(i(v)){for(d=s(t.length);d>b;b++)if((A=e?g(a(f=t[b])[0],f[1]):g(t[b]))===l||A===p)return A}else for(m=v.call(t);!(f=m.next()).done;)if((A=o(m,g,f.value,e))===l||A===p)return A};e.BREAK=l,e.RETURN=p},function(t,e,n){var r=n(14)("meta"),o=n(4),i=n(11),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(15)(function(){return u(Object.preventExtensions({}))}),p=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},c=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!u(t))return"F";if(!e)return"E";p(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!u(t))return!0;if(!e)return!1;p(t)}return t[r].w},onFreeze:function(t){return l&&c.NEED&&u(t)&&!i(t,r)&&p(t),t}}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";var r=n(96);t.exports=function(){var t=r.apply(r,arguments);return t.charAt(0).toUpperCase()+t.slice(1)}},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([i]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=p[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(i(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(i(n.parts[o]));p[n.id]={id:n.id,refs:1,parts:a}}}}function o(){var t=document.createElement("style");return t.type="text/css",c.appendChild(t),t}function i(t){var e,n,r=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(r){if(f)return m;r.parentNode.removeChild(r)}if(A){var i=d++;r=h||(h=o()),e=a.bind(null,r,i,!1),n=a.bind(null,r,i,!0)}else r=o(),e=function(t,e){var n=e.css,r=e.media,o=e.sourceMap;if(r&&t.setAttribute("media",r),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}function a(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(103),p={},c=u&&(document.head||document.getElementsByTagName("head")[0]),h=null,d=0,f=!1,m=function(){},A="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){f=n;var o=l(t,e);return r(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i],s=p[a.id];s.refs--,n.push(s)}e?r(o=l(t,e)):o=[];for(var i=0;i<n.length;i++){var s=n[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete p[s.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";var r=n(104),o=n(49),i=n(6),a=n(0),s=n(13),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={name:"el-amap",mixins:[a.a],props:["viewMode","skyColor","rotateEnable","pitch","buildingAnimation","pitchEnable","vid","events","center","zoom","draggEnable","level","zooms","lang","defaultCursor","crs","animateEnable","isHotspot","defaultLayer","rotateEnable","resizeEnable","showIndoorMap","indoorMap","expandZoomRange","dragEnable","zoomEnable","doubleClickZoom","keyboardEnable","jogEnable","scrollWheel","touchZoom","mapStyle","plugin","features","amapManager"],beforeCreate:function(){this._loadPromise=s.b.load()},destroyed:function(){this.$amap&&this.$amap.destroy()},computed:{plugins:function(){var t=[],e=/^AMap./,n=function(t){return e.test(t)?t:"AMap."+t},r=function(t){return t.replace(e,"")};return"string"==typeof this.plugin?t.push({pName:n(this.plugin),sName:r(this.plugin)}):this.plugin instanceof Array&&(t=this.plugin.map(function(t){var e={};return"string"==typeof t?e={pName:n(t),sName:r(t)}:(t.pName=n(t.pName),t.sName=r(t.pName),e=t),e})),t}},data:function(){return{converters:{center:function(t){return Object(i.d)(t)}},handlers:{zoomEnable:function(t){this.setStatus({zoomEnable:t})},dragEnable:function(t){this.setStatus({dragEnable:t})},rotateEnable:function(t){this.setStatus({rotateEnable:t})}}}},mounted:function(){this.createMap()},addEvents:function(){var t=this;this.$amapComponent.on("moveend",function(){var e=t.$amapComponent.getCenter();t.center=[e.getLng(),e.getLat()]})},methods:{addPlugins:function(){var t=this.plugins.filter(function(t){return!AMap[t.sName]});return t&&t.length?this.$amapComponent.plugin(t,this.addMapControls):this.addMapControls()},addMapControls:function(){var t=this;this.plugins&&this.plugins.length&&(this.$plugins=this.$plugins||{},this.plugins.forEach(function(e){var n=t.convertAMapPluginProps(e),r=t.$plugins[n.pName]=new AMap[n.sName](n);if(t.$amapComponent.addControl(r),e.events)for(var o in e.events){var i=e.events[o];"init"===o?i(r):AMap.event.addListener(r,o,i)}}))},convertAMapPluginProps:function(t){if("object"===(void 0===t?"undefined":u(t))&&t.pName){switch(t.pName){case"AMap.ToolBar":case"AMap.Scale":t.offset&&t.offset instanceof Array&&(t.offset=Object(i.e)(t.offset))}return t}return""},setStatus:function(t){this.$amap.setStatus(t)},createMap:function(){var t=this;this._loadPromise.then(function(){var e=t.$el.querySelector(".el-vue-amap"),n=t.vid||Object(r.a)();e.id=n,t.$amap=t.$amapComponent=new AMap.Map(n,t.convertProps()),t.amapManager&&t.amapManager.setMap(t.$amap),t.$emit(o.a.AMAP_READY_EVENT,t.$amap),t.$children.forEach(function(e){e.$emit(o.a.AMAP_READY_EVENT,t.$amap)}),t.plugins&&t.plugins.length&&t.addPlugins()})},$$getCenter:function(){return this.$amap?Object(i.b)(this.$amap.getCenter()):Object(i.b)(this.center)}}}},function(t,e,n){"use strict";e.a={AMAP_READY_EVENT:"AMAP_READY_EVENT"}},function(t,e,n){"use strict";var r=void 0,i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._listener=new Map}return t.prototype.addListener=function(t,e,n,r){if(!AMap.event)throw new Error("please wait for Map API load");var o=AMap.event.addListener(t,e,n,r);this._listener.get(t)||this._listener.set(t,{});var i=this._listener.get(t);i[e]||(i[e]=[]),i[e].push(o)},t.prototype.removeListener=function(t,e,n){if(!AMap.event)throw new Error("please wait for Map API load");if(this._listener.get(t)&&this._listener.get(t)[e]){var r=this._listener.get(t)[e];if(n){var o=r.indexOf(n);AMap.event.removeListener(r[o]),r.splice(o,1)}else r.forEach(function(t){AMap.event.removeListener(t)}),this._listener.get(t)[e]=[]}},t.prototype.addListenerOnce=function(t,e,n,r){return AMap.event.addListenerOnce(t,e,n,r)},t.prototype.trigger=function(t,e,n){return AMap.event.trigger(t,e,n)},t.prototype.clearListeners=function(t){var e=this,n=this._listener.get(t);n&&Object.keys(n).map(function(n){e.removeListener(t,n)})},t}();r=r||new i,e.a=r},function(t,e,n){"use strict";var r=n(0),o=n(6),i=n(52),a=n(19),s=n.n(a),u="el-amap-marker";e.a={name:u,mixins:[r.a],props:["vid","position","offset","icon","content","topWhenClick","bubble","draggable","raiseOnDrag","cursor","visible","zIndex","angle","autoRotation","animation","shadow","title","clickable","shape","extData","label","events","onceEvents","template","vnode","contentRender"],data:function(){var t=this;return{$tagName:u,withSlots:!1,tmpVM:null,propsRedirect:{template:"content",vnode:"content",contentRender:"content"},converters:{shape:function(t){return new AMap.MarkerShape(t)},shadow:function(t){return new AMap.Icon(t)},template:function(e){var n=Object(i.a)(e,t);return this.$customContent=n,n.$el},vnode:function(e){var n="function"==typeof e?e(t):e,r=Object(i.c)(n);return this.$customContent=r,r.$el},contentRender:function(e){var n=Object(i.b)(e,t);return this.$customContent=n,n.$el},label:function(t){var e=t.content,n=void 0===e?"":e,r=t.offset,i=void 0===r?[0,0]:r;return{content:n,offset:Object(o.e)(i)}}},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}}}},created:function(){this.tmpVM=new s.a({data:function(){return{node:""}},render:function(t){var e=this.node;return t("div",{ref:"node"},Array.isArray(e)?e:[e])}}).$mount()},methods:{__initComponent:function(t){this.$slots.default&&this.$slots.default.length&&(t.content=this.tmpVM.$refs.node),this.$amapComponent=new AMap.Marker(t)},$$getExtData:function(){return this.$amapComponent.getExtData()},$$getPosition:function(){return Object(o.b)(this.$amapComponent.getPosition())},$$getOffset:function(){return Object(o.c)(this.$amapComponent.getOffset())}},render:function(t){var e=this.$slots.default||[];return e.length&&(this.tmpVM.node=e),null},destroyed:function(){this.tmpVM.$destroy(),this.$customContent&&this.$customContent.$destroy&&this.$customContent.$destroy()}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return u});var r=n(19),o=n.n(r),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(t,e){var n={},a=o.a.compile(t);["methods","computed","data","filters"].forEach(function(t){n[t]=e.$parent.$parent.$options[t],"data"===t&&"function"==typeof n[t]&&(n[t]=n[t]())});var s=new o.a(i({},n,a));return s.$mount(),s},s=function(t){var e=new o.a({render:function(e){return e("div",t)}});return e.$mount(),e},u=function(t,e){var n=new o.a({render:function(n){return t(n,e)}});return n.$mount(),n}},function(t,e,n){"use strict";var r=n(0),o=n(13);e.a={name:"el-amap-search-box",mixins:[r.a],props:["searchOption","onSearchResult","events","default"],data:function(){return{keyword:this.default||"",tips:[],selectedTip:-1,loaded:!1,adcode:null}},mounted:function(){var t=this;o.b.load().then(function(){t.loaded=!0,t._onSearchResult=t.onSearchResult,t.events&&t.events.init&&t.events.init({autoComplete:t._autoComplete,placeSearch:t._placeSearch})})},computed:{_autoComplete:function(){if(this.loaded)return new AMap.Autocomplete(this.searchOption||{})},_placeSearch:function(){if(this.loaded)return new AMap.PlaceSearch(this.searchOption||{})}},methods:{autoComplete:function(){var t=this;this.keyword&&this._autoComplete&&this._autoComplete.search(this.keyword,function(e,n){"complete"===e&&(t.tips=n.tips)})},search:function(){var t=this;if(this.tips=[],this._placeSearch){var e=null;e=this.searchOption.citylimit&&this.searchOption.city?this.searchOption.city:this.adcode,this._placeSearch.setCity(e||this.searchOption.city),this._placeSearch.search(this.keyword,function(e,n){if(n&&n.poiList&&n.poiList.count){var r=n.poiList.pois,o=r.map(function(t){return t.lat=t.location.lat,t.lng=t.location.lng,t});t._onSearchResult(o)}else if(void 0===n.poiList)throw new Error(n)})}},changeTip:function(t){this.adcode=t.adcode,this.keyword=t.name,this.search()},selectTip:function(t){"up"===t&&this.selectedTip>0?(this.selectedTip-=1,this.keyword=this.tips[this.selectedTip].name,this.adcode=this.tips[this.selectedTip].adcode):"down"===t&&this.selectedTip+1<this.tips.length&&(this.selectedTip+=1,this.keyword=this.tips[this.selectedTip].name,this.adcode=this.tips[this.selectedTip].adcode)}}}},function(t,e,n){"use strict";var r=n(0),o=n(6),i=n(26);e.a={name:"el-amap-circle",mixins:[r.a,i.a],props:["vid","zIndex","center","bubble","radius","strokeColor","strokeOpacity","strokeWeight","editable","fillColor","fillOpacity","strokeStyle","extData","strokeDasharray","events","visible","extData","onceEvents"],data:function(){return{converters:{center:function(t){return Object(o.d)(t)}},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()},editable:function(t){!0===t?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.Circle(t),this.$amapComponent.editor=new AMap.CircleEditor(this.$amap,this.$amapComponent)},$$getCenter:function(){return Object(o.b)(this.$amapComponent.getCenter())}}}},function(t,e,n){"use strict";var r=n(0);e.a={name:"el-amap-ground-image",mixins:[r.a],props:["vid","clickable","opacity","url","bounds","visible","events","onceEvents"],destroyed:function(){this.$amapComponent.setMap(null)},data:function(){return{converters:{},handlers:{visible:function(t){!1===t?this.setMap(null):this.setMap(this.$amap)}}}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.ImageLayer(t)}}}},function(t,e,n){"use strict";var r=n(6),o=n(0),i=n(52),a=n(19),s=n.n(a);e.a={name:"el-amap-info-window",mixins:[o.a],props:["vid","isCustom","autoMove","closeWhenClickMap","content","size","offset","position","showShadow","visible","events","template","vnode","contentRender"],data:function(){var t=this;return{withSlots:!1,tmpVM:null,propsRedirect:{template:"content",vnode:"content",contentRender:"content"},converters:{template:function(e){var n=Object(i.a)(e,t);return this.$customContent=n,n.$el},vnode:function(e){var n="function"==typeof e?e(t):e,r=Object(i.c)(n);return this.$customContent=r,r.$el},contentRender:function(e){var n=Object(i.b)(e,t);return this.$customContent=n,n.$el}},handlers:{visible:function(e){var n=this.getPosition();n&&(!1===e?this.close():this.open(t.$amap,[n.lng,n.lat]))},template:function(t){this.setContent(t)}}}},created:function(){this.tmpVM=new s.a({data:function(){return{node:""}},render:function(t){var e=this.node;return t("div",{ref:"node"},Array.isArray(e)?e:[e])}}).$mount()},destroyed:function(){this.$amapComponent.close(),this.tmpVM.$destroy(),this.$customContent&&this.$customContent.$destroy&&this.$customContent.$destroy()},methods:{__initComponent:function(t){this.$slots.default&&this.$slots.default.length&&(t.content=this.tmpVM.$refs.node),delete t.map,this.$amapComponent=new AMap.InfoWindow(t),!1!==this.visible&&this.$amapComponent.open(this.$amap,Object(r.d)(this.position))}},render:function(t){var e=this.$slots.default||[];return e.length&&(this.tmpVM.node=e),null}}},function(t,e,n){"use strict";var r=n(0),o=n(26),i=n(6);e.a={name:"el-amap-polyline",mixins:[r.a,o.a],props:["vid","zIndex","visible","editable","bubble","geodesic","isOutline","outlineColor","path","strokeColor","strokeOpacity","strokeWeight","strokeStyle","strokeDasharray","events","extData","onceEvents","lineJoin"],data:function(){return{converters:{},handlers:{visible:function(t){!1===t?this.hide():this.show()},editable:function(t){!0===t?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.Polyline(t),this.$amapComponent.editor=new AMap.PolyEditor(this.$amap,this.$amapComponent)},$$getPath:function(){return this.$amapComponent.getPath().map(i.b)},$$getBounds:function(){return this.$amapComponent.getBounds()},$$getExtData:function(){return this.$amapComponent.getExtData()}}}},function(t,e,n){"use strict";var r=n(0),o=n(26),i=n(6);e.a={name:"el-amap-polygon",mixins:[r.a,o.a],props:["vid","zIndex","path","bubble","strokeColor","strokeOpacity","strokeWeight","fillColor","editable","fillOpacity","extData","strokeStyle","visible","strokeDasharray","events","onceEvents","draggable"],data:function(){return{converters:{},handlers:{visible:function(t){!1===t?this.hide():this.show()},zIndex:function(t){this.setOptions({zIndex:t})},editable:function(t){!0===t?this.editor.open():this.editor.close()}}}},methods:{__initComponent:function(){var t=this.convertProps();this.$amapComponent=new AMap.Polygon(t),this.$amapComponent.editor=new AMap.PolyEditor(this.$amap,this.$amapComponent)},$$getPath:function(){return this.$amapComponent.getPath().map(i.b)},$$getExtData:function(){return this.$amapComponent.getExtData()},$$contains:function(t){return Array.isArray(t)&&(t=new AMap.LngLat(t[0],t[1])),this.$amapComponent.getBounds().contains(t)}}}},function(t,e,n){"use strict";var r=n(0),o="el-amap-text";e.a={name:o,mixins:[r.a],props:{vid:{type:String,default:""},text:{type:String,default:""},textAlign:{type:String,default:""},verticalAlign:{type:String,default:""},position:{type:Array,default:function(){return[0,0]},$type:"LngLat"},offset:{type:Array,default:function(){return[0,0]},$type:"Pixel"},topWhenClick:{type:Boolean,default:function(){return!1}},bubble:{type:Boolean,default:function(){return!1}},draggable:{type:Boolean,default:function(){return!1}},raiseOnDrag:{type:Boolean,default:function(){return!1}},cursor:{type:String,default:function(){return""}},visible:{type:Boolean,default:function(){return!0}},zIndex:{type:Number,default:function(){return 100}},angle:{type:Number,default:function(){return 0}},autoRotation:{type:Boolean,default:function(){return!1}},animation:{type:String,default:function(){return"“AMAP_ANIMATION_NONE”"}},shadow:{type:Object,default:function(){return{}},$type:"Icon"},title:{type:String,default:function(){return""}},clickable:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}},amapTagName:o}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.Text(t)}}}},function(t,e,n){"use strict";var r=n(0),o="el-amap-bezier-curve";e.a={name:o,mixins:[r.a],props:{vid:{type:String},path:{type:Array},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number,default:function(){return 1}},strokeStyle:{type:String},strokeDasharray:{type:Array},zIndex:{type:Number},showDir:{type:Boolean},bubble:{type:Boolean},cursor:{type:String},outlineColor:{type:Boolean},isOutline:{type:Boolean},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}},amapTagName:o}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.BezierCurve(t)}}}},function(t,e,n){"use strict";var r=n(0),o="el-amap-circle-marker";e.a={name:o,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},visible:{type:Boolean,default:!0},center:{type:Array,$type:"LngLat"},bubble:{type:Boolean},radius:{type:Number},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},extData:{type:Object},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}},amapTagName:o}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.CircleMarker(t)}}}},function(t,e,n){"use strict";var r=n(0),o="el-amap-ellipse";e.a={name:o,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},center:{type:Array,$type:"LngLat"},radius:{type:Array,default:function(){return[1e3,1e3]}},bubble:{type:Boolean},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},strokeStyle:{type:String},extData:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}},amapTagName:o}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.Ellipse(t)}}}},function(t,e,n){"use strict";var r=n(0),o="el-amap-rectangle";e.a={name:o,mixins:[r.a],props:{vid:{type:String},zIndex:{type:Number},center:{type:Array,$type:"LngLat"},bounds:{type:Array,$type:"Bounds"},bubble:{type:Boolean},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},strokeStyle:{type:String},extData:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},events:{type:Object,default:function(){return{}}}},data:function(){return{converters:{},handlers:{zIndex:function(t){this.setzIndex(t)},visible:function(t){!1===t?this.hide():this.show()}},amapTagName:o}},methods:{__initComponent:function(t){this.$amapComponent=new AMap.Rectangle(t)}}}},function(t,e,n){t.exports=n(27)},function(t,e,n){"use strict";var r=n(66);n.n(r)},function(t,e,n){n(67),n(68),n(81),n(84),t.exports=n(16).Map},function(t,e,n){"use strict";var r=n(28),o={};o[n(2)("toStringTag")]="z",o+""!="[object z]"&&n(7)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){"use strict";var r=n(69)(!0);n(23)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(21),o=n(22);t.exports=function(t){return function(e,n){var i,a,s=String(o(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(35),o=n(20),i=n(25),a={};n(8)(a,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(9),o=n(10),i=n(36);t.exports=n(5)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(11),o=n(18),i=n(76)(!1),a=n(24)("IE_PROTO");t.exports=function(t,e){var n,s=o(t),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(18),o=n(37),i=n(77);t.exports=function(t){return function(e,n,a){var s,u=r(e),l=o(u.length),p=i(a,l);if(t&&n!=n){for(;l>p;)if((s=u[p++])!=s)return!0}else for(;l>p;p++)if((t||p in u)&&u[p]===n)return t||p||0;return!t&&-1}}},function(t,e,n){var r=n(21),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(3).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(11),o=n(80),i=n(24)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(22);t.exports=function(t){return Object(r(t))}},function(t,e,n){for(var r=n(82),o=n(36),i=n(7),a=n(3),s=n(8),u=n(12),l=n(2),p=l("iterator"),c=l("toStringTag"),h=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(d),m=0;m<f.length;m++){var A,v=f[m],g=d[v],b=a[v],y=b&&b.prototype;if(y&&(y[p]||s(y,p,h),y[c]||s(y,c,v),u[v]=h,g))for(A in r)y[A]||i(y,A,r[A],!0)}},function(t,e,n){"use strict";var r=n(83),o=n(39),i=n(12),a=n(18);t.exports=n(23)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(2)("unscopables"),o=Array.prototype;null==o[r]&&n(8)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){"use strict";var r=n(85),o=n(44);t.exports=n(90)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(9).f,o=n(35),i=n(40),a=n(17),s=n(41),u=n(42),l=n(23),p=n(39),c=n(89),h=n(5),d=n(43).fastKey,f=n(44),m=h?"_s":"size",A=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var p=t(function(t,r){s(t,p,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[m]=0,null!=r&&u(r,n,t[l],t)});return i(p.prototype,{clear:function(){for(var t=f(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=f(this,e),r=A(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[m]--}return!!r},forEach:function(t){f(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!A(f(this,e),t)}}),h&&r(p.prototype,"size",{get:function(){return f(this,e)[m]}}),p},def:function(t,e,n){var r,o,i=A(t,e);return i?i.v=n:(t._l=i={i:o=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[m]++,"F"!==o&&(t._i[o]=i)),t},getEntry:A,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=f(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?p(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,p(1))},n?"entries":"values",!n,!0),c(e)}}},function(t,e,n){var r=n(10);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(12),o=n(2)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(28),o=n(2)("iterator"),i=n(12);t.exports=n(16).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){"use strict";var r=n(3),o=n(9),i=n(5),a=n(2)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(3),o=n(34),i=n(7),a=n(40),s=n(43),u=n(42),l=n(41),p=n(4),c=n(15),h=n(91),d=n(25),f=n(92);t.exports=function(t,e,n,m,A,v){var g=r[t],b=g,y=A?"set":"add",x=b&&b.prototype,_={},w=function(t){var e=x[t];i(x,t,"delete"==t?function(t){return!(v&&!p(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!p(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!p(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(v||x.forEach&&!c(function(){(new b).entries().next()}))){var E=new b,S=E[y](v?{}:-0,1)!=E,C=c(function(){E.has(1)}),I=h(function(t){new b(t)}),M=!v&&c(function(){for(var t=new b,e=5;e--;)t[y](e,e);return!t.has(-0)});I||((b=e(function(e,n){l(e,b,t);var r=f(new g,e,b);return null!=n&&u(n,A,r[y],r),r})).prototype=x,x.constructor=b),(C||M)&&(w("delete"),w("has"),A&&w("get")),(M||S)&&w(y),v&&x.clear&&delete x.clear}else b=m.getConstructor(e,t,A,y),a(b.prototype,n),s.NEED=!0;return d(b,t),_[t]=b,o(o.G+o.W+o.F*(b!=g),_),v||m.setStrong(b,t,A),b}},function(t,e,n){var r=n(2)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e,n){var r=n(4),o=n(93).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){var r=n(4),o=n(10),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(17)(Function.call,n(94).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(95),o=n(20),i=n(18),a=n(33),s=n(11),u=n(31),l=Object.getOwnPropertyDescriptor;e.f=n(5)?l:function(t,e){if(t=i(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";t.exports=function(){var t=[].map.call(arguments,function(t){return t.trim()}).filter(function(t){return t.length}).join("-");return t.length?1!==t.length&&/[_.\- ]+/.test(t)?t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()}):t[0]===t[0].toLowerCase()&&t.slice(1)!==t.slice(1).toLowerCase()?t:t.toLowerCase():""}},function(t,e,n){"use strict";var r=n(98),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={key:null,v:"1.4.4",protocol:"https",hostAndPath:"webapi.amap.com/maps",plugin:[],callback:"amapInitComponent"},s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._config=i({},a,e),this._document=document,this._window=window,this._scriptLoaded=!1,this._queueEvents=[r.a]}return t.prototype.load=function(){var t=this;if(this._window.AMap&&this._window.AMap.Map)return this.loadUIAMap();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var e=this._document.createElement("script");e.type="text/javascript",e.async=!0,e.defer=!0,e.src=this._getScriptSrc();var n=this._config.uiVersion?this.loadUIAMap():null;return this._scriptLoadingPromise=new Promise(function(r,o){t._window.amapInitComponent=function(){for(;t._queueEvents.length;)t._queueEvents.pop().apply();if(!n)return r();n.then(function(){window.initAMapUI(),setTimeout(r)})},e.onerror=function(t){return o(t)}}),this._document.head.appendChild(e),this._scriptLoadingPromise},t.prototype.loadUIAMap=function(){var t=this;return!this._config.uiVersion||window.AMapUI?Promise.resolve():new Promise(function(e,n){var r=document.createElement("script"),o=t._config.uiVersion.split("."),i=o[0],a=o[1],s=o[2];if(void 0!==i&&void 0!==a){var u=t._config.protocol+"://webapi.amap.com/ui/"+i+"."+a+"/main-async.js";s&&(u+="?v="+i+"."+a+"."+s),r.src=u,r.type="text/javascript",r.async=!0,t._document.head.appendChild(r),r.onload=function(){setTimeout(e,0)},r.onerror=function(){return n()}}else console.error("amap ui version is not correct, please check! version: ",t._config.uiVersion)})},t.prototype._getScriptSrc=function(){var t=/^AMap./,e=this._config,n=["v","key","plugin","callback"];if(e.plugin&&e.plugin.length>0){e.plugin.push("Autocomplete","PlaceSearch","PolyEditor","CircleEditor");var r=[];e.plugin.forEach(function(e){var n=t.test(e)?e:"AMap."+e,o=n.replace(t,"");r.push(n,o)}),e.plugin=r}var o=Object.keys(e).filter(function(t){return~n.indexOf(t)}).filter(function(t){return null!=e[t]}).filter(function(t){return!Array.isArray(e[t])||Array.isArray(e[t])&&e[t].length>0}).map(function(t){var n=e[t];return Array.isArray(n)?{key:t,value:n.join(",")}:{key:t,value:n}}).map(function(t){return t.key+"="+t.value}).join("&");return this._config.protocol+"://"+this._config.hostAndPath+"?"+o},t}();e.a=s},function(t,e,n){"use strict";e.a=function(){if(AMap.UA.ios&&"https:"!==document.location.protocol){var t=new r.a;navigator.geolocation.getCurrentPosition=function(){return t.getCurrentPosition.apply(t,arguments)},navigator.geolocation.watchPosition=function(){return t.watchPosition.apply(t,arguments)}}};var r=n(99)},function(t,e,n){"use strict";function r(){this._remoteSvrUrl="https://webapi.amap.com/html/geolocate.html",this._callbackList=[],this._seqBase=1,this._frameReady=0,this._watchIdMap={}}r.prototype={_getSeq:function(){return this._seqBase++},_onRrameReady:function(t){if(0===this._frameReady)return this._frameReadyList||(this._frameReadyList=[]),this._frameReadyList.push(t),void this._prepareIframe();t.call(this)},_prepareIframe:function(){if(!this._iframeWin){var t=document.createElement("iframe");t.src=this._remoteSvrUrl+(this._remoteSvrUrl.indexOf("?")>0?"&":"?"),t.width="0px",t.height="0px",t.style.position="absolute",t.style.display="none",t.allow="geolocation";var e=this,n=setTimeout(function(){e._frameReady=!1,e._callbackFrameReadyList()},5e3);t.onload=function(){clearTimeout(n),e._frameReady=!0,e._callbackFrameReadyList(),t.onload=null},document.body.appendChild(t),this._iframeWin=t.contentWindow,window.addEventListener("message",function(t){0===e._remoteSvrUrl.indexOf(t.origin)&&e._handleRemoteMsg(t.data)},!1)}},_callbackFrameReadyList:function(){if(this._frameReadyList){var t=this._frameReadyList;this._frameReadyList=null;for(var e=0,n=t.length;e<n;e++)t[e].call(this,this._frameReady)}},_pickCallback:function(t,e){for(var n=this._callbackList,r=0,o=n.length;r<o;r++){var i=n[r];if(t===i.seq)return e||n.splice(r,1),i}},_handleRemoteMsg:function(t){var e=t.seq,n=this._pickCallback(e,!!t.notify);n?n.cbk.call(null,t.error,t.result):console.warn("Receive remote msg: ",t)},_postMessage:function(t,e,n,r){this._prepareIframe();var o={cmd:t,args:e,seq:r||this._getSeq()};this._callbackList.push({cbk:n,seq:o.seq}),this._onRrameReady(function(){if(!0===this._frameReady)try{this._iframeWin.postMessage(o,"*")}catch(t){this._pickCallback(o.seq),n(t)}else this._pickCallback(o.seq),n({message:"iFrame load failed!"})})},getCurrentPosition:function(t,e,n){this._postMessage("getCurrentPosition",[n],function(n,r){n?e&&e(n):t&&t(r)})},watchPosition:function(t,e,n){var r="wk"+this._getSeq(),o=this._getSeq();this._watchIdMap[r]={stat:0,seq:o};var i=this;return this._postMessage("watchPosition",[n],function(n,o){var a=null;o&&(a=o.id);var s=i._watchIdMap[r];if(s.id=a,s.stat=1,s.callbackList){var u=s.callbackList;s.callbackList=null;for(var l=0,p=u.length;l<p;l++)u[l].call(i,a)}n?e&&e(n):t&&t(o.pos)},o),r},clearWatch:function(t,e){function n(n){o._postMessage("clearWatch",[n],function(n,i){n||(o._pickCallback(r.seq),delete o._watchIdMap[t]),e&&e(n,i)})}if(this._watchIdMap[t]){var r=this._watchIdMap[t],o=this;r.stat<1?(r.callbackList||(r.callbackList=[]),r.callbackList.push(function(t){n(t)})):n(r.id)}else e("Id not exists: "+t)}},e.a=r},function(t,e,n){"use strict";var r=n(48),i=n(105),a=n(1),s=function(t){n(101)},u=Object(a.a)(r.a,i.a,i.b,!1,s,null,null);e.a=u.exports},function(t,e,n){var r=n(102);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),n(47)("d6014b94",r,!0)},function(t,e,n){(t.exports=n(46)(!1)).push([t.i,".el-vue-amap-container,.el-vue-amap-container .el-vue-amap{height:100%}",""])},function(t,e){t.exports=function(t,e){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=i[0],s=i[1],u=i[2],l=i[3],p={id:t+":"+o,css:s,media:u,sourceMap:l};r[a]?r[a].parts.push(p):n.push(r[a]={id:a,parts:[p]})}return n}},function(t,e,n){"use strict";e.a=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-vue-amap-container"},[n("div",{staticClass:"el-vue-amap"}),t._v(" "),t._t("default")],2)},o=[]},function(t,e,n){"use strict";var r=n(51),o=n(1),i=Object(o.a)(r.a,void 0,void 0,!1,null,null,null);e.a=i.exports},function(t,e,n){"use strict";var r=n(53),i=n(110),a=n(1),s=function(t){n(108)},u=Object(a.a)(r.a,i.a,i.b,!1,s,null,null);e.a=u.exports},function(t,e,n){var r=n(109);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals),n(47)("80e271aa",r,!0)},function(t,e,n){(t.exports=n(46)(!1)).push([t.i,".el-vue-search-box-container{position:relative;width:360px;height:45px;background:#fff;box-shadow:0 2px 2px rgba(0,0,0,.15);border-radius:2px 3px 3px 2px;z-index:10}.el-vue-search-box-container .search-box-wrapper{position:absolute;display:flex;align-items:center;left:0;top:0;width:100%;height:100%;box-sizing:border-box}.el-vue-search-box-container .search-box-wrapper input{flex:1;height:20px;line-height:20px;letter-spacing:.5px;font-size:14px;text-indent:10px;box-sizing:border-box;border:none;outline:none}.el-vue-search-box-container .search-box-wrapper .search-btn{width:45px;height:100%;display:flex;align-items:center;justify-content:center;background:transparent;cursor:pointer}.el-vue-search-box-container .search-tips{position:absolute;top:100%;border:1px solid #dbdbdb;background:#fff;overflow:auto}.el-vue-search-box-container .search-tips ul{padding:0;margin:0}.el-vue-search-box-container .search-tips ul li{height:40px;line-height:40px;box-shadow:0 1px 1px rgba(0,0,0,.1);padding:0 10px;cursor:pointer}.el-vue-search-box-container .search-tips ul li.autocomplete-selected{background:#eee}",""])},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-vue-search-box-container",on:{keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;t.selectTip("up")},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;t.selectTip("down")}]}},[n("div",{staticClass:"search-box-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:t.keyword},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.autoComplete]}}),t._v(" "),n("span",{staticClass:"search-btn",on:{click:t.search}},[t._v("搜索")])]),t._v(" "),n("div",{staticClass:"search-tips"},[n("ul",t._l(t.tips,function(e,r){return n("li",{key:r,class:{"autocomplete-selected":r===t.selectedTip},on:{click:function(n){t.changeTip(e)},mouseover:function(e){t.selectedTip=r}}},[t._v(t._s(e.name))])}))])])},o=[]},function(t,e,n){"use strict";var r=n(54),o=n(112),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(55),o=n(114),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(56),o=n(1),i=Object(o.a)(r.a,void 0,void 0,!1,null,null,null);e.a=i.exports},function(t,e,n){"use strict";var r=n(57),o=n(117),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(58),o=n(119),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(59),o=n(121),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(60),o=n(123),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(61),o=n(125),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(62),o=n(127),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=n(63),o=n(129),i=n(1),a=Object(i.a)(r.a,o.a,o.b,!1,null,null,null);e.a=a.exports},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var r=function(){var t=this.$createElement;return(this._self._c||t)("div")},o=[]},function(t,e,n){"use strict";var r=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._componentMap=new Map,this._map=null}return t.prototype.setMap=function(t){this._map=t},t.prototype.getMap=function(){return this._map},t.prototype.setComponent=function(t,e){this._componentMap.set(t,e)},t.prototype.getComponent=function(t){return this._componentMap.get(t)},t.prototype.getChildInstance=function(t){return this.getComponent(t)},t.prototype.removeComponent=function(t){this._componentMap.delete(t)},t}();e.a=r},function(t,e,n){"use strict";var r=n(0),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.a=function(t){var e=t.init,n=t.data,i=void 0===n?function(){return{}}:n,a=t.converters,s=void 0===a?{}:a,u=t.handlers,l=void 0===u?{}:u,p=t.computed,c=t.methods,h=t.name,d=t.render,f=t.contextReady,m=t.template,A=t.mixins,v=void 0===A?[]:A,g=t.props,b=void 0===g?{}:g,y=o({},t,{props:b,data:function(){return o({},i(),{converters:s,handlers:l})},mixins:[r.a].concat(v),computed:p,methods:o({},c,{__initComponent:e,__contextReady:f})});return m||d||(y.render=function(){return null}),y.install=function(t){return t.use(h,y)},y}}]))},96:function(t,e,n){var r=n(196),o={autoSetContainer:!1,appendToBody:!0},l={install:function(t){var e="3."===t.version.slice(0,2)?t.config.globalProperties:t.prototype;e.$clipboardConfig=o,e.$copyText=function(text,t){return new Promise(function(e,n){var l=document.createElement("button"),c=new r(l,{text:function(){return text},action:function(){return"copy"},container:"object"==typeof t?t:document.body});c.on("success",function(t){c.destroy(),e(t)}),c.on("error",function(t){c.destroy(),n(t)}),o.appendToBody&&document.body.appendChild(l),l.click(),o.appendToBody&&document.body.removeChild(l)})},t.directive("clipboard",{bind:function(t,e,n){if("success"===e.arg)t._vClipboard_success=e.value;else if("error"===e.arg)t._vClipboard_error=e.value;else{var l=new r(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"},container:o.autoSetContainer?t:void 0});l.on("success",function(e){var n=t._vClipboard_success;n&&n(e)}),l.on("error",function(e){var n=t._vClipboard_error;n&&n(e)}),t._vClipboard=l}},update:function(t,e){"success"===e.arg?t._vClipboard_success=e.value:"error"===e.arg?t._vClipboard_error=e.value:(t._vClipboard.text=function(){return e.value},t._vClipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){t._vClipboard&&("success"===e.arg?delete t._vClipboard_success:"error"===e.arg?delete t._vClipboard_error:(t._vClipboard.destroy(),delete t._vClipboard))}})},config:o};t.exports=l},97:function(t,e,n){"use strict";var r=["style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","localeMatcher","formatMatcher"];function o(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function l(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString,h="[object Object]";function d(t){return c.call(t)===h}function f(t){return null==t}function m(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=null,r=null;return 1===t.length?l(t[0])||Array.isArray(t[0])?r=t[0]:"string"==typeof t[0]&&(n=t[0]):2===t.length&&("string"==typeof t[0]&&(n=t[0]),(l(t[1])||Array.isArray(t[1]))&&(r=t[1])),{locale:n,params:r}}function A(t){return JSON.parse(JSON.stringify(t))}var v=Object.prototype.hasOwnProperty;function y(t,e){return v.call(t,e)}function x(t){for(var e=arguments,output=Object(t),i=1;i<arguments.length;i++){var source=e[i];if(null!=source){var n=void 0;for(n in source)y(source,n)&&(l(source[n])?output[n]=x(output[n],source[n]):output[n]=source[n])}}return output}function _(a,b){if(a===b)return!0;var t=l(a),e=l(b);if(!t||!e)return!t&&!e&&String(a)===String(b);try{var n=Array.isArray(a),r=Array.isArray(b);if(n&&r)return a.length===b.length&&a.every(function(t,i){return _(t,b[i])});if(n||r)return!1;var o=Object.keys(a),c=Object.keys(b);return o.length===c.length&&o.every(function(t){return _(a[t],b[t])})}catch(t){return!1}}var w,E={beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n)if(t.i18n instanceof ot){if(t.__i18n)try{var e={};t.__i18n.forEach(function(t){e=x(e,JSON.parse(t))}),Object.keys(e).forEach(function(n){t.i18n.mergeLocaleMessage(n,e[n])})}catch(t){0}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(d(t.i18n)){if(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof ot&&(t.i18n.root=this.$root,t.i18n.formatter=this.$root.$i18n.formatter,t.i18n.fallbackLocale=this.$root.$i18n.fallbackLocale,t.i18n.silentTranslationWarn=this.$root.$i18n.silentTranslationWarn,t.i18n.silentFallbackWarn=this.$root.$i18n.silentFallbackWarn,t.i18n.pluralizationRules=this.$root.$i18n.pluralizationRules,t.i18n.preserveDirectiveContent=this.$root.$i18n.preserveDirectiveContent),t.__i18n)try{var n={};t.__i18n.forEach(function(t){n=x(n,JSON.parse(t))}),t.i18n.messages=n}catch(t){0}this._i18n=new ot(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale())}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof ot?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof ot&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n?t.i18n instanceof ot?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):d(t.i18n)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof ot?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof ot&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick(function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher),t._i18n=null})}}},S={name:"i18n",functional:!0,props:{tag:{type:String,default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var n=e.props,data=e.data,r=e.children,o=e.parent.$i18n;if(r=(r||[]).filter(function(t){return t.tag||(t.text=t.text.trim())}),!o)return r;var path=n.path,l=n.locale,c={},h=n.places||{},d=(Array.isArray(h)?h.length:Object.keys(h).length,r.every(function(t){if(t.data&&t.data.attrs){var e=t.data.attrs.place;return void 0!==e&&""!==e}}));return Array.isArray(h)?h.forEach(function(t,i){c[i]=t}):Object.keys(h).forEach(function(t){c[t]=h[t]}),r.forEach(function(t,i){var e=d?""+t.data.attrs.place:""+i;c[e]=t}),t(n.tag,data,o.i(path,l,c))}},C={name:"i18n-n",functional:!0,props:{tag:{type:String,default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var n=e.props,o=e.parent,data=e.data,c=o.$i18n;if(!c)return null;var h=null,d=null;"string"==typeof n.format?h=n.format:l(n.format)&&(n.format.key&&(h=n.format.key),d=Object.keys(n.format).reduce(function(t,e){var o;return r.includes(e)?Object.assign({},t,((o={})[e]=n.format[e],o)):t},null));var f=n.locale||c.locale,m=c._ntp(n.value,f,h,d),A=m.map(function(t,e){var n,slot=data.scopedSlots&&data.scopedSlots[t.type];return slot?slot(((n={})[t.type]=t.value,n.index=e,n.parts=m,n)):t.value});return t(n.tag,{attrs:data.attrs,class:data.class,staticClass:data.staticClass},A)}};function I(t,e,n){T(t,n)&&k(t,e,n)}function M(t,e,n,r){if(T(t,n)){var o=n.context.$i18n;(function(t,e){var n=e.context;return t._locale===n.$i18n.locale})(t,n)&&_(e.value,e.oldValue)&&_(t._localeMessage,o.getLocaleMessage(o.locale))||k(t,e,n)}}function B(t,e,n,r){if(n.context){var l=n.context.$i18n||{};e.modifiers.preserve||l.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}else o("Vue instance does not exists in VNode context")}function T(t,e){var n=e.context;return n?!!n.$i18n||(o("VueI18n instance does not exists in Vue instance"),!1):(o("Vue instance does not exists in VNode context"),!1)}function k(t,e,n){var r,l,c=function(t){var path,e,n,r;"string"==typeof t?path=t:d(t)&&(path=t.path,e=t.locale,n=t.args,r=t.choice);return{path:path,locale:e,args:n,choice:r}}(e.value),path=c.path,h=c.locale,f=c.args,m=c.choice;if(path||h||f)if(path){var A=n.context;t._vt=t.textContent=m?(r=A.$i18n).tc.apply(r,[path,m].concat(R(h,f))):(l=A.$i18n).t.apply(l,[path].concat(R(h,f))),t._locale=A.$i18n.locale,t._localeMessage=A.$i18n.getLocaleMessage(A.$i18n.locale)}else o("`path` is required in v-t directive");else o("value type not supported")}function R(t,e){var n=[];return t&&n.push(t),e&&(Array.isArray(e)||d(e))&&n.push(e),n}function L(t){L.installed=!0;(w=t).version&&Number(w.version.split(".")[0]);(function(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var o=this.$i18n;return o._tc.apply(o,[t,o.locale,o._getMessages(),this,e].concat(n))},t.prototype.$te=function(t,e){var n=this.$i18n;return n._te(t,n.locale,n._getMessages(),e)},t.prototype.$d=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).d.apply(e,[t].concat(n))},t.prototype.$n=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this.$i18n).n.apply(e,[t].concat(n))}})(w),w.mixin(E),w.directive("t",{bind:I,update:M,unbind:B}),w.component(S.name,S),w.component(C.name,C),w.config.optionMergeStrategies.i18n=function(t,e){return void 0===e?t:e}}var D=function(){this._caches=Object.create(null)};D.prototype.interpolate=function(t,e){if(!e)return[t];var n=this._caches[t];return n||(n=function(t){var e=[],n=0,text="";for(;n<t.length;){var r=t[n++];if("{"===r){text&&e.push({type:"text",value:text}),text="";var sub="";for(r=t[n++];void 0!==r&&"}"!==r;)sub+=r,r=t[n++];var o="}"===r,l=P.test(sub)?"list":o&&O.test(sub)?"named":"unknown";e.push({value:sub,type:l})}else"%"===r?"{"!==t[n]&&(text+=r):text+=r}return text&&e.push({type:"text",value:text}),e}(t),this._caches[t]=n),function(t,e){var n=[],r=0,o=Array.isArray(e)?"list":l(e)?"named":"unknown";if("unknown"===o)return n;for(;r<t.length;){var c=t[r];switch(c.type){case"text":n.push(c.value);break;case"list":n.push(e[parseInt(c.value,10)]);break;case"named":"named"===o&&n.push(e[c.value]);break;case"unknown":0}r++}return n}(n,e)};var P=/^(?:\d)+/,O=/^(?:\w)+/;var F=0,N=1,U=2,Q=3,z=0,G=4,H=5,V=6,j=7,W=8,$=[];$[z]={ws:[z],ident:[3,F],"[":[G],eof:[j]},$[1]={ws:[1],".":[2],"[":[G],eof:[j]},$[2]={ws:[2],ident:[3,F],0:[3,F],number:[3,F]},$[3]={ident:[3,F],0:[3,F],number:[3,F],ws:[1,N],".":[2,N],"[":[G,N],eof:[j,N]},$[G]={"'":[H,F],'"':[V,F],"[":[G,U],"]":[1,Q],eof:W,else:[G,F]},$[H]={"'":[G,F],eof:W,else:[H,F]},$[V]={'"':[G,F],eof:W,else:[V,F]};var Y=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function X(t){if(null==t)return"eof";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function K(path){var t,a,e,n=path.trim();return("0"!==path.charAt(0)||!isNaN(path))&&(e=n,Y.test(e)?(a=(t=n).charCodeAt(0))!==t.charCodeAt(t.length-1)||34!==a&&39!==a?t:t.slice(1,-1):"*"+n)}var J=function(){this._cache=Object.create(null)};J.prototype.parsePath=function(path){var t=this._cache[path];return t||(t=function(path){var t,e,n,r,o,l,c,h=[],d=-1,f=z,m=0,A=[];function v(){var t=path[d+1];if(f===H&&"'"===t||f===V&&'"'===t)return d++,n="\\"+t,A[F](),!0}for(A[N]=function(){void 0!==e&&(h.push(e),e=void 0)},A[F]=function(){void 0===e?e=n:e+=n},A[U]=function(){A[F](),m++},A[Q]=function(){if(m>0)m--,f=G,A[F]();else{if(m=0,!1===(e=K(e)))return!1;A[N]()}};null!==f;)if("\\"!==(t=path[++d])||!v()){if(r=X(t),(o=(c=$[f])[r]||c.else||W)===W)return;if(f=o[0],(l=A[o[1]])&&(n=void 0===(n=o[2])?t:n,!1===l()))return;if(f===j)return h}}(path))&&(this._cache[path]=t),t||[]},J.prototype.getPathValue=function(t,path){if(!l(t))return null;var e=this.parsePath(path);if(0===e.length)return null;for(var n=e.length,r=t,i=0;i<n;){var o=r[e[i]];if(void 0===o)return null;r=o,i++}return r};var Z,tt=/<\/?[\w\s="/.':;#-\/]+>/,et=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g,nt=/^@(?:\.([a-z]+))?:/,it=/[()]/g,st={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()}},at=new D,ot=function(t){var e=this;void 0===t&&(t={}),!w&&"undefined"!=typeof window&&window.Vue&&L(window.Vue);var n=t.locale||"en-US",r=t.fallbackLocale||"en-US",o=t.messages||{},l=t.dateTimeFormats||{},c=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||at,this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&!!t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new J,this._dataListeners=[],this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._exist=function(t,n){return!(!t||!n)&&(!f(e._path.getPathValue(t,n))||!!t[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(o).forEach(function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,o[t])}),this._initVM({locale:n,fallbackLocale:r,messages:o,dateTimeFormats:l,numberFormats:c})},lt={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0}};ot.prototype._checkLocaleMessage=function(t,e,n){var r=function(t,e,n,l){if(d(n))Object.keys(n).forEach(function(o){var c=n[o];d(c)?(l.push(o),l.push("."),r(t,e,c,l),l.pop(),l.pop()):(l.push(o),r(t,e,c,l),l.pop())});else if(Array.isArray(n))n.forEach(function(n,o){d(n)?(l.push("["+o+"]"),l.push("."),r(t,e,n,l),l.pop(),l.pop()):(l.push("["+o+"]"),r(t,e,n,l),l.pop())});else if("string"==typeof n){if(tt.test(n)){var c="Detected HTML in message '"+n+"' of keypath '"+l.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?o(c):"error"===t&&function(t,e){"undefined"!=typeof console&&(console.error("[vue-i18n] "+t),e&&console.error(e.stack))}(c)}}};r(e,t,n,[])},ot.prototype._initVM=function(data){var t=w.config.silent;w.config.silent=!0,this._vm=new w({data:data}),w.config.silent=t},ot.prototype.destroyVM=function(){this._vm.$destroy()},ot.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},ot.prototype.unsubscribeDataChanging=function(t){!function(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)t.splice(n,1)}}(this._dataListeners,t)},ot.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",function(){for(var i=t._dataListeners.length;i--;)w.nextTick(function(){t._dataListeners[i]&&t._dataListeners[i].$forceUpdate()})},{deep:!0})},ot.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.$i18n.vm.$watch("locale",function(e){t.$set(t,"locale",e),t.$forceUpdate()},{immediate:!0})},lt.vm.get=function(){return this._vm},lt.messages.get=function(){return A(this._getMessages())},lt.dateTimeFormats.get=function(){return A(this._getDateTimeFormats())},lt.numberFormats.get=function(){return A(this._getNumberFormats())},lt.availableLocales.get=function(){return Object.keys(this.messages).sort()},lt.locale.get=function(){return this._vm.locale},lt.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},lt.fallbackLocale.get=function(){return this._vm.fallbackLocale},lt.fallbackLocale.set=function(t){this._vm.$set(this._vm,"fallbackLocale",t)},lt.missing.get=function(){return this._missing},lt.missing.set=function(t){this._missing=t},lt.formatter.get=function(){return this._formatter},lt.formatter.set=function(t){this._formatter=t},lt.silentTranslationWarn.get=function(){return this._silentTranslationWarn},lt.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},lt.silentFallbackWarn.get=function(){return this._silentFallbackWarn},lt.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},lt.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},lt.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},lt.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},lt.warnHtmlInMessage.set=function(t){var e=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,n!==t&&("warn"===t||"error"===t)){var r=this._getMessages();Object.keys(r).forEach(function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,r[t])})}},ot.prototype._getMessages=function(){return this._vm.messages},ot.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},ot.prototype._getNumberFormats=function(){return this._vm.numberFormats},ot.prototype._warnDefault=function(t,e,n,r,o){if(!f(n))return n;if(this._missing){var l=this._missing.apply(null,[t,e,r,o]);if("string"==typeof l)return l}else 0;return e},ot.prototype._isFallbackRoot=function(t){return!t&&!f(this._root)&&this._fallbackRoot},ot.prototype._isSilentFallback=function(t){return this._silentFallbackWarn&&(this._isFallbackRoot()||t!==this.fallbackLocale)},ot.prototype._interpolate=function(t,e,n,r,o,l,c){if(!e)return null;var h,m=this._path.getPathValue(e,n);if(Array.isArray(m)||d(m))return m;if(f(m)){if(!d(e))return null;if("string"!=typeof(h=e[n]))return null}else{if("string"!=typeof m)return null;h=m}return(h.indexOf("@:")>=0||h.indexOf("@.")>=0)&&(h=this._link(t,e,h,r,"raw",l,c)),this._render(h,o,l,n)},ot.prototype._link=function(t,e,n,r,o,l,c){var h=n,d=h.match(et);for(var f in d)if(d.hasOwnProperty(f)){var link=d[f],m=link.match(nt),A=m[0],v=m[1],y=link.replace(A,"").replace(it,"");if(c.includes(y))return h;c.push(y);var x=this._interpolate(t,e,y,r,"raw"===o?"string":o,"raw"===o?void 0:l,c);if(this._isFallbackRoot(x)){if(!this._root)throw Error("unexpected error");var _=this._root.$i18n;x=_._translate(_._getMessages(),_.locale,_.fallbackLocale,y,r,o,l)}x=this._warnDefault(t,y,x,r,Array.isArray(l)?l:[l]),st.hasOwnProperty(v)&&(x=st[v](x)),c.pop(),h=x?h.replace(link,x):h}return h},ot.prototype._render=function(t,e,n,path){var r=this._formatter.interpolate(t,n,path);return r||(r=at.interpolate(t,n,path)),"string"===e?r.join(""):r},ot.prototype._translate=function(t,e,n,r,o,l,c){var h=this._interpolate(e,t[e],r,o,l,c,[r]);return f(h)&&f(h=this._interpolate(n,t[n],r,o,l,c,[r]))?null:h},ot.prototype._t=function(t,e,n,r){for(var o,l=[],c=arguments.length-4;c-- >0;)l[c]=arguments[c+4];if(!t)return"";var h=m.apply(void 0,l),d=h.locale||e,f=this._translate(n,d,this.fallbackLocale,t,r,"string",h.params);if(this._isFallbackRoot(f)){if(!this._root)throw Error("unexpected error");return(o=this._root).$t.apply(o,[t].concat(l))}return this._warnDefault(d,t,f,r,l)},ot.prototype.t=function(t){for(var e,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(n))},ot.prototype._i=function(t,e,n,r,o){var l=this._translate(n,e,this.fallbackLocale,t,r,"raw",o);if(this._isFallbackRoot(l)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,o)}return this._warnDefault(e,t,l,r,[o])},ot.prototype.i=function(t,e,n){return t?("string"!=typeof e&&(e=this.locale),this._i(t,e,this._getMessages(),null,n)):""},ot.prototype._tc=function(t,e,n,r,o){for(var l,c=[],h=arguments.length-5;h-- >0;)c[h]=arguments[h+5];if(!t)return"";void 0===o&&(o=1);var d={count:o,n:o},f=m.apply(void 0,c);return f.params=Object.assign(d,f.params),c=null===f.locale?[f.params]:[f.locale,f.params],this.fetchChoice((l=this)._t.apply(l,[t,e,n,r].concat(c)),o)},ot.prototype.fetchChoice=function(t,e){if(!t&&"string"!=typeof t)return null;var n=t.split("|");return n[e=this.getChoiceIndex(e,n.length)]?n[e].trim():t},ot.prototype.getChoiceIndex=function(t,e){var n,r;return this.locale in this.pluralizationRules?this.pluralizationRules[this.locale].apply(this,[t,e]):(n=t,r=e,n=Math.abs(n),2===r?n?n>1?1:0:1:n?Math.min(n,2):0)},ot.prototype.tc=function(t,e){for(var n,r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];return(n=this)._tc.apply(n,[t,this.locale,this._getMessages(),null,e].concat(r))},ot.prototype._te=function(t,e,n){for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var l=m.apply(void 0,r).locale||e;return this._exist(n[l],t)},ot.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},ot.prototype.getLocaleMessage=function(t){return A(this._vm.messages[t]||{})},ot.prototype.setLocaleMessage=function(t,e){("warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||(this._checkLocaleMessage(t,this._warnHtmlInMessage,e),"error"!==this._warnHtmlInMessage))&&this._vm.$set(this._vm.messages,t,e)},ot.prototype.mergeLocaleMessage=function(t,e){("warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||(this._checkLocaleMessage(t,this._warnHtmlInMessage,e),"error"!==this._warnHtmlInMessage))&&this._vm.$set(this._vm.messages,t,x(this._vm.messages[t]||{},e))},ot.prototype.getDateTimeFormat=function(t){return A(this._vm.dateTimeFormats[t]||{})},ot.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e)},ot.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,x(this._vm.dateTimeFormats[t]||{},e))},ot.prototype._localizeDateTime=function(t,e,n,r,o){var l=e,c=r[l];if((f(c)||f(c[o]))&&(c=r[l=n]),f(c)||f(c[o]))return null;var h=c[o],d=l+"__"+o,m=this._dateTimeFormatters[d];return m||(m=this._dateTimeFormatters[d]=new Intl.DateTimeFormat(l,h)),m.format(t)},ot.prototype._d=function(t,e,n){if(!n)return new Intl.DateTimeFormat(e).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),n);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,n,e)}return r||""},ot.prototype.d=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.locale,o=null;return 1===e.length?"string"==typeof e[0]?o=e[0]:l(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(o=e[0].key)):2===e.length&&("string"==typeof e[0]&&(o=e[0]),"string"==typeof e[1]&&(r=e[1])),this._d(t,r,o)},ot.prototype.getNumberFormat=function(t){return A(this._vm.numberFormats[t]||{})},ot.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e)},ot.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,x(this._vm.numberFormats[t]||{},e))},ot.prototype._getNumberFormatter=function(t,e,n,r,o,l){var c=e,h=r[c];if((f(h)||f(h[o]))&&(h=r[c=n]),f(h)||f(h[o]))return null;var d,m=h[o];if(l)d=new Intl.NumberFormat(c,Object.assign({},m,l));else{var A=c+"__"+o;(d=this._numberFormatters[A])||(d=this._numberFormatters[A]=new Intl.NumberFormat(c,m))}return d},ot.prototype._n=function(t,e,n,r){if(!ot.availabilities.numberFormat)return"";if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).format(t);var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),l=o&&o.format(t);if(this._isFallbackRoot(l)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:n,locale:e},r))}return l||""},ot.prototype.n=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var o=this.locale,c=null,h=null;return 1===e.length?"string"==typeof e[0]?c=e[0]:l(e[0])&&(e[0].locale&&(o=e[0].locale),e[0].key&&(c=e[0].key),h=Object.keys(e[0]).reduce(function(t,n){var o;return r.includes(n)?Object.assign({},t,((o={})[n]=e[0][n],o)):t},null)):2===e.length&&("string"==typeof e[0]&&(c=e[0]),"string"==typeof e[1]&&(o=e[1])),this._n(t,o,c,h)},ot.prototype._ntp=function(t,e,n,r){if(!ot.availabilities.numberFormat)return[];if(!n)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).formatToParts(t);var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),l=o&&o.formatToParts(t);if(this._isFallbackRoot(l)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,n,r)}return l||[]},Object.defineProperties(ot.prototype,lt),Object.defineProperty(ot,"availabilities",{get:function(){if(!Z){var t="undefined"!=typeof Intl;Z={dateTimeFormat:t&&void 0!==Intl.DateTimeFormat,numberFormat:t&&void 0!==Intl.NumberFormat}}return Z}}),ot.install=L,ot.version="8.11.2",e.a=ot}}]);